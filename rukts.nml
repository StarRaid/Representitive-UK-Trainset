# 1 "rukts.pnml"
disable_item(FEAT_TRAINS);

# 1 "src/CODE/header.pnml" 1
grf{
	grfid: "RUKT" ;
	name: string(STR_GRF_NAME) ;
	desc: string(STR_GRF_DESC) ;
	version: 103 ;
	min_compatible_version: 36 ;
	param 0{
		colour_scheme_1{
			type    : bool ;
			name    : string(STR_PARAM_COLOURSCHEME_NAME) ;
			desc    : string(STR_PARAM_COLOURSCHEME_DESC) ;
			bit     : 1 ;
			def_value : 1 ;
		}
		colour_scheme_2{
			type : bool ;
			name : string(STR_PARAM_WAGONCOLOURS_NAME) ;
			desc : string(STR_PARAM_WAGONCOLOURS_DESC) ;
			bit  : 2 ;
			def_value : 1 ;
		}
		livery_choice{
			type : bool ;
			name : string(STR_PARAM_LIVERY_CHOICE_NAME) ;
			desc : string(STR_PARAM_LIVERY_CHOICE_DESC) ;
			bit  : 3 ;
			def_value : 1 ;
		}
		enable_prototypes{
			type : bool ;
			name : string(STR_PARAM_PROTOTYPES) ;
			desc : string(STR_PARAM_PROTOTYPES_DESC) ;
			bit  : 4 ;
			def_value : 1 ;
		}
	}
	param 1{
		vehicle_selection{
			type      : int ;
			name      : string(STR_PARAM_VEH_SELEC_NAME) ;
			desc      : string(STR_PARAM_VEH_SELEC_DESC) ;
			min_value : 0 ;
			max_value : 3 ;
			def_value : 3 ;
			names     : {
				0 : string(STR_PARAM_VEH_SELEC_CHOICE_ONE  ) ;
				1 : string(STR_PARAM_VEH_SELEC_CHOICE_TWO  ) ;
				2 : string(STR_PARAM_VEH_SELEC_CHOICE_THREE) ;
				3 : string(STR_PARAM_VEH_SELEC_CHOICE_FOUR ) ;
			} ;
		}
	} 
	param 2{
		alt_names{
			type      : bool ;
			name      : string(STR_PARAM_ALT_NAMES_NAME) ;
			desc      : string(STR_PARAM_ALT_NAMES_DESC) ;
			bit		  : 1 ;
			def_value : 1 ;
			}
		}
	param 3{
		purchase_cost{
			type		: int ;
			name		: string(STR_PARAM_PURCHASE_COST) ;
			desc		: string(STR_PARAM_PURCHASE_COST_DESC) ;
			min_value	: 0 ;
			max_value	: 3 ;
			def_value	: 1 ;
			names		: {
				0	: string(STR_PARAM_LOW  ) ;
				1	: string(STR_PARAM_MEDIUM  ) ;
				2	: string(STR_PARAM_HIGH) ;
				3	: string(STR_PARAM_TOOMUCH ) ;
			} ;
		}
	}
	param 4{
		running_cost{
			type		: int ;
			name		: string(STR_PARAM_RUNNING_COST) ;
			desc		: string(STR_PARAM_RUNNING_COST_DESC) ;
			min_value	: 0 ;
			max_value	: 3 ;
			def_value	: 1 ;
			names		: {
				0	: string(STR_PARAM_LOW  ) ;
				1	: string(STR_PARAM_MEDIUM  ) ;
				2	: string(STR_PARAM_HIGH) ;
				3	: string(STR_PARAM_TOOMUCH ) ;
			} ;
		}
	}
	param 5{
		purchase_list_sort{
			type : bool ;
			name : string(STR_PARAM_PURCHASE_LIST_SORT_NAME) ;
			desc : string(STR_PARAM_PURCHASE_LIST_SORT_DESC) ;
			def_value : 1 ;
			}
		}
	
	param 6{
		sound_control{
			type		: int ;
			name		: string(STR_SOUND_CONTROL) ;
			desc		: string(STR_SOUND_CONTROL_DESC) ;
			min_value	: 0 ;
			max_value	: 1 ;
			def_value	: 1 ;
			names		: {
				0	: string(STR_PARAM_DEFAULT) ;
				1	: string(STR_PARAM_CUSTOM ) ;
			} ;
		}
	}
	param 7{
		steam_selection{
			type      : int ;
			name      : string(STR_PARAM_STEAM_SELEC_NAME) ;
			desc      : string(STR_PARAM_STEAM_SELEC_DESC) ;
			min_value : 0 ;
			max_value : 3 ;
			def_value : 3 ;
			names     : {
				0 : string(STR_PARAM_STEAM_SELEC_CHOICE_ONE  ) ;
				1 : string(STR_PARAM_STEAM_SELEC_CHOICE_TWO  ) ;
				2 : string(STR_PARAM_STEAM_SELEC_CHOICE_THREE) ;
				3 : string(STR_PARAM_STEAM_SELEC_CHOICE_FOUR ) ;
			} ;
		}
	} 
}


train_width_32_px  = 1 ;
traininfo_y_offset = 2 ;
// Tractive Effort Coefficient = Actual Tractive effort / Weight / 10

//Modifying base costs

basecost{
	PR_BUILD_VEHICLE_TRAIN    : (param[3] - 2) ;
	PR_BUILD_VEHICLE_WAGON    : 3 ;
	PR_RUNNING_TRAIN_STEAM    : param[4] ;
	PR_RUNNING_TRAIN_DIESEL   : param[4] ;
	PR_RUNNING_TRAIN_ELECTRIC : param[4] ;
}
# 1 "rukts.pnml" 3
# 1 "src/CODE/era_definitions.pnml" 1










	
	














	
	




//https://github.com/OpenTTD/nml/commit/df80da311f8d9f3aeb4cecbf9083d986a44e724c
//https://github.com/OpenTTD/OpenTTD/pull/8554

# 1 "rukts.pnml" 3
# 1 "src/CODE/cargo_table.pnml" 1
cargotable {
//Default cargos
   PASS, MAIL, COAL, FOOD, GOLD, GOOD, GRAI, IORE, LVST, OIL_, PAPR, STEL, VALU, WHEA, WOOD,

//Tropical cargos
   CORE, DIAM, FRUT, MAIZ, RUBR, WATR, 

//ECS
   AORE, BDMT, BRCK, CERA, CERE, CMNT, DYES, FERT, FICR, FISH, GLAS, LIME, OLSD, PETR, PLAS, POTA, RFPR, SAND, SULP, TOUR, VEHI, WDPR, WOOL, 
   
//FIRS
   BEAN, BEER, BOOM, CLAY, CASS, COKE, ENSP, EOIL, FMSP, FRVG, GRVL, IRON, METL, MNO2, MILK, MNSP, NICK, NITR, NUTS, PHOS, PIPE, PORE, QLME, RCYC, SASH, SCMT, SGBT, SGCN, SLAG, VBOD, VPTS, JAVA, COPR, SUGR, ZINC, KAOL, TWOD,
   
   SCRP, //Old scrap metal
   
//Nuclear stuff
	URAN, NWST
}
# 1 "rukts.pnml" 3
# 1 "src/CODE/railtype_table.pnml" 1



railtypetable {
    "RAIL", "RLOW", "RMED", "RHIG", "SAAN", "SABN", "SACN", "SBAN", "SBBN", "SBCN", "SCAN", "SCBN", "SCCN", "SDAN", "SDBN", "DBNN", "DBHN", "_040", "_080", "SEAN", "SFAN", "SGAN", "ELRL", "ELOW", "EMED", "EHIG", "HSTR", "SAAE", "SABE", "SACE", "SBAE", "SBBE", "SBCE", "SCAE", "SCBE", "SCCE", "SDAE", "SDBE", "SEAE", "SEBE", "DBNE", "DBHE", "DBHS", "E040", "E080", "SFAE", "SGAE", "SHAE", "3RDR", "3LOW", "3MED", "SAA3", "SAB3", "SAC3", "SBA3", "SBB3", "SBC3", "SCA3", "SCB3", "SCC3", "SDA3", "SEA3", "SFA3" , "4RDR", "4LOW", "4MED", "SAA4", "SAB4", "SAC4", "SBA4", "SBB4", "SBC4", "SCA4", "SCB4", "SCC4", "MTRO", "MTRC", "MTRS", "MTRU", "MTRT", "SDA4", "3RDC", "CLOW", "CMED", "SAAZ", "SABZ", "SACZ", "SBAZ", "SBBZ", "SBCZ", "SCAZ", "SCBZ", "SCCZ", "SDAZ",  "NGRL", "NLOW", "NHIG", "NAAN", "NRAN", "NBAN", "ELNG", "ENLW", "ENHI", "NAAE", "NRAE", "NBAE", SAAA,
	RAIL: [SAAN, RAIL],
	ELRL: [SAAA, SAAE, ELRL],
	SAA3: [SAA3, "3RDR", ELRL],
	SAAZ: [SAAZ, "3RDC", ELRL],
	SAA4: [SAA4, "4RDR", "3RDR", SAA3, ELRL]
}

/*
railtypetable {
    RAIL: ["RAIL", "RLOW", "RMED", "RHIG", "SAAN", "SABN", "SACN", "SBAN", "SBBN", "SBCN", "SCAN", "SCBN", "SCCN", "SDAN", "SDBN", "DBNN", "DBHN", "_040", "_080", "SEAN", "SFAN", "SGAN"], 
	ELRL: ["ELRL", "ELOW", "EMED", "EHIG", "HSTR", "SAAE", "SABE", "SACE", "SBAE", "SBBE", "SBCE", "SCAE", "SCBE", "SCCE", "SDAE", "SDBE", "SEAE", "SEBE", "DBNE", "DBHE", "DBHS", "E040", "E080", "SFAE", "SGAE", "SHAE"],
	SAA3: ["3RDR", "3LOW", "3MED", "SAA3", "SAB3", "SAC3", "SBA3", "SBB3", "SBC3", "SCA3", "SCB3", "SCC3", "SDA3", "SEA3", "SFA3", "ELRL", "ELOW", "EMED", "EHIG", "HSTR", "SAAE", "SABE", "SACE", "SBAE", "SBBE", "SBCE", "SCAE", "SCBE", "SCCE", "SDAE", "SDBE", "SEAE", "SEBE", "DBNE", "DBHE", "DBHS", "E040", "E080", "SFAE", "SGAE", "SHAE"],
	SAAZ: ["3RDR", "3LOW", "3MED", "SAA3", "SAB3", "SAC3", "SBA3", "SBB3", "SBC3", "SCA3", "SCB3", "SCC3", "SDA3", "SEA3", "SFA3", "ELRL", "ELOW", "EMED", "EHIG", "HSTR", "SAAE", "SABE", "SACE", "SBAE", "SBBE", "SBCE", "SCAE", "SCBE", "SCCE", "SDAE", "SDBE", "SEAE", "SEBE", "DBNE", "DBHE", "DBHS", "E040", "E080", "SFAE", "SGAE", "SHAE"],
	SAA4: ["4RDR", "4LOW", "4MED", "SAA4", "SAB4", "SAC4", "SBA4", "SBB4", "SBC4", "SCA4", "SCB4", "SCC4", "MTRO", "MTRC", "MTRS", "MTRU", "MTRT", "SDA4", "3RDR", "3LOW", "3MED", "SAA3", "SAB3", "SAC3", "SBA3", "SBB3", "SBC3", "SCA3", "SCB3", "SCC3", "SDA3", "SEA3", "SFA3", "ELRL", "ELOW", "EMED", "EHIG", "HSTR", "SAAE", "SABE", "SACE", "SBAE", "SBBE", "SBCE", "SCAE", "SCBE", "SCCE", "SDAE", "SDBE", "SEAE", "SEBE", "DBNE", "DBHE", "DBHS", "E040", "E080", "SFAE", "SGAE", "SHAE"],
	NAAN: ["NGRL", "NLOW", "NHIG", "NAAN", "NRAN", "NBAN"],
}*/
# 1 "rukts.pnml" 3
# 1 "src/CODE/alignments.pnml" 1
//template_x_y where x is length and y is no. views

template template_purchase(x,y){
	[ x, y, 79, 12, -39, -8]
}


template template_dualhead_purchase(x,y){
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x, y, 78, 12, -54, -8]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
}


template base_32bpp(){
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South West
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //West
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North West
}

spriteset(gfx_blank){base_32bpp()}







//Standardised sprite templates




//Length 3



//4 views
template template_3_4(x,y){
	[x+000,  y ,  8 , 12 , -3 , -10, ANIM] //North
	[x+010,  y , 10 , 12 , -3 , -9 , ANIM] //North East
	[x+022,  y , 13 , 13 ,  3 , -9 , ANIM] //East
	[x+037,  y , 10 , 12 ,  5 , -4 , ANIM] //South East
	[x+000,  y ,  8 , 12 , -3 ,	 0 , ANIM] //South     
	[x+010,  y , 10 , 12 , -13, -4 , ANIM] //South West
	[x+022,  y , 13 , 13 , -17, -9 , ANIM] //West      
	[x+037,  y , 10 , 12 , -5 , -9 , ANIM] //North West
}

//8 views
template template_3_8(x,y){
	[x+000,  y ,  8 , 12 , -3 , -10, ANIM] //North
	[x+010,  y , 10 , 12 , -3 , -9 , ANIM] //North East
	[x+022,  y , 13 , 13 ,  3 , -9 , ANIM] //East
	[x+037,  y , 10 , 12 ,  5 , -4 , ANIM] //South East
	[x+049,  y ,  8 , 12 , -3 ,	 0 , ANIM] //South     
	[x+059,  y , 10 , 12 , -13, -4 , ANIM] //South West
	[x+071,  y , 13 , 13 , -17, -9 , ANIM] //West      
	[x+086,  y , 10 , 12 , -5 , -9 , ANIM] //North West
}

//8 views, reversed
template template_3_8_rev(x,y){
	[x+049,  y ,  8 , 12 , -3 , -10, ANIM] //North
	[x+059,  y , 10 , 12 , -3 , -9 , ANIM] //North East
	[x+071,  y , 13 , 13 ,  3 , -9 , ANIM] //East
	[x+086,  y , 10 , 12 ,  5 , -4 , ANIM] //South East
	[x+000,  y ,  8 , 12 , -3 ,	 0 , ANIM] //South     
	[x+010,  y , 10 , 12 , -13, -4 , ANIM] //South West
	[x+022,  y , 13 , 13 , -17, -9 , ANIM] //West      
	[x+037,  y , 10 , 12 , -5 , -9 , ANIM] //North West
}




//Length 4



//4 views
template template_4_4(x,y){
	[x+000,  y ,  8 , 14 , -3 , -10, ANIM] //North
	[x+010,  y , 12 , 13 , -5 , -9 , ANIM] //North East
	[x+024,  y , 17 , 13 , -1 , -9 , ANIM] //East
	[x+043,  y , 12 , 13 ,  3 , -5 , ANIM] //South East
	[x+000,  y ,  8 , 14 , -3 , -2 , ANIM] //South     
	[x+010,  y , 12 , 13 , -13, -5 , ANIM] //South West
	[x+024,  y , 17 , 13 , -17, -9 , ANIM] //West      
	[x+043,  y , 12 , 13 , -5 , -9 , ANIM] //North West
}

//8 views
template template_4_8(x,y){
	[x+000,  y ,  8 , 14 , -3 , -10, ANIM] //North
	[x+010,  y , 12 , 13 , -5 , -9 , ANIM] //North East
	[x+024,  y , 17 , 13 , -1 , -9 , ANIM] //East
	[x+043,  y , 12 , 13 ,  3 , -5 , ANIM] //South East
	[x+057,  y ,  8 , 14 , -3 , -2 , ANIM] //South     
	[x+067,  y , 12 , 13 , -13, -5 , ANIM] //South West
	[x+081,  y , 17 , 13 , -17, -9 , ANIM] //West      
	[x+100,  y , 12 , 13 , -5 , -9 , ANIM] //North West
}

//8 views, reversed
template template_4_8_rev(x,y){
	[x+057,  y ,  8 , 14 , -3 , -10, ANIM] //North
	[x+067,  y , 12 , 13 , -5 , -9 , ANIM] //North East
	[x+081,  y , 17 , 13 , -1 , -9 , ANIM] //East
	[x+100,  y , 12 , 13 ,  3 , -5 , ANIM] //South East
	[x+000,  y ,  8 , 14 , -3 , -2 , ANIM] //South     
	[x+010,  y , 12 , 13 , -13, -5 , ANIM] //South West
	[x+024,  y , 17 , 13 , -17, -9 , ANIM] //West      
	[x+043,  y , 12 , 13 , -5 , -9 , ANIM] //North West
}



//Length 5



//4 views
template template_5_4(x,y){
	[x+000,  y ,  8 , 16 , -3 , -11, ANIM] //North
	[x+010,  y , 14 , 14 , -7 , -9 , ANIM] //North East
	[x+026,  y , 21 , 13 , -5 , -9 , ANIM] //East
	[x+049,  y , 14 , 14 ,  1 , -6 , ANIM] //South East
	[x+000,  y ,  8 , 16 , -3 , -5 , ANIM] //North
	[x+010,  y , 14 , 14 , -13, -6 , ANIM] //North East
	[x+026,  y , 21 , 13 , -17, -9 , ANIM] //East
	[x+049,  y , 14 , 14 , -5 , -9 , ANIM] //South East
}

//8 views
template template_5_8(x,y){
	[x+000,  y ,  8 , 16 , -3 , -11, ANIM] //North
	[x+010,  y , 14 , 14 , -7 , -9 , ANIM] //North East
	[x+026,  y , 21 , 13 , -5 , -9 , ANIM] //East
	[x+049,  y , 14 , 14 ,  1 , -6 , ANIM] //South East
	[x+065,  y ,  8 , 16 , -3 , -5 , ANIM] //South     
	[x+075,  y , 14 , 14 , -13, -6 , ANIM] //South West
	[x+091,  y , 21 , 13 , -17, -9 , ANIM] //West      
	[x+114,  y , 14 , 14 , -5 , -9 , ANIM] //North West
}

//8 views, reversed
template template_5_8_rev(x,y){
	[x+065,  y ,  8 , 16 , -3 , -11, ANIM] //South     
	[x+075,  y , 14 , 14 , -7 , -9 , ANIM] //South West
	[x+091,  y , 21 , 13 , -5 , -9 , ANIM] //West      
	[x+114,  y , 14 , 14 ,  1 , -6 , ANIM] //North West
	[x+000,  y ,  8 , 16 , -3 , -5 , ANIM] //North
	[x+010,  y , 14 , 14 , -13, -6 , ANIM] //North East
	[x+026,  y , 21 , 13 , -17, -9 , ANIM] //East
	[x+049,  y , 14 , 14 , -5 , -9 , ANIM] //South East
}



//Length 6



//4 views
template template_6_4(x,y){
	[x+0  , y, 8 , 18, -3 , -10, ANIM] // NORTH	
	[x+10 , y, 16, 15, -9,  -9 , ANIM] // NORTH EAST
	[x+28 , y, 25, 13, -9,  -9 , ANIM] // EAST
	[x+55 , y, 16, 15, -1,  -7 , ANIM] // SOUTH EAST
	[x+0  , y, 8 , 18, -3 , -6 , ANIM] // SOUTH
	[x+10 , y, 16, 15, -13, -7 , ANIM] // SOUTH WEST
	[x+28 , y, 25, 13, -17, -9 , ANIM] // WEST
	[x+55 , y, 16, 15, -5,  -9 , ANIM] // NORTH WEST
}

//8 views
template template_6_8(x,y){
	[x+0  , y, 8 , 18, -3 , -10, ANIM] // NORTH	  
	[x+10 , y, 16, 15, -9,  -9 , ANIM] // NORTH EAST
	[x+28 , y, 25, 13, -9,  -9 , ANIM] // EAST
	[x+55 , y, 16, 15, -1,  -7 , ANIM] // SOUTH EAST
	[x+73 , y, 8 , 18, -3 , -6 , ANIM] // SOUTH
	[x+83 , y, 16, 15, -13, -7 , ANIM] // SOUTH WEST
	[x+101, y, 25, 13, -17, -9 , ANIM] // WEST
	[x+128, y, 16, 15, -5,  -9 , ANIM] // NORTH WEST
}

//8 views, reversed
template template_6_8_rev(x,y){
	[x+73 , y, 8 , 18, -3 , -10, ANIM] // NORTH	  
	[x+83 , y, 16, 15, -9,  -9 , ANIM] // NORTH EAST
	[x+101, y, 25, 13, -9,  -9 , ANIM] // EAST
	[x+128, y, 16, 15, -1,  -7 , ANIM] // SOUTH EAST
	[x+0  , y, 8 , 18, -3 , -6 , ANIM] // SOUTH
	[x+10 , y, 16, 15, -13, -7 , ANIM] // SOUTH WEST
	[x+28 , y, 25, 13, -17, -9 , ANIM] // WEST
	[x+55 , y, 16, 15, -5,  -9 , ANIM] // NORTH WEST
}



//Length 7

//8 views
template template_7_8_2(x,y){
    [ x    , y, 8 , 20, -3 , -10, ANIM] //N
    [ x+10 , y, 18, 16, -11, -9 , ANIM] //NE
    [ x+30 , y, 29, 13, -13, -9 , ANIM] //E
    [ x+61 , y, 18, 16, -3 , -8 , ANIM] //SE
    [ x+81 , y, 8 , 20, -3 , -8 , ANIM] //S
    [ x+91 , y, 18, 16, -13, -8 , ANIM] //SW
    [ x+111, y, 29, 13, -17, -9 , ANIM] //W
    [ x+142, y, 18, 16, -5 , -9 , ANIM] //NW
}

//8 views, reversed
template template_7_8_rev_2(x,y){
    [ x+81 , y, 8 , 20, -3 , -10, ANIM] //S
    [ x+91 , y, 18, 16, -11, -9 , ANIM] //SW
    [ x+111, y, 29, 13, -13, -9 , ANIM] //W
    [ x+142, y, 18, 16, -3 , -8 , ANIM] //NW
    [ x    , y, 8 , 20, -3 , -8 , ANIM] //N
    [ x+10 , y, 18, 16, -13, -8 , ANIM] //NE
    [ x+30 , y, 29, 13, -17, -9 , ANIM] //E
    [ x+61 , y, 18, 16, -5 , -9 , ANIM] //SE
}

//4 views
template template_7_4_2(x,y){
    [ x    , y, 8 , 20, -3 , -10, ANIM] //N
    [ x+10 , y, 18, 16, -11, -9 , ANIM] //NE
    [ x+30 , y, 29, 13, -13, -9 , ANIM] //E
    [ x+61 , y, 18, 16, -3 , -8 , ANIM] //SE
    [ x    , y, 8 , 20, -3 , -8 , ANIM] //S
    [ x+10 , y, 18, 16, -13, -8 , ANIM] //SW
    [ x+30 , y, 29, 13, -17, -9 , ANIM] //W
    [ x+61 , y, 18, 16, -5 , -9 , ANIM] //NW
}

//Length 8

//8 views
template template_8_8_2(x,y){
	[ x+0	,y, 8	, 23, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 16, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 13, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 16, -5	,-8	, ANIM] //South East
	[ x+89	,y, 8	, 23, -3	,-11, ANIM] //South
	[ x+99	,y, 20	, 16, -13	,-8	, ANIM] //South West
	[ x+121	,y, 33	, 13, -17	,-9	, ANIM] //West
	[ x+156	,y, 20	, 16, -5	,-8	, ANIM] //North West
}

//8 views, reversed
template template_8_8_rev_2(x,y){
	[ x+89	,y, 8	, 23, -3	,-11, ANIM] //South
	[ x+99	,y, 20	, 16, -13	,-8	, ANIM] //South West
	[ x+121	,y, 33	, 13, -17	,-9	, ANIM] //West
	[ x+156	,y, 20	, 16, -5	,-8	, ANIM] //North West
	[ x+0	,y, 8	, 23, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 16, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 13, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 16, -5	,-8	, ANIM] //South East
}

//4 views
template template_8_4_2(x,y){
	[ x+0	,y, 8	, 23, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 16, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 13, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 16, -5	,-8	, ANIM] //South East
}


//Length 8 TALL

//8 views
template template_8_8_tall(x,y){
	[ x+0	,y, 8	, 25, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 18, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 15, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 18, -5	,-8	, ANIM] //South East
	[ x+89	,y, 8	, 25, -3	,-11, ANIM] //South
	[ x+99	,y, 20	, 18, -13	,-8	, ANIM] //South West
	[ x+121	,y, 33	, 15, -17	,-9	, ANIM] //West
	[ x+156	,y, 20	, 18, -5	,-8	, ANIM] //North West
}

//8 views, reversed
template template_8_8_rev_tall(x,y){
	[ x+89	,y, 8	, 25, -3	,-11, ANIM] //South
	[ x+99	,y, 20	, 18, -13	,-8	, ANIM] //South West
	[ x+121	,y, 33	, 15, -17	,-9	, ANIM] //West
	[ x+156	,y, 20	, 18, -5	,-8	, ANIM] //North West
	[ x+0	,y, 8	, 25, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 18, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 15, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 18, -5	,-8	, ANIM] //South East
}

//4 views
template template_8_4_tall(x,y){
	[ x+0	,y, 8	, 25, -3	,-11, ANIM] //North
	[ x+10	,y, 20	, 18, -13	,-8	, ANIM] //North East
	[ x+32	,y, 33	, 15, -17	,-9	, ANIM] //East
	[ x+67	,y, 20	, 18, -5	,-8	, ANIM] //South East
}








//Special case templates (generally outdated)


template template_purchase_short(x,y){
	[ x, y, 55, 12, -39, -8]
}


template template_8_8(x,y){
	[x+0	,y	,8	,23	,-3		,-11] //North
	[x+10	,y	,20	,16	,-13	,-8] //North East
	[x+32	,y	,33	,13	,-17	,-9] //East
	[x+67	,y	,20	,16	,-5		,-8] //South East
	[x+89	,y	,8	,23	,-3		,-11] //South
	[x+99	,y	,20	,16	,-13	,-8] //South West
	[x+121	,y	,33	,13	,-17	,-9] //West
	[x+156	,y	,20	,16	,-5		,-8] //North West
}

template template_8_8_rev(x,y){
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}

template template_8_4(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}



template template_7_8(x,y){
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
    [ x+82, y, 8, 22, -3, -11]
    [ x+92, y, 19, 17, -11, -10]
    [ x+113, y, 28, 12, -14, -8]
    [ x+143, y, 19, 17, -4, -9]
}

template template_7_8_rev(x,y){
    [ x+82, y, 8, 22, -3, -11]
    [ x+92, y, 19, 17, -11, -10]
    [ x+113, y, 28, 12, -14, -8]
    [ x+143, y, 19, 17, -4, -9]
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
}

template template_7_4(x,y){
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
}





template template_8_8_networker(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
    [ x+90, y, 8, 24, -3, -12]
    [ x+100, y, 21, 18, -13, -10]
    [ x+123, y, 32, 12, -16, -8]
    [ x+157, y, 21, 18, -6, -10]
}

template template_8_8_networker_reverse(x,y){
    [ x+90, y, 8, 24, -3, -12]
    [ x+100, y, 21, 18, -13, -10]
    [ x+123, y, 32, 12, -16, -8]
    [ x+157, y, 21, 18, -6, -10]
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
}

template template_8_4_networker(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
}




template template_uklight(x,y){
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-14,-8] //North East
	[x+32,y,32,13,-16,-9] //East
	[x+66,y,20,16,-4,-8] //South East
	[x+88,y,8,24,-3,-11] //South
	[x+98,y,20,16,-14,-8] //South West
	[x+120,y,32,13,-16,-9] //West
	[x+154,y,20,16,-4,-8] //North West
}

template template_uklight_reverse(x,y){
	[x+88,y,8,24,-3,-11] //South
	[x+98,y,20,16,-14,-8] //South West
	[x+120,y,32,13,-16,-9] //West
	[x+154,y,20,16,-4,-8] //North West
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-14,-8] //North East
	[x+32,y,32,13,-16,-9] //East
	[x+66,y,20,16,-4,-8] //South East
}



template template_narrow_4_4(x, y){
	[x+000, y  ,  8 , 14 , -3 , -12] //North
	[x+010, y  , 12 , 13 , -5 , -10] //North East
	[x+024, y  , 17 , 13 , -1 , -10] //East
	[x+043, y  , 12 , 13 ,  3 , -5 ] //South East
	[x+000, y  ,  8 , 14 , -3 , -4 ] //South
	[x+010, y  , 12 , 13 , -13, -6 ] //South West
	[x+024, y  , 17 , 13 , -17, -10] //West
	[x+043, y  , 12 , 13 , -5 , -10] //North West
}

template template_narrow_4_8(x, y){
	[x+000, y  ,  8 , 14 , -3 , -12] //North
	[x+010, y  , 12 , 13 , -5 , -10] //North East
	[x+024, y  , 17 , 13 , -1 , -10] //East
	[x+043, y  , 12 , 13 ,  3 , -5 ] //South East
	[x+057, y  ,  8 , 14 , -3 , -4 ] //South
	[x+067, y  , 12 , 13 , -13, -6 ] //South West
	[x+081, y  , 17 , 13 , -17, -10] //West
	[x+100, y  , 12 , 13 , -5 , -10] //North West
}

template template_narrow_6_4(x, y){
	[x+000, y  ,  8 , 18 , -3 , -12] //North
	[x+010, y  , 16 , 15 , -9 , -10] //North East
	[x+028, y  , 25 , 13 , -9 , -10] //East
	[x+055, y  , 16 , 15 , -1 , -8 ] //South East
	[x+000, y  ,  8 , 18 , -3 , -8 ] //South
	[x+010, y  , 16 , 15 , -13, -8 ] //South West
	[x+028, y  , 25 , 13 , -17, -10] //West
	[x+055, y  , 16 , 15 , -5 , -10] //North West
}

template template_narrow_6_8(x, y){
	[x+000, y  ,  8 , 18 , -3 , -12] //North
	[x+010, y  , 16 , 15 , -9 , -10] //North East
	[x+028, y  , 25 , 13 , -9 , -10] //East
	[x+055, y  , 16 , 15 , -1 , -8 ] //South East
	[x+073, y  ,  8 , 18 , -3 , -8 ] //South
	[x+083, y  , 16 , 15 , -13, -8 ] //South West
	[x+101, y  , 25 , 13 , -17, -10] //West
	[x+128, y  , 16 , 15 , -5 , -10] //North West
}





/*

EE Type 1 reversal behaviour

Replace XXXX with the vehicle name
Replace YYYY with the livery name

refer to sw_XXXX_gfx_pos_check_a_YYYY when calling the specific livery in general

switch(FEAT_TRAINS, PARENT, sw_XXXX_gfx_rev_check_a_YYYY,	vehicle_is_reversed){ 1 : XXXX_gfx_YYYY ; XXXX_gfx_YYYY_rev ; }
switch(FEAT_TRAINS, PARENT, sw_XXXX_gfx_rev_check_b_YYYY,	vehicle_is_reversed){ 1 : XXXX_gfx_YYYY_rev ; XXXX_gfx_YYYY ; }

switch(FEAT_TRAINS, SELF, sw_XXXX_gfx_pos_check_m_YYYY,		position_in_vehid_chain){ 0 : XXXX_gfx_YYYY_rev ; sw_XXXX_gfx_rev_check_b_YYYY ;}
switch(FEAT_TRAINS, SELF, sw_XXXX_gfx_pos_check_b_YYYY,		position_in_vehid_chain_from_end){ 0 : XXXX_gfx_YYYY ; sw_XXXX_gfx_pos_check_m_YYYY ;}
switch(FEAT_TRAINS, SELF, sw_XXXX_gfx_pos_check_f_YYYY,		num_vehs_in_vehid_chain ){ 1 : sw_XXXX_gfx_rev_check_a_YYYY ; XXXX_gfx_YYYY_rev ;}
switch(FEAT_TRAINS, SELF, sw_XXXX_gfx_pos_check_a_YYYY,		position_in_consist){ 0 : sw_XXXX_gfx_pos_check_f_YYYY ; sw_XXXX_gfx_pos_check_b_YYYY ;}


*/

# 1 "rukts.pnml" 3
# 1 "src/CODE/visual_effects.pnml" 1
switch (FEAT_TRAINS, SELF, vfx_ohle, [STORE_TEMP(create_effect(EFFECT_SPRITE_ELECTRIC, 0, 0, 10), 0x100)]) {
    return 1;
}

switch (FEAT_TRAINS, SELF, vfx_3rd, [STORE_TEMP(create_effect(EFFECT_SPRITE_ELECTRIC, 0, 0, -7), 0x100)]) {
    return 1;
}

switch (FEAT_TRAINS, SELF, vfx_diesel_default, [STORE_TEMP(create_effect(EFFECT_SPRITE_DIESEL, 0, 0, 10), 0x100)]) {
    return 1;
}

switch(FEAT_TRAINS, SELF, vfx_dual_voltage, tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR")){
	1: vfx_3rd;
	vfx_ohle;
}

switch(FEAT_TRAINS, SELF, vfx_3rd_only, tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR")){
	1: vfx_3rd;
	return 0;
}

switch(FEAT_TRAINS, SELF, vfx_ohle_only, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
	1: vfx_ohle;
	return 0;
}

switch(FEAT_TRAINS, SELF, vfx_steam, [STORE_TEMP(create_effect(EFFECT_SPRITE_STEAM, 0, 0, 10), 0x100)]) {
    return 1;
}
# 1 "rukts.pnml" 3
# 1 "src/CODE/sound_effects.pnml" 1
//Sound deciding switches

/*

Rule of thumb: 4.5 m/s = 10 Mph = 16 Km/h
Game will take these numbers in m/s
To work out speed do 4.5 * (Speed in Mph / 10)

	Note: Networker sounds commented out

*/


/* switch(FEAT_TRAINS, PARENT, sw_sfx_electric_old_running, current_speed){
	0..17  : sound("sfx/86_coast_2.wav") ;
	18..40 : sound("sfx/86_coast_1.wav") ;
	sound("sfx/86_coast_3.wav") ;
} */


switch(FEAT_TRAINS, PARENT, sw_sfx_electric_modern_running, current_speed){
	0..27 : sound("sfx/modern_electric_slow.wav") ;
	sound("sfx/modern_electric_fast.wav") ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_flange){
	2 : sound("sfx/flange_1.wav") ;
	1 : sound("sfx/flange_2.wav") ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_desiro_low_speed){
	2 : sound("sfx/desiro_run_low.wav", 60) ;
	1 : sw_sfx_random_flange;
}

switch(FEAT_TRAINS, PARENT, sw_sfx_desiro_running, current_speed){
	0..16 : sw_sfx_random_desiro_low_speed ;
	17..32 : sound("sfx/desiro_run_medium.wav", 60) ;
	sound("sfx/desiro_run_high.wav", 60) ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_gec_low_speed){
	3 : sound("sfx/GEC_slow.wav", 70) ;
	1 : sw_sfx_random_flange;
}

switch(FEAT_TRAINS, PARENT, sw_sfx_gec_run, current_speed){
	0..5 : sw_sfx_random_gec_low_speed ;
	6..16 : sound("sfx/GEC_slow.wav", 70) ;
	17..26 : sound("sfx/GEC_med.wav", 70) ;
	sound("sfx/GEC_fast.wav", 70) ;
}


switch(FEAT_TRAINS, PARENT, sw_ee_coast_decider, current_speed){
	0..18 : sound("sfx/ee_2_coast_low.wav") ;
	sound("sfx/ee_2_coast_high.wav", 70) ;
}

/*
 switch(FEAT_TRAINS, PARENT, sw_sfx_modern_diesel_running, current_speed){
	0..18 : sound("sfx/modern_diesel_coast_low.wav") ;
	
} 



switch(FEAT_TRAINS, PARENT, sw_sfx_electric_networker_running, current_speed){
	0..13 : sound("sfx/465_coast_1.wav") ;
	14..23 : sound("sfx/465_coast_2.wav") ;
	sound("sfx/465_coast_3.wav") ;
}*/


//Sound effect switches (for fully custom sounds. All these switches are suffixed with _full, 28/12/19)

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_old_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/86_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_8.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_8.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_modern_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_electric_modern_running ;
	SOUND_EVENT_START         : sound("sfx/horn_4.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_4.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_modern_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/modern_diesel_idle.wav") ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/modern_diesel_run.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/modern_diesel_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_4.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_4.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/ee_idle.wav") ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/ee_run.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/ee_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee_2_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/ee_2_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/ee_2_run.wav",70) ;
	SOUND_EVENT_RUNNING_16    : sw_ee_coast_decider ;
	SOUND_EVENT_START         : sound("sfx/horn_7.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_7.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_deltic_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED			: sound("sfx/deltic_idle.wav") ;
	SOUND_EVENT_RUNNING_16		: sound("sfx/deltic_coast.wav") ;
	SOUND_EVENT_VISUAL_EFFECT	: sound("sfx/deltic_run.wav") ;
	SOUND_EVENT_START			: sound("sfx/horn_7.wav") ;
	SOUND_EVENT_TUNNEL			: sound("sfx/horn_7.wav") ;
	SOUND_EVENT_BREAKDOWN		: SOUND_BREAKDOWN_TRAIN_SHIP ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_small_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/thump_idle.wav",60) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/thump_run.wav",60) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/thump_coast.wav",60) ;
	SOUND_EVENT_START         : sound("sfx/horn_8.wav",) ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_8.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_heritage_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/46_idle.wav",80) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/46_run.wav",80) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/46_coast.wav",80) ;
	SOUND_EVENT_START         : sound("sfx/horn_3.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_3.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_emd_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/emd_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/emd_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/emd_coast.wav",90) ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_hst_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/hst_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/hst_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/hst_coast.wav",90) ;
	SOUND_EVENT_START         : sound("sfx/horn_3.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_3.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_desiro_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_desiro_running ;
	SOUND_EVENT_START         : sound("sfx/horn_6.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_6.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_gec_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_gec_run ;
	SOUND_EVENT_START         : sound("sfx/horn_1.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_tube_gec_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_gec_run ;
	SOUND_EVENT_START         : sound("sfx/thump_whistle.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/thump_whistle.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_tube_modern_full, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_electric_modern_running ;
	SOUND_EVENT_START         : sound("sfx/thump_whistle.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/thump_whistle.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_one_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/dmu_idle.wav",70) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/dmu_run.wav", 80) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/dmu_coast.wav", 80) ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_two_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/voyager_idle.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/voyager_run.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

/*
switch(FEAT_TRAINS, SELF, sw_sfx_electric_networker_full, getbits(extra_callback_info1, 0, 8)){
 //SOUND_EVENT_STOPPED       : sound("sfx/465_idle.wav") ;
 SOUND_EVENT_VISUAL_EFFECT : sound("sfx/465_shoe_clatter.wav") ;
 SOUND_EVENT_RUNNING_16 : sw_sfx_electric_networker_running ;
 SOUND_EVENT_START : sound("sfx/465_depart.wav") ;
 SOUND_EVENT_BREAKDOWN : SOUND_BREAKDOWN_TRAIN_SHIP ;
 SOUND_EVENT_TUNNEL : sound("sfx/horn_1.wav") ;
}*/

switch(FEAT_TRAINS, SELF, sw_sfx_steam_full, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_START : sound("sfx/steam_whistle.wav", 70) ;
	SOUND_EVENT_TUNNEL : sound("sfx/steam_whistle.wav", 70) ;
	SOUND_EVENT_RUNNING_16 : sound("sfx/steam_run.wav", 80) ;
}




//RUKTS Extension sound check


switch(FEAT_TRAINS, SELF, sw_sfx_extension_08, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : import_sound("RTNA", 2) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/thump_run.wav",60) ;
	SOUND_EVENT_RUNNING_16    : import_sound("RTNA", 3) ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_08_check_full, (grf_current_status("RTNA")) | (grf_future_status("RTNA"))){ 1 : sw_sfx_extension_08 ; sw_sfx_diesel_loco_small_full; }


switch(FEAT_TRAINS, SELF, sw_sfx_extension_25, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : import_sound("RTNA", 2) ;
	SOUND_EVENT_VISUAL_EFFECT : import_sound("RTNA", 6) ;
	SOUND_EVENT_RUNNING_16    : import_sound("RTNA", 5) ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_25_check_full, (grf_current_status("RTNA")) | (grf_future_status("RTNA"))){ 1 : sw_sfx_extension_25 ; sw_sfx_diesel_loco_ee_2_full; }



switch(FEAT_TRAINS, SELF, sw_sfx_extension_40, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : import_sound("RTNA", 0) ;
	SOUND_EVENT_VISUAL_EFFECT : import_sound("RTNA", 1) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/ee_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_40_check_full, (grf_current_status("RTNA")) | (grf_future_status("RTNA"))){ 1 : sw_sfx_extension_40 ; sw_sfx_diesel_loco_ee_full; }



switch(FEAT_TRAINS, SELF, sw_sfx_extension_60, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : import_sound("RTNA", 7) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/46_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : import_sound("RTNA", 8) ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}


switch(FEAT_TRAINS, SELF, sw_sfx_extension_66, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/66_idle.wav") ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/modern_diesel_run.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/66_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_5.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_5.wav") ;
}


switch(FEAT_TRAINS, SELF, sw_sfx_extension_60_check_full, (grf_current_status("RTNA")) | (grf_future_status("RTNA"))){ 1 : sw_sfx_extension_60 ; sw_sfx_diesel_loco_heritage_full; }

//Decide sound effects based on parameter settings, SOUND_DEPARTURE_TRAIN, 

switch(FEAT_TRAINS, SELF, sw_sfx_0, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : CB_RESULT_NO_SOUND;
	SOUND_EVENT_VISUAL_EFFECT : CB_RESULT_NO_SOUND;
	SOUND_EVENT_RUNNING_16    : CB_RESULT_NO_SOUND;
	SOUND_EVENT_START         : SOUND_DEPARTURE_TRAIN;
	SOUND_EVENT_BREAKDOWN     : SOUND_BREAKDOWN_TRAIN_SHIP ;
	SOUND_EVENT_TUNNEL        : CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_old, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_electric_loco_old_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_modern, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_electric_loco_modern_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_modern, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_modern_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_ee_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee_2, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_ee_2_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_deltic, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_deltic_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_small, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_small_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_heritage, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_heritage_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_emd, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_diesel_loco_emd_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_hst, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_hst_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_desiro, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_emu_desiro_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_gec, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_emu_gec_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_tube_gec, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_tube_gec_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_tube_modern, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_tube_modern_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_one, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_dmu_one_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_two, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_dmu_two_full;
}

/*switch(FEAT_TRAINS, SELF, sw_sfx_electric_networker, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_electric_networker_full;
}*/

switch(FEAT_TRAINS, SELF, sw_sfx_steam, sound_control){
	0 : return 0;
	1 : sw_sfx_steam_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_08_check, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_extension_08_check_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_25_check, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_extension_25_check_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_40_check, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_extension_40_check_full;
}

switch(FEAT_TRAINS, SELF, sw_sfx_extension_60_check, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_extension_60_check_full;
}


switch(FEAT_TRAINS, SELF, sw_sfx_extension_66_check, sound_control){
	0 : sw_sfx_0;
	1 : sw_sfx_extension_66;
}

# 1 "rukts.pnml" 3
# 1 "src/CODE/coupling_restrictions.pnml" 1
switch(FEAT_TRAINS, SELF, sw_all_but_MU90, vehicle_type_id) {
    item_MU90: return string(STR_MU90_NO_COUPLE);
    return CB_RESULT_ATTACH_ALLOW;
}
# 1 "rukts.pnml" 3

//#include "src/TRACKS/narrow_gauge.pnml"

# 1 "src/WAGON/victorian.pnml" 1

//Stroudley 6-wheel


spriteset(gfx_stroudley				, "gfx/WAGON/coaches.png"	){	template_5_4		(0	,0	)}
spriteset(gfx_stroudley_purchase	, "gfx/WAGON/coaches.png"	){	template_purchase	(130,0	)}


switch(FEAT_TRAINS, SELF, sw_stroudley_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_LBSCR) ;
	 1 : string(STR_LIVERY_SOUTHERN) ;
	 2 : string(STR_LIVERY_LMS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_stroudley_refit_text_check, livery_choice){
	1 : sw_stroudley_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_stroudley_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_stroudley_colours_manual_check, livery_choice){
	1 : sw_stroudley_colours_manual ;
	palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_stroudley_colours_2cc_check, colour_scheme_1){
	1 : sw_stroudley_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Item

item (FEAT_TRAINS, item_stroudley, 9070){
	property{
		name						   : string(STR_NAME_STROUDLEY) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 5 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1860, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 45 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 20 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 20 ;
		loading_speed                  : 10 ;
		track_type                     : RAIL ;
		speed                          : 50 mph ;
		power                          : 0 hp ;
		weight                         : 20 ton ;
	}
	graphics{
		default                 : gfx_stroudley ;
		purchase                : gfx_stroudley_purchase ;
		purchase_colour_mapping : palette_2cc(company_colour1, company_colour2) ;
		cargo_subtype_text      : sw_stroudley_refit_text_check ;
		colour_mapping          : sw_stroudley_colours_2cc_check ;
	}
}



//Victorian Suburban



spriteset(gfx_vicsub				, "gfx/WAGON/coaches.png"	){	template_8_4		(0	,25	)}
spriteset(gfx_vicsub_brake			, "gfx/WAGON/coaches.png"	){	template_8_8		(0	,50	)}
spriteset(gfx_vicsub_brake_rev		, "gfx/WAGON/coaches.png"	){	template_8_8_rev	(0	,50	)}
spriteset(gfx_vicsub_purchase		, "gfx/WAGON/coaches.png"	){	template_purchase	(130,25	)}

switch(FEAT_TRAINS, SELF, sw_vicsub_gfx_brake_check, position_in_vehid_chain){
	0 : gfx_vicsub_brake_rev ;
	gfx_vicsub ;
}

switch(FEAT_TRAINS, SELF, sw_vicsub_gfx_brake_check_rev, position_in_vehid_chain_from_end){
	0 : gfx_vicsub_brake ;
	gfx_vicsub ;
}

switch(FEAT_TRAINS, PARENT, sw_vicsub_gfx_rev_check, vehicle_is_reversed){
	1 : sw_vicsub_gfx_brake_check ;
	sw_vicsub_gfx_brake_check_rev ;
}


switch(FEAT_TRAINS, SELF, sw_vicsub_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_LBSCR) ;
	 1 : string(STR_LIVERY_SOUTHERN) ;
	 2 : string(STR_LIVERY_LMS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_vicsub_refit_text_check, livery_choice){
	1 : sw_vicsub_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_vicsub_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_vicsub_colours_manual_check, livery_choice){
	1 : sw_vicsub_colours_manual ;
	palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_vicsub_colours_2cc_check, colour_scheme_1){
	1 : sw_vicsub_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Item

item (FEAT_TRAINS, item_vicsub, 9071){
	property{
		name						   : string(STR_NAME_VICTORIAN) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1880, 1, 1) ;
		model_life                     : 70 ;
		vehicle_life                   : 50 ;
		cost_factor                    : 30 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 24 ;
		track_type                     : RAIL ;
		speed                          : 65 mph ;
		power                          : 0 hp ;
		weight                         : 30 ton ;
	}
	graphics{
		default                 : sw_vicsub_gfx_rev_check ;
		purchase                : gfx_vicsub_purchase ;
		purchase_colour_mapping : palette_2cc(company_colour1, company_colour2) ;
		cargo_subtype_text      : sw_vicsub_refit_text_check ;
		colour_mapping          : sw_vicsub_colours_2cc_check ;
	}
}










# 1 "rukts.pnml" 3
# 1 "src/WAGON/Mk1.pnml" 1


//Mark 1


//Spritesets

spriteset(gfx_mk1_base,		"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	0	)}
spriteset(gfx_mk1_lined,	"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	25	)}
spriteset(gfx_mk1_brblue,	"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	50	)}
spriteset(gfx_mk1_nse,		"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	75	)}
spriteset(gfx_mk1_ic,		"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	100	)}
spriteset(gfx_mk1_rr,		"gfx/WAGON/mark_1.png")	{template_8_4_2(0,	125	)}

//Purchase sprites

spriteset(gfx_mk1_base_purchase,	"gfx/WAGON/mark_1.png")	{template_purchase(279,	0)}
spriteset(gfx_mk1_lined_purchase,	"gfx/WAGON/mark_1.png")	{template_purchase(279,	15)}
spriteset(gfx_mk1_brblue_purchase,	"gfx/WAGON/mark_1.png")	{template_purchase(279,	30)}
spriteset(gfx_mk1_nse_purchase,		"gfx/WAGON/mark_1.png")	{template_purchase(279,	45)}




//NOTE: THESE ARE DEFINED HERE FOR THE CLASS 121 DTS

//==================================================
spriteset(spriteset_115_green_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_115_brb_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_115_ref_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_115_brg_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_115_rr_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_115_nse_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 325)}
spriteset(spriteset_115_green_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(0, 50)}
spriteset(spriteset_115_brb_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(179, 50)}
spriteset(spriteset_115_ref_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(0, 200)}
spriteset(spriteset_115_brg_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(179, 200)}
spriteset(spriteset_115_rr_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(0, 325)}
spriteset(spriteset_115_nse_dr, "gfx/DMU/dmmu.png") {template_8_8_networker_reverse(179, 325)}
spriteset(spriteset_dmmu_early_tlr, "gfx/FIXTURES/dmmu.png") {template_8_8_networker_reverse(0, 25)}
spriteset(spriteset_dmmu_late_tlr, "gfx/FIXTURES/dmmu.png") {template_8_8_networker_reverse(0, 150)}
//==================================================



random_switch(FEAT_TRAINS, PARENT, sw_mk1_gfx_sectorisation){
	2 : gfx_mk1_nse;
	1 : gfx_mk1_nse;
	1 : gfx_mk1_rr;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_auto_livery_decider, current_year){
	1967 .. 1970:gfx_mk1_brblue;
	1971 .. 1982:gfx_mk1_brblue;
	1983 .. 1995:sw_mk1_gfx_sectorisation;
	gfx_mk1_brblue;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_purchase, current_year){
	1967 .. 1970:gfx_mk1_brblue_purchase;
	1971 .. 1982:gfx_mk1_brblue_purchase;
	1983 .. 1995:gfx_mk1_nse_purchase;
	gfx_mk1_base_purchase;
}


//Selected liveries

switch(FEAT_TRAINS, SELF, sw_Mk1_manual_livery_decider, cargo_subtype){
	0	: gfx_mk1_brblue;
	1	: gfx_mk1_brblue;
	2	: gfx_mk1_lined;
	5	: gfx_mk1_brblue;
	6	: gfx_mk1_nse;
	7	: gfx_mk1_rr;
	8	: gfx_mk1_nse;
	9	: gfx_mk1_ic;
	10	: gfx_mk1_ic;
	11	: gfx_mk1_lined;
	13	: gfx_mk1_brblue;
	gfx_mk1_base ;
}


switch(FEAT_TRAINS, SELF, sw_Mk1_livery_choice_decider, livery_choice){
	1 : sw_Mk1_manual_livery_decider; 
	sw_Mk1_auto_livery_decider;
}


//Cargo refit text
switch(FEAT_TRAINS, SELF, sw_Mk1_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_CRIMSON_CREAM);
	1	: string(STR_LIVERY_CHOCOLATE_CREAM);
	2	: string(STR_LIVERY_MAROON);
	3	: string(STR_LIVERY_BRGREEN);
	4	: string(STR_LIVERY_BRBLUE);
	5	: string(STR_LIVERY_BRBLUEGREY);
	6	: string(STR_LIVERY_NSE);
	7	: string(STR_LIVERY_REG_RAILWAYS);
	8	: string(STR_LIVERY_REG_PROVINCIAL);
	9	: string(STR_LIVERY_INTERCITY);
	10	: string(STR_LIVERY_BR_SCOTRAIL);
	11	: string(STR_LIVERY_WCRC);
	12	: string(STR_LIVERY_NETWORK_RAIL);
	13	: string(STR_LIVER_COMP_COLOURS);
	return CB_RESULT_NO_TEXT ;
}


random_switch(FEAT_TRAINS, PARENT, sw_mk1_colour_sectorisation){
	dependent : sw_mk1_gfx_sectorisation ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}


switch(FEAT_TRAINS, SELF, sw_Mk1_auto_colour_decider, current_year){
	1967 .. 1970:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1971 .. 1982:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995:sw_mk1_colour_sectorisation;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_manual_colour_decider, cargo_subtype){
	0	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	1	: palette_2cc(COLOUR_BROWN, COLOUR_WHITE) ;
	2	: palette_2cc(COLOUR_RED, COLOUR_YELLOW);
	3	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	7	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	9	: palette_2cc(COLOUR_GREY, COLOUR_RED);
	10	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	11	: palette_2cc(COLOUR_RED, COLOUR_YELLOW);
	12	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	13	: palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_livery_choice_colour_decider, livery_choice){
	1 : sw_Mk1_manual_colour_decider; 
	sw_Mk1_auto_colour_decider;
}

/*switch(FEAT_TRAINS, PARENT, sw_Mk1_colour_mapping_by_train, vehicle_id){
	1 : 
	sw_Mk1_livery_choice_colour_decider;
}*/

switch(FEAT_TRAINS, SELF, sw_Mk1_std_colour_mapping, colour_scheme_1){
	1 : sw_Mk1_livery_choice_colour_decider;
	palette_2cc(company_colour1, company_colour2) ;
}





    //    //EXTRA CODE FOR CLASS 121 DTS//    //


//==================================================

switch(FEAT_TRAINS, SELF, sw_121_DTS_auto_livery_decider_r, current_year){
	1948 .. 1966: spriteset_115_green_dr;
	1967 .. 1973: spriteset_115_brb_dr;
	1974 .. 1978: spriteset_115_ref_dr;
	1979 .. 1983: spriteset_115_brg_dr;
	spriteset_115_rr_dr;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_manual_livery_decider_r, cargo_subtype){
	0: spriteset_115_green_dr;
	1: spriteset_115_brb_dr;
	2: spriteset_115_ref_dr;
	3: spriteset_115_brg_dr;
	4: spriteset_115_rr_dr;
	5: spriteset_115_nse_dr;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_livery_choice_decider_r, livery_choice){
	1 : sw_121_DTS_manual_livery_decider_r; 
	sw_121_DTS_auto_livery_decider_r;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_auto_livery_decider, current_year){
	1948 .. 1966: spriteset_115_green_d;
	1967 .. 1973: spriteset_115_brb_d;
	1974 .. 1978: spriteset_115_ref_d;
	1979 .. 1983: spriteset_115_brg_d;
	spriteset_115_rr_d;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_manual_livery_decider, cargo_subtype){
	0: spriteset_115_green_d;
	1: spriteset_115_brb_d;
	2: spriteset_115_ref_d;
	3: spriteset_115_brg_d;
	4: spriteset_115_rr_d;
	5: spriteset_115_nse_d;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_livery_choice_decider, livery_choice){
	1 : sw_121_DTS_manual_livery_decider; 
	sw_121_DTS_auto_livery_decider;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_auto_tl_decider, current_year){
	1948 .. 1966: spriteset_dmmu_early_tlr;
	spriteset_dmmu_late_tlr;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_manual_tl_decider, cargo_subtype){
	0: spriteset_dmmu_early_tlr;
	spriteset_dmmu_late_tlr;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_tl_choice_decider, livery_choice){
	1 : sw_121_DTS_manual_tl_decider; 
	sw_121_DTS_auto_tl_decider;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_121_DTS_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_default_r, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_121_DTS_manual_livery_decider_r;
	1 : sw_121_DTS_tl_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	2: return string(STR_LIVERY_BRBLUE_REFURB_DMU);
	3: return string(STR_LIVERY_BRBLUEGREY);
	4: return string(STR_LIVERY_REG_RAILWAYS);
	5: return string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_refit_text_decider, livery_choice){
	1 : sw_121_DTS_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_auto_colour_decider, current_year){
	1948 .. 1966: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW);
	1967 .. 1973: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE);
	1974 .. 1978: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	1979 .. 1983: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE);
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_manual_colour_decider, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW);
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE);
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE);
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_121_DTS_colour_mapping, livery_choice){
	1 : sw_121_DTS_manual_colour_decider ;
	return sw_121_DTS_auto_colour_decider ;
}

switch(FEAT_TRAINS,SELF,sw_Mk1_default1,[STORE_TEMP(-1, 0x10F), var[0x61, 0, 0x00000FFF, 0xC6]]){
121: sw_121_DTS_default_r;
sw_Mk1_livery_choice_decider;
}

switch(FEAT_TRAINS,SELF,sw_Mk1_colour_mapping1,[STORE_TEMP(-1, 0x10F), var[0x61, 0, 0x00000FFF, 0xC6]]){
121: sw_121_DTS_colour_mapping;
sw_Mk1_std_colour_mapping;
}

/*
switch(FEAT_TRAINS,SELF,sw_Mk1_refit_text_decider2,[STORE_TEMP(-1, 0x10F), var[0x61, 0, 0x00000FFF, 0xC6]]){
121: sw_121_DTS_refit_text;
sw_Mk1_refit_text;
}*/

switch(FEAT_TRAINS,SELF,sw_Mk1_default,[STORE_TEMP(1, 0x10F), var[0x61, 0, 0x00000FFF, 0xC6]]){
121: sw_121_DTS_default;
sw_Mk1_default1;
}

switch(FEAT_TRAINS,SELF,sw_Mk1_colour_mapping,[STORE_TEMP(1, 0x10F), var[0x61, 0, 0x00000FFF, 0xC6]]){
121: sw_121_DTS_colour_mapping;
sw_Mk1_colour_mapping1;
}

switch(FEAT_TRAINS,PARENT,sw_Mk1_refit_text_decider1,count_veh_id(121) > 0){
121: sw_121_DTS_refit_text;
sw_Mk1_refit_text;
}

switch(FEAT_TRAINS,SELF,sw_Mk1_refit_text_decider,livery_choice){
	1 : sw_Mk1_refit_text_decider1 ;
	return CB_RESULT_NO_TEXT ;
}


//==================================================



item (FEAT_TRAINS, item_Mk1, 9010) {
	property {
		name: 							string(STR_NAME_MK1);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					29;
		cost_factor:					35;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							35 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					CB_RESULT_ATTACH_ALLOW;
	default:							sw_Mk1_default;
	colour_mapping:						sw_Mk1_colour_mapping;
	cargo_subtype_text:					sw_Mk1_refit_text_decider;
	purchase:							sw_Mk1_purchase;
}
}

/*item (FEAT_TRAINS, item_Mk1_mail, 9011) {
	property {
		name: 							string(STR_NAME_MK2_MAIL);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1953, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_MAIL;
		cargo_allow_refit:				[MAIL];
		loading_speed:					29;
		cost_factor:					20;
		running_cost_factor:			0;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							35 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					CB_RESULT_ATTACH_ALLOW;
	colour_mapping:						return 0;
}
}*/
# 1 "rukts.pnml" 3
# 1 "src/WAGON/Mk2.pnml" 1
//Mark 2

/*
	[x+85,y,8,23,-3,-10] //South
	[x+95,y,18,15,-12,-8] //South West
	[x+115,y,33,13,-17,-9] //West
	[x+150,y,18,15,-3,-8] //North West
*/


//#define MK2_BRAKE_CHECK_FRONT ((count_veh_id(9025) == 1) | (count_veh_id(9035) == 1)) & (position_in_vehid_chain_from_end == 0)

//#define MK2_BRAKE_CHECK_BACK (count_veh_id(9025) == 0) & (count_veh_id(9035) == 0) & (position_in_consist == 0)

//Templates

template template_Mk2_single(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}

template template_Mk2_double(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
}

template template_Mk2_double_reverse(x,y){
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}


//Spritesets

spriteset(gfx_mk2_brblue_f_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,0)}
spriteset(gfx_mk2_brblue_f_bso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,25)}
spriteset(gfx_mk2_brblue_f_bso_reverse		, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_mk2_brblue_a_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,50)}
spriteset(gfx_mk2_brblue_a_bso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,75)}
spriteset(gfx_mk2_brblue_a_bso_reverse		, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_mk2_intercity_f_tso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,100)}
spriteset(gfx_mk2_intercity_f_bso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,125)}
//spriteset(gfx_mk2_intercity_f_dbso		, "gfx/WAGON/mark_2_dbso.png"){template_Mk2_double(0,0)}
spriteset(gfx_mk2_intercity_f_bso_reverse	, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_mk2_regional_a_tso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,150)}
spriteset(gfx_mk2_regional_a_bso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,175)}
spriteset(gfx_mk2_regional_a_bso_reverse	, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,175)}
spriteset(gfx_mk2_nse_a_tso					, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,350)}
spriteset(gfx_mk2_nse_a_bso					, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,375)}
spriteset(gfx_mk2_nse_a_bso_reverse			, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,375)}
spriteset(gfx_mk2_virgin_f_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,200)}
spriteset(gfx_mk2_virgin_f_bso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,225)}
spriteset(gfx_mk2_virgin_f_bso_reverse		, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,225)}
spriteset(gfx_mk2_generic_a_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,250)}
spriteset(gfx_mk2_generic_a_bso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,275)}
spriteset(gfx_mk2_generic_a_bso_reverse		, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,275)}
spriteset(gfx_mk2_directrail_f_tso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,300)}
spriteset(gfx_mk2_directrail_f_bso			, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,325)}
//spriteset(gfx_mk2_directrail_f_dbso		, "gfx/WAGON/mark_2_dbso.png"){template_Mk2_double(0,25)}
spriteset(gfx_mk2_directrail_f_bso_reverse	, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,325)}
spriteset(gfx_mk2_generic_f_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,400)}
spriteset(gfx_mk2_barbie_sleeper_f_tso		, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,450)}
spriteset(gfx_mk2_fgw_fag_f_tso				, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,475)}
spriteset(gfx_mk2_scr_f_tso					, "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,500)}
spriteset(gfx_mk2_scr_f_tso_end				, "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,525)}
spriteset(gfx_mk2_scr_f_tso_end_reverse		, "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,525)}

spriteset(gfx_mk2_purchase_brblue          , "gfx/WAGON/mark_2_2.png"){template_purchase(89,50)}
spriteset(gfx_mk2_purchase_regional        , "gfx/WAGON/mark_2_2.png"){template_purchase(89,150)}
spriteset(gfx_mk2_purchase_virgin          , "gfx/WAGON/mark_2_2.png"){template_purchase(89,200)}
spriteset(gfx_mk2_purchase_directrail      , "gfx/WAGON/mark_2_2.png"){template_purchase(89,300)}

spriteset(gfx_mk2_bso_purchase_brblue          , "gfx/WAGON/mark_2_2.png"){template_purchase(178,50)}
spriteset(gfx_mk2_bso_purchase_regional        , "gfx/WAGON/mark_2_2.png"){template_purchase(178,150)}
spriteset(gfx_mk2_bso_purchase_virgin          , "gfx/WAGON/mark_2_2.png"){template_purchase(178,200)}
spriteset(gfx_mk2_bso_purchase_directrail      , "gfx/WAGON/mark_2_2.png"){template_purchase(178,300)}


//Switches




//Graphics Switches

//Mark 2a

switch(FEAT_TRAINS, SELF, sw_mk2a_livery_decider, current_year){
	1967 .. 1970         : gfx_mk2_brblue_a_tso ;
	1971 .. 1982     : gfx_mk2_brblue_a_tso ;
	1983 .. 1995  : gfx_mk2_regional_a_tso ;
	1996 .. 2004 : gfx_mk2_regional_a_tso ;
	gfx_mk2_brblue_a_tso ;
}


//Mark 2f


switch(FEAT_TRAINS, SELF, sw_mk2_scr_check_back, position_in_vehid_chain_from_end){ 0 : gfx_mk2_scr_f_tso_end ; gfx_mk2_scr_f_tso ; }
switch(FEAT_TRAINS, SELF, sw_mk2_scr_check_front, position_in_vehid_chain){ 0 : gfx_mk2_scr_f_tso_end_reverse ; sw_mk2_scr_check_back ; }


switch(FEAT_TRAINS, SELF, sw_mk2f_livery_decider, current_year){
	1967 .. 1970        : gfx_mk2_brblue_f_tso ;
    1971..1978     : gfx_mk2_brblue_f_tso ;
	1979..1982     : gfx_mk2_intercity_f_tso ;
	1983 .. 1995 : gfx_mk2_intercity_f_tso ;
	1996 .. 2004   : gfx_mk2_virgin_f_tso ;
	2005 .. 4096   : gfx_mk2_directrail_f_tso ;
	gfx_mk2_intercity_f_tso ;
}


switch(FEAT_TRAINS, PARENT, sw_mk2_type_decider_1, vehicle_type_id){
	47 : sw_mk2f_livery_decider ;
	86 : sw_mk2f_livery_decider ;
	87 : sw_mk2f_livery_decider ;
	90 : sw_mk2f_livery_decider ;
	sw_mk2a_livery_decider ;
}


//Manual livery decider

switch(FEAT_TRAINS, SELF, sw_mk2_livery_decider, cargo_subtype){
	1: gfx_mk2_brblue_f_tso ;
	2..3: gfx_mk2_intercity_f_tso ;
	4: gfx_mk2_regional_a_tso ;
	5: gfx_mk2_nse_a_tso ;
	6: gfx_mk2_virgin_f_tso ;
	7: gfx_mk2_directrail_f_tso ;
	8: gfx_mk2_barbie_sleeper_f_tso ;
	9..10: gfx_mk2_generic_f_tso ;
	11: gfx_mk2_fgw_fag_f_tso ;
	12: sw_mk2_scr_check_front ;
	14 : gfx_mk2_brblue_f_tso;
	gfx_mk2_brblue_a_tso ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_livery_choice_decider, livery_choice){
	1 : sw_mk2_livery_decider ; 
	sw_mk2_type_decider_1 ;
}


//Sprite stacking
switch(FEAT_TRAINS, SELF, sw_mk2_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_mk2_livery_choice_decider;
}




//Cargo refit text
switch(FEAT_TRAINS, SELF, sw_mk2_refit_text, cargo_subtype){
	0 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2A))) ;
	1 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2F))) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : string(STR_LIVERY_BR_SCOTRAIL) ;
	4 : string(STR_LIVERY_REG_RAILWAYS) ;
	5 : string(STR_LIVERY_NSE) ;
	6 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	7 : string(STR_LIVERY_DRS) ;
	8 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_SLEEPER)) ;
	9 : string(STR_LIVERY_WESSEX_TRAINS) ;
	10 : string(STR_LIVERY_NETWORK_RAIL) ;
	11 : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	12 : string(STR_LIVERY_SCR) ;
	13 : string(STR_LIVER_COMP_COLOURS_A);
	14 : string(STR_LIVER_COMP_COLOURS_F);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_refit_text_decider, livery_choice){
	1 : sw_mk2_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_mk2_purchase, current_year){
	1983 .. 1995  : gfx_mk2_purchase_regional ;
	1996 .. 2004 : gfx_mk2_purchase_virgin ;
	2005 .. 4096 : gfx_mk2_purchase_directrail ;
	gfx_mk2_purchase_brblue ;
}


//Colour mapping

random_switch(FEAT_TRAINS, SELF, sw_mk2_brblue_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2_random_sectorised_colourmapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2_random_privatised_colourmapping){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; 2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; }

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_auto_a, current_year){
	1967 .. 1970         : sw_mk2_brblue_colour_mapping ;
	1971 .. 1982     : sw_mk2_brblue_colour_mapping ;
	1983 .. 1995  : sw_mk2_random_sectorised_colourmapping ;
	1996 .. 2004 : sw_mk2_random_privatised_colourmapping ;
	sw_mk2_brblue_colour_mapping ;
}


random_switch(FEAT_TRAINS, SELF, sw_mk2_intercity_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; }
random_switch(FEAT_TRAINS, SELF, sw_mk2_virgin_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ; }
random_switch(FEAT_TRAINS, SELF, sw_mk2_directrail_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; }

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_auto_f, current_year){
	1967 .. 1970         : sw_mk2_brblue_colour_mapping ;
    1971..1978     : sw_mk2_brblue_colour_mapping ;
	1979..1982     : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
    1983 .. 1995  : sw_mk2_intercity_colour_mapping ;
    1996 .. 2004 : sw_mk2_virgin_colour_mapping ;
    2005 .. 4096 : sw_mk2_directrail_colour_mapping ;
	sw_mk2_intercity_colour_mapping ;
}


switch(FEAT_TRAINS, PARENT, sw_mk2_colour_mapping_auto_checker_one, vehicle_type_id){
	47 : sw_mk2_colour_mapping_auto_f ;
	86 : sw_mk2_colour_mapping_auto_f ;
	87 : sw_mk2_colour_mapping_auto_f ;
	90 : sw_mk2_colour_mapping_auto_f ;
	sw_mk2_colour_mapping_auto_a ;
}


switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	7 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	9 : palette_2cc(COLOUR_PINK, COLOUR_WHITE) ;
	10 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	11 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	12 : palette_2cc(COLOUR_RED, COLOUR_ORANGE) ;
	13..14: palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_manual_check, livery_choice){
	1 : sw_mk2_colour_mapping_manual ;
	sw_mk2_colour_mapping_auto_checker_one ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_decider, colour_scheme_1){
	1 : sw_mk2_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Purchase menu colour mapping

switch(FEAT_TRAINS, SELF, sw_mk2_purchase_colours, current_year){
	1983 .. 1995  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1996 .. 2004 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	2005 .. 4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mk2_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item

item (FEAT_TRAINS, item_Mk2, 9020){
	property{
		name						   : string(STR_NAME_MK2) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1963, 1, 1) ;
		model_life                     : 45 ;
		vehicle_life                   : 50 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 38 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 60 ;
		loading_speed                  : 16 ;
		track_type                     : RAIL ;
		speed                          : 100 mph ;
		power                          : 0 hp ;
		weight                         : 34 ton ;
	}
	graphics{
		default                 : sw_mk2_default ;
		purchase                : sw_mk2_purchase ;
		purchase_colour_mapping : sw_mk2_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk2_refit_text_decider ;
		colour_mapping          : sw_mk2_colour_mapping_decider ;
	}
}



//Mark 2 Brake










switch(FEAT_TRAINS, SELF, sw_mk2_bso_gfx_auto, current_year){
	1967 .. 1970         : gfx_mk2_brblue_f_bso ;
    1996 .. 2004 : gfx_mk2_virgin_f_bso ;
    2005 .. 4096 : gfx_mk2_directrail_f_bso ;
	gfx_mk2_intercity_f_bso ;
}



//Manual livery decider

switch(FEAT_TRAINS, SELF, sw_mk2_bso_gfx_manual, cargo_subtype){
	1 : gfx_mk2_brblue_f_bso ;
	2..3 : gfx_mk2_intercity_f_bso ;
	4 : gfx_mk2_regional_a_bso_reverse ;
	5 : gfx_mk2_nse_a_bso_reverse ;
	6 : gfx_mk2_virgin_f_bso ;
	7 : gfx_mk2_directrail_f_bso ;
	9 : gfx_mk2_brblue_f_bso;
	gfx_mk2_brblue_a_bso_reverse ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_bso_livery_choice_decider, livery_choice){
	1 : sw_mk2_bso_gfx_manual ; 
	sw_mk2_bso_gfx_auto ;
}




//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_mk2_bso_purchase, current_year){
	1983 .. 1995  : gfx_mk2_bso_purchase_regional ;
	1996 .. 2004 : gfx_mk2_bso_purchase_virgin ;
	2005 .. 4096 : gfx_mk2_bso_purchase_directrail ;
	gfx_mk2_bso_purchase_brblue ;
}

//Colours

switch(FEAT_TRAINS, SELF, sw_mk2_bso_colour_mapping_auto, current_year){
	1967 .. 1970         : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
    1971..1978     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
    1996 .. 2004 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
    2005 .. 4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_bso_colour_mapping_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	7 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	8..9: palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_bso_colour_mapping_manual_check, livery_choice){
	1 : sw_mk2_bso_colour_mapping_manual ;
	sw_mk2_bso_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_bso_colour_mapping_decider, colour_scheme_1){
	1 : sw_mk2_bso_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Cargo refit text
switch(FEAT_TRAINS, SELF, sw_mk2_bso_refit_text, cargo_subtype){
	0 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2A))) ;
	1 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2F))) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : string(STR_LIVERY_BR_SCOTRAIL) ;
	4 : string(STR_LIVERY_REG_RAILWAYS) ;
	5 : string(STR_LIVERY_NSE) ;
	6 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	7 : string(STR_LIVERY_DRS) ;
	8 : string(STR_LIVER_COMP_COLOURS_A);
	9 : string(STR_LIVER_COMP_COLOURS_F);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_bso_refit_text_decider, livery_choice){
	1 : sw_mk2_bso_refit_text ;
	return CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_Mk2_brake, 9021){
	property{
		name						   : string(STR_NAME_MK2_BRAKE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1963, 1, 1) ;
		model_life                     : 45 ;
		vehicle_life                   : 50 ;
		cost_factor                    : 60 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 34 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 50 ;
		loading_speed                  : 10 ;
		track_type                     : RAIL ;
		speed                          : 100 mph ;
		power                          : 0 hp ;
		weight                         : 34 ton ;
        variant_group:					9020;
	}
	graphics{
		default                 : sw_mk2_bso_livery_choice_decider ;
		purchase                : sw_mk2_bso_purchase ;
		purchase_colour_mapping : sw_mk2_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk2_bso_refit_text_decider ;
		colour_mapping          : sw_mk2_bso_colour_mapping_decider ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_Mk2_brake, 9021){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/MK3.pnml" 1
//Mark 3 Carriage

/*

Liveries done:
BR Blue
Intercity
Virgin
Midland Mainline (Blue)
EMT
First Fag
First Barbie
FGW
GWR

Liveries to do:
Scotrail
ATW
One
Virgin Pretendolino
Greater Anglia
Network Rail
Chiltern Railways

*/

//Spritesets

spriteset(gfx_mk3_generic             , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,  0) }
spriteset(gfx_mk3_brblue              , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 25) }
spriteset(gfx_mk3_intercity           , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 50) }
spriteset(gfx_mk3_virgin              , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 75) }
spriteset(gfx_mk3_first_fag           , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,100) }
spriteset(gfx_mk3_mml                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,125) }
spriteset(gfx_mk3_first_barbie        , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,150) }
spriteset(gfx_mk3_fgw                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,175) }
spriteset(gfx_mk3_gwr                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,200) }
spriteset(gfx_mk3_emt                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,225) }
spriteset(gfx_mk3_atw_exec            , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,250) }
spriteset(gfx_mk3_chiltern            , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,275) }
spriteset(gfx_mk3_gner                , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,325) }
spriteset(gfx_mk3_virgin_p            , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,350) }
spriteset(gfx_mk3_first_scotrail      , "gfx/WAGON/mark_3.png"){ template_Mk2_single(170,150) }
spriteset(gfx_mk3_xc                  , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,375) }
spriteset(gfx_mk3_vtec_front		  , "gfx/WAGON/mark_3.png"){ template_Mk2_double		(0,400) }
spriteset(gfx_mk3_vtec_back			  , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(0,400) }
spriteset(gfx_mk3_vtec_buffet		  , "gfx/WAGON/mark_3.png"){ template_Mk2_double		(179,400) }
spriteset(gfx_mk3_vtec_buffet_reverse , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(179,400) }

spriteset(gfx_mk3_purchase_brblue     , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 25) }
spriteset(gfx_mk3_purchase_intercity  , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 50) }
spriteset(gfx_mk3_purchase_virgin     , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 75) }
spriteset(gfx_mk3_purchase_mml        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,125) }
spriteset(gfx_mk3_purchase_fgw        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,175) }
spriteset(gfx_mk3_purchase_emt        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,225) }

spriteset(gfx_mk3_windows_normal      , "gfx/WAGON/mark_3.png"){ template_Mk2_single(180, 25)         }
spriteset(gfx_mk3_windows_sleeper     , "gfx/WAGON/mark_3.png"){ template_Mk2_double(180, 75)         }
spriteset(gfx_mk3_windows_sleeper_rev , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(180, 75) }
spriteset(gfx_mk3_windows_buffet      , "gfx/WAGON/mark_3.png"){ template_Mk2_double(180, 50)         }
spriteset(gfx_mk3_windows_buffet_rev  , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(180, 50) }

//Graphics switches

//VTEC switches

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_vtec_pos_check_front, position_in_vehid_chain){
	0..1: gfx_mk3_vtec_front	;
	2	: gfx_mk3_vtec_buffet_reverse	;
	gfx_mk3_vtec_back ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_vtec_pos_check_back, position_in_vehid_chain_from_end){
	0..1: gfx_mk3_vtec_back	;
	2	: gfx_mk3_vtec_buffet	;
	gfx_mk3_vtec_front ;
}

switch(FEAT_TRAINS, PARENT, sw_mk3_gfx_vtec_rev_check, vehicle_is_reversed){
	1 : sw_mk3_gfx_vtec_pos_check_back ;
	sw_mk3_gfx_vtec_pos_check_front ;
}


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_auto, current_year){
	1971 .. 1982        : gfx_mk3_brblue ;
	1983 .. 1995 : gfx_mk3_intercity ;
	2005..2009        : gfx_mk3_mml ;
	2010..2016        : gfx_mk3_emt ;
	2017..4096		  : gfx_mk3_gwr ;
	gfx_mk3_virgin ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_manual, cargo_subtype){
	0      : gfx_mk3_brblue ;
	1      : gfx_mk3_intercity ;
	3      : gfx_mk3_mml ;
	4      : gfx_mk3_emt ;
	5..6   : gfx_mk3_first_fag ;
	7..8   : gfx_mk3_first_barbie ;
	9..10  : gfx_mk3_fgw ;
	11..12 : gfx_mk3_gwr ;
	13     : gfx_mk3_first_scotrail ;
	14     : gfx_mk3_generic ;
	15     : gfx_mk3_atw_exec ;
	16     : gfx_mk3_chiltern ;
	17     : gfx_mk3_intercity ;
	18..19 : gfx_mk3_generic ;
	20     : gfx_mk3_gner ;
	21     : gfx_mk3_virgin_p ;
	22     : sw_mk3_gfx_vtec_rev_check ;
	23     : gfx_mk3_xc ;
	gfx_mk3_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_manual_check, livery_choice){
	1 : sw_mk3_gfx_manual ;
	sw_mk3_gfx_auto ;
}


/*Windows switches

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_pos_check_rev, (position_in_consist - 1) > (num_vehs_in_consist / 2)){
	1 : gfx_mk3_windows_sleeper_rev ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_pos_check, (position_in_consist - 1) <= (num_vehs_in_consist / 2)){
	1 : gfx_mk3_windows_sleeper ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, PARENT, sw_mk3_sleeper_rev_check, vehicle_is_reversed){
	1 : sw_mk3_sleeper_pos_check_rev ;
	sw_mk3_sleeper_pos_check ;
}*/

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_manual, cargo_subtype){
	6      : gfx_mk3_windows_sleeper ;
	8      : gfx_mk3_windows_sleeper ;
	10     : gfx_mk3_windows_sleeper ;
	12..13 : gfx_mk3_windows_sleeper ;
	17     : gfx_mk3_windows_sleeper ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_manual_check, livery_choice){
	1 : sw_mk3_sleeper_manual ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_window, position_in_vehid_chain ){
	2 : gfx_mk3_windows_buffet ;
	sw_mk3_sleeper_manual_check ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_window_reverse, position_in_vehid_chain_from_end ){
	2 : gfx_mk3_windows_buffet_rev ;
	sw_mk3_sleeper_manual_check ;
}

switch(FEAT_TRAINS, PARENT, sw_mk3_gfx_window_reverse_check, vehicle_is_reversed){
	1 : sw_mk3_gfx_window_reverse ;
	sw_mk3_gfx_window ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_mk3_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_mk3_gfx_manual_check ;
	2 : sw_mk3_gfx_window_reverse_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mk3_refit_text, cargo_subtype){
	0  : string(STR_LIVERY_BRBLUE) ;
	1  : string(STR_LIVERY_INTERCITY) ;
	2  : string(STR_LIVERY_VIRGIN_TRAINS) ;
	3  : string(STR_LIVERY_MIDLAND_MAINLINE_BLUE) ;
	4  : string(STR_LIVERY_EMT) ;
	5  : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	6  : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_SLEEPER)) ;
	7  : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_EMPTY)) ;
	8  : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_SLEEPER)) ;
	9  : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	10 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_SLEEPER)) ;
	11 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	12 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_SLEEPER)) ;
	13 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_SLEEPER)) ;
	14 : string(STR_LIVERY_NETWORK_RAIL) ;
	15 : string(STR_LIVERY_ATW_EXEC) ;
	16 : string(STR_LIVERY_CHILTERN) ;
	17 : string(STR_LIVERY_INTERCITY_SLEEPER) ;
	18 : string(STR_LIVERY_ONE_ANGLIA) ;
	19 : string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	20 : string(STR_LIVERY_GNER) ;
	21 : string(STR_LIVERY_VIRGIN_TRAINS_FAKE) ;
	22 : string(STR_LIVERY_VTEC_LNER) ;
	23 : string(STR_LIVERY_ARRIVA_XC) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_refit_text_check, livery_choice){
	1 : sw_mk3_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite switches

switch(FEAT_TRAINS, SELF, sw_mk3_purchase, current_year){
	1971 .. 1982        : gfx_mk3_purchase_brblue ;
	1983 .. 1995 : gfx_mk3_purchase_intercity ;
	2005..2016        : gfx_mk3_purchase_mml ;
	gfx_mk3_purchase_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_purchase_colours, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2005..2016        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mk3_purchase_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}



//Colour mapping


switch(FEAT_TRAINS, SELF, sw_mk3_colours_auto, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2005..2009        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2010..2016        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	2017..4096		  : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_manual, cargo_subtype){
	0      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //BR Blue
	1      : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;          //Intercity
	3      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;     //MML
	4      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;      //EMT
	5..6   : palette_2cc(COLOUR_PALE_GREEN, COLOUR_YELLOW) ;  //First Fag
	7..8   : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;   //First Barbie
	9..10  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;     //First Great Western
	11..12 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;   //GWR
	13     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //First Barbie
	14     : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;      //Network Rail
	15     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	16     : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	17     : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;          //Intercity
	18     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;     //One Anglia
	19     : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;          //Greater Anglia
	20     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;      //GNER
	23     : palette_2cc(COLOUR_PINK, COLOUR_RED) ;           //XC
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;                   //Virgin
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_manual_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_2cc_check, colour_scheme_1){
	1 : sw_mk3_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item (FEAT_TRAINS, item_mk3, 9030) {
	property {
		name: 							string(STR_NAME_Mk3);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1975, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES ;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					18;
		cost_factor:					38;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							125 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							33 ton;
		//tractive_effort_coefficient:	0.07;
		//air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
		default                 : sw_mk3_sprite_stack ;
		purchase                : sw_mk3_purchase ;
		purchase_colour_mapping : sw_mk3_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
		colour_mapping          : sw_mk3_colours_2cc_check ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/MK4.pnml" 1
//Mark 3 Carriage

/*

Liveries done:
BR Blue
Intercity
Virgin
Midland Mainline (Blue)
EMT
First Fag
First Barbie
FGW
GWR

Liveries to do:
Scotrail
ATW
One
Virgin Pretendolino
Greater Anglia
Network Rail
Chiltern Railways

*/

//Spritesets

spriteset(gfx_mk4_intercity				, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(260,100)	}
spriteset(gfx_mk4_gner					, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(260,125)	}
spriteset(gfx_mk4_nxec	 				, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(260,150)	}
spriteset(gfx_mk4_east_coast			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(260,175)	}
spriteset(gfx_mk4_vtec_front			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double		(260,200)	}
spriteset(gfx_mk4_vtec_back				, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse(260,200)	}
spriteset(gfx_mk4_vtec_buffet			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double		(260,225)	}
spriteset(gfx_mk4_vtec_buffet_reverse	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse(260,225)	}
spriteset(gfx_mk4_gc					, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(260,275)	}

spriteset(gfx_mk4_gangway				, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double		(260,250)	}

spriteset(gfx_mk4_purchase_intercity	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 100)	}
spriteset(gfx_mk4_purchase_gner			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 125)	}
spriteset(gfx_mk4_purchase_nxec			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 150)	}
spriteset(gfx_mk4_purchase_east_coast	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 175)	}
spriteset(gfx_mk4_purchase_vtec			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 200)	}
spriteset(gfx_mk4_purchase_gc			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase			(438, 275)	}

spriteset(gfx_mk4_windows_normal		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_single		(  0, 25)	}
spriteset(gfx_mk4_windows_buffet		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double		(  0, 50)	}
spriteset(gfx_mk4_windows_buffet_rev 	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse(  0, 50)	}

//Graphics switches

//VTEC switches

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_vtec_pos_check_front, position_in_vehid_chain){
	0..2: gfx_mk4_vtec_front	;
	3	: gfx_mk4_vtec_buffet_reverse	;
	gfx_mk4_vtec_back ;
}

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_vtec_pos_check_back, position_in_vehid_chain_from_end){
	0..2: gfx_mk4_vtec_back	;
	3	: gfx_mk4_vtec_buffet	;
	gfx_mk4_vtec_front ;
}

switch(FEAT_TRAINS, PARENT, sw_mk4_gfx_vtec_rev_check, vehicle_is_reversed){
	1 : sw_mk4_gfx_vtec_pos_check_back ;
	sw_mk4_gfx_vtec_pos_check_front ;
}


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_auto, current_year){
	1983 .. 1995 : gfx_mk4_intercity ; // IC
	2007..2009	: gfx_mk4_nxec ; // NXEC
	2010..2014	: gfx_mk4_east_coast ; // EAST COAST
	2015..2019	: sw_mk4_gfx_vtec_rev_check ;
	2020..4096	: gfx_mk4_gc ;
	gfx_mk4_gner ; // GNER
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_manual, cargo_subtype){
	0 : gfx_mk4_intercity ; // IC
	2 : gfx_mk4_nxec ; // NXEC
	3 : gfx_mk4_east_coast ; // EAST COAST
	4 : sw_mk4_gfx_vtec_rev_check ; // VTEC/LNER
	5 : gfx_mk4_gc ;
	gfx_mk4_gner ; //GNER
}

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_manual_check, livery_choice){
	1 : sw_mk4_gfx_manual ;
	sw_mk4_gfx_auto ;
}


//Windows switches

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_window, position_in_vehid_chain ){
	3 : gfx_mk4_windows_buffet ;
	gfx_mk4_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk4_gfx_window_reverse, position_in_vehid_chain_from_end ){
	3 : gfx_mk4_windows_buffet_rev ;
	gfx_mk4_windows_normal ;
}

switch(FEAT_TRAINS, PARENT, sw_mk4_gfx_window_reverse_check, vehicle_is_reversed){
	1 : sw_mk4_gfx_window_reverse ;
	sw_mk4_gfx_window ;
}


//Gangway switches

/*switch(FEAT_TRAINS, SELF, sw_mk4_gfx_gangway_dvt_check, count_veh_id(9035) > 0){
	1 : gfx_mk4_gangway ;
}

	0 : sw_mk4_gfx_gangway_dvt_check ;*/
switch(FEAT_TRAINS, SELF, sw_mk4_gfx_gangway_pos_check, position_in_vehid_chain_from_end > 0){
	1 : gfx_mk4_gangway ;
}

//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_mk4_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mk4_gfx_manual_check ;
	1 : sw_mk4_gfx_window_reverse_check ;
	2 : sw_mk4_gfx_gangway_pos_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mk4_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_INTERCITY) ;	// IC
	1 : string(STR_LIVERY_GNER) ;		// GNER
	2 : string(STR_LIVERY_NXEC) ;		// NXEC
	3 : string(STR_LIVERY_ESCS) ;		// EAST COAST
	4 : string(STR_LIVERY_VTEC_LNER) ;	// VTEC/LNER
	5 : string(STR_LIVERY_GC) ;	// VTEC/LNER
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk4_refit_text_check, livery_choice){
	1 : sw_mk4_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite switches

switch(FEAT_TRAINS, SELF, sw_mk4_purchase, current_year){
	1983 .. 1995 : gfx_mk4_purchase_intercity ;
	2007..2009 : gfx_mk4_purchase_nxec ;
	2010..2014 : gfx_mk4_purchase_east_coast ;
	2015..2019 : gfx_mk4_purchase_vtec ;
	2020..4096: gfx_mk4_purchase_gc ;
	gfx_mk4_purchase_gner ;
}

switch(FEAT_TRAINS, SELF, sw_mk4_purchase_colours, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2007..2009	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	2010..2014	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	2015..2019	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC
	2020..4096	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}

switch(FEAT_TRAINS, SELF, sw_mk4_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mk4_purchase_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}



//Colour mapping


switch(FEAT_TRAINS, SELF, sw_mk4_colours_auto, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2007..2009	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	2010..2014	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	2015..2019	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC
	2020..4096	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}

switch(FEAT_TRAINS, SELF, sw_mk4_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	3	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	4	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC/LNER
	5	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}

switch(FEAT_TRAINS, SELF, sw_mk4_colours_manual_check, livery_choice){
	1 : sw_mk4_colours_manual ;
	sw_mk4_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_mk4_colours_2cc_check, colour_scheme_1){
	1 : sw_mk4_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item (FEAT_TRAINS, item_mk4, 9040) {
	property {
		name: 							string(STR_NAME_Mk4);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES ;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				11;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					20;
		cost_factor:					45;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							140 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					88;
		weight:							40 ton;
		//tractive_effort_coefficient:	0.07;
		//air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				195;
	}
	graphics {
		default                 : sw_mk4_sprite_stack ;
		purchase                : sw_mk4_purchase ;
		purchase_colour_mapping : sw_mk4_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk4_refit_text_check ;
		colour_mapping          : sw_mk4_colours_2cc_check ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/MU90.pnml" 1
spriteset(spriteset_MU90_worker_nse_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 0)}

spriteset(spriteset_MU90_worker_nse_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 25)}

spriteset(spriteset_MU90_worker_cnx_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 225)}

spriteset(spriteset_MU90_worker_cnx_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 250)}

spriteset(spriteset_MU90_worker_seb_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 225)}

spriteset(spriteset_MU90_worker_seb_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 250)}

spriteset(spriteset_MU90_worker_sey_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_MU90_worker_sey_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 475)}

spriteset(spriteset_MU90_worker_nse_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 500)}

spriteset(spriteset_MU90_worker_cnx_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 525)}

spriteset(spriteset_MU90_worker_sey_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 550)}

spriteset(spriteset_MU90_worker_seb_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 575)}


switch(FEAT_TRAINS, SELF, sw_MU90_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_MU90_worker_nse_t;
	1996 .. 2005: spriteset_MU90_worker_cnx_t;
	2006 .. 2012: spriteset_MU90_worker_sey_t;
	spriteset_MU90_worker_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_MU90_purchase, current_year){
	1983 .. 1995: spriteset_MU90_worker_nse_purchase;
	1996 .. 2005: spriteset_MU90_worker_cnx_purchase;
	2006 .. 2012: spriteset_MU90_worker_sey_purchase;
	spriteset_MU90_worker_seb_purchase;
}

switch(FEAT_TRAINS, PARENT, sw_MU90_coupling_restrictions, vehicle_type_id) {
	700: return CB_RESULT_ATTACH_ALLOW;
	325: return CB_RESULT_ATTACH_ALLOW;
	37: return CB_RESULT_ATTACH_ALLOW;
	57: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_MU90_NO_COUPLE);
}

item (FEAT_TRAINS, item_MU90, 9090) {
	property {
		name: 							string(STR_NAME_MU90);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR, MAIL];
		loading_speed:					29;
		cost_factor:					58;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_TILT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							40 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					sw_MU90_coupling_restrictions;
	default: 							sw_MU90_passenger_livery_decider_t;
	purchase:							sw_MU90_purchase;
}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/mail.pnml" 1
//GUV

spriteset(gfx_guv_blue,					"gfx/WAGON/wagons.png"){template_Mk2_single(250,25)}
spriteset(gfx_guv_brblue,				"gfx/WAGON/wagons.png"){template_Mk2_single(250,50)}
spriteset(gfx_guv_royalmail,			"gfx/WAGON/wagons.png"){template_Mk2_single(250,75)}
spriteset(gfx_guv_railexpress,			"gfx/WAGON/wagons.png"){template_Mk2_single(250,100)}
spriteset(gfx_guv_intercity,			"gfx/WAGON/wagons.png"){template_Mk2_single(250,125)}
spriteset(gfx_guv_first_fag,			"gfx/WAGON/wagons.png"){template_Mk2_single(250,150)}

spriteset(gfx_guv_purchase_blue,		"gfx/WAGON/wagons.png"){template_purchase(339,25)}
spriteset(gfx_guv_purchase_brblue,		"gfx/WAGON/wagons.png"){template_purchase(339,50)}
spriteset(gfx_guv_purchase_royalmail,	"gfx/WAGON/wagons.png"){template_purchase(339,75)}
spriteset(gfx_guv_purchase_railexpress,	"gfx/WAGON/wagons.png"){template_purchase(339,100)}



//Graphics

switch(FEAT_TRAINS, PARENT, sw_guc_gfx_sectorised, most_common_cargo_type){
	PASS : gfx_guv_intercity ;
	gfx_guv_railexpress ;
}

switch(FEAT_TRAINS, SELF, sw_guv_gfx_auto, current_year){
	1975..1983	: gfx_guv_brblue ;
	1984..1996	: sw_guc_gfx_sectorised ;
	1996..2004	: gfx_guv_royalmail ;
	gfx_guv_blue ;
}


switch(FEAT_TRAINS, SELF, sw_guv_gfx_manual, cargo_subtype){
	2	: gfx_guv_brblue ;
	3	: gfx_guv_intercity ;
	4	: gfx_guv_railexpress ;
	5	: gfx_guv_royalmail ;
	6	: gfx_guv_first_fag ;
	gfx_guv_blue ;
}

switch(FEAT_TRAINS, SELF, sw_guv_gfx_manual_check, livery_choice){
	1 : sw_guv_gfx_manual ;
	sw_guv_gfx_auto ;
}



//Purchase

switch(FEAT_TRAINS, SELF, sw_guv_purchase_gfx, current_year){
	1975..1983	: gfx_guv_purchase_brblue ;
	1984..1996	: gfx_guv_purchase_railexpress ;
	1996..2004	: gfx_guv_purchase_royalmail ;
	gfx_guv_purchase_blue ;
}

switch(FEAT_TRAINS, SELF, sw_guv_purchase_colours, current_year){
	1984..1996	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	1996..2004	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_guv_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_guv_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_guv_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUEGREY) ;
	3 : string(STR_LIVERY_INTERCITY) ;
	4 : string(STR_LIVERY_RAIL_EXPRESS) ;
	5 : string(STR_LIVERY_ROYAL_MAIL) ;
	6 : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_MOTORAIL)) ;
	7 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_MOTORAIL)) ;
	8 : string(STR_LIVERY_NETWORK_RAIL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_guv_refit_text_check, livery_choice){
	1 : sw_guv_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

switch(FEAT_TRAINS, PARENT, sw_guc_col_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_guv_col_auto, current_year){
	0..1966		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1984..1996	: sw_guc_col_sectorised ;
	1996..2004	: palette_2cc(COLOUR_RED, COLOUR_YELLOW);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_guv_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	3	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	4	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	5	: palette_2cc(COLOUR_RED, COLOUR_YELLOW);
	6	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	8 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_guv_col_manual_check, livery_choice){
	1 : sw_guv_col_manual ;
	sw_guv_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_guv_col_2cc_check, colour_scheme_1){
	1 : sw_guv_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Item


item (FEAT_TRAINS, item_guv, 9001){
	property{
		name						   : string(STR_NAME_GUV) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_AUTOREFIT) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1956, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		cost_factor                    : 45 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_MAIL, CC_ARMOURED, CC_EXPRESS) ;
		non_refittable_cargo_classes   : bitmask(CC_PIECE_GOODS) ;
		cargo_allow_refit              : [VEHI] ;
		default_cargo_type			   : MAIL ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 10 ;
		track_type                     : RAIL ;
		speed                          : 90 mph ;
		power                          : 0 hp ;
		weight                         : 30 ton ;
	}
	graphics{
		default                 : sw_guv_gfx_manual_check ;
		purchase                : sw_guv_purchase_gfx ;
		purchase_colour_mapping : sw_guv_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_guv_refit_text_check ;
		colour_mapping          : sw_guv_col_2cc_check ;
	}
}









//NTX

spriteset(gfx_ntx_brblue,			"gfx/WAGON/wagons.png"){template_Mk2_single(250,225)}
spriteset(gfx_ntx_railexpress,		"gfx/WAGON/wagons.png"){template_Mk2_single(250,250)}
spriteset(gfx_ntx_intericty,		"gfx/WAGON/wagons.png"){template_Mk2_single(250,275)}
spriteset(gfx_ntx_royalmail,		"gfx/WAGON/wagons.png"){template_Mk2_single(250,300)}

spriteset(gfx_ntx_purch_brblue,		"gfx/WAGON/wagons.png"){template_purchase(339,225)}
spriteset(gfx_ntx_purch_railexpress,"gfx/WAGON/wagons.png"){template_purchase(339,250)}
spriteset(gfx_ntx_purch_royalmail,	"gfx/WAGON/wagons.png"){template_purchase(339,300)}



//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_ntx_gfx_sectorised, most_common_cargo_type){
	PASS : gfx_ntx_intericty ;
	gfx_ntx_railexpress ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_gfx_auto, current_year){
	0..1982				: gfx_ntx_brblue ;
	1983 .. 1995	: sw_ntx_gfx_sectorised ;
	gfx_ntx_royalmail ;
}


switch(FEAT_TRAINS, SELF, sw_ntx_gfx_manual, cargo_subtype){
	0 : gfx_ntx_brblue ;
	2 : gfx_ntx_intericty ;
	3 : gfx_ntx_royalmail ;
	gfx_ntx_railexpress ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_gfx_manual_check, livery_choice){
	1 : sw_ntx_gfx_manual ;
	sw_ntx_gfx_auto ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_ntx_purch_gfx, current_year){
	0..1982				: gfx_ntx_purch_brblue ;
	1983 .. 1995	: gfx_ntx_purch_railexpress ;
	gfx_ntx_purch_royalmail ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_purch_col, current_year){
	0..1982				: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_purch_col_2cc_check, colour_scheme_1){
	1 : sw_ntx_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_ntx_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_RAIL_EXPRESS) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : string(STR_LIVERY_ROYAL_MAIL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_refit_text_check, livery_choice){
	1 : sw_ntx_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colours

switch(FEAT_TRAINS, PARENT, sw_ntx_col_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_col_auto, current_year){
	0..1982				: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995	: sw_ntx_col_sectorised ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_ntx_col_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_col_manual_check, livery_choice){
	1 : sw_ntx_col_manual ;
	sw_ntx_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ntx_col_2cc_check, colour_scheme_1){
	1 : sw_ntx_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item (FEAT_TRAINS, item_ntx, 9002){
	property{
		name						   : string(STR_NAME_NTX) ;
		misc_flags                     : bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1966, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 45 ;
		cost_factor                    : 60 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 50 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_MAIL, CC_ARMOURED) ;
		cargo_allow_refit              : [MAIL, VALU, DIAM, GOLD] ;
		default_cargo_type			   : MAIL ;
		cargo_capacity                 : 30 ;
		loading_speed                  : 7 ;
		track_type                     : RAIL ;
		speed                          : 110 mph ;
		power                          : 0 hp ;
		weight                         : 38 ton ;
	}
	graphics{
		default                 : sw_ntx_gfx_manual_check ;
		purchase                : sw_ntx_purch_gfx ;
		purchase_colour_mapping : sw_ntx_purch_col_2cc_check ;
		cargo_subtype_text      : sw_ntx_refit_text_check ;
		colour_mapping          : sw_ntx_col_2cc_check ;
	}
}



//QPV

spriteset(gfx_qpv,		"gfx/WAGON/wagons.png"){template_6_4(100,425)}
spriteset(gfx_qpv_purch,"gfx/WAGON/wagons.png"){template_purchase(181,425)}

/*switch(FEAT_TRAINS, SELF, sw_qpv_col, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
}*/

switch(FEAT_TRAINS, SELF, sw_qpv_col_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_BROWN, COLOUR_BROWN) ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item


item (FEAT_TRAINS, item_qpv, 9003){
	property{
		name						   : string(STR_NAME_QPV) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_AUTOREFIT) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 6 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1922, 1, 1) ;
		model_life                     : 22 ;
		vehicle_life                   : 35 ;
		cost_factor                    : 27 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 17 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_MAIL, CC_ARMOURED, CC_EXPRESS) ;
		cargo_allow_refit              : [VBOD, VPTS, LVST, PLAS, JAVA, BEER] ;
		default_cargo_type			   : MAIL ;
		cargo_capacity                 : 28 ;
		loading_speed                  : 6 ;
		track_type                     : RAIL ;
		speed                          : 60 mph ;
		power                          : 0 hp ;
		weight                         : 17 ton ;
	}
	graphics{
		default                 : gfx_qpv ;
		purchase                : gfx_qpv_purch ;
		colour_mapping          : sw_qpv_col_2cc_check ;
	}
}











//RBX

spriteset(gfx_rbx,					"gfx/WAGON/wagons.png"){template_7_4_2(100,375)}
spriteset(gfx_rbx_railfreight,		"gfx/WAGON/wagons.png"){template_7_4_2(100,400)}
spriteset(gfx_rbx_purch,			"gfx/WAGON/wagons.png"){template_purchase(181,375)}
spriteset(gfx_rbx_purch_railfreight,"gfx/WAGON/wagons.png"){template_purchase(181,400)}

switch(FEAT_TRAINS, SELF, sw_rbx_gfx_auto, current_year){
	0..1980	: gfx_rbx ;
	gfx_rbx_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_gfx_manual, cargo_subtype){
	0 : gfx_rbx ;
	gfx_rbx_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_gfx_manual_check, livery_choice){
	1 : sw_rbx_gfx_manual ;
	sw_rbx_gfx_auto ;
}


switch(FEAT_TRAINS, SELF, sw_rbx_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_RAILFREIGHT2) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_refit_text_check, livery_choice){
	1 : sw_rbx_refit_text ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_rbx_col_auto, current_year){
	0..1980	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_col_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_col_manual_check, livery_choice){
	1 : sw_rbx_col_manual ;
	sw_rbx_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_rbx_col_2cc_check, colour_scheme_2){
	1 : sw_rbx_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


switch(FEAT_TRAINS, SELF, sw_rbx_purchase_gfx, current_year){
	0..1980	: gfx_rbx_purch ;
	gfx_rbx_purch_railfreight ;
}




//Item


item (FEAT_TRAINS, item_rbx, 9004){
	property{
		name						   : string(STR_NAME_RBX) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_AUTOREFIT) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1931, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 40 ;
		cost_factor                    : 30 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 20 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_MAIL, CC_ARMOURED, CC_EXPRESS) ;
		cargo_allow_refit              : [VBOD, VPTS, LVST, PLAS, JAVA, BEER] ;
		default_cargo_type			   : MAIL ;
		cargo_capacity                 : 45 ;
		loading_speed                  : 8 ;
		track_type                     : RAIL ;
		speed                          : 70 mph ;
		power                          : 0 hp ;
		weight                         : 26 ton ;
	}
	graphics{
		default                 : sw_rbx_gfx_manual_check ;
		purchase                : sw_rbx_purchase_gfx ;
		purchase_colour_mapping	: sw_rbx_col_auto ;
		cargo_subtype_text      : sw_rbx_refit_text_check ;
		colour_mapping          : sw_rbx_col_2cc_check ;
	}
}


















spriteset(gfx_oldcube_open,			"gfx/WAGON/wagons.png"){template_4_4	(207,600)}
spriteset(gfx_oldcube_closed,		"gfx/WAGON/wagons.png"){template_4_4	(150,600)}
spriteset(gfx_oldcube_2cc_open,		"gfx/WAGON/wagons.png"){template_4_4	(207,625)}
spriteset(gfx_oldcube_2cc_closed,	"gfx/WAGON/wagons.png"){template_4_4	(150,625)}

spriteset(gfx_oldcube_purchase,		"gfx/WAGON/wagons.png"){template_purchase(150,650)}



spritegroup sprgrp_oldcube {
	loading	: gfx_oldcube_open ;
	loaded	: gfx_oldcube_closed ;
}

spritegroup sprgrp_oldcube_2cc {
	loading	: gfx_oldcube_2cc_open ;
	loaded	: gfx_oldcube_2cc_closed ;
}

switch(FEAT_TRAINS, SELF, sw_oldcube_manual, cargo_subtype){
	0 : sprgrp_oldcube ;
	sprgrp_oldcube_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_oldcube_manual_check, livery_choice){
	1 : sw_oldcube_manual ;
	sprgrp_oldcube_2cc ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_oldcube_refit_text, cargo_subtype){
	 0 : string(STR_COLOUR_GREY) ;
	 1 : string(STR_LIVER_COMP_COLOURS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_oldcube_refit_text_check, livery_choice){
	1 : sw_oldcube_refit_text ;
	CB_RESULT_NO_TEXT ;
}





//Item


item (FEAT_TRAINS, item_oldcube, 9005){
	property{
		name						   : string(STR_NAME_CUBE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_AUTOREFIT) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 4 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1860, 1, 1) ;
		model_life                     : 80 ;
		vehicle_life                   : 30 ;
		cost_factor                    : 10 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 12 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_MAIL, CC_ARMOURED, CC_EXPRESS, CC_PIECE_GOODS) ;
		cargo_allow_refit              : [VBOD, VPTS, LVST, PLAS, JAVA, BEER, MILK] ;
		default_cargo_type			   : MAIL ;
		cargo_capacity                 : 12 ;
		loading_speed                  : 4 ;
		track_type                     : RAIL ;
		speed                          : 40 mph ;
		power                          : 0 hp ;
		weight                         : 8 ton ;
	}
	graphics{
		default                 : sw_oldcube_manual_check ;
		purchase                : gfx_oldcube_purchase ;
		cargo_subtype_text      : sw_oldcube_refit_text_check ;
	}
}


















//GER BRAKE 10034


spriteset(gfx_brake_ger,			"gfx/WAGON/wagons.png"){template_5_4		(175,825)}
spriteset(gfx_brake_ger_purchase,	"gfx/WAGON/wagons.png"){template_purchase	(250,825)}

switch(FEAT_TRAINS, SELF, sw_brake_ger_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_BROWN, company_colour2) ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_brake_ger, 10034) {
	property {
		name: 							string(STR_NAME_BRAKE_GER);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1860, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				10;
		cost_factor:					10;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							25 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_capacity:					0;
		weight:							10 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_brake_ger;
		purchase:						gfx_brake_ger_purchase;
		colour_mapping:					sw_brake_ger_colours_2cc_check;
}
}








//LMS BRAKE 10035


spriteset(gfx_brake_lms,			"gfx/WAGON/wagons.png"){template_5_4		(175,850)}
spriteset(gfx_brake_lms_purchase,	"gfx/WAGON/wagons.png"){template_purchase	(250,850)}

switch(FEAT_TRAINS, SELF, sw_brake_lms_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_BROWN, company_colour2) ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_brake_lms, 10035) {
	property {
		name: 							string(STR_NAME_BRAKE_LMS);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1925, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				10;
		cost_factor:					10;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							45 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_capacity:					0;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_brake_lms;
		purchase:						gfx_brake_lms_purchase;
		colour_mapping:					sw_brake_lms_colours_2cc_check;
}
}


# 1 "rukts.pnml" 3
# 1 "src/WAGON/Wagon_a.pnml" 1
//Templates
template template_wagon_a(x,y){
	[x+0,y,8,14,-3,-11]
	[x+10,y,11,12,-4,-9]
	[x+23,y,12,12,3,-8]
	[x+37,y,11,12,4,-4]
	[x+0,y,8,14,-3,-3]
	[x+10,y,11,12,-14,-4]
	[x+23,y,12,12,-16,-8]
	[x+37,y,11,12,-6,-9]
}

spriteset(spriteset_wagon_a, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 0)}
spriteset(spriteset_wagon_a_load_full, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 15)}
spriteset(spriteset_wagon_a_load_med, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 30)}
spriteset(spriteset_wagon_a_load_low, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 45)}

spriteset(spriteset_wagon_a_purchase, "gfx/WAGON/wagon_a.png") {template_purchase_short(0, 60)}

switch(FEAT_TRAINS,SELF, sw_wagon_a_load,cargo_count){
	0: spriteset_wagon_a;
	1..3: spriteset_wagon_a_load_low;
	4..9: spriteset_wagon_a_load_med;
	10..2000: spriteset_wagon_a_load_full;
}

switch(FEAT_TRAINS, SELF, sw_wagon_a_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : spriteset_wagon_a ;
	1 : sw_wagon_a_load;
}

item (FEAT_TRAINS, item_WAGON_A, 10000) {
	property {
		name: 							string(STR_NAME_WAGON_A);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_BULK;
		non_refittable_cargo_classes:	bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE);
		cargo_allow_refit:				[COAL, GRAI, IORE, WHEA, CORE, FRUT, MAIZ, AORE, CERA, CERE, CMNT, FERT, LIME, OLSD, POTA, SAND, GRVL, MNSP, PHOS, PORE, COPR, SUGR];
		loading_speed:					10;
		cost_factor:					2;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					12;
		weight:							5 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							3;
		bitmask_vehicle_info:			0;
	}
	graphics {
	default: 							sw_wagon_a_spritestack;
	purchase:							spriteset_wagon_a_purchase;
}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/open_wagons.pnml" 1


//ZDX

spriteset(gfx_zdx			, "gfx/WAGON/wagons.png") {template_5_4(100, 50)}
spriteset(gfx_zdx_wood		, "gfx/WAGON/wagons.png") {template_5_4(165, 50)}
spriteset(gfx_zdx_materials	, "gfx/WAGON/wagons.png") {template_5_4(100, 100)}
spriteset(gfx_zdx_glass 	, "gfx/WAGON/wagons.png") {template_5_4(100, 125)}
spriteset(gfx_zdx_steel		, "gfx/WAGON/wagons.png") {template_5_4(165, 100)}
spriteset(gfx_zdx_timber	, "gfx/WAGON/wagons.png") {template_5_4(165, 125)}

spriteset(gfx_zdx_purchase	, "gfx/WAGON/wagons.png") {template_purchase(297,395)}


switch(FEAT_TRAINS, SELF, sw_zdx_base_decider, cargo_type_in_veh){
	WOOD : gfx_zdx_wood ;
	gfx_zdx ;
}


random_switch(FEAT_TRAINS, SELF, sw_zdx_random, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	1 : gfx_zdx_glass ;
	1 : gfx_zdx_materials ;
}

switch(FEAT_TRAINS, SELF, sw_zdx_cargo_type_check, cargo_type_in_veh){
	WOOD : gfx_zdx_timber ;
	STEL : gfx_zdx_steel ;
	COPR : gfx_zdx_steel ;
	METL : gfx_zdx_steel ;
	NICK : gfx_zdx_steel ;
	PIPE : gfx_zdx_steel ;
	SCMT : gfx_zdx_steel ;
	ZINC : gfx_zdx_steel ;
	BDMT : sw_zdx_random ;
	GOOD : sw_zdx_random ;
	GLAS : gfx_zdx_glass ;
	gfx_zdx_materials ;
}

switch(FEAT_TRAINS, SELF, sw_zdx_cargo_check, cargo_count > 0){
	1 : sw_zdx_cargo_type_check ;
}

switch(FEAT_TRAINS, SELF, sw_zdx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_zdx_base_decider ;
	1 : sw_zdx_cargo_check ;
}


switch(FEAT_TRAINS, SELF, sw_zdx_colours, current_year){
	0..1975 : palette_2cc(COLOUR_BROWN, COLOUR_BROWN) ;
	palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_zdx_colours_2cc_check, colour_scheme_2){
	1 : sw_zdx_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_zdx, 10006) {
	property {
		name: 							string(STR_NAME_ZDX);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_PIECE_GOODS, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_REFRIGERATED,CC_OVERSIZED);
		cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		cargo_disallow_refit:			[LVST] ;
		loading_speed:					13;
		cost_factor:					10;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					22;
		weight:							16 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_zdx_spr_stack;
		purchase:						gfx_zdx_purchase;
		colour_mapping:					sw_zdx_colours_2cc_check;
}
}











//MDO

spriteset(gfx_mdo,			"gfx/WAGON/wagons.png"){template_4_4(157,25)}
spriteset(gfx_mdo_other_h,	"gfx/WAGON/wagons.png"){template_4_4(100,150)}
spriteset(gfx_mdo_other_f,	"gfx/WAGON/wagons.png"){template_4_4(157,150)}
spriteset(gfx_mdo_sand_h,	"gfx/WAGON/wagons.png"){template_4_4(100,175)}
spriteset(gfx_mdo_sand_f,	"gfx/WAGON/wagons.png"){template_4_4(157,175)}
spriteset(gfx_mdo_ore_h,	"gfx/WAGON/wagons.png"){template_4_4(100,200)}
spriteset(gfx_mdo_ore_f,	"gfx/WAGON/wagons.png"){template_4_4(157,200)}
spriteset(gfx_mdo_coal_h,	"gfx/WAGON/wagons.png"){template_4_4(100,225)}
spriteset(gfx_mdo_coal_f,	"gfx/WAGON/wagons.png"){template_4_4(157,225)}
spriteset(gfx_mdo_cover,	"gfx/WAGON/wagons.png"){template_4_4(214,0)}

spriteset(gfx_mdo_purchase,	"gfx/WAGON/wagons.png"){template_purchase(297,409)}

switch(FEAT_TRAINS, SELF, sw_mdo_cargo_check_h, cargo_type_in_veh){
	COAL : gfx_mdo_coal_h ;
	COKE : gfx_mdo_coal_h ;
	IORE : gfx_mdo_ore_h ;
	PORE : gfx_mdo_ore_h ;
	SAND : gfx_mdo_sand_h ;
	SULP : gfx_mdo_sand_h ;
	AORE : gfx_mdo_other_h ;
	GRVL : gfx_mdo_other_h ;
	LIME : gfx_mdo_other_h ;
	MNO2 : gfx_mdo_other_h ;
	NITR : gfx_mdo_other_h ;
	gfx_mdo_cover ;
}

switch(FEAT_TRAINS, SELF, sw_mdo_cargo_check_f, cargo_type_in_veh){
	COAL : gfx_mdo_coal_f ;
	COKE : gfx_mdo_coal_f ;
	IORE : gfx_mdo_ore_f ;
	PORE : gfx_mdo_ore_f ;
	SAND : gfx_mdo_sand_f ;
	SULP : gfx_mdo_sand_f ;
	AORE : gfx_mdo_other_f ;
	GRVL : gfx_mdo_other_f ;
	LIME : gfx_mdo_other_f ;
	MNO2 : gfx_mdo_other_f ;
	NITR : gfx_mdo_other_f ;
	gfx_mdo_cover ;
}

switch(FEAT_TRAINS, SELF, sw_mdo_cargo_amount_check, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_mdo_cargo_check_h ;
	51..100	: sw_mdo_cargo_check_f ;
}


switch(FEAT_TRAINS, SELF, sw_mdo_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_mdo ;
	1 : sw_mdo_cargo_amount_check ;
}


item (FEAT_TRAINS, item_mdo, 10007) {
	property {
		name: 							string(STR_NAME_MDO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1920, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					25;
		reliability_decay:				9;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED);
		cargo_allow_refit:				[COAL, IORE, AORE, COKE, FERT, GRVL, LIME, MNO2, NITR, PHOS, PORE, SCMT, SGBT, SGCN, SLAG, SULP, STEL, PAPR, BEER, BDMT, BOOM, BRCK, CERA, COPR, DYES, ENSP, FICR, FMSP, GLAS, IRON, METL, MNSP, NICK, NUTS, PIPE, RCYC, VPTS, WDPR, WOOL, SCRP, SCMT, RCYC];
		loading_speed:					10;
		cost_factor:					6;
		running_cost_factor:			10;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							40 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					16;
		weight:							10 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_mdo_sprite_stack;
		purchase:						gfx_mdo_purchase;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_mdo, 10007){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}




//ZGO

spriteset(gfx_zgo,			"gfx/WAGON/wagons.png"){template_4_4(157,0)}
spriteset(gfx_zgo_purchase,	"gfx/WAGON/wagons.png"){template_purchase(297,353)}

switch(FEAT_TRAINS, SELF, sw_zgo_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_zgo ;
	1 : sw_mdo_cargo_amount_check ;
}


item (FEAT_TRAINS, item_zgo, 10012) {
	property {
		name: 							string(STR_NAME_ZGO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1890, 1, 1);
		model_life:						20;
		retire_early:					1;
		vehicle_life:					25;
		reliability_decay:				9;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED);
		cargo_allow_refit:				[COAL, IORE, AORE, COKE, FERT, GRVL, LIME, MNO2, NITR, PHOS, PORE, SCMT, SGBT, SGCN, SLAG, SULP, STEL, PAPR, BEER, BDMT, BOOM, BRCK, CERA, COPR, DYES, ENSP, FICR, FMSP, GLAS, IRON, METL, MNSP, NICK, NUTS, PIPE, RCYC, VPTS, WDPR, WOOL, SCRP, SCMT, RCYC];
		loading_speed:					10;
		cost_factor:					4;
		running_cost_factor:			10;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							40 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					12;
		weight:							9 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_zgo_sprite_stack;
		purchase:						gfx_zgo_purchase;
}
}



































//MTV

spriteset(gfx_mtv,			"gfx/WAGON/wagons.png"){template_5_4(100,350)}
spriteset(gfx_mtv_wood,		"gfx/WAGON/wagons.png"){template_5_4(165,350)}
spriteset(gfx_mtv_purch,	"gfx/WAGON/wagons.png"){template_purchase(297,339)}

switch(FEAT_TRAINS, SELF, sw_mtv_base_decider, cargo_type_in_veh){
	WOOD : gfx_mtv_wood ;
	gfx_mtv ;
}

switch(FEAT_TRAINS, SELF, sw_mtv_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mtv_base_decider ;
	1 : sw_zdx_cargo_check ;
}


item (FEAT_TRAINS, item_mtv, 10014) {
	property {
		name: 							string(STR_NAME_MTV);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1960, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					35;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PIECE_GOODS, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_REFRIGERATED,CC_OVERSIZED);
		cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		cargo_disallow_refit:			[LVST] ;
		loading_speed:					12;
		cost_factor:					10;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					26;
		weight:							15 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_mtv_spr_stack;
		purchase:						gfx_mtv_purch;
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_mtv, 10014){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



//Habfis

spriteset(gfx_hab_closed,	"gfx/WAGON/wagons.png"){template_Mk2_single(0,275)}
spriteset(gfx_hab_open,		"gfx/WAGON/wagons.png"){template_Mk2_single(0,300)}
spriteset(gfx_hab_purch,	"gfx/WAGON/wagons.png"){template_purchase(0,325)}


spritegroup sprgrp_hab {
	loading	: gfx_hab_open ;
	loaded	: gfx_hab_closed ;
}

switch(FEAT_TRAINS, SELF, sw_hab_col_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_hab, 10016) {
	property {
		name: 							string(STR_NAME_HAB);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1985, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				6;
		refittable_cargo_classes:		bitmask(CC_PIECE_GOODS, CC_NON_POURABLE);
		//non_refittable_cargo_classes:	bitmask();
		cargo_allow_refit:				[GOOD, STEL, PAPR, BOOM, BRCK, CERA, COPR, GLAS, METL, NICK, PIPE, WDPR, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		cargo_disallow_refit:			[LVST, SCMT, MNSP, ENSP, WOOD] ;
		loading_speed:					15;
		cost_factor:					45;
		running_cost_factor:			70;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					50;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sprgrp_hab;
		purchase:						gfx_hab_purch;
		colour_mapping:					sw_hab_col_2cc_check;
}
}



//Hazardous wagons 50

spriteset(gfx_hazard,		"gfx/WAGON/wagons.png"){template_7_4_2(154,450)}
spriteset(gfx_hazard_purch,	"gfx/WAGON/wagons.png"){template_purchase(297,325)}

switch(FEAT_TRAINS, SELF, sw_hazard_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_WHITE, COLOUR_WHITE) ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_haz, 10019) {
	property {
		name: 							string(STR_NAME_HAZ);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1980, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				6;
		refittable_cargo_classes     : bitmask(CC_HAZARDOUS, CC_COVERED) ;
		non_refittable_cargo_classes : bitmask(CC_BULK) ;
		cargo_allow_refit            : [URAN, NWST, SULP] ;
		loading_speed:					15;
		cost_factor:					140;
		running_cost_factor:			160;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		//misc_flags:						bitmask()
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				URAN;
		cargo_capacity:					40;
		weight:							25 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							7;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_hazard;
		purchase:						gfx_hazard_purch;
		colour_mapping:					sw_hazard_col_check;
}
}















//5PLANK

spriteset(gfx_5plank,			"gfx/WAGON/wagons.png"){template_4_4	(297,500)}
spriteset(gfx_5plank_ttd,		"gfx/WAGON/wagons.png"){template_4_4	(354,500)}
spriteset(gfx_5plank_dark,		"gfx/WAGON/wagons.png"){template_4_4	(297,525)}
spriteset(gfx_5plank_2cc,		"gfx/WAGON/wagons.png"){template_4_4	(354,525)}
spriteset(gfx_5plank_other_h,	"gfx/WAGON/wagons.png"){template_4_4	(297,600)}
spriteset(gfx_5plank_other_f,	"gfx/WAGON/wagons.png"){template_4_4	(354,600)}
spriteset(gfx_5plank_sand_h,	"gfx/WAGON/wagons.png"){template_4_4	(297,625)}
spriteset(gfx_5plank_sand_f,	"gfx/WAGON/wagons.png"){template_4_4	(354,625)}
spriteset(gfx_5plank_ore_h,		"gfx/WAGON/wagons.png"){template_4_4	(297,550)}
spriteset(gfx_5plank_ore_f,		"gfx/WAGON/wagons.png"){template_4_4	(354,550)}
spriteset(gfx_5plank_coal_h,	"gfx/WAGON/wagons.png"){template_4_4	(297,575)}
spriteset(gfx_5plank_coal_f,	"gfx/WAGON/wagons.png"){template_4_4	(354,575)}
spriteset(gfx_5plank_cover,		"gfx/WAGON/wagons.png"){template_4_4	(297,650)}

spriteset(gfx_5plank_purchase,	"gfx/WAGON/wagons.png"){template_purchase(150,700)}

switch(FEAT_TRAINS, SELF, sw_5plank_cargo_check_h, cargo_type_in_veh){
	COAL : gfx_5plank_coal_h ;
	COKE : gfx_5plank_coal_h ;
	IORE : gfx_5plank_ore_h ;
	PORE : gfx_5plank_ore_h ;
	SAND : gfx_5plank_sand_h ;
	SULP : gfx_5plank_sand_h ;
	AORE : gfx_5plank_other_h ;
	GRVL : gfx_5plank_other_h ;
	LIME : gfx_5plank_other_h ;
	MNO2 : gfx_5plank_other_h ;
	NITR : gfx_5plank_other_h ;
	gfx_5plank_cover ;
}

switch(FEAT_TRAINS, SELF, sw_5plank_cargo_check_f, cargo_type_in_veh){
	COAL : gfx_5plank_coal_f ;
	COKE : gfx_5plank_coal_f ;
	IORE : gfx_5plank_ore_f ;
	PORE : gfx_5plank_ore_f ;
	SAND : gfx_5plank_sand_f ;
	SULP : gfx_5plank_sand_f ;
	AORE : gfx_5plank_other_f ;
	GRVL : gfx_5plank_other_f ;
	LIME : gfx_5plank_other_f ;
	MNO2 : gfx_5plank_other_f ;
	NITR : gfx_5plank_other_f ;
	gfx_5plank_cover ;
}

switch(FEAT_TRAINS, SELF, sw_5plank_cargo_amount_check, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_5plank_cargo_check_h ;
	51..100	: sw_5plank_cargo_check_f ;
}



switch(FEAT_TRAINS, SELF, sw_5plank_manual, cargo_subtype){
	0 : gfx_5plank ;
	1 : gfx_5plank_dark ;
	2 : gfx_5plank_ttd ;
	gfx_5plank_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_5plank_manual_check, livery_choice){
	1 : sw_5plank_manual ;
	gfx_5plank_2cc ;
}


switch(FEAT_TRAINS, SELF, sw_5plank_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_5plank_manual_check ;
	1 : sw_5plank_cargo_amount_check ;
}



//Refit text


switch(FEAT_TRAINS, SELF, sw_5plank_refit_text, cargo_subtype){
	 0 : string(STR_COLOUR_GREY) ;
	 1 : string(STR_COLOUR_BLACK) ;
	 2 : string(STR_LIVERY_COMPANY) ;
	 3 : string(STR_LIVER_COMP_COLOURS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_5plank_refit_text_check, livery_choice){
	1 : sw_5plank_refit_text ;
	CB_RESULT_NO_TEXT ;
}



item (FEAT_TRAINS, item_5plank, 10022) {
	property {
		name: 							string(STR_NAME_ZCO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1860, 1, 1);
		model_life:						80;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				25;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED);
		cargo_allow_refit:				[COAL, IORE, AORE, COKE, FERT, GRVL, LIME, MNO2, NITR, PHOS, PORE, SCMT, SGBT, SGCN, SLAG, SULP, STEL, PAPR, BEER, BDMT, BOOM, BRCK, CERA, COPR, DYES, ENSP, FICR, FMSP, GLAS, IRON, METL, MNSP, NICK, NUTS, PIPE, RCYC, VPTS, WDPR, WOOL, SCRP, SCMT, RCYC];
		loading_speed:					8;
		cost_factor:					4;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							35 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					12;
		weight:							8 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_5plank_sprite_stack;
		purchase:						gfx_5plank_purchase;
		cargo_subtype_text:				sw_5plank_refit_text_check;
}
}








//newsteel

spriteset(gfx_newsteel,			"gfx/WAGON/wagons.png"){template_5_8	(0	,600)}
spriteset(gfx_newsteel_other_h,	"gfx/WAGON/wagons.png"){template_5_4	(0	,675)}
spriteset(gfx_newsteel_other_f,	"gfx/WAGON/wagons.png"){template_5_4	(65	,675)}
spriteset(gfx_newsteel_sand_h,	"gfx/WAGON/wagons.png"){template_5_4	(0	,650)}
spriteset(gfx_newsteel_sand_f,	"gfx/WAGON/wagons.png"){template_5_4	(65	,650)}
spriteset(gfx_newsteel_ore_h,	"gfx/WAGON/wagons.png"){template_5_4	(0	,700)}
spriteset(gfx_newsteel_ore_f,	"gfx/WAGON/wagons.png"){template_5_4	(65	,700)}
spriteset(gfx_newsteel_coal_h,	"gfx/WAGON/wagons.png"){template_5_4	(0	,625)}
spriteset(gfx_newsteel_coal_f,	"gfx/WAGON/wagons.png"){template_5_4	(65	,625)}

spriteset(gfx_newsteel_purchase,"gfx/WAGON/wagons.png"){template_purchase(150,675)}

switch(FEAT_TRAINS, SELF, sw_newsteel_cargo_check_h, cargo_type_in_veh){
	COAL : gfx_newsteel_coal_h ;
	COKE : gfx_newsteel_coal_h ;
	IORE : gfx_newsteel_ore_h ;
	PORE : gfx_newsteel_ore_h ;
	SAND : gfx_newsteel_sand_h ;
	SULP : gfx_newsteel_sand_h ;
	gfx_newsteel_other_h ;
}

switch(FEAT_TRAINS, SELF, sw_newsteel_cargo_check_f, cargo_type_in_veh){
	COAL : gfx_newsteel_coal_f ;
	COKE : gfx_newsteel_coal_f ;
	IORE : gfx_newsteel_ore_f ;
	PORE : gfx_newsteel_ore_f ;
	SAND : gfx_newsteel_sand_f ;
	SULP : gfx_newsteel_sand_f ;
	gfx_newsteel_other_f ;
}

switch(FEAT_TRAINS, SELF, sw_newsteel_cargo_amount_check, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_newsteel_cargo_check_h ;
	51..100	: sw_newsteel_cargo_check_f ;
}

switch(FEAT_TRAINS, SELF, sw_newsteel_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_newsteel ;
	1 : sw_newsteel_cargo_amount_check ;
}







item (FEAT_TRAINS, item_newsteel, 10023) {
	property {
		name: 							string(STR_NAME_MCO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				6;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED);
		cargo_allow_refit:				[COAL, IORE, AORE, COKE, FERT, GRVL, LIME, MNO2, NITR, PHOS, PORE, SCMT, SGBT, SGCN, SLAG, SULP, STEL, PAPR, BEER, BDMT, BOOM, BRCK, CERA, COPR, DYES, ENSP, FICR, FMSP, GLAS, IRON, METL, MNSP, NICK, NUTS, PIPE, RCYC, VPTS, WDPR, WOOL, SCRP, SCMT, RCYC];
		loading_speed:					8;
		cost_factor:					4;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							50 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					21;
		weight:							11 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_newsteel_sprite_stack;
		purchase:						gfx_newsteel_purchase;
}
}
































































# 1 "rukts.pnml" 3
# 1 "src/WAGON/hoppers.pnml" 1
//Hoppers


//CGO

spriteset(gfx_chv,		"gfx/WAGON/wagons.png"){template_5_4(165,250)}
spriteset(gfx_chv_purch,"gfx/WAGON/wagons.png"){template_purchase(297,367)}


switch(FEAT_TRAINS, SELF, sw_cgo_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}

item (FEAT_TRAINS, item_cgo, 10008) {
	property {
		name: 							string(STR_NAME_CGO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1940, 1, 1);
		model_life:						20;
		retire_early:					1;
		vehicle_life:					25;
		reliability_decay:				9;
		refittable_cargo_classes:		bitmask(CC_POWDERIZED, CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_NON_POURABLE, CC_PIECE_GOODS);
		cargo_allow_refit:				[BEAN, CERE, OLSD, POTA, QLME, RCYC, SASH, SULP, WOOL, GRAI, WHEA, MAIZ, FICR];
		loading_speed:					6;
		cost_factor:					6;
		running_cost_factor:			12;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							50 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				GRAI;
		cargo_capacity:					20;
		weight:							12 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_chv;
		purchase:						gfx_chv_purch;
		colour_mapping:					sw_cgo_col_check;
	}
}


//CHV


item (FEAT_TRAINS, item_chv, 10009) {
	property {
		name: 							string(STR_NAME_CHV);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1962, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_POWDERIZED, CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_NON_POURABLE, CC_PIECE_GOODS);
		cargo_allow_refit:				[BEAN, CERE, OLSD, POTA, QLME, RCYC, SASH, SULP, WOOL, GRAI, WHEA, MAIZ, FICR];
		loading_speed:					7;
		cost_factor:					10;
		running_cost_factor:			10;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				GRAI;
		cargo_capacity:					24;
		weight:							16 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_chv;
		purchase:						gfx_chv_purch;
		colour_mapping:					sw_cgo_col_check;
	}
}





//HTO

spriteset(gfx_hto,			"gfx/WAGON/wagons.png"){template_5_4(100,250)}
spriteset(gfx_hto_coal_h,	"gfx/WAGON/wagons.png"){template_5_4(100,268)}
spriteset(gfx_hto_coal_f,	"gfx/WAGON/wagons.png"){template_5_4(165,268)}
spriteset(gfx_hto_ore_h,	"gfx/WAGON/wagons.png"){template_5_4(100,286)}
spriteset(gfx_hto_ore_f,	"gfx/WAGON/wagons.png"){template_5_4(165,286)}
spriteset(gfx_hto_sand_h,	"gfx/WAGON/wagons.png"){template_5_4(100,304)}
spriteset(gfx_hto_sand_f,	"gfx/WAGON/wagons.png"){template_5_4(165,304)}
spriteset(gfx_hto_stone_h,	"gfx/WAGON/wagons.png"){template_5_4(100,322)}
spriteset(gfx_hto_stone_f,	"gfx/WAGON/wagons.png"){template_5_4(165,322)}

spriteset(gfx_hto_purch,	"gfx/WAGON/wagons.png"){template_purchase(297,381)}


switch(FEAT_TRAINS, SELF, sw_hto_cargo_check_h, cargo_type_in_veh){
	COAL : gfx_hto_coal_h ;
	COKE : gfx_hto_coal_h ;
	IORE : gfx_hto_ore_h ;
	BEAN : gfx_hto_ore_h ;
	PORE : gfx_hto_ore_h ;
	CASS : gfx_hto_sand_h ;
	SAND : gfx_hto_sand_h ;
	gfx_hto_stone_h ;
}

switch(FEAT_TRAINS, SELF, sw_hto_cargo_check_f, cargo_type_in_veh){
	COAL : gfx_hto_coal_f ;
	COKE : gfx_hto_coal_f ;
	IORE : gfx_hto_ore_f ;
	BEAN : gfx_hto_ore_f ;
	PORE : gfx_hto_ore_f ;
	CASS : gfx_hto_sand_f ;
	SAND : gfx_hto_sand_f ;
	gfx_hto_stone_f ;
}


switch(FEAT_TRAINS, SELF, sw_hto_load_check, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_hto_cargo_check_h ;
	51..100	: sw_hto_cargo_check_f ;
}

switch(FEAT_TRAINS, SELF, sw_hto_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_hto ;
	1 : sw_hto_load_check ;
}


/* random_switch(FEAT_TRAINS, PARENT, sw_hto_col_random){
	2 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_WHITE, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_DARK_GREEN) ;
} */

switch(FEAT_TRAINS, SELF, sw_hto_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}


item (FEAT_TRAINS, item_hto, 10010) {
	property {
		name: 							string(STR_NAME_HTO);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						35;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_BULK);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED, CC_NON_POURABLE, CC_COVERED, CC_PIECE_GOODS);
		cargo_allow_refit:				[COAL, IORE, AORE, BEAN, CASS, COKE, GRVL, LIME, MNO2, NITR, PHOS, PORE, SAND, SGBT, SGCN, SLAG];
		loading_speed:					8;
		cost_factor:					16;
		running_cost_factor:			16;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					22;
		weight:							18 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_hto_spr_stack;
		purchase:						gfx_hto_purch;
		colour_mapping:					sw_hto_col_check;
	}
}



//HHA







//SSA

spriteset(gfx_ssa_e,		"gfx/WAGON/wagons.png"){template_5_4(0,375)}
spriteset(gfx_ssa_h,		"gfx/WAGON/wagons.png"){template_5_4(0,400)}
spriteset(gfx_ssa_f,		"gfx/WAGON/wagons.png"){template_5_4(0,425)}

spriteset(gfx_ssa_purch,	"gfx/WAGON/wagons.png"){template_purchase(297, 451)}

switch(FEAT_TRAINS, SELF, sw_ssa_gfx_load_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_ssa_f ;
	51..100	: gfx_ssa_f ;
	gfx_ssa_e ;
}

switch(FEAT_TRAINS, SELF, sw_ssa_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}

item (FEAT_TRAINS, item_ssa, 10011) {
	property {
		name: 							string(STR_NAME_SSA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1978, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				13;
		refittable_cargo_classes:		bitmask(CC_NON_POURABLE);
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_allow_refit:				[SLAG, SCMT, SCRP, RCYC];
		loading_speed:					10;
		cost_factor:					20;
		running_cost_factor:			14;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				SCMT;
		cargo_capacity:					32;
		weight:							18 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_ssa_gfx_load_check;
		purchase:						gfx_ssa_purch;
		colour_mapping:					sw_ssa_col_check;
	}
}


if (vehicle_selection < 2){
item (FEAT_TRAINS, item_ssa, 10011){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


//PGA


spriteset(gfx_pga,			"gfx/WAGON/wagons.png"){template_5_4(0,75)}
spriteset(gfx_pga_ore_h,	"gfx/WAGON/wagons.png"){template_5_4(0,150)}
spriteset(gfx_pga_ore_f,	"gfx/WAGON/wagons.png"){template_5_4(0,175)}
spriteset(gfx_pga_stone_h,	"gfx/WAGON/wagons.png"){template_5_4(0,200)}
spriteset(gfx_pga_stone_f,	"gfx/WAGON/wagons.png"){template_5_4(0,225)}

spriteset(gfx_pga_purch,	"gfx/WAGON/wagons.png"){template_purchase(297,423)}

switch(FEAT_TRAINS, SELF, sw_pga_ore_load_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_pga_ore_h ;
	51..100	: gfx_pga_ore_f ;
	0 : gfx_pga ;
}

switch(FEAT_TRAINS, SELF, sw_pga_stone_load_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_pga_stone_h ;
	51..100	: gfx_pga_stone_f ;
	0 : gfx_pga ;
}

switch(FEAT_TRAINS, SELF, sw_pga_cargo_check, cargo_type_in_veh){
	IORE : sw_pga_ore_load_check ;
	PORE : sw_pga_ore_load_check ;
	SAND : sw_pga_ore_load_check ;
	SLAG : sw_pga_ore_load_check ;
	sw_pga_stone_load_check ;
}




switch(FEAT_TRAINS, SELF, sw_pga_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_WHITE, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}


item (FEAT_TRAINS, item_pga, 10013) {
	property {
		name: 							string(STR_NAME_PGA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1980, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					25;
		reliability_decay:				14;
		refittable_cargo_classes:		bitmask(CC_BULK);
		non_refittable_cargo_classes:	bitmask(CC_POWDERIZED, CC_NON_POURABLE, CC_COVERED, CC_PIECE_GOODS);
		cargo_allow_refit:				[IORE, AORE, COKE, GRVL, LIME, MNO2, NITR, PHOS, PORE, SAND, SLAG];
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		loading_speed:					10;
		cost_factor:					24;
		running_cost_factor:			40;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				IORE;
		cargo_capacity:					25;
		weight:							17 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_pga_cargo_check;
		purchase:						gfx_pga_purch;
		colour_mapping:					sw_pga_col_check;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_pga, 10013){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/tankers.pnml" 1
//Tankers



//ZRR 10020

spriteset(gfx_zrr,			"gfx/WAGON/wagons.png"){template_5_4(425,100)}
spriteset(gfx_zrr_logo,		"gfx/WAGON/wagons.png"){template_5_4(425,125)}
spriteset(gfx_zrr_grey,		"gfx/WAGON/wagons.png"){template_5_4(425,150)}
spriteset(gfx_zrr_black,	"gfx/WAGON/wagons.png"){template_5_4(425,175)}
spriteset(gfx_zrr_white,	"gfx/WAGON/wagons.png"){template_5_4(425,200)}
spriteset(gfx_zrr_purch,	"gfx/WAGON/wagons.png"){template_purchase(575,75)}

//Refit text

switch(FEAT_TRAINS, SELF, sw_zrr_gfx_manual, cargo_subtype){
	0 : gfx_zrr_logo ;
	1 : gfx_zrr_grey ;
	2 : gfx_zrr_black ;
	3 : gfx_zrr_white ;
	gfx_zrr ;
}

switch(FEAT_TRAINS, SELF, sw_zrr_gfx_manual_check, livery_choice){
	1 : sw_zrr_gfx_manual ;
	gfx_zrr ;
}

random_switch(FEAT_TRAINS, PARENT, sw_zrr_colours_random){
	3 : palette_2cc(COLOUR_WHITE, COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_BLUE, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_zrr_colours_manual_check, livery_choice){
	1 : palette_2cc(company_colour2, COLOUR_DARK_GREEN) ;
	sw_zrr_colours_random ;
}

switch(FEAT_TRAINS, SELF, sw_zrr_colours_2cc_check, colour_scheme_2){
	1 : sw_zrr_colours_manual_check ;
	palette_2cc(company_colour2, COLOUR_DARK_GREEN) ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_zrr_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_COMPANY) ;
	1 : string(STR_COLOUR_GREY) ;
	2 : string(STR_COLOUR_BLACK) ;
	3 : string(STR_COLOUR_WHITE_STRIPE) ;
	4 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_zrr_refit_text_check, livery_choice){
	1 : sw_zrr_refit_text ;
	CB_RESULT_NO_TEXT ;
}

item (FEAT_TRAINS, item_zrr, 10020) {
	property {
		name: 							string(STR_NAME_ZZA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						25;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				14;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		//non_refittable_cargo_classes:	bitmask();
		//cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		//cargo_disallow_refit:			[LVST] ;
		loading_speed:					10;
		cost_factor:					35;
		running_cost_factor:			57;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							50 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					23;
		weight:							18 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_zrr_gfx_manual_check;
		purchase:						gfx_zrr_purch;
		colour_mapping:					sw_zrr_colours_2cc_check;
		cargo_subtype_text:				sw_zrr_refit_text_check;
}
}


//PCA id 10015

spriteset(gfx_pca,			"gfx/WAGON/wagons.png"){template_5_4(0,250)}
spriteset(gfx_pca_purch,	"gfx/WAGON/wagons.png"){template_purchase(297,437)}

random_switch(FEAT_TRAINS, PARENT, sw_pca_col_random){
	3 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_pca_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_DARK_GREEN) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour2, COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_pca_colours_manual_check, livery_choice){
	1 : sw_pca_colours_manual ;
	sw_pca_col_random ;
}

switch(FEAT_TRAINS, SELF, sw_pca_colours_2cc_check, colour_scheme_2){
	1 : sw_pca_colours_manual_check ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_pca_refit_text, cargo_subtype){
	0 : string(STR_COLOUR_GREY) ;
	1 : string(STR_COLOUR_RED) ;
	2 : string(STR_COLOUR_YELLOW) ;
	3 : string(STR_COLOUR_DKBLUE) ;
	4 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_pca_refit_text_check, livery_choice){
	1 : sw_pca_refit_text ;
	CB_RESULT_NO_TEXT ;
}



item (FEAT_TRAINS, item_pca, 10015) {
	property {
		name: 							string(STR_NAME_PCA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1975, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					35;
		reliability_decay:				12;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		//non_refittable_cargo_classes:	bitmask();
		//cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		//cargo_disallow_refit:			[LVST] ;
		loading_speed:					15;
		cost_factor:					25;
		running_cost_factor:			46;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					30;
		weight:							15 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_pca;
		purchase:						gfx_pca_purch;
		colour_mapping:					sw_pca_colours_2cc_check;
		cargo_subtype_text:				sw_pca_refit_text_check;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_pca, 10015){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}







//TEA 10021

spriteset(gfx_tea_white,		"gfx/WAGON/wagons.png"){template_7_4_2(150,475)}
spriteset(gfx_tea_white_stripe,	"gfx/WAGON/wagons.png"){template_7_4_2(150,500)}
spriteset(gfx_tea_black,		"gfx/WAGON/wagons.png"){template_7_4_2(150,525)}
spriteset(gfx_tea_black_stripe,	"gfx/WAGON/wagons.png"){template_7_4_2(150,550)}
spriteset(gfx_tea_purch,		"gfx/WAGON/wagons.png"){template_purchase(297,465)}



random_switch(FEAT_TRAINS, PARENT, sw_tea_white_random){
	2 : gfx_tea_white_stripe ;
	1 : gfx_tea_white ;
}

random_switch(FEAT_TRAINS, PARENT, sw_tea_black_random){
	2 : gfx_tea_black ;
	1 : gfx_tea_black_stripe ;
}


switch(FEAT_TRAINS, SELF, sw_tea_cargo_check, cargo_type_in_veh){
	RUBR : sw_tea_white_random ;
	WATR : sw_tea_white_random ;
	BEER : sw_tea_white_random ;
	EOIL : sw_tea_white_random ;
	MILK : sw_tea_white_random ;
	sw_tea_black_random ;
}

switch(FEAT_TRAINS, SELF, sw_tea_gfx_manual, cargo_subtype){
	0 : gfx_tea_white ;
	2 : gfx_tea_black ;
	3 : gfx_tea_black_stripe ;
	gfx_tea_white_stripe ;
}

switch(FEAT_TRAINS, SELF, sw_tea_manual_check, livery_choice){
	1 : sw_tea_gfx_manual ;
	sw_tea_cargo_check ;
}


switch(FEAT_TRAINS, SELF, sw_tea_col_cargo_check, cargo_type_in_veh){
	RUBR : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	WATR : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	BEER : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	EOIL : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	MILK : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_tea_colours_manual, cargo_subtype){
	0..1 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2..3 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(company_colour2, COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_tea_colours_manual_check, livery_choice){
	1 : sw_tea_colours_manual ;
	sw_tea_col_cargo_check ;
}

switch(FEAT_TRAINS, SELF, sw_tea_colours_2cc_check, colour_scheme_2){
	1 : sw_tea_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_tea_refit_text, cargo_subtype){
	0 : string(STR_COLOUR_WHITE) ;
	1 : string(STR_COLOUR_WHITE_STRIPE) ;
	2 : string(STR_COLOUR_BLACK) ;
	3 : string(STR_COLOUR_BLACK_STRIPE) ;
	4 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_tea_refit_text_check, livery_choice){
	1 : sw_tea_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_tea, 10021) {
	property {
		name: 							string(STR_NAME_TEA);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1970, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_HAZARDOUS);
		//cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		cargo_disallow_refit:			[CLAY] ;
		loading_speed:					20;
		cost_factor:					75;
		running_cost_factor:			100;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							80 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		//default_cargo_type:				COAL;
		cargo_capacity:					45;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							7;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_tea_manual_check;
		purchase:						gfx_tea_purch;
		purchase_colour_mapping:		palette_2cc(company_colour1, COLOUR_YELLOW);
		colour_mapping:					sw_tea_colours_2cc_check;
		cargo_subtype_text:				sw_tea_refit_text_check;
}
}







//TEA 10036

spriteset(gfx_tea_2_white,			"gfx/WAGON/wagons.png"){template_8_4_2(425,350)}
spriteset(gfx_tea_2_2cc,			"gfx/WAGON/wagons.png"){template_8_4_2(425,325)}
spriteset(gfx_tea_2_black_stripe,	"gfx/WAGON/wagons.png"){template_8_4_2(425,300)}
spriteset(gfx_tea_2_purch,			"gfx/WAGON/wagons.png"){template_purchase(425,275)}



switch(FEAT_TRAINS, SELF, sw_tea_2_cargo_check, cargo_type_in_veh){
	RUBR : gfx_tea_2_white ;
	WATR : gfx_tea_2_white ;
	BEER : gfx_tea_2_white ;
	EOIL : gfx_tea_2_white ;
	MILK : gfx_tea_2_white ;
	gfx_tea_2_black_stripe ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_gfx_manual, cargo_subtype){
	1 : gfx_tea_2_white ;
	2 : gfx_tea_2_black_stripe ;
	gfx_tea_2_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_manual_check, livery_choice){
	1 : sw_tea_2_gfx_manual ;
	sw_tea_2_cargo_check ;
}


switch(FEAT_TRAINS, SELF, sw_tea_2_col_cargo_check, cargo_type_in_veh){
	RUBR : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	WATR : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	BEER : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	EOIL : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	MILK : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	1	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	2	: palette_2cc(COLOUR_YELLOW, COLOUR_GREY) ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_colours_manual_check, livery_choice){
	1 : sw_tea_2_colours_manual ;
	sw_tea_2_col_cargo_check ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_colours_2cc_check, colour_scheme_2){
	1 : sw_tea_2_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_tea_2_refit_text, cargo_subtype){
	0 : string(STR_COLOUR_WHITE) ;
	1 : string(STR_COLOUR_WHITE_STRIPE) ;
	2 : string(STR_COLOUR_BLACK_STRIPE) ;
	3 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_tea_2_refit_text_check, livery_choice){
	1 : sw_tea_2_refit_text ;
	CB_RESULT_NO_TEXT ;
}




item (FEAT_TRAINS, item_tea_2, 10036) {
	property {
		name: 							string(STR_NAME_TEA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1965, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		//cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, FRUT, SUGR, BEER, DYES, FERT, FMSP, JAVA, NUTS, PLAS, VPTS, FISH, MILK, ZINC];
		cargo_disallow_refit:			[CLAY] ;
		loading_speed:					20;
		cost_factor:					75;
		running_cost_factor:			100;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							80 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				OIL_;
		cargo_capacity:					65;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_tea_2_manual_check;
		purchase:						gfx_tea_2_purch;
		purchase_colour_mapping:		palette_2cc(company_colour1, COLOUR_YELLOW);
		colour_mapping:					sw_tea_2_colours_2cc_check;
		cargo_subtype_text:				sw_tea_2_refit_text_check;
}
}












//OLD TANK 10031

spriteset(gfx_oldtank,			"gfx/WAGON/wagons.png"){template_4_4		(425,75	)}
spriteset(gfx_oldtank_2cc,		"gfx/WAGON/wagons.png"){template_4_4		(425,50	)}

spriteset(gfx_oldtank_purchase,	"gfx/WAGON/wagons.png"){template_purchase	(575,50)}


switch(FEAT_TRAINS, SELF, sw_oldtank_manual, cargo_subtype){
	0 : gfx_oldtank ;
	gfx_oldtank_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_oldtank_manual_check, livery_choice){
	1 : sw_oldtank_manual ;
	gfx_oldtank_2cc ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_oldtank_refit_text, cargo_subtype){
	 0 : string(STR_COLOUR_BLACK) ;
	 1 : string(STR_LIVER_COMP_COLOURS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_oldtank_refit_text_check, livery_choice){
	1 : sw_oldtank_refit_text ;
	CB_RESULT_NO_TEXT ;
}



item (FEAT_TRAINS, item_oldtank, 10031) {
	property {
		name: 							string(STR_NAME_STEEL_TANK);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1860, 1, 1);
		model_life:						60;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				29;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		loading_speed:					10;
		cost_factor:					4;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							30 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				OIL_;
		cargo_capacity:					15;
		weight:							8 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_oldtank_manual_check;
		purchase:						gfx_oldtank_purchase;
		cargo_subtype_text:				sw_oldtank_refit_text_check;
}
}








//ZRV 10030

spriteset(gfx_zrv,			"gfx/WAGON/wagons.png"){template_4_4	(500,0	)}
spriteset(gfx_zrv_black,	"gfx/WAGON/wagons.png"){template_4_4	(500,25	)}
spriteset(gfx_zrv_2cc,		"gfx/WAGON/wagons.png"){template_4_4	(500,50	)}

spriteset(gfx_zrv_purchase,"gfx/WAGON/wagons.png"){template_purchase(575,0	)}



switch(FEAT_TRAINS, SELF, sw_zrv_gfx_manual, cargo_subtype){
	 0 : gfx_zrv ;
	 1 : gfx_zrv_black ;
	 gfx_zrv_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_zrv_gfx_manual_check, livery_choice){
	1 : sw_zrv_gfx_manual ;
	gfx_zrv_2cc ;
}




//Refit text


switch(FEAT_TRAINS, SELF, sw_zrv_refit_text, cargo_subtype){
	 0 : string(STR_COLOUR_WHITE) ;
	 1 : string(STR_COLOUR_BLACK) ;
	 2 : string(STR_LIVER_COMP_COLOURS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_zrv_refit_text_check, livery_choice){
	1 : sw_zrv_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_zrv_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(company_colour1, company_colour2) ;
}


switch(FEAT_TRAINS, SELF, sw_zrv_colours_manual_check, livery_choice){
	1 : sw_zrv_colours_manual ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_zrv_colours_2cc_check, colour_scheme_2){
	1 : sw_zrv_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_zrv, 10030) {
	property {
		name: 							string(STR_NAME_ZRV);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1910, 1, 1);
		model_life:						60;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				9;
		refittable_cargo_classes:		bitmask(CC_LIQUID, CC_POWDERIZED, CC_COVERED);
		loading_speed:					10;
		cost_factor:					4;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							40 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				OIL_;
		cargo_capacity:					23;
		weight:							11 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_zrv_gfx_manual_check;
		purchase:						gfx_zrv_purchase;
		cargo_subtype_text:				sw_zrv_refit_text_check;
		colour_mapping:					sw_zrv_colours_2cc_check;
}
}












# 1 "rukts.pnml" 3
# 1 "src/WAGON/flatbeds.pnml" 1
//Flat beds

spriteset(gfx_pxa,			"gfx/WAGON/wagons.png"){template_6_4(0,450)}
spriteset(gfx_pxa_high,		"gfx/WAGON/wagons.png"){template_6_4(0,475)}
spriteset(gfx_pxa_low,		"gfx/WAGON/wagons.png"){template_6_4(73,475)}

spriteset(gfx_pxa_vehicle,	"gfx/WAGON/wagons.png"){template_6_8(0,500)}
spriteset(gfx_pxa_vehicle_r,"gfx/WAGON/wagons.png"){template_6_8_rev(0,500)}
spriteset(gfx_pxa_general,	"gfx/WAGON/wagons.png"){template_6_4(0,525)}
spriteset(gfx_pxa_wood,		"gfx/WAGON/wagons.png"){template_6_4(0,550)}
spriteset(gfx_pxa_steel,	"gfx/WAGON/wagons.png"){template_6_4(73,525)}
spriteset(gfx_pxa_glass,	"gfx/WAGON/wagons.png"){template_6_4(73,550)}

spriteset(gfx_pxa_purch,	"gfx/WAGON/wagons.png"){template_purchase(73,450)}


switch(FEAT_TRAINS, PARENT, sw_pxa_veh_rev_check, vehicle_is_reversed){ 1 : gfx_pxa_vehicle_r ; gfx_pxa_vehicle ; }


random_switch(FEAT_TRAINS, SELF, sw_pxa_base_random, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	2 : gfx_pxa ;
	2 : gfx_pxa ;
	1 : gfx_pxa_low ;
}

switch(FEAT_TRAINS, SELF, sw_pxa_base_decider, cargo_type_in_veh){
	WOOD : gfx_pxa_high ;
	STEL : gfx_pxa_low ;
	COPR : gfx_pxa_low ;
	METL : gfx_pxa_low ;
	NICK : gfx_pxa_low ;
	SCMT : gfx_pxa_low ;
	ZINC : gfx_pxa_low ;
	PIPE : gfx_pxa ;
	GOOD : gfx_pxa ;
	GLAS : gfx_pxa ;
	WDPR : gfx_pxa ;
	VEHI : gfx_pxa ;
	VBOD : gfx_pxa ;
	MNSP : gfx_pxa ;
	ENSP : gfx_pxa ;
	sw_pxa_base_random ;
}


random_switch(FEAT_TRAINS, SELF, sw_pxa_cargo_random, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	dependent : sw_pxa_base_random ;
	2 : gfx_pxa_general ;
	2 : gfx_pxa_glass ;
	1 : gfx_pxa_steel ;
}

switch(FEAT_TRAINS, SELF, sw_pxa_cargo_type_check, cargo_type_in_veh){
	WOOD : gfx_pxa_wood ;
	STEL : gfx_pxa_steel ;
	COPR : gfx_pxa_steel ;
	METL : gfx_pxa_steel ;
	NICK : gfx_pxa_steel ;
	SCMT : gfx_pxa_steel ;
	ZINC : gfx_pxa_steel ;
	PIPE : gfx_pxa_general ;
	GOOD : gfx_pxa_general ;
	WDPR : gfx_pxa_general ;
	GLAS : gfx_pxa_glass ;
	VEHI : sw_pxa_veh_rev_check ;
	VBOD : sw_pxa_veh_rev_check ;
	MNSP : sw_pxa_veh_rev_check ;
	ENSP : sw_pxa_veh_rev_check ;
	sw_pxa_cargo_random ;
}


switch(FEAT_TRAINS, SELF, sw_pxa_cargo_check, cargo_count > 0){
	1 : sw_pxa_cargo_type_check ;
}

switch(FEAT_TRAINS, SELF, sw_pxa_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_pxa_base_decider ;
	1 : sw_pxa_cargo_check ;
}


item (FEAT_TRAINS, item_rrv, 10017) {
	property {
		name: 							string(STR_NAME_RRV);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_PIECE_GOODS, CC_OVERSIZED);
		non_refittable_cargo_classes:	bitmask(CC_REFRIGERATED, CC_NON_POURABLE, CC_BULK);
		cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, BEER, FERT, FMSP, PLAS, VPTS, ZINC, VBOD];
		cargo_disallow_refit:			[LVST] ;
		loading_speed:					10;
		cost_factor:					18;
		running_cost_factor:			26;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							65 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_capacity:					24;
		weight:							18 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							6;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_pxa_spr_stack;
		purchase:						gfx_pxa_purch;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_rrv, 10017){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



item (FEAT_TRAINS, item_pxa, 10018) {
	property {
		name: 							string(STR_NAME_PXA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1972, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				15;
		refittable_cargo_classes:		bitmask(CC_PIECE_GOODS, CC_OVERSIZED);
		non_refittable_cargo_classes:	bitmask(CC_REFRIGERATED, CC_NON_POURABLE, CC_BULK);
		cargo_allow_refit:				[GOOD, WOOD, STEL, PAPR, BDMT, BOOM, BRCK, CERA, COPR, ENSP, GLAS, METL, NICK, PIPE, WDPR, SCMT, MNSP, FOOD, BEER, FERT, FMSP, PLAS, VPTS, ZINC, VBOD];
		cargo_disallow_refit:			[LVST] ;
		loading_speed:					12;
		cost_factor:					24;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							80 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_capacity:					28;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							6;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_pxa_spr_stack;
		purchase:						gfx_pxa_purch;
}
}






//OBA 10026

spriteset(gfx_oba						, "gfx/WAGON/wagons.png"	){	template_6_4		(175,750)}
spriteset(gfx_oba_half					, "gfx/WAGON/wagons.png"	){	template_6_4		(175,775)}
spriteset(gfx_oba_full					, "gfx/WAGON/wagons.png"	){	template_6_4		(175,800)}

spriteset(gfx_oba_purchase				, "gfx/WAGON/wagons.png"	){	template_purchase	(250,750)}

switch(FEAT_TRAINS, SELF, sw_oba_cargo_count, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_oba_half ;
	51..100 : gfx_oba_full ;
	gfx_oba ;
}

switch(FEAT_TRAINS, SELF, sw_oba_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_oba, 10026) {
	property {
		name: 							string(STR_NAME_OBA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1980, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				10;
		cargo_allow_refit:				[WOOD, TWOD, WDPR];
		loading_speed:					17;
		cost_factor:					30;
		running_cost_factor:			36;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_capacity:					32;
		weight:							22 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							6;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_oba_cargo_count;
		purchase:						gfx_oba_purchase;
		colour_mapping:					sw_oba_colours_2cc_check;
}
}

# 1 "rukts.pnml" 3
# 1 "src/WAGON/Flask.pnml" 1
//Nuclear flask


//Spritesets
spriteset(gfx_flask           , "gfx/WAGON/flask.png"){template_6_4(157,20)}
spriteset(gfx_flask_container , "gfx/WAGON/flask.png"){template_6_4(157,40)}
spriteset(gfx_flask_light     , "gfx/WAGON/flask.png"){template_6_8(157,60)}
spriteset(gfx_flask_purchase  , "gfx/WAGON/flask.png"){template_purchase_short(73,0)}

/*switch(FEAT_TRAINS, SELF, sw_flask_container_decider, cargo_count > 0){
	1 : gfx_flask_container ;
}*/

switch(FEAT_TRAINS, SELF, sw_flask_light_decider, position_in_consist_from_end){
	0 : gfx_flask_light ;
}


switch(FEAT_TRAINS, SELF, sw_flask_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_flask ;
	1 : gfx_flask_container ;
	2 : sw_flask_light_decider ;
}

switch(FEAT_TRAINS, SELF, sw_flask_colours_auto, current_year){
	1960..1995 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_WHITE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_flask_2cc_check, colour_scheme_2){
	0 : palette_2cc(company_colour1, company_colour2) ;
	sw_flask_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_flask_weight, cargo_count > 0){
	1 : 55 ;
	10 ;
}

item (FEAT_TRAINS, flask_wagon, 10001){
	property{
		name                         : string(STR_NAME_FLASK) ;
		climates_available           : ALL_CLIMATES ;
		introduction_date            : date(1949,1,1) ;
		model_life                   : VEHICLE_NEVER_EXPIRES ;
		refittable_cargo_classes     : bitmask(CC_HAZARDOUS, CC_COVERED) ;
		non_refittable_cargo_classes : bitmask(CC_OVERSIZED, CC_NON_POURABLE, CC_BULK, CC_LIQUID) ;
		cargo_allow_refit            : [URAN, NWST, SULP] ;
		loading_speed                : 10 ;
		cost_factor                  : 100 ;
		running_cost_factor          : 150 ;
		running_cost_base            : RUNNING_COST_NONE ;
		sprite_id                    : SPRITE_ID_NEW_TRAIN ;
		speed                        : 60 mph ;
		misc_flags                   : bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		refit_cost                   : 0 ;
		track_type                   : RAIL ;
		ai_special_flag              : AI_FLAG_CARGO ;
		power                        : 0 hp ;
		dual_headed                  : 0 ;
		default_cargo_type           : URAN ;
		cargo_capacity               : 20 ;
		weight                       : 20 ton ;
		length                       : 6 ;
	}
	graphics{
		default        : sw_flask_spritestack ;
		purchase       : gfx_flask_purchase ;
		colour_mapping : sw_flask_2cc_check ;
		//weight         : sw_flask_weight ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/intermodal.pnml" 1
//Intermodal container transport

//Spritesets

spriteset(gfx_container_empty          , "gfx/WAGON/intermodal.png"){ template_Mk2_single(  0,125) }
spriteset(gfx_container_double         , "gfx/WAGON/intermodal.png"){ template_Mk2_double(  0,150) }
spriteset(gfx_container_double_rev     , "gfx/WAGON/intermodal.png"){ template_Mk2_double_reverse(  0,150) }
spriteset(gfx_container_double_full    , "gfx/WAGON/intermodal.png"){ template_Mk2_double(  0,175) }
spriteset(gfx_container_double_full_rev, "gfx/WAGON/intermodal.png"){ template_Mk2_double_reverse(  0,175) }
spriteset(gfx_container_single         , "gfx/WAGON/intermodal.png"){ template_Mk2_single( 0,200) }

spriteset(gfx_container_purchase   , "gfx/WAGON/intermodal.png"){ template_purchase( 89,125) }


//Graphics switches

//Cargo count checks

switch(FEAT_TRAINS, PARENT, sw_container_double_rev_check, vehicle_is_reversed){
	1 : gfx_container_double_rev ;
	gfx_container_double ;
}

switch(FEAT_TRAINS, PARENT, sw_container_double_full_rev_check, vehicle_is_reversed){
	1 : gfx_container_double_full_rev ;
	gfx_container_double_full ;
}

switch(FEAT_TRAINS, SELF, sw_container_double_load_check, cargo_count * (100 / cargo_capacity)){
	1..49 : sw_container_double_rev_check ;
	50..100  : gfx_container_double_full ;
	gfx_container_empty ;
}

switch(FEAT_TRAINS, SELF, sw_container_single_load_check, cargo_count){
	0 : gfx_container_empty ;
	gfx_container_single ;
}


//Livery checks

random_switch(FEAT_TRAINS, SELF, sw_container_auto, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	2 : sw_container_double_load_check ;
	1 : sw_container_single_load_check ;
}

switch(FEAT_TRAINS, SELF, sw_container_manual, cargo_subtype){
	1 : sw_container_single_load_check ;
	2 : sw_container_double_load_check ;
	sw_container_auto ;
}

switch(FEAT_TRAINS, SELF, sw_container_manual_check, livery_choice){
	1 : sw_container_manual ;
	sw_container_auto ;
}


//Colours

random_switch(FEAT_TRAINS, SELF, sw_container_colours_single, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	2 : palette_1cc(COLOUR_DARK_BLUE) ;
	1 : palette_1cc(COLOUR_RED) ;
	1 : palette_1cc(COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_container_colours_double, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_ORANGE) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_BLUE) ;
	1 : palette_2cc(COLOUR_WHITE, COLOUR_GREEN) ;
	1 : palette_2cc(COLOUR_GREEN, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_ORANGE, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_GREY) ;
	1 : palette_2cc(COLOUR_CREAM, COLOUR_MAUVE) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_MAUVE, COLOUR_BLUE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

/*
COLOUR_MAUVE
COLOUR_CREAM
COLOUR_YELLOW
COLOUR_BLUE
COLOUR_GREY
*/

//bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)


random_switch(FEAT_TRAINS, SELF, sw_container_colours_auto, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)){
	dependent : sw_container_auto ;
	2 : sw_container_colours_double ;
	1 : sw_container_colours_single ;
}

switch(FEAT_TRAINS, SELF, sw_container_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : sw_container_colours_double ;
	sw_container_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_container_colours_manual_check, livery_choice){
	1 : sw_container_colours_manual ;
	sw_container_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_container_colours_2cc_check, colour_scheme_2){
	1 : sw_container_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_container_refit_text, cargo_subtype){
	0 : string(STR_CONTAINER_MIXED) ;
	1 : string(STR_CONTAINER_LARGE) ;
	2 : string(STR_CONTAINER_SMALL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_container_refit_text_check, livery_choice){
	1 : sw_container_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_container, 10002){
	property{
		name                         : string(STR_NAME_INTERMODAL) ;
		climates_available           : ALL_CLIMATES ;
		introduction_date            : date(1968,1,1) ;
		model_life                   : VEHICLE_NEVER_EXPIRES ;
		refittable_cargo_classes     : bitmask(CC_EXPRESS, CC_COVERED) ;
		non_refittable_cargo_classes : bitmask(CC_BULK) ;
		cargo_allow_refit            : [GOOD, FOOD, VBOD, VPTS] ;
		loading_speed                : 8 ;
		cost_factor                  : 8 ;
		running_cost_factor          : 15 ;
		running_cost_base            : RUNNING_COST_NONE ;
		sprite_id                    : SPRITE_ID_NEW_TRAIN ;
		speed                        : 90 mph ;
		misc_flags                   : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_AUTOREFIT) ;
		refit_cost                   : 0 ;
		track_type                   : RAIL ;
		ai_special_flag              : AI_FLAG_CARGO ;
		power                        : 0 hp ;
		dual_headed                  : 0 ;
		default_cargo_type           : GOOD ;
		cargo_capacity               : 55 ;
		weight                       : 20 ton ;
		length                       : 8 ;
	}
	graphics{
		default                 : sw_container_manual_check ;
		purchase                : gfx_container_purchase ;
		colour_mapping          : sw_container_colours_2cc_check ;
		cargo_subtype_text      : sw_container_refit_text_check ;
	}
}




//Cartic 10028


spriteset(gfx_fqa						, "gfx/WAGON/wagons.png"	){	template_7_4_2		(0	,725)}

spriteset(gfx_fqa_a						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,750)}
spriteset(gfx_fqa_a_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,750)}
spriteset(gfx_fqa_b						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,775)}
spriteset(gfx_fqa_b_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,775)}
spriteset(gfx_fqa_c						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,800)}
spriteset(gfx_fqa_c_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,800)}
spriteset(gfx_fqa_d						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,825)}
spriteset(gfx_fqa_d_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,825)}
spriteset(gfx_fqa_e						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,850)}
spriteset(gfx_fqa_e_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,850)}
spriteset(gfx_fqa_f						, "gfx/WAGON/wagons.png"	){	template_7_8_2		(0	,875)}
spriteset(gfx_fqa_f_rev					, "gfx/WAGON/wagons.png"	){	template_7_8_rev_2	(0	,875)}

spriteset(gfx_fqa_purchase				, "gfx/WAGON/wagons.png"	){	template_purchase	(425,225)}


switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_a,	vehicle_is_reversed	){ 1 : gfx_fqa_a_rev	; gfx_fqa_a	;}
switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_b,	vehicle_is_reversed	){ 1 : gfx_fqa_b_rev	; gfx_fqa_b	;}
switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_c,	vehicle_is_reversed	){ 1 : gfx_fqa_c_rev	; gfx_fqa_c	;}
switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_d,	vehicle_is_reversed	){ 1 : gfx_fqa_d_rev	; gfx_fqa_d	;}
switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_e,	vehicle_is_reversed	){ 1 : gfx_fqa_e_rev	; gfx_fqa_e	;}
switch(FEAT_TRAINS,	PARENT,	sw_fqa_gfx_rev_check_f,	vehicle_is_reversed	){ 1 : gfx_fqa_f_rev	; gfx_fqa_f	;}


switch(FEAT_TRAINS, SELF, sw_fqa_gfx_cargo_count_b, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_fqa_gfx_rev_check_a ;
	51..100 : sw_fqa_gfx_rev_check_b ;
	gfx_fqa ;
}

switch(FEAT_TRAINS, SELF, sw_fqa_gfx_cargo_count_c, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_fqa_gfx_rev_check_a ;
	51..100 : sw_fqa_gfx_rev_check_c ;
	gfx_fqa ;
}



switch(FEAT_TRAINS, SELF, sw_fqa_gfx_cargo_count_e, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_fqa_gfx_rev_check_d ;
	51..100 : sw_fqa_gfx_rev_check_e ;
	gfx_fqa ;
}

switch(FEAT_TRAINS, SELF, sw_fqa_gfx_cargo_count_f, cargo_count * (100 / cargo_capacity)){
	1..50	: sw_fqa_gfx_rev_check_d ;
	51..100 : sw_fqa_gfx_rev_check_f ;
	gfx_fqa ;
}


random_switch(FEAT_TRAINS, SELF, sw_fqa_gfx_random, TRIGGER_VEHICLE_NEW_LOAD){
	1 : sw_fqa_gfx_cargo_count_b ;
	1 : sw_fqa_gfx_cargo_count_c ;
	1 : sw_fqa_gfx_cargo_count_e ;
	1 : sw_fqa_gfx_cargo_count_f ;
}


switch(FEAT_TRAINS, SELF, sw_fqa_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	palette_2cc(company_colour1, company_colour2) ;
}



item (FEAT_TRAINS, item_fqa, 10028) {
	property {
		name: 							string(STR_NAME_FQA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1966, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					35;
		reliability_decay:				15;
		cargo_allow_refit:				[GOOD, VBOD, VPTS, VEHI, ENSP];
		loading_speed:					20;
		cost_factor:					33;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				VEHI;
		cargo_capacity:					70;
		weight:							23 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							7;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_fqa_gfx_random;
		purchase:						gfx_fqa_purchase;
		colour_mapping:					sw_fqa_colours_2cc_check;
	}
}





# 1 "rukts.pnml" 3
# 1 "src/WAGON/monster_box.pnml" 1
//Monster box


//Sprites

spriteset(gfx_mbox			, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0,   0)}
spriteset(gfx_mbox_new		, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0, 150)}
spriteset(gfx_mbox_yeo		, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81, 150)}
spriteset(gfx_mbox_coal_h	, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0,  25)}
spriteset(gfx_mbox_coal_f	, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81,  25)}
spriteset(gfx_mbox_iron_h	, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0,  50)}
spriteset(gfx_mbox_iron_f	, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81,  50)}
spriteset(gfx_mbox_sand_h	, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0,  75)}
spriteset(gfx_mbox_sand_f	, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81,  75)}
spriteset(gfx_mbox_grey_h	, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0, 100)}
spriteset(gfx_mbox_grey_f	, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81, 100)}
spriteset(gfx_mbox_scrap_h	, "gfx/WAGON/monster_box.png"){ template_7_4_2(   0, 125)}
spriteset(gfx_mbox_scrap_f	, "gfx/WAGON/monster_box.png"){ template_7_4_2(  81, 125)}

spriteset(gfx_mbox_purchase	, "gfx/WAGON/monster_box.png"){ template_purchase ( 81 , 0)}


//Switches

switch(FEAT_TRAINS, SELF, sw_mbox_coal_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_coal_h ;
	51..100	: gfx_mbox_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_iron_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_iron_h ;
	51..100	: gfx_mbox_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_sand_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_sand_h ;
	51..100	: gfx_mbox_sand_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_grey_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_grey_h ;
	51..100	: gfx_mbox_grey_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_scrap_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_scrap_h ;
	51..100	: gfx_mbox_scrap_f ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_cargo_check, cargo_type_in_veh){
	COAL : sw_mbox_coal_cargo_check ;
	IORE : sw_mbox_iron_cargo_check ;
	CORE : sw_mbox_iron_cargo_check ;
	PORE : sw_mbox_iron_cargo_check ;
	AORE : sw_mbox_iron_cargo_check ;
	SAND : sw_mbox_sand_cargo_check ;
	GOLD : sw_mbox_sand_cargo_check ;
	CERA : sw_mbox_sand_cargo_check ;
	CERE : sw_mbox_sand_cargo_check ;
	GRAI : sw_mbox_sand_cargo_check ;
	WHEA : sw_mbox_sand_cargo_check ;
	MAIZ : sw_mbox_sand_cargo_check ;
	BEAN : sw_mbox_scrap_cargo_check ;
	SCMT : sw_mbox_scrap_cargo_check ;
	SCRP : sw_mbox_scrap_cargo_check ;
	SLAG : sw_mbox_scrap_cargo_check ;
	sw_mbox_grey_cargo_check ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_mbox_gfx_manual, cargo_subtype){
	3 : gfx_mbox_new ;
	6 : gfx_mbox_yeo ;
	gfx_mbox ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_gfx_manual_check, livery_choice){
	1 : sw_mbox_gfx_manual ;
	gfx_mbox ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mbox_gfx_manual_check ;
	1 : sw_mbox_cargo_check ;
}


//Colours



random_switch(FEAT_TRAINS, PARENT, sw_mbox_colours_random){
	2 : palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_RED , COLOUR_RED) ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_RED , COLOUR_RED) ;
	3 : palette_2cc(COLOUR_GREY , COLOUR_YELLOW) ;
	4 : palette_2cc(COLOUR_DARK_BLUE , COLOUR_YELLOW) ;
	5 : palette_2cc(COLOUR_YELLOW , COLOUR_YELLOW) ;
	6 : palette_2cc(COLOUR_GREY , COLOUR_DARK_BLUE) ;
	7 : palette_2cc(company_colour1, company_colour2) ;
	sw_mbox_colours_random ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_colours_year_check, build_year <= 1995){
	1 : palette_2cc(COLOUR_BROWN, COLOUR_BROWN) ;
	sw_mbox_colours_random ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_colours_manual_check, livery_choice){
	1 : sw_mbox_colours_manual ;
	sw_mbox_colours_year_check ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_colours_2cc_check, colour_scheme_2){
	1 : sw_mbox_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mbox_refit_text, cargo_subtype){
	0 : string(STR_RANDOM_COLOURS) ;
	1 : string(STR_LIVERY_FREIGHTLINER) ;
	2 : string(STR_LIVERY_DBCARGO) ;
	3 : string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	4 : string(STR_LIVERY_GBRF) ;
	5 : string(STR_LIVERY_NETWORK_RAIL) ;
	6 : string(STR_LIVERY_AGGREGATES) ;
	7 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_refit_text_check, livery_choice){
	1 : sw_mbox_refit_text ;
	CB_RESULT_NO_TEXT ;
}

item(FEAT_TRAINS, item_mbox, 10005){
	property{
		name						   : string(STR_NAME_MONSTER_BOX) ;
		misc_flags                     : bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : NO_CLIMATE ;
		introduction_date              : date( 1985, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 40 ;
		cost_factor                    : 50 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 100 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_BULK, CC_NON_POURABLE) ;
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		//cargo_allow_refit              : [COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity                 : 50 ;
		loading_speed                  : 20 ;
		track_type                     : RAIL ;
		power                          : 0 hp ;
		weight                         : 23 ton ;
		speed						   : 80 mph ;
	}
	graphics{
		default				: sw_mbox_sprite_stack ;
		purchase			: gfx_mbox_purchase ;
		colour_mapping		: sw_mbox_colours_2cc_check ;
		cargo_subtype_text	: sw_mbox_refit_text_check ;
	}
}



//HTA 10024

spriteset(gfx_hta						, "gfx/WAGON/wagons.png"	){	template_8_4_2		(725,300)}
spriteset(gfx_hta_gbrf					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(725,325)}


spriteset(gfx_hta_coal					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(725,400)}
spriteset(gfx_hta_iron					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(725,425)}
spriteset(gfx_hta_stone					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(725,450)}

spriteset(gfx_hta_purchase				, "gfx/WAGON/wagons.png"	){	template_purchase	(625,250)}

switch(FEAT_TRAINS, SELF, sw_hta_gfx_manual, cargo_subtype){
	0 : gfx_hta ;
	gfx_hta_gbrf ;
}

switch(FEAT_TRAINS, SELF, sw_hta_gfx_manual_check, livery_choice){
	1 : sw_hta_gfx_manual ;
	gfx_hta ;
}




switch(FEAT_TRAINS, SELF, sw_hta_gfx_cargo_check, cargo_type_in_veh){
	COAL : gfx_hta_coal ;
	COKE : gfx_hta_coal ;
	SLAG : gfx_hta_coal ;
	IORE : gfx_hta_iron ;
	CORE : gfx_hta_iron ;
	PORE : gfx_hta_iron ;
	AORE : gfx_hta_iron ;
	gfx_hta_stone ;
}

switch(FEAT_TRAINS, SELF, sw_hta_gfx_cargo_count, cargo_count * (100 / cargo_capacity)){
	51..100 : sw_hta_gfx_cargo_check ;
}

switch(FEAT_TRAINS, SELF, sw_hta_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_hta_gfx_manual_check ;
	1 : sw_hta_gfx_cargo_count ;
}


switch(FEAT_TRAINS, SELF, sw_hta_col, cargo_subtype){
	0 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	2 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_hta_col_manual_check, livery_choice){
	1 : sw_hta_col ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}
switch(FEAT_TRAINS, SELF, sw_hta_col_2cc_check, colour_scheme_2){
	1 : sw_hta_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_hta_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_EWS) ; //National power
	1 : string(STR_LIVERY_GBRF) ; //Aggregates
	2 : string(STR_LIVERY_FREIGHTLINER) ; //ARC
	3 : string(STR_LIVER_COMP_COLOURS) ; //DB Cargo
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_hta_refit_text_check, livery_choice){
	1 : sw_hta_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_hta, 10024) {
	property {
		name: 							string(STR_NAME_HTA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2000, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				15;
		refittable_cargo_classes:		bitmask(CC_BULK);
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		loading_speed:					20;
		cost_factor:					33;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					70;
		weight:							23 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_hta_gfx_sprite_stack;
		purchase:						gfx_hta_purchase;
		colour_mapping:					sw_hta_col_2cc_check;
		cargo_subtype_text:				sw_hta_refit_text_check;
	}
}



























//JHA 10025

spriteset(gfx_jha						, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,325)}
spriteset(gfx_jha_stripe				, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,350)}
spriteset(gfx_jha_yeo					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,375)}

spriteset(gfx_jha_coal					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,400)}
spriteset(gfx_jha_iron					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,425)}
spriteset(gfx_jha_stone					, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,450)}

spriteset(gfx_jha_purchase				, "gfx/WAGON/wagons.png"	){	template_purchase	(425,250)}

switch(FEAT_TRAINS, SELF, sw_jha_gfx_manual, cargo_subtype){
	0 : gfx_jha_stripe ;
	1 : gfx_jha_yeo ;
	gfx_jha ;
}

switch(FEAT_TRAINS, SELF, sw_jha_gfx_manual_check, livery_choice){
	1 : sw_jha_gfx_manual ;
	gfx_jha ;
}




switch(FEAT_TRAINS, SELF, sw_jha_gfx_cargo_check, cargo_type_in_veh){
	COAL : gfx_jha_coal ;
	COKE : gfx_jha_coal ;
	SLAG : gfx_jha_coal ;
	IORE : gfx_jha_iron ;
	CORE : gfx_jha_iron ;
	PORE : gfx_jha_iron ;
	AORE : gfx_jha_iron ;
	gfx_jha_stone ;
}

switch(FEAT_TRAINS, SELF, sw_jha_gfx_cargo_count, cargo_count * (100 / cargo_capacity)){
	51..100 : sw_jha_gfx_cargo_check ;
}

switch(FEAT_TRAINS, SELF, sw_jha_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_jha_gfx_manual_check ;
	1 : sw_jha_gfx_cargo_count ;
}


switch(FEAT_TRAINS, SELF, sw_jha_col, cargo_subtype){
	0..1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	4 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_jha_col_manual_check, livery_choice){
	1 : sw_jha_col ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}
switch(FEAT_TRAINS, SELF, sw_jha_col_2cc_check, colour_scheme_2){
	1 : sw_jha_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_jha_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_NCB) ; //National power
	1 : string(STR_LIVERY_AGGREGATES) ; //Aggregates
	2 : string(STR_LIVERY_ARC) ; //ARC
	3 : string(STR_LIVERY_DBCARGO) ; //DB Cargo
	4 : string(STR_LIVERY_FREIGHTLINER) ; //Freightliner Green
	5 : string(STR_LIVER_COMP_COLOURS) ; //2cc
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_jha_refit_text_check, livery_choice){
	1 : sw_jha_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_jha, 10025) {
	property {
		name: 							string(STR_NAME_JHA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					38;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_BULK);
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		loading_speed:					15;
		cost_factor:					22;
		running_cost_factor:			28;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					60;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_jha_gfx_sprite_stack;
		purchase:						gfx_jha_purchase;
		colour_mapping:					sw_jha_col_2cc_check;
		cargo_subtype_text:				sw_jha_refit_text_check;
	}
}





//Polybulk 10027

spriteset(gfx_pol						, "gfx/WAGON/wagons.png"	){	template_8_4_2		(625,300)}

spriteset(gfx_pol_purchase				, "gfx/WAGON/wagons.png"	){	template_purchase	(525,250)}



switch(FEAT_TRAINS, SELF, sw_pol_col_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_pol, 10027) {
	property {
		name: 							string(STR_NAME_POL);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					42;
		reliability_decay:				11;
		refittable_cargo_classes:		bitmask(CC_POWDERIZED, CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_NON_POURABLE, CC_PIECE_GOODS);
		cargo_allow_refit:				[BEAN, CERE, OLSD, POTA, QLME, RCYC, SASH, SULP, WOOL, GRAI, WHEA, MAIZ, FICR];
		loading_speed:					10;
		cost_factor:					20;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				GRAI;
		cargo_capacity:					60;
		weight:							20 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_pol;
		purchase:						gfx_pol_purchase;
		colour_mapping:					sw_pol_col_check;
	}
}






//Monster box


//Sprites

spriteset(gfx_mbox_v2			, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0,   0)}
spriteset(gfx_mbox_v2_new		, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0, 150)}
spriteset(gfx_mbox_v2_yeo		, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81, 150)}
spriteset(gfx_mbox_v2_coal_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0,  25)}
spriteset(gfx_mbox_v2_coal_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81,  25)}
spriteset(gfx_mbox_v2_iron_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0,  50)}
spriteset(gfx_mbox_v2_iron_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81,  50)}
spriteset(gfx_mbox_v2_sand_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0,  75)}
spriteset(gfx_mbox_v2_sand_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81,  75)}
spriteset(gfx_mbox_v2_grey_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0, 100)}
spriteset(gfx_mbox_v2_grey_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81, 100)}
spriteset(gfx_mbox_v2_scrap_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0, 125)}
spriteset(gfx_mbox_v2_scrap_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81, 125)}
spriteset(gfx_mbox_v2_bauxite_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(   0, 175)}
spriteset(gfx_mbox_v2_bauxite_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2(  81, 175)}

spriteset(gfx_mbox_v2_purchase	, "gfx/WAGON/monster_box_v2.png"){ template_purchase ( 81 , 0)}


//Switches

switch(FEAT_TRAINS, SELF, sw_mbox_v2_coal_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_coal_h ;
	51..100	: gfx_mbox_v2_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_iron_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_iron_h ;
	51..100	: gfx_mbox_v2_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_sand_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_sand_h ;
	51..100	: gfx_mbox_v2_sand_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_grey_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_grey_h ;
	51..100	: gfx_mbox_v2_grey_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_scrap_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_scrap_h ;
	51..100	: gfx_mbox_v2_scrap_f ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_bauxite_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_mbox_v2_bauxite_h ;
	51..100	: gfx_mbox_v2_bauxite_f ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_v2_cargo_check, cargo_type_in_veh){
	COAL : sw_mbox_v2_coal_cargo_check ;
	IORE : sw_mbox_v2_iron_cargo_check ;
	PORE : sw_mbox_v2_iron_cargo_check ;
	AORE : sw_mbox_v2_bauxite_cargo_check ;
	CORE : sw_mbox_v2_bauxite_cargo_check ;
	SAND : sw_mbox_v2_sand_cargo_check ;
	GOLD : sw_mbox_v2_sand_cargo_check ;
	CERA : sw_mbox_v2_sand_cargo_check ;
	CERE : sw_mbox_v2_sand_cargo_check ;
	GRAI : sw_mbox_v2_sand_cargo_check ;
	WHEA : sw_mbox_v2_sand_cargo_check ;
	MAIZ : sw_mbox_v2_sand_cargo_check ;
	BEAN : sw_mbox_v2_scrap_cargo_check ;
	SCMT : sw_mbox_v2_scrap_cargo_check ;
	SCRP : sw_mbox_v2_scrap_cargo_check ;
	SLAG : sw_mbox_v2_scrap_cargo_check ;
	sw_mbox_v2_grey_cargo_check ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_mbox_v2_gfx_manual, cargo_subtype){
	3 : gfx_mbox_v2_new ;
	6 : gfx_mbox_v2_yeo ;
	gfx_mbox_v2 ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_gfx_manual_check, livery_choice){
	1 : sw_mbox_v2_gfx_manual ;
	gfx_mbox_v2 ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mbox_v2_gfx_manual_check ;
	1 : sw_mbox_v2_cargo_check ;
}


//Colours



random_switch(FEAT_TRAINS, PARENT, sw_mbox_v2_colours_random){
	2 : palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_RED , COLOUR_RED) ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_v2_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_RED , COLOUR_RED) ;
	3 : palette_2cc(COLOUR_GREY , COLOUR_YELLOW) ;
	4 : palette_2cc(COLOUR_DARK_BLUE , COLOUR_YELLOW) ;
	5 : palette_2cc(COLOUR_YELLOW , COLOUR_YELLOW) ;
	6 : palette_2cc(COLOUR_GREY , COLOUR_DARK_BLUE) ;
	7 : palette_2cc(company_colour1, company_colour2) ;
	sw_mbox_v2_colours_random ;
}


switch(FEAT_TRAINS, SELF, sw_mbox_v2_colours_year_check, build_year <= 1995){
	1 : palette_2cc(COLOUR_BROWN, COLOUR_BROWN) ;
	sw_mbox_v2_colours_random ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_colours_manual_check, livery_choice){
	1 : sw_mbox_v2_colours_manual ;
	sw_mbox_v2_colours_year_check ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_colours_2cc_check, colour_scheme_2){
	1 : sw_mbox_v2_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mbox_v2_refit_text, cargo_subtype){
	0 : string(STR_RANDOM_COLOURS) ;
	1 : string(STR_LIVERY_FREIGHTLINER) ;
	2 : string(STR_LIVERY_DBCARGO) ;
	3 : string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	4 : string(STR_LIVERY_GBRF) ;
	5 : string(STR_LIVERY_NETWORK_RAIL) ;
	6 : string(STR_LIVERY_AGGREGATES) ;
	7 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mbox_v2_refit_text_check, livery_choice){
	1 : sw_mbox_v2_refit_text ;
	CB_RESULT_NO_TEXT ;
}

item(FEAT_TRAINS, item_mbox_v2, 10039){
	property{
		name:							string(STR_NAME_MONSTER_BOX) ;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id:						SPRITE_ID_NEW_TRAIN ;
		length:							7 ;
		climates_available:				ALL_CLIMATES ;
		introduction_date:				date(1981, 1, 1) ;
		model_life:						VEHICLE_NEVER_EXPIRES ;
		vehicle_life:					38 ;
		cost_factor:					60 ;
		running_cost_base:				RUNNING_COST_NONE ;
		running_cost_factor:			100 ;
		refit_cost:						0 ;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE) ;
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		//cargo_allow_refit:			[COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity:					75 ;
		loading_speed:					30 ;
		track_type:						RAIL ;
		power:							0 hp ;
		weight:							23 ton ;
		speed:							50 mph ;
	}
	graphics{
		default:				sw_mbox_v2_sprite_stack ;
		purchase:				gfx_mbox_v2_purchase ;
		colour_mapping:			sw_mbox_v2_colours_2cc_check ;
		cargo_subtype_text:		sw_mbox_v2_refit_text_check ;
	}
}



//MWA

spriteset(gfx_mwa			, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162, 175)}
spriteset(gfx_mwa_new		, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243, 175)}

spriteset(gfx_mwa_purchase	, "gfx/WAGON/monster_box_v2.png"){ template_purchase( 81 ,200)}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_mwa_gfx_manual, cargo_subtype){
	1 : gfx_mwa_new ;
	gfx_mwa ;
}

switch(FEAT_TRAINS, SELF, sw_mwa_gfx_manual_check, livery_choice){
	1 : sw_mwa_gfx_manual ;
	gfx_mwa ;
}

switch(FEAT_TRAINS, SELF, sw_mwa_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mwa_gfx_manual_check ;
	1 : sw_mbox_v2_cargo_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_mwa_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_GREY , COLOUR_YELLOW) ;
	2 : palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_mwa_colours_manual_check, livery_choice){
	1 : sw_mwa_colours_manual ;
	palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_mwa_colours_2cc_check, colour_scheme_2){
	1 : sw_mwa_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mwa_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_FREIGHTLINER) ;
	1 : string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	2 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mwa_refit_text_check, livery_choice){
	1 : sw_mwa_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item(FEAT_TRAINS, item_mwa, 10038){
	property{
		name:							string(STR_NAME_MWA) ;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id:						SPRITE_ID_NEW_TRAIN ;
		length:							7 ;
		climates_available:				ALL_CLIMATES ;
		introduction_date:				date(2016, 1, 1) ;
		model_life:						VEHICLE_NEVER_EXPIRES ;
		vehicle_life:					45 ;
		cost_factor:					50 ;
		running_cost_base:				RUNNING_COST_NONE ;
		running_cost_factor:			100 ;
		refit_cost:						0 ;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE) ;
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		//cargo_allow_refit:			[COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity:					77 ;
		loading_speed:					30 ;
		track_type:						RAIL ;
		power:							0 hp ;
		weight:							23 ton ;
		speed:							75 mph ;
        variant_group:					10039;
	}
	graphics{
		default:				sw_mwa_sprite_stack ;
		purchase:				gfx_mwa_purchase ;
		colour_mapping:			sw_mwa_colours_2cc_check ;
		cargo_subtype_text:		sw_mwa_refit_text_check ;
	}
}




//jna

//Sprites

spriteset(gfx_jna_coal_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243,  25)}
spriteset(gfx_jna_coal_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162,  25)}
spriteset(gfx_jna_iron_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243,  50)}
spriteset(gfx_jna_iron_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162,  50)}
spriteset(gfx_jna_sand_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243,  75)}
spriteset(gfx_jna_sand_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162,  75)}
spriteset(gfx_jna_grey_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243, 100)}
spriteset(gfx_jna_grey_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162, 100)}
spriteset(gfx_jna_scrap_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243, 125)}
spriteset(gfx_jna_scrap_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162, 125)}
spriteset(gfx_jna_bauxite_h	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243, 200)}
spriteset(gfx_jna_bauxite_f	, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162, 200)}


//Switches

switch(FEAT_TRAINS, SELF, sw_jna_coal_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_coal_h ;
	51..100	: gfx_jna_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_jna_iron_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_iron_h ;
	51..100	: gfx_jna_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_jna_sand_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_sand_h ;
	51..100	: gfx_jna_sand_f ;
}

switch(FEAT_TRAINS, SELF, sw_jna_grey_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_grey_h ;
	51..100	: gfx_jna_grey_f ;
}

switch(FEAT_TRAINS, SELF, sw_jna_scrap_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_scrap_h ;
	51..100	: gfx_jna_scrap_f ;
}

switch(FEAT_TRAINS, SELF, sw_jna_bauxite_cargo_check, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_jna_bauxite_h ;
	51..100	: gfx_jna_bauxite_f ;
}


switch(FEAT_TRAINS, SELF, sw_jna_cargo_check, cargo_type_in_veh){
	COAL : sw_jna_coal_cargo_check ;
	IORE : sw_jna_iron_cargo_check ;
	PORE : sw_jna_iron_cargo_check ;
	AORE : sw_jna_bauxite_cargo_check ;
	CORE : sw_jna_bauxite_cargo_check ;
	SAND : sw_jna_sand_cargo_check ;
	GOLD : sw_jna_sand_cargo_check ;
	CERA : sw_jna_sand_cargo_check ;
	CERE : sw_jna_sand_cargo_check ;
	GRAI : sw_jna_sand_cargo_check ;
	WHEA : sw_jna_sand_cargo_check ;
	MAIZ : sw_jna_sand_cargo_check ;
	BEAN : sw_jna_scrap_cargo_check ;
	SCMT : sw_jna_scrap_cargo_check ;
	SCRP : sw_jna_scrap_cargo_check ;
	SLAG : sw_jna_scrap_cargo_check ;
	sw_jna_grey_cargo_check ;
}


spriteset(gfx_jna			, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 162, 150)}
spriteset(gfx_jna_ews		, "gfx/WAGON/monster_box_v2.png"){ template_7_4_2( 243, 150)}

spriteset(gfx_jna_purchase	, "gfx/WAGON/monster_box_v2.png"){ template_purchase( 0 ,200)}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_jna_gfx_manual, cargo_subtype){
	1 : gfx_jna_ews ;
	gfx_jna ;
}

switch(FEAT_TRAINS, SELF, sw_jna_gfx_manual_check, livery_choice){
	1 : sw_jna_gfx_manual ;
	gfx_jna ;
}

switch(FEAT_TRAINS, SELF, sw_jna_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_jna_gfx_manual_check ;
	1 : sw_jna_cargo_check ;
}



//Colours


switch(FEAT_TRAINS, SELF, sw_jna_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_RED , COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_YELLOW , COLOUR_YELLOW) ;
	2 : palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_jna_colours_manual_check, livery_choice){
	1 : sw_jna_colours_manual ;
	palette_2cc(COLOUR_DARK_GREEN , COLOUR_DARK_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_jna_colours_2cc_check, colour_scheme_2){
	1 : sw_jna_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_jna_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_EWS) ;
	1 : string(STR_LIVERY_NETWORK_RAIL) ;
	2 : string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_jna_refit_text_check, livery_choice){
	1 : sw_jna_refit_text ;
	CB_RESULT_NO_TEXT ;
}





item(FEAT_TRAINS, item_jna, 10037){
	property{
		name:							string(STR_NAME_JNA) ;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id:						SPRITE_ID_NEW_TRAIN ;
		length:							7 ;
		climates_available:				ALL_CLIMATES ;
		introduction_date:				date(1998, 1, 1) ;
		model_life:						VEHICLE_NEVER_EXPIRES ;
		vehicle_life:					40 ;
		cost_factor:					30 ;
		running_cost_base:				RUNNING_COST_NONE ;
		running_cost_factor:			100 ;
		refit_cost:						0 ;
		refittable_cargo_classes:		bitmask(CC_BULK, CC_NON_POURABLE) ;
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		//cargo_allow_refit:			[COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity:					64 ;
		loading_speed:					30 ;
		track_type:						RAIL ;
		power:							0 hp ;
		weight:							23 ton ;
		speed:							60 mph ;
        variant_group:					10039;
	}
	graphics{
		default:				sw_jna_sprite_stack ;
		purchase:				gfx_jna_purchase ;
		colour_mapping:			sw_jna_colours_2cc_check ;
		cargo_subtype_text:		sw_jna_refit_text_check ;
	}
}


if (vehicle_selection < 2){
item (FEAT_TRAINS, item_jna, 10037){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}





























# 1 "rukts.pnml" 3
# 1 "src/WAGON/china_clay.pnml" 1

//UCV 10029


spriteset(gfx_ucv_a,		"gfx/WAGON/wagons.png"	){template_4_4		(425,0	)}
spriteset(gfx_ucv_b,		"gfx/WAGON/wagons.png"	){template_4_4		(425,25	)}

spriteset(gfx_ucv_purchase,	"gfx/WAGON/wagons.png"	){template_purchase	(575,25	)}


random_switch(FEAT_TRAINS, SELF, sw_gfx_ucv){
	1 : gfx_ucv_a ;
	1 : gfx_ucv_b ;
}



item (FEAT_TRAINS, item_ucv, 10029) {
	property {
		name: 							string(STR_NAME_UCV);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1880, 1, 1);
		model_life:						80;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				25;
		refittable_cargo_classes:		bitmask(CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_NON_POURABLE, CC_LIQUID);
		cargo_allow_refit:				[KAOL, CLAY, CMNT];
		loading_speed:					8;
		cost_factor:					4;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							40 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				CLAY;
		cargo_capacity:					16;
		weight:							8 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							4;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_gfx_ucv;
		purchase:						gfx_ucv_purchase;
}
}


// CDA 10033



spriteset(gfx_cda,			"gfx/WAGON/wagons.png"	){template_6_4		(425,375)}

spriteset(gfx_cda_purchase,	"gfx/WAGON/wagons.png"	){template_purchase	(525,225)}

switch(FEAT_TRAINS, SELF, sw_cda_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}

item (FEAT_TRAINS, item_cda, 10033) {
	property {
		name: 							string(STR_NAME_CDA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1970, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				5;
		refittable_cargo_classes:		bitmask(CC_COVERED);
		non_refittable_cargo_classes:	bitmask(CC_NON_POURABLE, CC_LIQUID);
		cargo_allow_refit:				[KAOL, CLAY, CMNT, LIME];
		loading_speed:					35;
		cost_factor:					15;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				CLAY;
		cargo_capacity:					35;
		weight:							13 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							6;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						gfx_cda;
		purchase:						gfx_cda_purchase;
		colour_mapping:					sw_cda_colours_2cc_check;
}
}








// HAA 10032



spriteset(gfx_haa,			"gfx/WAGON/wagons.png"	){template_6_4		(425,400)}
spriteset(gfx_haa_coal_a,	"gfx/WAGON/wagons.png"	){template_6_4		(425,425)}
spriteset(gfx_haa_coal_b,	"gfx/WAGON/wagons.png"	){template_6_4		(425,450)}
spriteset(gfx_haa_iron_a,	"gfx/WAGON/wagons.png"	){template_6_4		(425,475)}
spriteset(gfx_haa_iron_b,	"gfx/WAGON/wagons.png"	){template_6_4		(425,500)}
spriteset(gfx_haa_stone_a,	"gfx/WAGON/wagons.png"	){template_6_4		(425,525)}
spriteset(gfx_haa_stone_b,	"gfx/WAGON/wagons.png"	){template_6_4		(425,550)}

spriteset(gfx_hda,			"gfx/WAGON/wagons.png"	){template_6_4		(500,400)}
spriteset(gfx_hda_coal_a,	"gfx/WAGON/wagons.png"	){template_6_4		(500,425)}
spriteset(gfx_hda_coal_b,	"gfx/WAGON/wagons.png"	){template_6_4		(500,450)}
spriteset(gfx_hda_iron_a,	"gfx/WAGON/wagons.png"	){template_6_4		(500,475)}
spriteset(gfx_hda_iron_b,	"gfx/WAGON/wagons.png"	){template_6_4		(500,500)}
spriteset(gfx_hda_stone_a,	"gfx/WAGON/wagons.png"	){template_6_4		(500,525)}
spriteset(gfx_hda_stone_b,	"gfx/WAGON/wagons.png"	){template_6_4		(500,550)}

spriteset(gfx_haa_purchase,	"gfx/WAGON/wagons.png"	){template_purchase	(525,275)}


switch(FEAT_TRAINS, SELF, sw_haa_gfx_load_check_coal, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_haa_coal_a ;
	51..100	: gfx_haa_coal_b ;
	gfx_haa ;
}

switch(FEAT_TRAINS, SELF, sw_haa_gfx_load_check_iron, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_haa_iron_a ;
	51..100	: gfx_haa_iron_b ;
	gfx_haa ;
}

switch(FEAT_TRAINS, SELF, sw_haa_gfx_load_check_stone, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_haa_stone_a ;
	51..100	: gfx_haa_stone_b ;
	gfx_haa ;
}

switch(FEAT_TRAINS, SELF, sw_haa_gfx_cargo_check, cargo_type_in_veh){
	COAL : sw_haa_gfx_load_check_coal ;
	COKE : sw_haa_gfx_load_check_coal ;
	IORE : sw_haa_gfx_load_check_iron ;
	PORE : sw_haa_gfx_load_check_iron ;
	sw_haa_gfx_load_check_stone ;
}


switch(FEAT_TRAINS, SELF, sw_hda_gfx_load_check_coal, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_hda_coal_a ;
	51..100	: gfx_hda_coal_b ;
	gfx_hda ;
}

switch(FEAT_TRAINS, SELF, sw_hda_gfx_load_check_iron, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_hda_iron_a ;
	51..100	: gfx_hda_iron_b ;
	gfx_hda ;
}

switch(FEAT_TRAINS, SELF, sw_hda_gfx_load_check_stone, cargo_count * (100 / cargo_capacity)){
	1..50	: gfx_hda_stone_a ;
	51..100	: gfx_hda_stone_b ;
	gfx_hda ;
}

switch(FEAT_TRAINS, SELF, sw_hda_gfx_cargo_check, cargo_type_in_veh){
	COAL : sw_hda_gfx_load_check_coal ;
	COKE : sw_hda_gfx_load_check_coal ;
	IORE : sw_hda_gfx_load_check_iron ;
	PORE : sw_hda_gfx_load_check_iron ;
	sw_hda_gfx_load_check_stone ;
}


switch(FEAT_TRAINS, SELF, sw_haa_gfx_manual, cargo_subtype){
	1 : sw_hda_gfx_cargo_check ;
	sw_haa_gfx_cargo_check ;
}

switch(FEAT_TRAINS, SELF, sw_haa_gfx_manual_check, livery_choice){
	1 : sw_haa_gfx_manual ;
	sw_haa_gfx_cargo_check ;
}



switch(FEAT_TRAINS, SELF, sw_haa_colours_2cc_check, colour_scheme_2){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, COLOUR_DARK_GREEN) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_haa_refit_text, cargo_subtype){
	0 : string(STR_NAME_HAA) ;
	1 : string(STR_NAME_HDA) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_haa_refit_text_check, livery_choice){
	1 : sw_haa_refit_text ;
	CB_RESULT_NO_TEXT ;
}

item (FEAT_TRAINS, item_haa, 10032) {
	property {
		name: 							string(STR_NAME_HAA);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1965, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				5;
		refittable_cargo_classes:		bitmask(CC_BULK);
		non_refittable_cargo_classes:	bitmask(CC_COVERED, CC_POWDERIZED, CC_PIECE_GOODS);
		cargo_disallow_refit:			[GRAI, WHEA, MAIZ, CERE];
		loading_speed:					33;
		cost_factor:					12;
		running_cost_factor:			12;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							55 mph;
		misc_flags:						bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					33;
		weight:							13 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							6;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_haa_gfx_manual_check;
		purchase:						gfx_haa_purchase;
		colour_mapping:					sw_haa_colours_2cc_check;
		cargo_subtype_text:				sw_haa_refit_text_check;
}
}


















# 1 "rukts.pnml" 3
# 1 "src/WAGON/lul_coach.pnml" 1
spriteset(gfx_lulcoach_grey_mid			, "gfx/EMU/lul_d78.png")	{template_8_4_networker(0, 25)}
spriteset(gfx_lulcoach_purchase_grey	, "gfx/EMU/lul_d78.png")	{template_purchase(90, 25)}
spriteset(gfx_lulcoach_purchase_lulred	, "gfx/EMU/lul_d78.png")	{template_purchase(90, 75)}



switch(FEAT_TRAINS, SELF, sw_lulcoach_purchase_sprite, current_year){
	0..1992 : gfx_lulcoach_purchase_grey ;
	gfx_lulcoach_purchase_lulred ;
}

switch(FEAT_TRAINS, PARENT, sw_lulcoach_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600..699 : CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}


item (FEAT_TRAINS, item_lulcoach, 600) {
	property {
		name: 							string(STR_NAME_600);
		climates_available: 			ALL_CLIMATES;
		introduction_date              : date(1937,1,1) ;
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				11;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					38;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAA4;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					100;
		weight:							18 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				115;
	}
	graphics {
		default: 							gfx_lulcoach_grey_mid;
		purchase:							sw_lulcoach_purchase_sprite;
		can_attach_wagon:					sw_lulcoach_attach;
		colour_mapping:						palette_1cc(COLOUR_DARK_BLUE);
	}
}

# 1 "rukts.pnml" 3

# 1 "src/CODE/DBSO.pnml" 1
//DBSO Source


//Spritesets

spriteset(gfx_dbso_scotrail          , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,0)           }
spriteset(gfx_dbso_scotrail_rev      , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,0)   }
spriteset(gfx_dbso_intercity         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,25)          }
spriteset(gfx_dbso_intercity_rev     , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,25)  }
spriteset(gfx_dbso_directrail        , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,50)          }
spriteset(gfx_dbso_directrail_rev    , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,50)  }
spriteset(gfx_dbso_generic           , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,75)          }
spriteset(gfx_dbso_generic_rev       , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,75)  }
spriteset(gfx_dbso_brblue            , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,100)         }
spriteset(gfx_dbso_brblue_rev        , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,100) }

spriteset(gfx_dbso_headlight         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(178,25)       }
spriteset(gfx_dbso_taillight         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(178,0)        }


//Switches


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_dbso_scotrail_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 47 | vehicle_type_id == 57 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_scotrail_rev ; gfx_dbso_scotrail ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_intercity_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 47 | vehicle_type_id == 57 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_intercity_rev ; gfx_dbso_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_directrail_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 47 | vehicle_type_id == 57 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_directrail_rev ; gfx_dbso_directrail ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_generic_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 47 | vehicle_type_id == 57 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_generic_rev ; gfx_dbso_generic ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_brblue_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 47 | vehicle_type_id == 57 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_brblue_rev ; gfx_dbso_brblue ; }

//Automatic gfx

switch(FEAT_TRAINS, SELF, sw_dbso_auto, current_year){
	1971 .. 1982        : sw_dbso_brblue_rev_check ;
	1983 .. 1995 : sw_dbso_intercity_rev_check ;
	sw_dbso_directrail_rev_check ;
}

//Manual gfx

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_ee3, cargo_subtype){
	0..1	: sw_dbso_brblue_rev_check ;
	4..6	: sw_dbso_intercity_rev_check ;
	7		: sw_dbso_generic_rev_check ;
	11..15	: sw_dbso_generic_rev_check ;
	sw_dbso_directrail_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_br87, cargo_subtype){
	1..2 : sw_dbso_scotrail_rev_check ;
	4 : sw_dbso_generic_rev_check ;
	sw_dbso_brblue_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_al6, cargo_subtype){
	2..4 : sw_dbso_intercity_rev_check ;
	7 : sw_dbso_generic_rev_check ;
	sw_dbso_brblue_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_brush4, cargo_subtype){
	0..3	: sw_dbso_brblue_rev_check ;
	4		: sw_dbso_scotrail_rev_check ;
	5		: sw_dbso_scotrail_rev_check ;
	6..9	: sw_dbso_scotrail_rev_check ;
	14		: sw_dbso_generic_rev_check ;
	sw_dbso_directrail_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_57, cargo_subtype){
	2 : sw_dbso_generic_rev_check ;
	sw_dbso_directrail_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual, vehicle_type_id){
	37 : sw_dbso_manual_ee3 ;
	47 : sw_dbso_manual_brush4 ;
	57 : sw_dbso_manual_57 ;
	68 : sw_dbso_directrail_rev_check ;
	86 : sw_dbso_manual_al6 ;
	87 : sw_dbso_manual_br87 ;
	88 : sw_dbso_directrail_rev_check ;
	sw_dbso_brblue_rev_check ;
}

//Gfx selection decider

switch(FEAT_TRAINS, SELF, sw_dbso_manual_check, livery_choice){
	1 : sw_dbso_manual ;
	sw_dbso_auto ;
}


//Sprite stacking/headlights

switch(FEAT_TRAINS, SELF, sw_dbso_taillight_check, position_in_consist_from_end){
	0 : gfx_dbso_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_headlight_check, position_in_consist){
	0 : gfx_dbso_headlight ;
	sw_dbso_taillight_check ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dbso_manual_check ;
	1 : sw_dbso_headlight_check ;
}


//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_auto, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_colours_ee3, cargo_subtype){
	0..1	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4..6	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	7		: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	11..15	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_br87, cargo_subtype){
	1..2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	4 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_al6, cargo_subtype){
	2..4 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	7 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_brush4, cargo_subtype){
	0..3	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4		: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	5		: palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	6..9	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	14		: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_57, cargo_subtype){
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_manual, vehicle_type_id){
	37 : sw_dbso_colours_ee3 ;
	47 : sw_dbso_colours_brush4 ;
	57 : sw_dbso_colours_57 ;
	68 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	86 : sw_dbso_colours_al6 ;
	87 : sw_dbso_colours_br87 ;
	88 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}



switch(FEAT_TRAINS, SELF, sw_dbso_colours_manual_check, livery_choice){
	1 : sw_dbso_colours_manual ;
	sw_dbso_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_colours_2cc_check, colour_scheme_1){
	1 : sw_dbso_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


/*Refit text

switch(FEAT_TRAINS, PARENT, sw_dbso_refit_scotrail   , STORE_TEMP(0, 0)){ string(STR_LIVERY_BR_SCOTRAIL) ;  }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_intercity  , STORE_TEMP(1, 0)){ string(STR_LIVERY_INTERCITY) ;    }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_networkrail, STORE_TEMP(2, 0)){ string(STR_LIVERY_NETWORK_RAIL) ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_drs        , STORE_TEMP(3, 0)){ string(STR_LIVERY_DRS) ;          }

switch(FEAT_TRAINS, PARENT, sw_dbso_refit_text, STORE_TEMP(cargo_subtype, 0)){
	0 : string(STR_LIVERY_BR_SCOTRAIL) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_NETWORK_RAIL) ;
	3 : string(STR_LIVERY_DRS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_refit_text_check, livery_choice){
	1 : sw_dbso_refit_text ;
	CB_RESULT_NO_TEXT ;
}
*/
# 1 "rukts.pnml" 3
# 1 "src/CODE/DVT.pnml" 1
//DVT Source


// | vehicle_type_id == 92)


/*

Liveries needed

Intercity
Virgin Trains
Greater Anglia  - !!
Arriva Trains Wales
Network Rail
Chiltern Railways  - !!

Mark 4

GNER
East Coast
Virgin East Coast

*/


//Spritesets

spriteset(gfx_dvt_generic			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,  0) }
spriteset(gfx_dvt_generic_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,  0) }
spriteset(gfx_dvt_intercity			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0, 25) }
spriteset(gfx_dvt_intercity_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0, 25) }
spriteset(gfx_dvt_virgin			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0, 50) }
spriteset(gfx_dvt_virgin_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0, 50) }
spriteset(gfx_dvt_atw_exec			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0, 75) }
spriteset(gfx_dvt_atw_exec_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0, 75) }
spriteset(gfx_dvt_chiltern			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,100) }
spriteset(gfx_dvt_chiltern_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,100) }
spriteset(gfx_dvt_anglia			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,125) }
spriteset(gfx_dvt_anglia_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,125) }
spriteset(gfx_dvt_virgin_p			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(259, 75) }
spriteset(gfx_dvt_virgin_p_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(259, 75) }

spriteset(gfx_dvt_mk4_intercity		, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,175) }
spriteset(gfx_dvt_mk4_intercity_rev	, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,175) }
spriteset(gfx_dvt_mk4_gner			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,200) }
spriteset(gfx_dvt_mk4_gner_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,200) }
spriteset(gfx_dvt_mk4_nxec			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,225) }
spriteset(gfx_dvt_mk4_nxec_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,225) }
spriteset(gfx_dvt_mk4_east_coast	, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,250) }
spriteset(gfx_dvt_mk4_east_coast_rev, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,250) }
spriteset(gfx_dvt_mk4_vtec			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,275) }
spriteset(gfx_dvt_mk4_vtec_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,275) }
spriteset(gfx_dvt_mk4_gc			, "gfx/WAGON/dvt.png"){ template_Mk2_double			(  0,300) }
spriteset(gfx_dvt_mk4_gc_rev		, "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse	(  0,300) }

/*
spriteset(gfx_dvt_7_intercity		, "gfx/WAGON/dvt.png"){	template_7_8_2(	348,	75)		}
spriteset(gfx_dvt_7_intercity_rev	, "gfx/WAGON/dvt.png"){	template_7_8_rev_2(	348,	75)	}
spriteset(gfx_dvt_7_virgin			, "gfx/WAGON/dvt.png"){	template_7_8_2(	348,	100)	}
spriteset(gfx_dvt_7_virgin_rev		, "gfx/WAGON/dvt.png"){	template_7_8_rev_2(	348,	100)}
spriteset(gfx_dvt_7_anglia			, "gfx/WAGON/dvt.png"){	template_7_8_2(	348,	125)	}
spriteset(gfx_dvt_7_anglia_rev		, "gfx/WAGON/dvt.png"){	template_7_8_rev_2(	348,	125)}
*/

spriteset(gfx_dvt_7_taillights		, "gfx/WAGON/dvt.png"){	template_7_8_2(	348,	150)	}
spriteset(gfx_dvt_7_headlights		, "gfx/WAGON/dvt.png"){	template_7_8_rev_2(	348,	175)}

spriteset(gfx_dvt_taillights    , "gfx/WAGON/dvt.png"){ template_Mk2_double(259,  0)         }
spriteset(gfx_dvt_headlights    , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(259, 25) }




//Switches


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_dvt_generic_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_generic_rev ; gfx_dvt_generic ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_intercity_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_intercity_rev ; gfx_dvt_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_virgin_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_virgin_rev ; gfx_dvt_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_atw_exec_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_atw_exec_rev ; gfx_dvt_atw_exec ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_chiltern_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_chiltern_rev ; gfx_dvt_chiltern ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_anglia_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_anglia_rev ; gfx_dvt_anglia ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_virgin_p_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_virgin_p_rev ; gfx_dvt_virgin_p ; }

switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_intercity_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_intercity_rev ; gfx_dvt_mk4_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_gner_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_gner_rev ; gfx_dvt_mk4_gner ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_nxec_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_nxec_rev ; gfx_dvt_mk4_nxec ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_east_coast_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_east_coast_rev ; gfx_dvt_mk4_east_coast ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_vtec_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_vtec_rev ; gfx_dvt_mk4_vtec ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_mk4_gc_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_mk4_gc_rev ; gfx_dvt_mk4_gc ; }

/*
switch(FEAT_TRAINS, PARENT, sw_dvt_intercity_rev_check_7, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_7_intercity_rev ; gfx_dvt_7_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_virgin_rev_check_7, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_7_virgin_rev ; gfx_dvt_7_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_anglia_rev_check_7, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 57 | vehicle_type_id == 67 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 90 | vehicle_type_id == 91 | vehicle_type_id == 92 )){ 1 : gfx_dvt_7_anglia_rev ; gfx_dvt_7_anglia ; }
*/

//Automatix GFX

switch(FEAT_TRAINS, SELF, sw_dvt_auto, current_year){
	1983 .. 1995 : sw_dvt_intercity_rev_check ;
	2014..4096 : sw_dvt_chiltern_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_auto_90, current_year){
	1983 .. 1995 : sw_dvt_intercity_rev_check ;
	2004..2019 : sw_dvt_anglia_rev_check ;
	2020..4096 : sw_dvt_mk4_gc_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_auto_91, current_year){
	1983 .. 1995 : sw_dvt_mk4_intercity_rev_check ; // IC
	2007..2009	: sw_dvt_mk4_nxec_rev_check ; // NXEC
	2010..2014	: sw_dvt_mk4_east_coast_rev_check ; // EAST COAST
	2015..4096	: sw_dvt_mk4_vtec_rev_check ;
	sw_dvt_mk4_gner_rev_check ; // GNER
}

switch(FEAT_TRAINS, PARENT, sw_dvt_auto_check, vehicle_type_id){
	90 : sw_dvt_auto_90 ;
	91 : sw_dvt_auto_91 ;
	sw_dvt_auto ;
}


//Manual GFX

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_br87, cargo_subtype){
	1 : sw_dvt_intercity_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_al6, cargo_subtype){
	2 : sw_dvt_intercity_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_cl90, cargo_subtype){
	0..2	: sw_dvt_intercity_rev_check ;
	4..5	: sw_dvt_anglia_rev_check ;
	6..7	: sw_dvt_virgin_p_rev_check ;
	8..9	: sw_dvt_anglia_rev_check ;
	10		: sw_dvt_virgin_p_rev_check ;
	11..12	: sw_dvt_mk4_gc_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_cl91, cargo_subtype){
	0	: sw_dvt_mk4_intercity_rev_check	; // IC
	2	: sw_dvt_mk4_nxec_rev_check			; // NXEC
	3	: sw_dvt_mk4_east_coast_rev_check	; // EAST COAST
	4..6: sw_dvt_mk4_vtec_rev_check			; // VTEC/LNER
	sw_dvt_mk4_gner_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_uklight, cargo_subtype){
	1 : sw_dvt_atw_exec_rev_check ;
	2 : sw_dvt_atw_exec_rev_check ;
	4 : sw_dvt_chiltern_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_ee3, cargo_subtype){
	0..1	: sw_dvt_intercity_rev_check ;
	4..6	: sw_dvt_intercity_rev_check ;
	7		: sw_dvt_generic_rev_check ;
	12..15	: sw_dvt_generic_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_57, cargo_subtype){
	1..2 : sw_dvt_generic_rev_check ;
	5 : sw_dvt_chiltern_rev_check ;
	6 : sw_dvt_atw_exec_rev_check ;
	7 : sw_dvt_virgin_p_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_67, cargo_subtype){
	0	: sw_dvt_virgin_rev_check;
	1..3: sw_dvt_virgin_p_rev_check;
	4	: sw_dvt_generic_rev_check;
	6	: sw_dvt_atw_exec_rev_check;
	7	: sw_dvt_mk4_vtec_rev_check;
	sw_dvt_chiltern_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_abb92, cargo_subtype){
	0    : sw_dvt_intercity_rev_check ;
	1..2 : sw_dvt_atw_exec_rev_check ;
	3    : sw_dvt_generic_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual, vehicle_type_id){
	37 : sw_dvt_manual_ee3 ;
	57 : sw_dvt_manual_57 ;
	67 : sw_dvt_manual_67 ;
	68 : sw_dvt_manual_uklight ;
	86 : sw_dvt_manual_al6 ;
	87 : sw_dvt_manual_br87 ;
	90 : sw_dvt_manual_cl90 ;
	91 : sw_dvt_manual_cl91 ;
	92 : sw_dvt_manual_abb92 ;
	sw_dvt_virgin_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_dvt_manual_check, livery_choice){
	1 : sw_dvt_manual ;
	sw_dvt_auto_check ;
}

//Sprite stacking & lights deciders

switch(FEAT_TRAINS, SELF, sw_dvt_taillight_check, position_in_consist_from_end){ 0 : gfx_dvt_taillights ; }

switch(FEAT_TRAINS, SELF, sw_dvt_headlight_check, position_in_consist){
	0 : gfx_dvt_headlights ;
	sw_dvt_taillight_check ;
}


switch(FEAT_TRAINS, SELF, sw_dvt_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dvt_manual_check ;
	1 : sw_dvt_headlight_check ;
}


/*Length 7 gfx

switch(FEAT_TRAINS, PARENT, sw_dvt_auto_7, current_year){
	1983 .. 1995 : sw_dvt_intercity_rev_check_7 ;
	2004..4096 : sw_dvt_anglia_rev_check_7 ;
	sw_dvt_virgin_rev_check_7 ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_7, cargo_subtype){
	0..2: sw_dvt_intercity_rev_check_7 ;
	4..5: sw_dvt_anglia_rev_check_7 ;
	8..9: sw_dvt_anglia_rev_check_7 ;
	sw_dvt_virgin_rev_check_7 ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_manual_check_7, livery_choice){
	1 : sw_dvt_manual_7 ;
	sw_dvt_auto_7 ;
}

switch(FEAT_TRAINS, SELF,  sw_dvt_taillight_check_7, position_in_consist_from_end){ 0 : gfx_dvt_7_taillights ; }
switch(FEAT_TRAINS, SELF,  sw_dvt_headlight_check_7, position_in_consist){ 0 : gfx_dvt_7_headlights ; sw_dvt_taillight_check_7 ; }

switch(FEAT_TRAINS, SELF, sw_dvt_sprite_stack_7, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dvt_manual_check_7 ;
	1 : sw_dvt_headlight_check_7 ;
	2 : sw_dvt_taillight_check_7 ;
}


switch(FEAT_TRAINS, PARENT, sw_dvt_length_check, vehicle_type_id == 90){
	1 : sw_dvt_sprite_stack_7 ;
	sw_dvt_sprite_stack ;
}

*/

//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_auto, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2014..4096 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_auto_90, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2004..2012 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	2004..2019 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2020..4096 : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_auto_91, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2007..2009	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	2010..2014	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	2015..4096	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_auto_check, vehicle_type_id){
	90 : sw_dvt_colours_auto_90 ;
	91 : sw_dvt_colours_auto_91 ;
	sw_dvt_colours_auto ;
}





switch(FEAT_TRAINS, PARENT, sw_dvt_colours_br87, cargo_subtype){
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_cl90, cargo_subtype){
	0..2	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	4		: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5		: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	8..9	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	11..12	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_cl91, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	3	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	4..6: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC/LNER
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_al6, cargo_subtype){
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_uklight, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	4 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_ee3, cargo_subtype){
	0..1	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	4..6	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	7		: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	12..15	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_57, cargo_subtype){
	1..2 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	5 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_67, cargo_subtype){
	0..3: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	7	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_abb92, cargo_subtype){
	0    : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	3    : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_manual, vehicle_type_id){
	37 : sw_dvt_colours_ee3 ;
	57 : sw_dvt_colours_57 ;
	67 : sw_dvt_colours_67 ;
	68 : sw_dvt_colours_uklight ;
	86 : sw_dvt_colours_al6 ;
	87 : sw_dvt_colours_br87 ;
	90 : sw_dvt_colours_cl90 ;
	91 : sw_dvt_colours_cl91 ;
	92 : sw_dvt_colours_abb92 ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_dvt_colours_manual_check, livery_choice){
	1 : sw_dvt_colours_manual ;
	sw_dvt_colours_auto_check ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_colours_2cc, current_year){
	2014..4096 : palette_2cc(company_colour2, company_colour1) ; //Inverted company colours so that it works with the rest of the carriages
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_colours_2cc_check, colour_scheme_1){
	1 : sw_dvt_colours_manual_check ;
	sw_dvt_colours_2cc ;
}
# 1 "rukts.pnml" 3

# 1 "src/OTHER/Tender.pnml" 1


//TENDER ITEM

item (FEAT_TRAINS, item_tender, 2000) {
	property {
		name: 							string(STR_GRF_NAME);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		loading_speed:					0;
		cost_factor:					0;
		running_cost_factor:			0;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							0 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK,TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_allow_refit:				[MAIL, GOOD] ;
		cargo_capacity:					1 ;
		weight:							0;
		tractive_effort_coefficient:	0.0;
		air_drag_coefficient:			0.08;
		length:							5;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
		default: 							gfx_blank;
		cargo_capacity:						return 0;
		purchase_cargo_capacity:			0;
	}
}




//Switches

switch (FEAT_TRAINS, SELF, sw_tender_loco, extra_callback_info1) {
	1: return item_tender;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}








//TEST CUBE

spriteset(gfx_cube_8	, "gfx/TEMPLATES/base.png"	){	template_8_8_2	(0	,0	)}
spriteset(gfx_cube_7	, "gfx/TEMPLATES/base.png"	){	template_7_4_2	(0	,48	)}
spriteset(gfx_cube_6	, "gfx/TEMPLATES/base.png"	){	template_6_4	(0	,69	)}
spriteset(gfx_cube_5	, "gfx/TEMPLATES/base.png"	){	template_5_4	(0	,88	)}
spriteset(gfx_cube_4	, "gfx/TEMPLATES/base.png"	){	template_4_4	(0	,105)}
spriteset(gfx_cube_3	, "gfx/TEMPLATES/base.png"	){	template_3_4	(0	,120)}


switch(FEAT_TRAINS, SELF, sw_cube_t_gfx_manual, cargo_subtype){
	1	: gfx_cube_7 ;
	2	: gfx_cube_6 ;
	3	: gfx_cube_5 ;
	4	: gfx_cube_4 ;
	5	: gfx_cube_3 ;
	gfx_cube_8 ;
}

switch(FEAT_TRAINS, SELF, sw_cube_length, cargo_subtype){
	1	: return 7 ;
	2	: return 6 ;
	3	: return 5 ;
	4	: return 4 ;
	5	: return 3 ;
	return 8 ;
}


switch(FEAT_TRAINS, SELF, sw_cube_refit_text, cargo_subtype){
	 0 : string(STR_LENGTH,string(STR_8)) ;
	 1 : string(STR_LENGTH,string(STR_7)) ;
	 2 : string(STR_LENGTH,string(STR_6)) ;
	 3 : string(STR_LENGTH,string(STR_5)) ;
	 4 : string(STR_LENGTH,string(STR_4)) ;
	 5 : string(STR_LENGTH,string(STR_3)) ;
	 //6 : string(STR_LIVERY_BR_BRUNSWICK) ;
	 //7 : string(STR_LIVERY_BR_BRUNSWICK) ;
	 CB_RESULT_NO_TEXT ;
}



item (FEAT_TRAINS, item_cube, 9999) {
	property {
		name: 							string(STR_GRF_NAME);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		loading_speed:					0;
		cost_factor:					0;
		running_cost_factor:			0;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							0 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK,TRAIN_FLAG_AUTOREFIT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							9999 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		cargo_allow_refit:				[MAIL, GOOD] ;
		cargo_capacity:					1 ;
		weight:							10;
		tractive_effort_coefficient:	1;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
	}
	graphics {
		default: 						sw_cube_t_gfx_manual;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0;
		length:							sw_cube_length;
		cargo_subtype_text:				sw_cube_refit_text;
	}
}





































# 1 "rukts.pnml" 3

# 1 "src/STEAM_LOCO/mr_1377.pnml" 1
// MR 1377

//Sprites

spriteset(gfx_mr_1377					, "gfx/STEAM_LOCO/midland_region.png"	){	template_5_8			(0	,125)}
spriteset(gfx_mr_1377_rev				, "gfx/STEAM_LOCO/midland_region.png"	){	template_5_8_rev		(0	,125)}
spriteset(gfx_mr_1377_br_black			, "gfx/STEAM_LOCO/midland_region.png"	){	template_5_8			(130,125)}
spriteset(gfx_mr_1377_br_black_rev		, "gfx/STEAM_LOCO/midland_region.png"	){	template_5_8_rev		(130,125)}

spriteset(gfx_mr_1377_purchase			, "gfx/STEAM_LOCO/midland_region.png"	){	template_purchase		(260,125)}

//Switches


//Graphics

//Base
switch(FEAT_TRAINS, PARENT, sw_mr_1377_gfx_rev_check_a,		vehicle_is_reversed){ 1 : gfx_mr_1377 ; gfx_mr_1377_rev ; }
switch(FEAT_TRAINS, PARENT, sw_mr_1377_gfx_rev_check_b,		vehicle_is_reversed){ 1 : gfx_mr_1377_rev ; gfx_mr_1377 ; }

switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_m,			position_in_vehid_chain){ 0 : gfx_mr_1377_rev ; sw_mr_1377_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : gfx_mr_1377 ; sw_mr_1377_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_mr_1377_gfx_rev_check_a ; gfx_mr_1377_rev ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_a,			position_in_consist){ 0 : sw_mr_1377_gfx_pos_check_f ; sw_mr_1377_gfx_pos_check_b ;}


//BR Black
switch(FEAT_TRAINS, PARENT, sw_mr_1377_gfx_rev_check_a_br_black,	vehicle_is_reversed){ 1 : gfx_mr_1377_br_black ; gfx_mr_1377_br_black_rev ; }
switch(FEAT_TRAINS, PARENT, sw_mr_1377_gfx_rev_check_b_br_black,	vehicle_is_reversed){ 1 : gfx_mr_1377_br_black_rev ; gfx_mr_1377_br_black ; }

switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_m_br_black,		position_in_vehid_chain){ 0 : gfx_mr_1377_br_black_rev ; sw_mr_1377_gfx_rev_check_b_br_black ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_b_br_black,		position_in_vehid_chain_from_end){ 0 : gfx_mr_1377_br_black ; sw_mr_1377_gfx_pos_check_m_br_black ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_f_br_black,		num_vehs_in_vehid_chain ){ 1 : sw_mr_1377_gfx_rev_check_a_br_black ; gfx_mr_1377_br_black_rev ;}
switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_pos_check_a_br_black,		position_in_consist){ 0 : sw_mr_1377_gfx_pos_check_f_br_black ; sw_mr_1377_gfx_pos_check_b_br_black ;}

//Liveries

switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_auto, current_year){
	1948 .. 1966: sw_mr_1377_gfx_pos_check_a_br_black ;
	sw_mr_1377_gfx_pos_check_a ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_manual, cargo_subtype){
	0..1: sw_mr_1377_gfx_pos_check_a ;
	sw_mr_1377_gfx_pos_check_a_br_black ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_gfx_manual_check, livery_choice){
	1 : sw_mr_1377_gfx_manual ;
	sw_mr_1377_gfx_auto ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_mr_1377_colours_auto, current_year){
	1948 .. 1966: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	1923 .. 1947: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_colours_manual_check, livery_choice){
	1 : sw_mr_1377_colours_manual ;
	sw_mr_1377_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_colours_2cc_check, colour_scheme_1){
	1 : sw_mr_1377_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mr_1377_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_mr_1377_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_MIDLAND_RAILWAY) ;
	 1 : string(STR_LIVERY_LMS) ;
	 2 : string(STR_LIVERY_BR_BLACK) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mr_1377_refit_text_check, livery_choice){
	1 : sw_mr_1377_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Item

item(FEAT_TRAINS, item_mr_1377, 1103){
	property{
		name                           : string(STR_NAME_MR_1377) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1878,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 50 ;
		vehicle_life                   : 60 ;
		reliability_decay              : 14 ;
		cost_factor                    : 50 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 50 ;
		speed                          : 30 mph ;
		track_type                     : RAIL ;
		power                          : 371 hp ;
		weight                         : 40 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.18 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_mr_1377_gfx_manual_check ;
		colour_mapping                 : sw_mr_1377_colours_2cc_check ;
		purchase_colour_mapping		   : sw_mr_1377_purchase_colours_2cc_check ;
		purchase                       : gfx_mr_1377_purchase ;
		//sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_steam ;
		cargo_subtype_text             : sw_mr_1377_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 10 : 50) ;
		purchase_running_cost_factor : 50 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_mr_1377, 1103){
	property{
		name                           : string(STR_NAME_MR_1377_ALT) ;
	}
}
}

























spriteset(gfx_mr_115				, "gfx/STEAM_LOCO/midland_region.png"	){	template_5_8		(0	,150)}

spriteset(gfx_mr_115_t				, "gfx/STEAM_LOCO/midland_region.png"	){	template_3_8		(130,150)}

spriteset(gfx_mr_115_purchase		, "gfx/STEAM_LOCO/midland_region.png"	){	template_purchase	(289,150)}





switch(FEAT_TRAINS, SELF, sw_mr_115_purchase_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_RED, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_mr_115, 1104){
	property{
		name							: string(STR_NAME_MR_115) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1896,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 50 ;
		vehicle_life					: 45 ;
		cost_factor						: 190 ;
		running_cost_factor				: 190 ;
		length							: 5 ;
		reliability_decay				: 25 ;
		
		speed							: 70 mph ;
		power							: 704 hp ;
		weight							: 88 ton ;
		tractive_effort_coefficient		: 0.14 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: gfx_mr_115 ;
		colour_mapping					: sw_mr_115_purchase_2cc_check ;
		purchase						: gfx_mr_115_purchase ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 50 : 190) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 190 ;
	}
	livery_override(item_tender){
		default							: gfx_mr_115_t ;
		colour_mapping					: sw_mr_115_purchase_2cc_check ;
		length							: 3 ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_mr_115, 1104){
	property{
		name                           : string(STR_NAME_MR_115_ALT) ;
	}
}
}









# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/lbscr_e4.pnml" 1
// L&BSCR e4

//Sprites

spriteset(gfx_lbsc_e4_br_black			, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8		(0	,25	)}
spriteset(gfx_lbsc_e4_br_black_rev		, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8_rev	(0	,25	)}
spriteset(gfx_lbsc_e4_lbsc				, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8		(0	,50	)}
spriteset(gfx_lbsc_e4_lbsc_rev			, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8_rev	(0	,50	)}
spriteset(gfx_lbsc_e4_sr				, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8		(0	,75	)}
spriteset(gfx_lbsc_e4_sr_rev			, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8_rev	(0	,75	)}

spriteset(gfx_lbsc_e4_purchase_br_black	, "gfx/STEAM_LOCO/southern_region.png"	){	template_purchase	(130,25	)}
spriteset(gfx_lbsc_e4_purchase_lbsc		, "gfx/STEAM_LOCO/southern_region.png"	){	template_purchase	(130,50	)}
spriteset(gfx_lbsc_e4_purchase_sr		, "gfx/STEAM_LOCO/southern_region.png"	){	template_purchase	(130,75	)}

//Switches


//Graphics

//BR Black
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_a_br_black,	vehicle_is_reversed){ 1 : gfx_lbsc_e4_br_black ; gfx_lbsc_e4_br_black_rev ; }
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_b_br_black,	vehicle_is_reversed){ 1 : gfx_lbsc_e4_br_black_rev ; gfx_lbsc_e4_br_black ; }

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_m_br_black,		position_in_vehid_chain){ 0 : gfx_lbsc_e4_br_black_rev ; sw_lbsc_e4_gfx_rev_check_b_br_black ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_b_br_black,		position_in_vehid_chain_from_end){ 0 : gfx_lbsc_e4_br_black ; sw_lbsc_e4_gfx_pos_check_m_br_black ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_f_br_black,		num_vehs_in_vehid_chain ){ 1 : sw_lbsc_e4_gfx_rev_check_a_br_black ; gfx_lbsc_e4_br_black_rev ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_a_br_black,		position_in_consist){ 0 : sw_lbsc_e4_gfx_pos_check_f_br_black ; sw_lbsc_e4_gfx_pos_check_b_br_black ;}

//LBSCR
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_a_lbsc,		vehicle_is_reversed){ 1 : gfx_lbsc_e4_lbsc ; gfx_lbsc_e4_lbsc_rev ; }
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_b_lbsc,		vehicle_is_reversed){ 1 : gfx_lbsc_e4_lbsc_rev ; gfx_lbsc_e4_lbsc ; }

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_m_lbsc,			position_in_vehid_chain){ 0 : gfx_lbsc_e4_lbsc_rev ; sw_lbsc_e4_gfx_rev_check_b_lbsc ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_b_lbsc,			position_in_vehid_chain_from_end){ 0 : gfx_lbsc_e4_lbsc ; sw_lbsc_e4_gfx_pos_check_m_lbsc ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_f_lbsc,			num_vehs_in_vehid_chain ){ 1 : sw_lbsc_e4_gfx_rev_check_a_lbsc ; gfx_lbsc_e4_lbsc_rev ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_a_lbsc,			position_in_consist){ 0 : sw_lbsc_e4_gfx_pos_check_f_lbsc ; sw_lbsc_e4_gfx_pos_check_b_lbsc ;}

//Southern
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_a_sr,			vehicle_is_reversed){ 1 : gfx_lbsc_e4_sr ; gfx_lbsc_e4_sr_rev ; }
switch(FEAT_TRAINS, PARENT, sw_lbsc_e4_gfx_rev_check_b_sr,			vehicle_is_reversed){ 1 : gfx_lbsc_e4_sr_rev ; gfx_lbsc_e4_sr ; }

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_m_sr,			position_in_vehid_chain){ 0 : gfx_lbsc_e4_sr_rev ; sw_lbsc_e4_gfx_rev_check_b_sr ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_b_sr,			position_in_vehid_chain_from_end){ 0 : gfx_lbsc_e4_sr ; sw_lbsc_e4_gfx_pos_check_m_sr ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_f_sr,			num_vehs_in_vehid_chain ){ 1 : sw_lbsc_e4_gfx_rev_check_a_sr ; gfx_lbsc_e4_sr_rev ;}
switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_pos_check_a_sr,			position_in_consist){ 0 : sw_lbsc_e4_gfx_pos_check_f_sr ; sw_lbsc_e4_gfx_pos_check_b_sr ;}


//Liveries

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_auto, current_year){
	1948 .. 1966: sw_lbsc_e4_gfx_pos_check_a_br_black ;
	1923 .. 1947: sw_lbsc_e4_gfx_pos_check_a_sr ;
	sw_lbsc_e4_gfx_pos_check_a_lbsc ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_manual, cargo_subtype){
	0 : sw_lbsc_e4_gfx_pos_check_a_lbsc ;
	1 : sw_lbsc_e4_gfx_pos_check_a_sr ;
	sw_lbsc_e4_gfx_pos_check_a_br_black ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_manual_check, livery_choice){
	1 : sw_lbsc_e4_gfx_manual ;
	sw_lbsc_e4_gfx_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lbsc_e4_gfx_purchase, current_year){
	1948 .. 1966: gfx_lbsc_e4_purchase_br_black ;
	1923 .. 1947: gfx_lbsc_e4_purchase_sr ;
	gfx_lbsc_e4_purchase_lbsc ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_colours_auto, current_year){
	1948 .. 1966: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	1923 .. 1947: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BROWN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_colours_manual_check, livery_choice){
	1 : sw_lbsc_e4_colours_manual ;
	sw_lbsc_e4_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_colours_2cc_check, colour_scheme_1){
	1 : sw_lbsc_e4_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_lbsc_e4_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_lbsc_e4_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_LBSCR) ;
	 1 : string(STR_LIVERY_SOUTHERN) ;
	 2 : string(STR_LIVERY_BR_BLACK) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lbsc_e4_refit_text_check, livery_choice){
	1 : sw_lbsc_e4_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Item

item(FEAT_TRAINS, item_lbsc_e4, 1401){
	property{
		name                           : string(STR_NAME_LBSC_E4) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1897,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 40 ;
		vehicle_life                   : 38 ;
		reliability_decay              : 17 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 86 ;
		speed                          : 50 mph ;
		track_type                     : RAIL ;
		power                          : 588 hp ;
		weight                         : 59 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.14 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_lbsc_e4_gfx_manual_check ;
		colour_mapping                 : sw_lbsc_e4_colours_2cc_check ;
		purchase                       : sw_lbsc_e4_gfx_purchase ;
		purchase_colour_mapping        : sw_lbsc_e4_purchase_colours_2cc_check ;
		//sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_steam ;
		cargo_subtype_text             : sw_lbsc_e4_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 30 : 86) ;
		purchase_running_cost_factor : 86 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lbsc_e4, 1401){
	property{
		name                           : string(STR_NAME_LBSC_E4_ALT) ;
	}
}
}






# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/lord_nelson.pnml" 1

//MERCHANT NAVY


spriteset(gfx_nelson_a						, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,0	)}
spriteset(gfx_nelson_a_smoke				, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,0	)}
spriteset(gfx_nelson_a_br_black				, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,0	)}

spriteset(gfx_nelson_b						, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,25	)}
spriteset(gfx_nelson_b_smoke				, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,25	)}
spriteset(gfx_nelson_b_br_black				, "gfx/STEAM_LOCO/SR.png"	){	template_7_8_2		(0	,25	)}

spriteset(gfx_nelson_t						, "gfx/STEAM_LOCO/SR.png"	){	template_4_8		(162,0	)}
spriteset(gfx_nelson_t_br_black				, "gfx/STEAM_LOCO/SR.png"	){	template_4_8		(162,0	)}

spriteset(gfx_nelson_purchase				, "gfx/STEAM_LOCO/SR.png"	){	template_purchase	(162,25	)}

switch(FEAT_TRAINS, SELF, sw_nelson_motion, motion_counter % 2){1 : gfx_nelson_a ; gfx_nelson_b ;}
switch(FEAT_TRAINS, SELF, sw_nelson_motion_smoke, motion_counter % 2){1 : gfx_nelson_a_smoke ; gfx_nelson_b_smoke ;}
switch(FEAT_TRAINS, SELF, sw_nelson_motion_br_black, motion_counter % 2){1 : gfx_nelson_a_br_black ; gfx_nelson_b_br_black ;}


//Liveries

switch(FEAT_TRAINS, SELF, sw_nelson_gfx_manual, cargo_subtype){
	0 : sw_nelson_motion ;
	3 : sw_nelson_motion_br_black ;
	sw_nelson_motion_smoke ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_gfx_manual_check, livery_choice){
	1 : sw_nelson_gfx_manual ;
	sw_nelson_motion_smoke ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_nelson_colours_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_colours_manual_check, livery_choice){
	1 : sw_nelson_colours_manual ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_colours_2cc_check, colour_scheme_1){
	1 : sw_nelson_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_purchase_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_nelson_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_SOUTHERN) ;
	 1 : string(STR_LIVERY_SOUTHERN_RAILWAY_DEFLECTORS) ;
	 2 : string(STR_LIVERY_BR_BRUNSWICK) ;
	 3 : string(STR_LIVERY_BR_BLACK) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_refit_text_check, livery_choice){
	1 : sw_nelson_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Tender



//Liveries

switch(FEAT_TRAINS, SELF, sw_nelson_t_gfx_manual, cargo_subtype){
	3 : gfx_nelson_t_br_black ;
	gfx_nelson_t ;
}

switch(FEAT_TRAINS, SELF, sw_nelson_t_gfx_manual_check, livery_choice){
	1 : sw_nelson_t_gfx_manual ;
	gfx_nelson_t ;
}




//Item

item(FEAT_TRAINS, item_nelson, 1804){
	property{
		name							: string(STR_NAME_NELSON) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1926,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 30 ;
		vehicle_life					: 40 ;
		cost_factor						: 196 ;
		running_cost_factor				: 187 ;
		length							: 7 ;
		reliability_decay				: 20 ;
		
		speed							: 90 mph ;
		power							: 1863 hp ;
		weight							: 144 ton ;
		tractive_effort_coefficient		: 0.18 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_nelson_gfx_manual_check ;
		colour_mapping					: sw_nelson_colours_2cc_check ;
		purchase						: gfx_nelson_purchase ;
		purchase_colour_mapping			: sw_nelson_purchase_colours_2cc_check ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		//cargo_subtype_text				: sw_nelson_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 85 : 187) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 187 ;
	}
	livery_override(item_tender){
		default							: sw_nelson_t_gfx_manual_check ;
		colour_mapping					: sw_nelson_colours_2cc_check ;
		length							: 4 ;
		//cargo_subtype_text				: sw_nelson_refit_text_check ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_nelson, 1804){
	property{
		name                           : string(STR_NAME_NELSON_ALT) ;
	}
}
}

if (steam_selection < 1){
item (FEAT_TRAINS, item_nelson, 1804){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/bulleid_pacifics.pnml" 1

//MERCHANT NAVY


spriteset(gfx_merchnav							, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,250)}
spriteset(gfx_merchnav_later					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,275)}
spriteset(gfx_merchnav_rebuilt					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,300)}
spriteset(gfx_merchnav_lined					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,325)}

spriteset(gfx_merchnav_t						, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,250)}
spriteset(gfx_merchnav_later_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,275)}
spriteset(gfx_merchnav_rebuilt_t				, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,300)}
spriteset(gfx_merchnav_lined_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,325)}

spriteset(gfx_merchnav_purchase					, "gfx/STEAM_LOCO/bulleid.png"	){	template_purchase	(289,250)}
spriteset(gfx_merchnav_purchase_rebuilt			, "gfx/STEAM_LOCO/bulleid.png"	){	template_purchase	(289,300)}




//Liveries

switch(FEAT_TRAINS, SELF, sw_merchnav_gfx_manual, cargo_subtype){
	 1 : gfx_merchnav_lined ;
	 2 : gfx_merchnav_later ;
	 3 : gfx_merchnav_later ;
	gfx_merchnav ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_gfx_manual_check, livery_choice){
	1 : sw_merchnav_gfx_manual ;
	gfx_merchnav ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_merchnav_colours_auto, current_year){
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_colours_manual, cargo_subtype){
	 2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	 3 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_colours_manual_check, livery_choice){
	1 : sw_merchnav_colours_manual ;
	sw_merchnav_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_colours_2cc_check, colour_scheme_1){
	1 : sw_merchnav_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_merchnav_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_merchnav_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_SOUTHERN) ;
	 1 : string(STR_LIVERY_SOUTHERN_RAILWAY_LINED) ;
	 2 : string(STR_LIVERY_BR_NAVY) ;
	 3 : string(STR_LIVERY_BR_BRUNSWICK) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_refit_text_check, livery_choice){
	1 : sw_merchnav_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Tender



//Liveries

switch(FEAT_TRAINS, SELF, sw_merchnav_t_gfx_manual, cargo_subtype){
	 1 : gfx_merchnav_lined_t ;
	 2 : gfx_merchnav_later_t ;
	 3 : gfx_merchnav_later_t ;
	gfx_merchnav_t ;
}

switch(FEAT_TRAINS, SELF, sw_merchnav_t_gfx_manual_check, livery_choice){
	1 : sw_merchnav_t_gfx_manual ;
	gfx_merchnav_t ;
}




//Item

item(FEAT_TRAINS, item_merchnav, 1800){
	property{
		name							: string(STR_NAME_MERCHNAV) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1940,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 30 ;
		vehicle_life					: 40 ;
		cost_factor						: 230 ;
		running_cost_factor				: 255 ;
		length							: 7 ;
		reliability_decay				: 20 ;
		
		speed							: 110 mph ;
		power							: 2468 hp ;
		weight							: 141 ton ;
		tractive_effort_coefficient		: 0.12 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_merchnav_gfx_manual_check ;
		colour_mapping					: sw_merchnav_colours_2cc_check ;
		purchase						: gfx_merchnav_purchase ;
		purchase_colour_mapping			: sw_merchnav_purchase_colours_2cc_check ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		cargo_subtype_text				: sw_merchnav_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 100 : 255) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 255 ;
	}
	livery_override(item_tender){
		default							: sw_merchnav_t_gfx_manual_check ;
		colour_mapping					: sw_merchnav_colours_2cc_check ;
		length							: 4 ;
		//cargo_subtype_text				: sw_merchnav_refit_text_check ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_merchnav, 1800){
	property{
		name                           : string(STR_NAME_MERCHNAV_ALT) ;
	}
}
}








//Rebuilt Merchant Navy


switch(FEAT_TRAINS, SELF, sw_merchnav_rebuilt_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_merchnav_rebuilt, 1900){
	property{
		name							: string(STR_NAME_MERCHNAV) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1956,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 14 ;
		vehicle_life					: 30 ;
		cost_factor						: 200 ;
		running_cost_factor				: 230 ;
		length							: 7 ;
		reliability_decay				: 11 ;
		
		speed							: 110 mph ;
		power							: 2204 hp ;
		weight							: 144 ton ;
		tractive_effort_coefficient		: 0.1 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: gfx_merchnav_rebuilt ;
		colour_mapping					: sw_merchnav_rebuilt_colours_2cc_check ;
		purchase						: gfx_merchnav_purchase_rebuilt ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 60 : 230) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 230 ;
	}
	livery_override(item_tender){
		default							: gfx_merchnav_rebuilt_t ;
		colour_mapping					: sw_merchnav_rebuilt_colours_2cc_check ;
		length							: 4 ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_merchnav_rebuilt, 1900){
	property{
		name                           : string(STR_NAME_MERCHNAV_REBUILT_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_merchnav_rebuilt, 1900){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}













//LIGHT PACIFICS


spriteset(gfx_lightpacific_lined					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,125)}
spriteset(gfx_lightpacific_named					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,150)}
spriteset(gfx_lightpacific_rebuilt					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,175)}
spriteset(gfx_lightpacific_plain					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,200)}
spriteset(gfx_lightpacific_black					, "gfx/STEAM_LOCO/bulleid.png"	){	template_7_8_2		(0	,225)}

spriteset(gfx_lightpacific_lined_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,125)}
spriteset(gfx_lightpacific_named_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,150)}
spriteset(gfx_lightpacific_rebuilt_t				, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,175)}
spriteset(gfx_lightpacific_plain_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,200)}
spriteset(gfx_lightpacific_black_t					, "gfx/STEAM_LOCO/bulleid.png"	){	template_4_8		(162,225)}

spriteset(gfx_lightpacific_purchase_lined			, "gfx/STEAM_LOCO/bulleid.png"	){	template_purchase	(289,125)}
spriteset(gfx_lightpacific_purchase_rebuilt			, "gfx/STEAM_LOCO/bulleid.png"	){	template_purchase	(289,175)}




//Switches


//Liveries

switch(FEAT_TRAINS, SELF, sw_lightpacific_gfx_auto, current_year){
	gfx_lightpacific_lined ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_gfx_manual, cargo_subtype){
	1 : gfx_lightpacific_plain ;
	2 : gfx_lightpacific_named ;
	3 : gfx_lightpacific_black ;
	gfx_lightpacific_lined ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_gfx_manual_check, livery_choice){
	1 : sw_lightpacific_gfx_manual ;
	sw_lightpacific_gfx_auto ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_lightpacific_colours_auto, current_year){
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	2 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_colours_manual_check, livery_choice){
	1 : sw_lightpacific_colours_manual ;
	palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_colours_2cc_check, colour_scheme_1){
	1 : sw_lightpacific_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_lightpacific_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_lightpacific_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_SOUTHERN_RAILWAY_LINED) ;
	1 : string(STR_LIVERY_BR_NAVY) ;
	2 : string(STR_LIVERY_BR_BRUNSWICK) ;
	3 : string(STR_LIVERY_BR_BLACK) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_refit_text_check, livery_choice){
	1 : sw_lightpacific_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Tender



//Liveries

switch(FEAT_TRAINS, SELF, sw_lightpacific_t_gfx_manual, cargo_subtype){
	1 : gfx_lightpacific_plain_t ;
	2 : gfx_lightpacific_named_t ;
	3 : gfx_lightpacific_black_t ;
	gfx_lightpacific_lined_t ;
}

switch(FEAT_TRAINS, SELF, sw_lightpacific_t_gfx_manual_check, livery_choice){
	1 : sw_lightpacific_t_gfx_manual ;
	gfx_lightpacific_lined_t ;
}




//Item

item(FEAT_TRAINS, item_lightpacific, 1801){
	property{
		name							: string(STR_NAME_BULLEID_LIGHT) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1945,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 25 ;
		vehicle_life					: 50 ;
		cost_factor						: 210 ;
		running_cost_factor				: 234 ;
		length							: 7 ;
		reliability_decay				: 18 ;
		
		speed							: 100 mph ;
		power							: 2221 hp ;
		weight							: 133 ton ;
		tractive_effort_coefficient		: 0.1 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_lightpacific_gfx_manual_check ;
		colour_mapping					: sw_lightpacific_colours_2cc_check ;
		purchase						: gfx_lightpacific_purchase_lined ;
		purchase_colour_mapping			: sw_lightpacific_purchase_colours_2cc_check ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		cargo_subtype_text				: sw_lightpacific_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 100 : 234) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 234 ;
	}
	livery_override(item_tender){
		default							: sw_lightpacific_t_gfx_manual_check ;
		colour_mapping					: sw_lightpacific_colours_2cc_check ;
		length							: 4 ;
		//cargo_subtype_text				: sw_lightpacific_refit_text_check ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lightpacific, 1801){
	property{
		name                           : string(STR_NAME_BULLEID_LIGHT_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_lightpacific, 1801){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}








//Rebuilt Light Pacific


switch(FEAT_TRAINS, SELF, sw_lightpacific_rebuilt_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_lightpacific_rebuilt, 1901){
	property{
		name							: string(STR_NAME_BULLEID_LIGHT_REBUILT) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1955,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 15 ;
		vehicle_life					: 42 ;
		cost_factor						: 182 ;
		running_cost_factor				: 213 ;
		length							: 7 ;
		reliability_decay				: 8 ;
		
		speed							: 100 mph ;
		power							: 1983 hp ;
		weight							: 138 ton ;
		tractive_effort_coefficient		: 0.09 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: gfx_lightpacific_rebuilt ;
		colour_mapping					: sw_lightpacific_rebuilt_colours_2cc_check ;
		purchase						: gfx_lightpacific_purchase_rebuilt ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 60 : 213) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 213 ;
	}
	livery_override(item_tender){
		default							: gfx_lightpacific_rebuilt_t ;
		colour_mapping					: sw_lightpacific_rebuilt_colours_2cc_check ;
		length							: 4 ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lightpacific_rebuilt, 1901){
	property{
		name                           : string(STR_NAME_BULLEID_LIGHT_REBUILT_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_lightpacific_rebuilt, 1901){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}






/*Item

item(FEAT_TRAINS, item_merchnav_t, 2800){
	property{
		name							: string(STR_NAME_MERCHNAV) ;  
		climates_available				: NO_CLIMATE ;
		introduction_date				: date(1940,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		model_life						: 0 ;
		vehicle_life					: 0 ;
		reliability_decay				: 0 ;
		cost_factor						: 0 ;
		running_cost_base				: RUNNING_COST_STEAM ;
		running_cost_factor				: 0 ;
		speed							: 0 mph ;
		track_type						: RAIL ;
		power							: 0 hp ;
		weight							: 47 ton ;
		engine_class					: ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient		: 0.18 ;
		air_drag_coefficient			: 0.0 ;
		length							: 4 ;
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_NONE ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_merchnav_t_gfx_manual_check ;
		colour_mapping					: sw_merchnav_colours_2cc_check ;
		cargo_subtype_text				: sw_merchnav_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
	}
}

*/











//BULLEID Q1



spriteset(gfx_q1				, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8		(0	,175)}
spriteset(gfx_q1_2cc			, "gfx/STEAM_LOCO/southern_region.png"	){	template_5_8		(0	,200)}

spriteset(gfx_q1_t				, "gfx/STEAM_LOCO/southern_region.png"	){	template_3_8		(130,175)}
spriteset(gfx_q1_2cc_t			, "gfx/STEAM_LOCO/southern_region.png"	){	template_3_8		(130,200)}

spriteset(gfx_q1_purchase		, "gfx/STEAM_LOCO/southern_region.png"	){	template_purchase	(92	,141)}
spriteset(gfx_q1_purchase_2cc	, "gfx/STEAM_LOCO/southern_region.png"	){	template_purchase	(92	,154)}






switch(FEAT_TRAINS, SELF, sw_q1_gfx_purchase, colour_scheme_1){
	1 : gfx_q1_purchase ;
	gfx_q1_purchase_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_q1_gfx_auto, colour_scheme_1){
	1 : gfx_q1 ;
	gfx_q1_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_q1_gfx_manual, cargo_subtype){
	1..2 : gfx_q1_2cc ;
	gfx_q1 ;
}

switch(FEAT_TRAINS, SELF, sw_q1_gfx_manual_check, livery_choice){
	1 : sw_q1_gfx_manual ;
	sw_q1_gfx_auto ;
}


//Colours



switch(FEAT_TRAINS, SELF, sw_q1_colours_manual, cargo_subtype){
	0..1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_q1_colours_2cc_check, colour_scheme_1){
	1 : sw_q1_colours_manual ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_q1_purchase_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_q1_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_BR_BLACK) ;
	 1 : string(STR_LIVERY_SOUTHERN) ;
	 2 : string(STR_LIVER_COMP_COLOURS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_q1_refit_text_check, livery_choice){
	1 : sw_q1_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Tender


switch(FEAT_TRAINS, SELF, sw_q1_t_gfx_auto, colour_scheme_1){
	1 : gfx_q1_t ;
	gfx_q1_2cc_t ;
}

switch(FEAT_TRAINS, SELF, sw_q1_t_gfx_manual, cargo_subtype){
	1..2 : gfx_q1_2cc_t ;
	gfx_q1_t ;
}

switch(FEAT_TRAINS, SELF, sw_q1_t_gfx_manual_check, livery_choice){
	1 : sw_q1_t_gfx_manual ;
	sw_q1_t_gfx_auto ;
}




//Item

item(FEAT_TRAINS, item_q1, 1802){
	property{
		name							: string(STR_NAME_BULLEID_Q1) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1942,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.0888888888888889 ;
		
		model_life						: 30 ;
		vehicle_life					: 65 ;
		cost_factor						: 100 ;
		running_cost_factor				: 100 ;
		length							: 5 ;
		reliability_decay				: 3 ;
		
		speed							: 65 mph ;
		power							: 1447 hp ;
		weight							: 89 ton ;
		tractive_effort_coefficient		: 0.15 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_q1_gfx_manual_check ;
		colour_mapping					: sw_q1_colours_2cc_check ;
		purchase						: sw_q1_gfx_purchase ;
		purchase_colour_mapping			: sw_q1_purchase_colours_2cc_check ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		cargo_subtype_text				: sw_q1_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 20 : 100) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 100 ;
	}
	livery_override(item_tender){
		default							: sw_q1_t_gfx_manual_check ;
		colour_mapping					: sw_q1_colours_2cc_check ;
		length							: 3 ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_q1, 1802){
	property{
		name                           : string(STR_NAME_BULLEID_Q1_ALT) ;
	}
}
}







# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/lms_coronation.pnml" 1

// LMS Coronation Class


spriteset(gfx_coronation						, "gfx/STEAM_LOCO/midland_region.png"	){	template_7_8_2		(0	,0	)}
spriteset(gfx_coronation_rebuilt				, "gfx/STEAM_LOCO/midland_region.png"	){	template_7_8_2		(0	,25	)}
spriteset(gfx_coronation_black_rebuilt			, "gfx/STEAM_LOCO/midland_region.png"	){	template_7_8_2		(0	,50	)}
spriteset(gfx_coronation_red					, "gfx/STEAM_LOCO/midland_region.png"	){	template_7_8_2		(0	,75	)}
spriteset(gfx_coronation_red_rebuilt			, "gfx/STEAM_LOCO/midland_region.png"	){	template_7_8_2		(0	,100)}

spriteset(gfx_coronation_t						, "gfx/STEAM_LOCO/midland_region.png"	){	template_4_8		(162,0	)}
spriteset(gfx_coronation_rebuilt_t				, "gfx/STEAM_LOCO/midland_region.png"	){	template_4_8		(162,25	)}
spriteset(gfx_coronation_black_rebuilt_t		, "gfx/STEAM_LOCO/midland_region.png"	){	template_4_8		(162,50	)}
spriteset(gfx_coronation_red_t					, "gfx/STEAM_LOCO/midland_region.png"	){	template_4_8		(162,75	)}
spriteset(gfx_coronation_red_rebuilt_t			, "gfx/STEAM_LOCO/midland_region.png"	){	template_4_8		(162,100)}

spriteset(gfx_coronation_purchase_rebuilt		, "gfx/STEAM_LOCO/midland_region.png"	){	template_purchase	(289,25	)}



//Liveries

switch(FEAT_TRAINS, SELF, sw_coronation_gfx_manual, cargo_subtype){
	 1 : gfx_coronation_red ;
	 2 : gfx_coronation_rebuilt ;
	 3 : gfx_coronation_red_rebuilt ;
	 4 : gfx_coronation_black_rebuilt ;
	 5 : gfx_coronation_rebuilt ;
	gfx_coronation ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_gfx_manual_check, livery_choice){
	1 : sw_coronation_gfx_manual ;
	gfx_coronation_rebuilt ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_coronation_colours_auto, current_year){
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	5 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_colours_manual_check, livery_choice){
	1 : sw_coronation_colours_manual ;
	sw_coronation_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_colours_2cc_check, colour_scheme_1){
	1 : sw_coronation_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_coronation_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text


switch(FEAT_TRAINS, SELF, sw_coronation_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_LMS_BLUE) ;
	 1 : string(STR_LIVERY_LMS_SMOOTH) ;
	 2 : string(STR_LIVERY_BR_NAVY) ;
	 3 : string(STR_LIVERY_LMS) ;
	 4 : string(STR_LIVERY_BR_BLACK) ;
	 5 : string(STR_LIVERY_BR_BRUNSWICK) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_refit_text_check, livery_choice){
	1 : sw_coronation_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Tender



//Liveries

switch(FEAT_TRAINS, SELF, sw_coronation_t_gfx_manual, cargo_subtype){
	 1 : gfx_coronation_red_t ;
	 2 : gfx_coronation_rebuilt_t ;
	 3 : gfx_coronation_red_rebuilt_t ;
	 4 : gfx_coronation_black_rebuilt_t ;
	 5 : gfx_coronation_rebuilt_t ;
	gfx_coronation_t ;
}

switch(FEAT_TRAINS, SELF, sw_coronation_t_gfx_manual_check, livery_choice){
	1 : sw_coronation_t_gfx_manual ;
	gfx_coronation_rebuilt_t ;
}




//Item

item(FEAT_TRAINS, item_coronation, 1700){
	property{
		name							: string(STR_NAME_CORONATION) ;  
		climates_available				: ALL_CLIMATES ;
		introduction_date				: date(1937,1,1) ;
		refit_cost						: 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit				: [MAIL, GOOD] ;
		cargo_capacity					: 1 ;
		air_drag_coefficient			: 0.07 ;
		
		model_life						: 25 ;
		vehicle_life					: 35 ;
		cost_factor						: 240 ;
		running_cost_factor				: 230 ;
		length							: 7 ;
		reliability_decay				: 20 ;
		
		speed							: 110 mph ;
		power							: 2501 hp ;
		weight							: 167 ton ;
		tractive_effort_coefficient		: 0.16 ;
		
		track_type						: RAIL ;
		engine_class					: ENGINE_CLASS_STEAM ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_STEAM ;
		running_cost_base				: RUNNING_COST_STEAM ;
		
		misc_flags						: bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id						: SPRITE_ID_NEW_TRAIN ;
		dual_headed						: 0 ;
	}
	graphics{
		default							: sw_coronation_gfx_manual_check ;
		colour_mapping					: sw_coronation_colours_2cc_check ;
		purchase						: gfx_coronation_purchase_rebuilt ;
		purchase_colour_mapping			: sw_coronation_purchase_colours_2cc_check ;
		//sound_effect					: sw_sfx_diesel_loco_ee_2 ;
		create_effect					: vfx_steam ;
		cargo_subtype_text				: sw_coronation_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity					: return 0 ;
		can_attach_wagon				: sw_all_but_MU90;
		running_cost_factor				: return(current_speed == 0 ? 85 : 230) ;
		articulated_part				: sw_tender_loco ;
		purchase_running_cost_factor	: 230 ;
	}
	livery_override(item_tender){
		default							: sw_coronation_t_gfx_manual_check ;
		colour_mapping					: sw_coronation_colours_2cc_check ;
		length							: 4 ;
		//cargo_subtype_text				: sw_coronation_refit_text_check ;
		cargo_capacity:					return 0;
		purchase_cargo_capacity:		0 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_coronation, 1700){
	property{
		name                           : string(STR_NAME_CORONATION_ALT) ;
	}
}
}

if (steam_selection < 2){
item (FEAT_TRAINS, item_coronation, 1700){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}




# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/gwr_saddle.pnml" 1
// GWR Saddle Tank

//Sprites

//spriteset(gfx_gwr_saddle					, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8			(200,75	)}
//spriteset(gfx_gwr_saddle_rev				, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8_rev		(200,75	)}
spriteset(gfx_gwr_saddle_short				, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8			(200,100)}
spriteset(gfx_gwr_saddle_short_rev			, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8_rev		(200,100)}
spriteset(gfx_gwr_saddle_lined				, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8			(200,125)}
spriteset(gfx_gwr_saddle_lined_rev			, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8_rev		(200,125)}


spriteset(gfx_gwr_saddle_wheels_a			, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8			(325,100)}
spriteset(gfx_gwr_saddle_wheels_a_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8_rev		(325,100)}
spriteset(gfx_gwr_saddle_wheels_b			, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8			(325,125)}
spriteset(gfx_gwr_saddle_wheels_b_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_4_8_rev		(325,125)}

spriteset(gfx_gwr_saddle_purchase			, "gfx/STEAM_LOCO/gwr.png"	){	template_purchase	(325,75	)}


//Switches


//Graphics


/*Base
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_gfx_rev_check_a,			vehicle_is_reversed){ 1 : gfx_gwr_saddle ; gfx_gwr_saddle_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_gfx_rev_check_b,			vehicle_is_reversed){ 1 : gfx_gwr_saddle_rev ; gfx_gwr_saddle ; }

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_pos_check_m,			position_in_vehid_chain){ 0 : gfx_gwr_saddle_rev ; sw_gwr_saddle_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : gfx_gwr_saddle ; sw_gwr_saddle_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_saddle_gfx_rev_check_a ; gfx_gwr_saddle_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_saddle_gfx_pos_check_f ; sw_gwr_saddle_gfx_pos_check_b ;}*/

//Short
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_short_gfx_rev_check_a,	vehicle_is_reversed){ 1 : gfx_gwr_saddle_short ; gfx_gwr_saddle_short_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_short_gfx_rev_check_b,	vehicle_is_reversed){ 1 : gfx_gwr_saddle_short_rev ; gfx_gwr_saddle_short ; }

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_short_gfx_pos_check_m,		position_in_vehid_chain){ 0 : gfx_gwr_saddle_short_rev ; sw_gwr_saddle_short_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_short_gfx_pos_check_b,		position_in_vehid_chain_from_end){ 0 : gfx_gwr_saddle_short ; sw_gwr_saddle_short_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_short_gfx_pos_check_f,		num_vehs_in_vehid_chain ){ 1 : sw_gwr_saddle_short_gfx_rev_check_a ; gfx_gwr_saddle_short_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_short_gfx_pos_check_a,		position_in_consist){ 0 : sw_gwr_saddle_short_gfx_pos_check_f ; sw_gwr_saddle_short_gfx_pos_check_b ;}

//Lined
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_lined_gfx_rev_check_a,	vehicle_is_reversed){ 1 : gfx_gwr_saddle_lined ; gfx_gwr_saddle_lined_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_lined_gfx_rev_check_b,	vehicle_is_reversed){ 1 : gfx_gwr_saddle_lined_rev ; gfx_gwr_saddle_lined ; }

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_lined_gfx_pos_check_m,		position_in_vehid_chain){ 0 : gfx_gwr_saddle_lined_rev ; sw_gwr_saddle_lined_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_lined_gfx_pos_check_b,		position_in_vehid_chain_from_end){ 0 : gfx_gwr_saddle_lined ; sw_gwr_saddle_lined_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_lined_gfx_pos_check_f,		num_vehs_in_vehid_chain ){ 1 : sw_gwr_saddle_lined_gfx_rev_check_a ; gfx_gwr_saddle_lined_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_lined_gfx_pos_check_a,		position_in_consist){ 0 : sw_gwr_saddle_lined_gfx_pos_check_f ; sw_gwr_saddle_lined_gfx_pos_check_b ;}




switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_manual, cargo_subtype){
	1 : sw_gwr_saddle_lined_gfx_pos_check_a ;
	sw_gwr_saddle_short_gfx_pos_check_a ;
}

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_gfx_manual_check, livery_choice){
	1 : sw_gwr_saddle_gfx_manual ;
	sw_gwr_saddle_short_gfx_pos_check_a ;
}




//Sprite stack

//Wheels

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels, motion_counter % 2){
	1 : gfx_gwr_saddle_wheels_a ;
	gfx_gwr_saddle_wheels_b ;
}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels_rev, motion_counter % 2){
	1 : gfx_gwr_saddle_wheels_a_rev ;
	gfx_gwr_saddle_wheels_b_rev ;
}

switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_wheels_gfx_rev_check_a,			vehicle_is_reversed){ 1 : sw_gwr_saddle_wheels ; sw_gwr_saddle_wheels_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_saddle_wheels_gfx_rev_check_b,			vehicle_is_reversed){ 1 : sw_gwr_saddle_wheels_rev ; sw_gwr_saddle_wheels ; }

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels_gfx_pos_check_m,			position_in_vehid_chain){ 0 : sw_gwr_saddle_wheels_rev ; sw_gwr_saddle_wheels_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : sw_gwr_saddle_wheels ; sw_gwr_saddle_wheels_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_saddle_wheels_gfx_rev_check_a ; sw_gwr_saddle_wheels_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_saddle_wheels_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_saddle_wheels_gfx_pos_check_f ; sw_gwr_saddle_wheels_gfx_pos_check_b ;}


switch(FEAT_TRAINS, SELF, sw_gwr_saddle_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_gwr_saddle_gfx_manual_check ;
	1 : sw_gwr_saddle_wheels_gfx_pos_check_a ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_colours_manual, cargo_subtype){
	1..2 : palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_colours_2cc_check, colour_scheme_1){
	1 : sw_gwr_saddle_colours_manual ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_purchase_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text


switch(FEAT_TRAINS, SELF, sw_gwr_saddle_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_GWR) ;
	 1 : string(STR_LIVERY_GWR_STRING,string(STR_LIVERY_LINED)) ;
	 2 : string(STR_LIVERY_AVON) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_gwr_saddle_refit_text_check, livery_choice){
	1 : sw_gwr_saddle_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item(FEAT_TRAINS, item_gwr_saddle, 1513){
	property{
		name                           : string(STR_NAME_GWR_SADDLE) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1872,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 40 ;
		vehicle_life                   : 72 ;
		reliability_decay              : 11 ;
		cost_factor                    : 40 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 40 ;
		speed                          : 20 mph ;
		track_type                     : RAIL ;
		power                          : 147 hp ;
		weight                         : 24 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.21 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 4 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_gwr_saddle_spritestack ;
		colour_mapping                 : sw_gwr_saddle_colours_2cc_check ;
		purchase_colour_mapping		   : sw_gwr_saddle_purchase_colours_2cc_check ;
		purchase                       : gfx_gwr_saddle_purchase ;
		//sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_steam ;
		cargo_subtype_text             : sw_gwr_saddle_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 10 : 40) ;
		purchase_running_cost_factor : 40 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_gwr_saddle, 1513){
	property{
		name                           : string(STR_NAME_GWR_SADDLE_ALT) ;
	}
}
}







// GWR 1361 Class


spriteset(gfx_gwr_1361					, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(200,175)}
spriteset(gfx_gwr_1361_rev				, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(200,175)}


spriteset(gfx_gwr_1361_wheels_a			, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(330,175)}
spriteset(gfx_gwr_1361_wheels_a_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(330,175)}
spriteset(gfx_gwr_1361_wheels_b			, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(330,200)}
spriteset(gfx_gwr_1361_wheels_b_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(330,200)}

spriteset(gfx_gwr_1361_purchase			, "gfx/STEAM_LOCO/gwr.png"	){	template_purchase	(200,225)}


//Base
switch(FEAT_TRAINS, PARENT, sw_gwr_1361_gfx_rev_check_a,			vehicle_is_reversed){ 1 : gfx_gwr_1361 ; gfx_gwr_1361_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_1361_gfx_rev_check_b,			vehicle_is_reversed){ 1 : gfx_gwr_1361_rev ; gfx_gwr_1361 ; }

switch(FEAT_TRAINS, SELF, sw_gwr_1361_gfx_pos_check_m,			position_in_vehid_chain){ 0 : gfx_gwr_1361_rev ; sw_gwr_1361_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : gfx_gwr_1361 ; sw_gwr_1361_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_1361_gfx_rev_check_a ; gfx_gwr_1361_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_1361_gfx_pos_check_f ; sw_gwr_1361_gfx_pos_check_b ;}



//Wheels

switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels, motion_counter % 2){
	1 : gfx_gwr_1361_wheels_a ;
	gfx_gwr_1361_wheels_b ;
}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels_rev, motion_counter % 2){
	1 : gfx_gwr_1361_wheels_a_rev ;
	gfx_gwr_1361_wheels_b_rev ;
}

switch(FEAT_TRAINS, PARENT, sw_gwr_1361_wheels_gfx_rev_check_a,			vehicle_is_reversed){ 1 : sw_gwr_1361_wheels ; sw_gwr_1361_wheels_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_1361_wheels_gfx_rev_check_b,			vehicle_is_reversed){ 1 : sw_gwr_1361_wheels_rev ; sw_gwr_1361_wheels ; }

switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels_gfx_pos_check_m,			position_in_vehid_chain){ 0 : sw_gwr_1361_wheels_rev ; sw_gwr_1361_wheels_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : sw_gwr_1361_wheels ; sw_gwr_1361_wheels_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_1361_wheels_gfx_rev_check_a ; sw_gwr_1361_wheels_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_1361_wheels_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_1361_wheels_gfx_pos_check_f ; sw_gwr_1361_wheels_gfx_pos_check_b ;}


switch(FEAT_TRAINS, SELF, sw_gwr_1361_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_gwr_1361_gfx_pos_check_a ;
	1 : sw_gwr_1361_wheels_gfx_pos_check_a ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_gwr_1361_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}


item(FEAT_TRAINS, item_gwr_1361, 1561){
	property{
		name                           : string(STR_NAME_GWR_1361) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1910,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 30 ;
		vehicle_life                   : 62 ;
		reliability_decay              : 19 ;
		cost_factor                    : 30 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 30 ;
		speed                          : 30 mph ;
		track_type                     : RAIL ;
		power                          : 244 hp ;
		weight                         : 36 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.18 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_gwr_1361_spritestack ;
		colour_mapping                 : sw_gwr_1361_colours_2cc_check ;
		//purchase_colour_mapping		   : sw_gwr_1361_purchase_colours_2cc_check ;
		purchase                       : gfx_gwr_1361_purchase ;
		//sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_steam ;
		//cargo_subtype_text             : sw_gwr_1361_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 10 : 30) ;
		purchase_running_cost_factor   : 30 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_gwr_1361, 1561){
	property{
		name                           : string(STR_NAME_GWR_1361_ALT) ;
	}
}
}


if (steam_selection < 2){
item (FEAT_TRAINS, item_gwr_1361, 1561){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}











// GWR 1361 Class


spriteset(gfx_gwr_buffalo					, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(200,200)}
spriteset(gfx_gwr_buffalo_rev				, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(200,200)}


spriteset(gfx_gwr_buffalo_wheels_a			, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(330,225)}
spriteset(gfx_gwr_buffalo_wheels_a_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(330,225)}
spriteset(gfx_gwr_buffalo_wheels_b			, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8			(330,250)}
spriteset(gfx_gwr_buffalo_wheels_b_rev		, "gfx/STEAM_LOCO/gwr.png"	){	template_5_8_rev		(330,250)}

spriteset(gfx_gwr_buffalo_purchase			, "gfx/STEAM_LOCO/gwr.png"	){	template_purchase	(200,250)}


//Base
switch(FEAT_TRAINS, PARENT, sw_gwr_buffalo_gfx_rev_check_a,			vehicle_is_reversed){ 1 : gfx_gwr_buffalo ; gfx_gwr_buffalo_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_buffalo_gfx_rev_check_b,			vehicle_is_reversed){ 1 : gfx_gwr_buffalo_rev ; gfx_gwr_buffalo ; }

switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_gfx_pos_check_m,			position_in_vehid_chain){ 0 : gfx_gwr_buffalo_rev ; sw_gwr_buffalo_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : gfx_gwr_buffalo ; sw_gwr_buffalo_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_buffalo_gfx_rev_check_a ; gfx_gwr_buffalo_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_buffalo_gfx_pos_check_f ; sw_gwr_buffalo_gfx_pos_check_b ;}


//Wheels

switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels, motion_counter % 2){
	1 : gfx_gwr_buffalo_wheels_a ;
	gfx_gwr_buffalo_wheels_b ;
}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels_rev, motion_counter % 2){
	1 : gfx_gwr_buffalo_wheels_a_rev ;
	gfx_gwr_buffalo_wheels_b_rev ;
}

switch(FEAT_TRAINS, PARENT, sw_gwr_buffalo_wheels_gfx_rev_check_a,			vehicle_is_reversed){ 1 : sw_gwr_buffalo_wheels ; sw_gwr_buffalo_wheels_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gwr_buffalo_wheels_gfx_rev_check_b,			vehicle_is_reversed){ 1 : sw_gwr_buffalo_wheels_rev ; sw_gwr_buffalo_wheels ; }

switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels_gfx_pos_check_m,			position_in_vehid_chain){ 0 : sw_gwr_buffalo_wheels_rev ; sw_gwr_buffalo_wheels_gfx_rev_check_b ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels_gfx_pos_check_b,			position_in_vehid_chain_from_end){ 0 : sw_gwr_buffalo_wheels ; sw_gwr_buffalo_wheels_gfx_pos_check_m ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels_gfx_pos_check_f,			num_vehs_in_vehid_chain ){ 1 : sw_gwr_buffalo_wheels_gfx_rev_check_a ; sw_gwr_buffalo_wheels_rev ;}
switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_wheels_gfx_pos_check_a,			position_in_consist){ 0 : sw_gwr_buffalo_wheels_gfx_pos_check_f ; sw_gwr_buffalo_wheels_gfx_pos_check_b ;}


switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_gwr_buffalo_gfx_pos_check_a ;
	1 : sw_gwr_buffalo_wheels_gfx_pos_check_a ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_gwr_buffalo_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}


item(FEAT_TRAINS, item_gwr_buffalo, 1510){
	property{
		name                           : string(STR_NAME_GWR_BUFFALO) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1870,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 45 ;
		vehicle_life                   : 75 ;
		reliability_decay              : 24 ;
		cost_factor                    : 48 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 75 ;
		speed                          : 45 mph ;
		track_type                     : RAIL ;
		power                          : 338 hp ;
		weight                         : 44 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.18 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_gwr_buffalo_spritestack ;
		colour_mapping                 : sw_gwr_buffalo_colours_2cc_check ;
		//purchase_colour_mapping		   : sw_gwr_buffalo_purchase_colours_2cc_check ;
		purchase                       : gfx_gwr_buffalo_purchase ;
		//sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_steam ;
		//cargo_subtype_text             : sw_gwr_buffalo_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 20 : 75) ;
		purchase_running_cost_factor   : 75 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_gwr_buffalo, 1510){
	property{
		name                           : string(STR_NAME_GWR_BUFFALO_ALT) ;
	}
}
}


if (steam_selection < 1){
item (FEAT_TRAINS, item_gwr_buffalo, 1510){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}





























# 1 "rukts.pnml" 3

# 1 "src/DIESEL_LOCO/Swindon_Type1.pnml" 1
//Swindon Type 1 "Teddy Bear"

//Spritesets

spriteset(gfx_swtype1_standard      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 25) } 
spriteset(gfx_swtype1_standard_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 25) } 
spriteset(gfx_swtype1_brll          , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 50) } 
spriteset(gfx_swtype1_brll_rev      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 50) } 
spriteset(gfx_swtype1_brblue        , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 75) } 
spriteset(gfx_swtype1_brblue_rev    , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 75) } 
spriteset(gfx_swtype1_brmrn         , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0,100) } 
spriteset(gfx_swtype1_brmrn_rev     , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0,100) } 

spriteset(gfx_swtype1_purchase, "gfx/DIESEL_LOCO/class_14.png"){ template_purchase(130, 50) } 

spriteset(gfx_swtype1_wheels_1      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (187,  0) } 
spriteset(gfx_swtype1_wheels_1_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(187,  0) } 
spriteset(gfx_swtype1_wheels_2      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (187, 25) } 
spriteset(gfx_swtype1_wheels_2_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(187, 25) } 


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_swtype1_standard_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_standard_rev ; gfx_swtype1_standard ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brll_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brll_rev ; gfx_swtype1_brll ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brblue_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brblue_rev ; gfx_swtype1_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brmrn_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brmrn_rev ; gfx_swtype1_brmrn ; }


switch(FEAT_TRAINS, PARENT, sw_swtype1_wheels_1_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_wheels_1_rev ; gfx_swtype1_wheels_1 ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_wheels_2_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_wheels_2_rev ; gfx_swtype1_wheels_2 ; }


//Automatic liveries

random_switch(FEAT_TRAINS, SELF, sw_swtype1_brblue_random, TRIGGER_VEHICLE_SERVICE){
	1 : sw_swtype1_brblue_rev_check ;
	1 : sw_swtype1_standard_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_auto, current_year){
	1967..1982 : sw_swtype1_brblue_random ;
	1983..1995 : sw_swtype1_brll_rev_check ;
	sw_swtype1_standard_rev_check ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_swtype1_manual, cargo_subtype){
	2..3 : sw_swtype1_brll_rev_check ;
	5..6 : sw_swtype1_brmrn_rev_check ;
	sw_swtype1_standard_rev_check ;
}


//Manual check

switch(FEAT_TRAINS, SELF, sw_swtype1_manual_check, livery_choice){
	1 : sw_swtype1_manual ;
	sw_swtype1_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_swtype1_wheels, motion_counter % 2){
	1 : sw_swtype1_wheels_1_rev_check ;
	sw_swtype1_wheels_2_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_swtype1_manual_check ;
	1 : sw_swtype1_wheels ;
}


/*Purchase switches

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_purchase, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}
*/
//Refit Text

switch(FEAT_TRAINS, SELF, sw_swtype1_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	3 : string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4 : string(STR_LIVERY_NCB) ;
	5 : string(STR_LIVERY_MAROON) ;
	6 : string(STR_LIVERY_BSC) ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_refit_text_check, livery_choice){
	1 : sw_swtype1_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

random_switch(FEAT_TRAINS, SELF, sw_swtype1_sector_colours, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_auto, current_year){
	1967..1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1983..1995 : sw_swtype1_sector_colours ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_manual, cargo_subtype){
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	3    : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	5    : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	6    : palette_2cc(COLOUR_CREAM, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_colours_manual_check, livery_choice){
	1 : sw_swtype1_colours_manual ;
	sw_swtype1_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_colours_2cc_check, colour_scheme_1){
	1 : sw_swtype1_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_swtype1, 14){
	property{
		name                           : string(STR_NAME_SWTYPE1) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1964,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 26 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 13 ;
		cost_factor                    : 34 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 80 ;
		speed                          : 40 mph ;
		track_type                     : RAIL ;
		power                          : 500 kW ;
		weight                         : 49 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.31 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_swtype1_spritestack ;
		colour_mapping                 : sw_swtype1_colours_2cc_check ;
		purchase_colour_mapping        : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
		purchase                       : gfx_swtype1_purchase ;
		sound_effect                   : sw_sfx_extension_08_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_swtype1_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 20 : 80) ;
		purchase_running_cost_factor   : 80 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_swtype1, 14){
	property{
		name                           : string(STR_NAME_SWTYPE1_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/gronk.pnml" 1
//BR Class 08 "Gronk"

//Spritesets

spriteset(gfx_gronk_br_blue					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,0	)}
spriteset(gfx_gronk_br_blue_rev				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,0	)}
spriteset(gfx_gronk_dark					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,25	)}
spriteset(gfx_gronk_dark_rev				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,25	)}
spriteset(gfx_gronk_black					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,50	)}
spriteset(gfx_gronk_black_rev				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,50	)}
spriteset(gfx_gronk_br_black				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,75	)}
spriteset(gfx_gronk_br_black_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,75	)}
spriteset(gfx_gronk_br_green				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,100)}
spriteset(gfx_gronk_br_green_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,100)}
spriteset(gfx_gronk_ews						, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,125)}
spriteset(gfx_gronk_ews_rev					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,125)}
spriteset(gfx_gronk_gbrf					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(0	,150)}
spriteset(gfx_gronk_gbrf_rev				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(0	,150)}
spriteset(gfx_gronk_st_piran				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(114,50	)}
spriteset(gfx_gronk_st_piran_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(114,50	)}
spriteset(gfx_gronk_freightliner			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(114,75	)}
spriteset(gfx_gronk_freightliner_rev		, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(114,75	)}
spriteset(gfx_gronk_railfreight				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(114,100)}
spriteset(gfx_gronk_railfreight_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(114,100)}
spriteset(gfx_gronk_fgw						, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(114,125)}
spriteset(gfx_gronk_fgw_rev					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(114,125)}
spriteset(gfx_gronk_fl_orange				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(114,150)}
spriteset(gfx_gronk_fl_orange_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(114,150)}
spriteset(gfx_gronk_intercity				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(228,50	)}
spriteset(gfx_gronk_intercity_rev			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(228,50	)}
spriteset(gfx_gronk_regional_rail			, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(228,75	)}
spriteset(gfx_gronk_regional_rail_rev		, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(228,75	)}
spriteset(gfx_gronk_nse						, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8		(228,100)}
spriteset(gfx_gronk_nse_rev					, "gfx/DIESEL_LOCO/class_08.png"){ template_4_8_rev	(228,100)}

spriteset(gfx_gronk_purchase_br_blue		, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(114	,0	)}
spriteset(gfx_gronk_purchase_br_black		, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(114	,13	)}
spriteset(gfx_gronk_purchase_br_green		, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(114	,26	)}
spriteset(gfx_gronk_purchase_railfreight	, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(275	,0	)}
spriteset(gfx_gronk_purchase_ews			, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(275	,13	)}
spriteset(gfx_gronk_purchase_freightliner	, "gfx/DIESEL_LOCO/class_08.png"){ template_purchase(275	,26	)}

spriteset(gfx_gronk_wheels_1				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_4		(200,0	)}
spriteset(gfx_gronk_wheels_2				, "gfx/DIESEL_LOCO/class_08.png"){ template_4_4		(200,25	)}


//Graphics switches


/*

EE Type 1 reversal behaviour

Replace XXXX with the vehicle name
Replace YYYY with the livery name

refer to sw_XXXX_gfx_pos_check_a_YYYY when calling the specific livery in general



switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_YYYY,	vehicle_is_reversed){ 1 : gfx_gronk_YYYY ; gfx_gronk_YYYY_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_YYYY,	vehicle_is_reversed){ 1 : gfx_gronk_YYYY_rev ; gfx_gronk_YYYY ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_YYYY,		position_in_vehid_chain){ 0 : gfx_gronk_YYYY_rev ; sw_gfx_gronk_rev_check_b_YYYY ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_YYYY,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_YYYY ; sw_gfx_gronk_pos_check_m_YYYY ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_YYYY,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_YYYY ; gfx_gronk_YYYY_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_YYYY,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_YYYY ; sw_gfx_gronk_pos_check_b_YYYY ;}


*/



//BR Blue/Default - br_blue
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_br_blue,	vehicle_is_reversed){ 1 : gfx_gronk_br_blue ; gfx_gronk_br_blue_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_br_blue,	vehicle_is_reversed){ 1 : gfx_gronk_br_blue_rev ; gfx_gronk_br_blue ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_br_blue,		position_in_vehid_chain){ 0 : gfx_gronk_br_blue_rev ; sw_gfx_gronk_rev_check_b_br_blue ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_br_blue,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_br_blue ; sw_gfx_gronk_pos_check_m_br_blue ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_br_blue,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_br_blue ; gfx_gronk_br_blue_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_br_blue,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_br_blue ; sw_gfx_gronk_pos_check_b_br_blue ;}

//Dark - dark
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_dark,	vehicle_is_reversed){ 1 : gfx_gronk_dark ; gfx_gronk_dark_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_dark,	vehicle_is_reversed){ 1 : gfx_gronk_dark_rev ; gfx_gronk_dark ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_dark,		position_in_vehid_chain){ 0 : gfx_gronk_dark_rev ; sw_gfx_gronk_rev_check_b_dark ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_dark,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_dark ; sw_gfx_gronk_pos_check_m_dark ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_dark,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_dark ; gfx_gronk_dark_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_dark,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_dark ; sw_gfx_gronk_pos_check_b_dark ;}

//Black - black
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_black,	vehicle_is_reversed){ 1 : gfx_gronk_black ; gfx_gronk_black_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_black,	vehicle_is_reversed){ 1 : gfx_gronk_black_rev ; gfx_gronk_black ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_black,		position_in_vehid_chain){ 0 : gfx_gronk_black_rev ; sw_gfx_gronk_rev_check_b_black ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_black,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_black ; sw_gfx_gronk_pos_check_m_black ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_black,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_black ; gfx_gronk_black_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_black,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_black ; sw_gfx_gronk_pos_check_b_black ;}

//BR Black - br_black
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_br_black,	vehicle_is_reversed){ 1 : gfx_gronk_br_black ; gfx_gronk_br_black_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_br_black,	vehicle_is_reversed){ 1 : gfx_gronk_br_black_rev ; gfx_gronk_br_black ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_br_black,		position_in_vehid_chain){ 0 : gfx_gronk_br_black_rev ; sw_gfx_gronk_rev_check_b_br_black ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_br_black,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_br_black ; sw_gfx_gronk_pos_check_m_br_black ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_br_black,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_br_black ; gfx_gronk_br_black_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_br_black,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_br_black ; sw_gfx_gronk_pos_check_b_br_black ;}

//BR Green - br_green
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_br_green,	vehicle_is_reversed){ 1 : gfx_gronk_br_green ; gfx_gronk_br_green_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_br_green,	vehicle_is_reversed){ 1 : gfx_gronk_br_green_rev ; gfx_gronk_br_green ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_br_green,		position_in_vehid_chain){ 0 : gfx_gronk_br_green_rev ; sw_gfx_gronk_rev_check_b_br_green ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_br_green,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_br_green ; sw_gfx_gronk_pos_check_m_br_green ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_br_green,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_br_green ; gfx_gronk_br_green_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_br_green,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_br_green ; sw_gfx_gronk_pos_check_b_br_green ;}

//EWS - ews
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_ews,	vehicle_is_reversed){ 1 : gfx_gronk_ews ; gfx_gronk_ews_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_ews,	vehicle_is_reversed){ 1 : gfx_gronk_ews_rev ; gfx_gronk_ews ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_ews,		position_in_vehid_chain){ 0 : gfx_gronk_ews_rev ; sw_gfx_gronk_rev_check_b_ews ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_ews,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_ews ; sw_gfx_gronk_pos_check_m_ews ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_ews,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_ews ; gfx_gronk_ews_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_ews,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_ews ; sw_gfx_gronk_pos_check_b_ews ;}

//GBRF - gbrf
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_gbrf,	vehicle_is_reversed){ 1 : gfx_gronk_gbrf ; gfx_gronk_gbrf_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_gbrf,	vehicle_is_reversed){ 1 : gfx_gronk_gbrf_rev ; gfx_gronk_gbrf ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_gbrf,		position_in_vehid_chain){ 0 : gfx_gronk_gbrf_rev ; sw_gfx_gronk_rev_check_b_gbrf ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_gbrf,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_gbrf ; sw_gfx_gronk_pos_check_m_gbrf ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_gbrf,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_gbrf ; gfx_gronk_gbrf_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_gbrf,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_gbrf ; sw_gfx_gronk_pos_check_b_gbrf ;}

//08645 "St Piran" - st_piran
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_st_piran,	vehicle_is_reversed){ 1 : gfx_gronk_st_piran ; gfx_gronk_st_piran_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_st_piran,	vehicle_is_reversed){ 1 : gfx_gronk_st_piran_rev ; gfx_gronk_st_piran ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_st_piran,		position_in_vehid_chain){ 0 : gfx_gronk_st_piran_rev ; sw_gfx_gronk_rev_check_b_st_piran ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_st_piran,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_st_piran ; sw_gfx_gronk_pos_check_m_st_piran ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_st_piran,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_st_piran ; gfx_gronk_st_piran_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_st_piran,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_st_piran ; sw_gfx_gronk_pos_check_b_st_piran ;}

//Freightliner Green - freightliner
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_freightliner,	vehicle_is_reversed){ 1 : gfx_gronk_freightliner ; gfx_gronk_freightliner_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_freightliner,	vehicle_is_reversed){ 1 : gfx_gronk_freightliner_rev ; gfx_gronk_freightliner ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_freightliner,		position_in_vehid_chain){ 0 : gfx_gronk_freightliner_rev ; sw_gfx_gronk_rev_check_b_freightliner ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_freightliner,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_freightliner ; sw_gfx_gronk_pos_check_m_freightliner ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_freightliner,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_freightliner ; gfx_gronk_freightliner_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_freightliner,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_freightliner ; sw_gfx_gronk_pos_check_b_freightliner ;}

//Railfreight Sectors - railfreight
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_railfreight,	vehicle_is_reversed){ 1 : gfx_gronk_railfreight ; gfx_gronk_railfreight_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_railfreight,	vehicle_is_reversed){ 1 : gfx_gronk_railfreight_rev ; gfx_gronk_railfreight ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_railfreight,		position_in_vehid_chain){ 0 : gfx_gronk_railfreight_rev ; sw_gfx_gronk_rev_check_b_railfreight ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_railfreight,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_railfreight ; sw_gfx_gronk_pos_check_m_railfreight ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_railfreight,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_railfreight ; gfx_gronk_railfreight_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_railfreight,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_railfreight ; sw_gfx_gronk_pos_check_b_railfreight ;}

//First Great Western/DRS/Southern - fgw
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_fgw,	vehicle_is_reversed){ 1 : gfx_gronk_fgw ; gfx_gronk_fgw_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_fgw,	vehicle_is_reversed){ 1 : gfx_gronk_fgw_rev ; gfx_gronk_fgw ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_fgw,		position_in_vehid_chain){ 0 : gfx_gronk_fgw_rev ; sw_gfx_gronk_rev_check_b_fgw ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_fgw,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_fgw ; sw_gfx_gronk_pos_check_m_fgw ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_fgw,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_fgw ; gfx_gronk_fgw_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_fgw,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_fgw ; sw_gfx_gronk_pos_check_b_fgw ;}

//Freightliner Orange - fl_orange
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_fl_orange,	vehicle_is_reversed){ 1 : gfx_gronk_fl_orange ; gfx_gronk_fl_orange_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_fl_orange,	vehicle_is_reversed){ 1 : gfx_gronk_fl_orange_rev ; gfx_gronk_fl_orange ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_fl_orange,		position_in_vehid_chain){ 0 : gfx_gronk_fl_orange_rev ; sw_gfx_gronk_rev_check_b_fl_orange ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_fl_orange,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_fl_orange ; sw_gfx_gronk_pos_check_m_fl_orange ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_fl_orange,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_fl_orange ; gfx_gronk_fl_orange_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_fl_orange,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_fl_orange ; sw_gfx_gronk_pos_check_b_fl_orange ;}

//Intercity - intercity
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_intercity,	vehicle_is_reversed){ 1 : gfx_gronk_intercity ; gfx_gronk_intercity_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_intercity,	vehicle_is_reversed){ 1 : gfx_gronk_intercity_rev ; gfx_gronk_intercity ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_intercity,		position_in_vehid_chain){ 0 : gfx_gronk_intercity_rev ; sw_gfx_gronk_rev_check_b_intercity ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_intercity,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_intercity ; sw_gfx_gronk_pos_check_m_intercity ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_intercity,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_intercity ; gfx_gronk_intercity_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_intercity,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_intercity ; sw_gfx_gronk_pos_check_b_intercity ;}

//Regional Railways - regional_rail
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_regional_rail,	vehicle_is_reversed){ 1 : gfx_gronk_regional_rail ; gfx_gronk_regional_rail_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_regional_rail,	vehicle_is_reversed){ 1 : gfx_gronk_regional_rail_rev ; gfx_gronk_regional_rail ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_regional_rail,		position_in_vehid_chain){ 0 : gfx_gronk_regional_rail_rev ; sw_gfx_gronk_rev_check_b_regional_rail ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_regional_rail,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_regional_rail ; sw_gfx_gronk_pos_check_m_regional_rail ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_regional_rail,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_regional_rail ; gfx_gronk_regional_rail_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_regional_rail,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_regional_rail ; sw_gfx_gronk_pos_check_b_regional_rail ;}

//Network South East - nse
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_a_nse,	vehicle_is_reversed){ 1 : gfx_gronk_nse ; gfx_gronk_nse_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_gronk_rev_check_b_nse,	vehicle_is_reversed){ 1 : gfx_gronk_nse_rev ; gfx_gronk_nse ; }

switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_m_nse,		position_in_vehid_chain){ 0 : gfx_gronk_nse_rev ; sw_gfx_gronk_rev_check_b_nse ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_b_nse,		position_in_vehid_chain_from_end){ 0 : gfx_gronk_nse ; sw_gfx_gronk_pos_check_m_nse ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_f_nse,		num_vehs_in_vehid_chain ){ 1 : sw_gfx_gronk_rev_check_a_nse ; gfx_gronk_nse_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_gronk_pos_check_a_nse,		position_in_consist){ 0 : sw_gfx_gronk_pos_check_f_nse ; sw_gfx_gronk_pos_check_b_nse ;}




//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_gronk_auto, current_year){
	0..1960				: sw_gfx_gronk_pos_check_a_br_black ;
	1961..1967			: sw_gfx_gronk_pos_check_a_br_green ;
	1983 .. 1995	: sw_gfx_gronk_pos_check_a_railfreight ;
	1996 .. 2004		: sw_gfx_gronk_pos_check_a_ews ;
	2005 .. 4096		: sw_gfx_gronk_pos_check_a_freightliner ;
	sw_gfx_gronk_pos_check_a_br_blue ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_gronk_manual, cargo_subtype){
	0		: sw_gfx_gronk_pos_check_a_br_black ;
	1		: sw_gfx_gronk_pos_check_a_br_green ;
	2		: sw_gfx_gronk_pos_check_a_dark ;
	4		: sw_gfx_gronk_pos_check_a_railfreight ;
	5		: sw_gfx_gronk_pos_check_a_nse ;
	6		: sw_gfx_gronk_pos_check_a_intercity ;
	8		: sw_gfx_gronk_pos_check_a_regional_rail ;
	9		: sw_gfx_gronk_pos_check_a_ews ;
	12		: sw_gfx_gronk_pos_check_a_gbrf ;
	13		: sw_gfx_gronk_pos_check_a_st_piran ;
	14		: sw_gfx_gronk_pos_check_a_fgw ;
	15		: sw_gfx_gronk_pos_check_a_freightliner ;
	16		: sw_gfx_gronk_pos_check_a_fl_orange ;
	17..18	: sw_gfx_gronk_pos_check_a_fgw ;
	19		: sw_gfx_gronk_pos_check_a_black ;
	sw_gfx_gronk_pos_check_a_br_blue ;
}


//Manual check

switch(FEAT_TRAINS, SELF, sw_gronk_manual_check, livery_choice){
	1 : sw_gronk_manual ;
	sw_gronk_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_gronk_wheels, motion_counter % 2){
	1 : gfx_gronk_wheels_1 ;
	gfx_gronk_wheels_2 ;
}

switch(FEAT_TRAINS, SELF, sw_gronk_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_gronk_manual_check ;
	1 : sw_gronk_wheels ;
}



switch(FEAT_TRAINS, SELF, sw_gronk_purchase, current_year){
	0..1960				: gfx_gronk_purchase_br_black ;
	1961..1967			: gfx_gronk_purchase_br_green ;
	1983 .. 1995	: gfx_gronk_purchase_railfreight ;
	1996 .. 2004		: gfx_gronk_purchase_ews ;
	2005 .. 4096		: gfx_gronk_purchase_freightliner ;
	gfx_gronk_purchase_br_blue ;
}

/*Purchase switches

switch(FEAT_TRAINS, SELF, sw_gronk_colours_purchase, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}
*/
//Refit Text

switch(FEAT_TRAINS, SELF, sw_gronk_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BR_BLACK) ;
	1	: string(STR_LIVERY_BRGREEN) ;
	2	: string(STR_LIVERY_BRGREEN_YELLOW) ;
	3	: string(STR_LIVERY_BRBLUE) ;
	4	: string(STR_LIVERY_RAILFREIGHT) ;
	5	: string(STR_LIVERY_NSE) ;
	6	: string(STR_LIVERY_INTERCITY) ;
	7	: string(STR_COLOUR_GREEN) ;
	8	: string(STR_LIVERY_REG_RAILWAYS) ;
	9	: string(STR_LIVERY_EWS) ;
	10	: string(STR_LIVERY_DBSCHENKER) ;
	11	: string(STR_LIVERY_NETWORK_RAIL) ;
	12	: string(STR_LIVERY_GBRF) ;
	13	: string(STR_LIVERY_ST_PIRAN) ;
	14	: string(STR_LIVERY_DRS) ;
	15	: string(STR_LIVERY_FREIGHTLINER) ;
	16	: string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	17	: string(STR_LIVERY_FIRST_FGW) ;
	18	: string(STR_LIVERY_SOUTHERN) ;
	19	: string(STR_COLOUR_BLACK) ;
	20	: string(STR_LIVER_COMP_COLOURS) ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_gronk_refit_text_check, livery_choice){
	1 : sw_gronk_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_gronk_colours_auto, current_year){
	0..1960				: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1961..1967			: palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	1983 .. 1995	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	1996 .. 2004		: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2005 .. 4096		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_gronk_purchase_colours_2cc_check, livery_choice){
	1 : sw_gronk_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_gronk_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1..2: palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	4	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	7	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	8	: palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	9..10: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	11	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	12	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	13	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ; //St Piran
	15	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	16	: palette_2cc(COLOUR_ORANGE, COLOUR_YELLOW) ;
	17	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	18	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	19	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	20	: palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_gronk_colours_manual_check, livery_choice){
	1 : sw_gronk_colours_manual ;
	sw_gronk_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_gronk_colours_2cc_check, colour_scheme_1){
	1 : sw_gronk_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_gronk, 8){
	property{
		name                           : string(STR_NAME_GRONK) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1945,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 55 ;
		reliability_decay              : 8 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 40 ;
		speed                          : 25 mph ;
		track_type                     : RAIL ;
		power                          : 261 kW ;
		weight                         : 50 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.32 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 4 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_gronk_spritestack ;
		colour_mapping                 : sw_gronk_colours_2cc_check ;
		purchase_colour_mapping        : sw_gronk_purchase_colours_2cc_check ;
		purchase                       : sw_gronk_purchase ;
		sound_effect                   : sw_sfx_extension_08_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_gronk_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 10 : 40) ;
		purchase_running_cost_factor   : 40 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_gronk, 8){
	property{
		name                           : string(STR_NAME_GRONK_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
//#include "src/DIESEL_LOCO/EE_Type3.pnml"
# 1 "src/DIESEL_LOCO/EE_Type1.pnml" 1
//Class 20

spriteset(gfx_20_brblue,				"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,0)}
spriteset(gfx_20_brblue_rev,			"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,0)}
spriteset(gfx_20_brgreen,				"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,25)}
spriteset(gfx_20_brgreen_rev,			"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,25)}
spriteset(gfx_20_railfreight,			"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,50)}
spriteset(gfx_20_railfreight_rev,		"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,50)}
spriteset(gfx_20_railfreight_grey,		"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,75)}
spriteset(gfx_20_railfreight_grey_rev,	"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,75)}
spriteset(gfx_20_drs_comp,				"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,100)}
spriteset(gfx_20_drs_comp_rev,			"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,100)}
spriteset(gfx_20_drs,					"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,125)}
spriteset(gfx_20_drs_rev,				"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,125)}
spriteset(gfx_20_gbrf,					"gfx/DIESEL_LOCO/class_20.png"){template_6_8(0,150)}
spriteset(gfx_20_gbrf_rev,				"gfx/DIESEL_LOCO/class_20.png"){template_6_8_rev(0,150)}

spriteset(gfx_20_lt_modern_front,		"gfx/DIESEL_LOCO/class_20.png"){template_6_8(227,50)}
spriteset(gfx_20_lt_modern_back,		"gfx/DIESEL_LOCO/class_20.png"){template_6_8(227,75)}

spriteset(gfx_20_purch_brblue,			"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,0)}
spriteset(gfx_20_purch_brgreen,			"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,25)}
spriteset(gfx_20_purch_railfreight,		"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,50)}
spriteset(gfx_20_purch_railfreight_grey,"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,75)}
spriteset(gfx_20_purch_drs_comp,		"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,100)}
spriteset(gfx_20_purch_drs,				"gfx/DIESEL_LOCO/class_20.png"){template_purchase(146,125)}


//Graphics switches

//Reverse checks

switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_brblue, vehicle_is_reversed){ 1 : gfx_20_brblue ; gfx_20_brblue_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_brblue, vehicle_is_reversed){ 1 : gfx_20_brblue_rev ; gfx_20_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_brgreen, vehicle_is_reversed){ 1 : gfx_20_brgreen_rev ; gfx_20_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_railfreight, vehicle_is_reversed){ 1 : gfx_20_railfreight ; gfx_20_railfreight_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_railfreight, vehicle_is_reversed){ 1 : gfx_20_railfreight_rev ; gfx_20_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_railfreight_grey, vehicle_is_reversed){ 1 : gfx_20_railfreight_grey ; gfx_20_railfreight_grey_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_railfreight_grey, vehicle_is_reversed){ 1 : gfx_20_railfreight_grey_rev ;gfx_20_railfreight_grey  ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_drs_comp, vehicle_is_reversed){ 1 : gfx_20_drs_comp ; gfx_20_drs_comp_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_drs_comp, vehicle_is_reversed){ 1 : gfx_20_drs_comp_rev ; gfx_20_drs_comp ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_drs, vehicle_is_reversed){ 1 : gfx_20_drs ; gfx_20_drs_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_drs, vehicle_is_reversed){ 1 : gfx_20_drs_rev ; gfx_20_drs ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_a_gbrf, vehicle_is_reversed){ 1 : gfx_20_gbrf ; gfx_20_gbrf_rev ; }
switch(FEAT_TRAINS, PARENT, sw_gfx_20_rev_check_b_gbrf, vehicle_is_reversed){ 1 : gfx_20_gbrf_rev ; gfx_20_gbrf ; }


//Position checks

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_brblue, position_in_vehid_chain){ 0 : gfx_20_brblue_rev ; sw_gfx_20_rev_check_b_brblue ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_brblue, position_in_vehid_chain_from_end){ 0 : gfx_20_brblue ; sw_gfx_20_pos_check_m_brblue ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_brblue, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_brblue ; gfx_20_brblue_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_brblue, position_in_consist){ 0 : sw_gfx_20_pos_check_f_brblue ; sw_gfx_20_pos_check_b_brblue ;}

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_railfreight, position_in_vehid_chain){ 0 : gfx_20_railfreight_rev ; sw_gfx_20_rev_check_b_railfreight ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_railfreight, position_in_vehid_chain_from_end){ 0 : gfx_20_railfreight ; sw_gfx_20_pos_check_m_railfreight ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_railfreight, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_railfreight ; gfx_20_railfreight_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_railfreight, position_in_consist){ 0 : sw_gfx_20_pos_check_f_railfreight ; sw_gfx_20_pos_check_b_railfreight ;}

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_railfreight_grey, position_in_vehid_chain){ 0 : gfx_20_railfreight_grey_rev ; sw_gfx_20_rev_check_b_railfreight_grey ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_railfreight_grey, position_in_vehid_chain_from_end){ 0 : gfx_20_railfreight_grey ; sw_gfx_20_pos_check_m_railfreight_grey ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_railfreight_grey, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_railfreight_grey ; gfx_20_railfreight_grey_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_railfreight_grey, position_in_consist){ 0 : sw_gfx_20_pos_check_f_railfreight_grey ; sw_gfx_20_pos_check_b_railfreight_grey ;}

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_drs_comp, position_in_vehid_chain){ 0 : gfx_20_drs_comp_rev ; sw_gfx_20_rev_check_b_drs_comp ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_drs_comp, position_in_vehid_chain_from_end){ 0 : gfx_20_drs_comp ; sw_gfx_20_pos_check_m_drs_comp ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_drs_comp, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_drs_comp ; gfx_20_drs_comp_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_drs_comp, position_in_consist){ 0 : sw_gfx_20_pos_check_f_drs_comp ; sw_gfx_20_pos_check_b_drs_comp ;}

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_drs, position_in_vehid_chain){ 0 : gfx_20_drs_rev ; sw_gfx_20_rev_check_b_drs ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_drs, position_in_vehid_chain_from_end){ 0 : gfx_20_drs ; sw_gfx_20_pos_check_m_drs ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_drs, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_drs ; gfx_20_drs_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_drs, position_in_consist){ 0 : sw_gfx_20_pos_check_f_drs ; sw_gfx_20_pos_check_b_drs ;}

switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_m_gbrf, position_in_vehid_chain){ 0 : gfx_20_gbrf_rev ; sw_gfx_20_rev_check_b_gbrf ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_b_gbrf, position_in_vehid_chain_from_end){ 0 : gfx_20_gbrf ; sw_gfx_20_pos_check_m_gbrf ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_f_gbrf, num_vehs_in_vehid_chain ){ 1 : sw_gfx_20_rev_check_a_gbrf ; gfx_20_gbrf_rev ;}
switch(FEAT_TRAINS, SELF, sw_gfx_20_pos_check_a_gbrf, position_in_consist){ 0 : sw_gfx_20_pos_check_f_gbrf ; sw_gfx_20_pos_check_b_gbrf ;}

//Automatic


switch(FEAT_TRAINS, SELF, sw_gfx_20_auto, current_year){
	1948 .. 1966	: sw_gfx_20_rev_check_brgreen ;
	1967..1981	: sw_gfx_20_pos_check_a_brblue ;
	1982..1986	: sw_gfx_20_pos_check_a_railfreight ;
	1987..1995	:sw_gfx_20_pos_check_a_railfreight_grey  ;
	1996..2005	: sw_gfx_20_pos_check_a_drs ;
	sw_gfx_20_pos_check_a_drs_comp ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_gfx_20_manual, cargo_subtype){
	0 : sw_gfx_20_rev_check_brgreen ;
	1 : sw_gfx_20_pos_check_a_brblue ;
	2 : sw_gfx_20_pos_check_a_railfreight ;
	3 : sw_gfx_20_pos_check_a_railfreight_grey ;
	4 : sw_gfx_20_pos_check_a_drs ;
	6 : sw_gfx_20_pos_check_a_gbrf ;
	sw_gfx_20_pos_check_a_drs_comp ;
}

switch(FEAT_TRAINS, SELF, sw_gfx_20_manual_check, livery_choice){
	1 : sw_gfx_20_manual ;
	sw_gfx_20_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_gfx_20_lt_back_check, position_in_consist_from_end){
	0 : gfx_20_lt_modern_back ;
}

switch(FEAT_TRAINS, SELF, sw_gfx_20_lt_front_check, position_in_consist){
	0 : gfx_20_lt_modern_front ;
	sw_gfx_20_lt_back_check ;
}

switch(FEAT_TRAINS, SELF, sw_gfx_20_lt_manual, cargo_subtype){
	4..5 : sw_gfx_20_lt_front_check ;
}

switch(FEAT_TRAINS, SELF, sw_gfx_20_lt_check, livery_choice){
	1 : sw_gfx_20_lt_manual ;
}


switch(FEAT_TRAINS, SELF, sw_gfx_20_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_gfx_20_manual_check ;
	1 : sw_gfx_20_lt_check ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_col_20_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	1987..1995	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_col_20_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_col_20_manual_check, livery_choice){
	1 : sw_col_20_manual ;
	sw_col_20_auto ;
}

switch(FEAT_TRAINS, SELF, sw_col_20_2cc_check, colour_scheme_1){
	1 : sw_col_20_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_20_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_RAILFREIGHT2) ;
	3 : string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	4 : string(STR_LIVERY_DRS) ;
	5 : string(STR_LIVERY_DRS_COMPASS) ;
	6 : string(STR_LIVERY_GBRF) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_20_refit_text_check, livery_choice){
	1 : sw_20_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_20_purch_gfx, current_year){
	1948 .. 1966	: gfx_20_purch_brgreen ;
	1967..1981	: gfx_20_purch_brblue ;
	1982..1986	: gfx_20_purch_railfreight ;
	1987..1995	:gfx_20_purch_railfreight_grey  ;
	1996..2005	: gfx_20_purch_drs ;
	gfx_20_purch_drs_comp ;
}



//Item


item(FEAT_TRAINS, item_eetype1, 20){
	property{
		name                           : string(STR_NAME_EETYPE1) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1957,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 35 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 7 ;
		cost_factor                    : 38 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 110 ;
		speed                          : 75 mph ;
		track_type                     : RAIL ;
		power                          : 750 kW ;
		weight                         : 73 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.26 ;
		air_drag_coefficient           : 0.108 ;
		length                         : 6 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_gfx_20_spr_stack ;
		colour_mapping                 : sw_col_20_2cc_check ;
		purchase                       : sw_20_purch_gfx ;
		purchase_colour_mapping        : sw_col_20_auto ;
		sound_effect                   : sw_sfx_diesel_loco_small ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_20_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 30 : 110) ;
		purchase_running_cost_factor : 110 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eetype1, 20){
	property{
		name                           : string(STR_NAME_EETYPE1_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/BRCW_Type3.pnml" 1
//BRCW Type 3

//Spritesets

spriteset(gfx_brcw3_brg,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,0)}
spriteset(gfx_brcw3_bgy_1,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,21)}
spriteset(gfx_brcw3_bgy_2,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,42)}
spriteset(gfx_brcw3_brb_1,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,63)}
spriteset(gfx_brcw3_brb_2,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,84)}
spriteset(gfx_brcw3_brb_3,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,105)}
spriteset(gfx_brcw3_brb_4,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,126)}
spriteset(gfx_brcw3_brb_5,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,147)}
spriteset(gfx_brcw3_brb_6,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,168)}
spriteset(gfx_brcw3_brb_7,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,189)}
spriteset(gfx_brcw3_brb_8,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,210)}
spriteset(gfx_brcw3_rf3g_,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,231)}
spriteset(gfx_brcw3_br_gg,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,252)}
spriteset(gfx_brcw3_dutch,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,273)}
spriteset(gfx_brcw3_nse__,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,294)}
spriteset(gfx_brcw3_drs,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,315)}
spriteset(gfx_brcw3_wcrc,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,336)}
spriteset(gfx_brcw3_ews,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,357)}
spriteset(gfx_brcw3_frag,		"gfx/DIESEL_LOCO/class_33.png"){template_7_8_2(0,378)}

spriteset(gfx_brcw3_brg_purchase,		"gfx/DIESEL_LOCO/class_33.png"){template_purchase(161,0)}
spriteset(gfx_brcw3_brb_purchase,		"gfx/DIESEL_LOCO/class_33.png"){template_purchase(161,84)}
spriteset(gfx_brcw3_nse_purchase,		"gfx/DIESEL_LOCO/class_33.png"){template_purchase(161,294)}
spriteset(gfx_brcw3_drs_purchase,		"gfx/DIESEL_LOCO/class_33.png"){template_purchase(161,315)}
spriteset(gfx_brcw3_wcrc_purchase,		"gfx/DIESEL_LOCO/class_33.png"){template_purchase(161,336)}

spriteset(gfx_brcw3_construction,		"gfx/FIXTURES/class_33_RF_sectors.png"){template_7_8_2(0,0)}
spriteset(gfx_brcw3_distribution,		"gfx/FIXTURES/class_33_RF_sectors.png"){template_7_8_2(0,21)}


//Graphics switches

random_switch(FEAT_TRAINS, SELF, sw_gfx_brcw3_bgy, TRIGGER_VEHICLE_SERVICE){
	8 : gfx_brcw3_bgy_1 ;
	3 : gfx_brcw3_bgy_2 ;
}

random_switch(FEAT_TRAINS, SELF, sw_gfx_brcw3_brb, TRIGGER_VEHICLE_SERVICE){
	4 : gfx_brcw3_brb_1 ;
	20 : gfx_brcw3_brb_2 ;
	1 : gfx_brcw3_brb_3 ;
	2 : gfx_brcw3_brb_4 ;
	3 : gfx_brcw3_brb_5 ;
	6 : gfx_brcw3_brb_6 ;
	3 : gfx_brcw3_brb_7 ;
	3 : gfx_brcw3_brb_8 ;
}

//Automatic

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_sectors, most_common_cargo_type){
	PASS	: gfx_brcw3_nse__ ;
	gfx_brcw3_rf3g_ ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_private, most_common_cargo_type){
	PASS	: gfx_brcw3_wcrc ;
	gfx_brcw3_drs ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_rf, most_common_cargo_type){
	GOOD : gfx_brcw3_distribution ;
	FOOD : gfx_brcw3_distribution ;
	MAIL : gfx_brcw3_distribution ;
	VALU : gfx_brcw3_distribution ;
	GOLD : gfx_brcw3_distribution ;
	gfx_brcw3_construction ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_sectors_auto_stack, most_common_cargo_type){
	PASS	: gfx_blank ;
	sw_brcw3_gfx_rf ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_auto, current_year){
	1948 .. 1966	: sw_gfx_brcw3_bgy ;
	1967..1986	: sw_gfx_brcw3_brb ;
	1987..1996	: sw_brcw3_gfx_sectors ;
	1997..2005  : sw_brcw3_gfx_private ;
	gfx_brcw3_wcrc ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_stack_auto, current_year){
	1987..1996	: sw_brcw3_gfx_sectors_auto_stack ;
	gfx_blank ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_manual, cargo_subtype){
	0: gfx_brcw3_brg ;
	1: sw_gfx_brcw3_bgy ;
	2: sw_gfx_brcw3_brb ;
	3..4: gfx_brcw3_rf3g_ ;
	5: gfx_brcw3_br_gg ;
	6: gfx_brcw3_dutch ;
	7: gfx_brcw3_nse__ ;
	8: gfx_brcw3_ews ;
	9: gfx_brcw3_frag ;
	10: gfx_brcw3_drs ;
	gfx_brcw3_wcrc ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_manual_stack, cargo_subtype){
	3: gfx_brcw3_construction ;
	4: gfx_brcw3_distribution ;
	gfx_blank ;
}


switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_manual_check, livery_choice){
	1 : sw_brcw3_gfx_manual ;
	sw_brcw3_gfx_auto ;
}


switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_manual_check_stack, livery_choice){
	1 : sw_brcw3_gfx_manual_stack ;
	sw_brcw3_gfx_stack_auto ;
}


//Sprite stack


switch(FEAT_TRAINS, SELF, sw_brcw3_gfx_sprstack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_brcw3_gfx_manual_check ;
	1 : sw_brcw3_gfx_manual_check_stack ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_brcw3_purchase_gfx, current_year){
	1948 .. 1966	: gfx_brcw3_brg_purchase ;
	1967..1986	: gfx_brcw3_brb_purchase ;
	1987..1996	: gfx_brcw3_nse_purchase ;
	1997..2005  : gfx_brcw3_drs_purchase ;
	gfx_brcw3_wcrc_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_purchase_colours, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	1987..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1997..2005  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_RED, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_brcw3_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_brcw3_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN) ;
	1: string(STR_LIVERY_BRGREEN_YELLOW) ;
	2: string(STR_LIVERY_BRBLUE) ;
	3: string(STR_LIVERY_RAILFREIGHT) ;
	4: string(STR_LIVERY_RAILFREIGHT) ;
	5: string(STR_LIVERY_RAILFREIGHT2) ;
	6: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	7: string(STR_LIVERY_NSE) ;
	8: string(STR_LIVERY_EWS) ;
	9: string(STR_LIVERY_FRAGONSET) ;
	10: string(STR_LIVERY_DRS) ;
	11: string(STR_LIVERY_WCRC) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_refit_text_check, livery_choice){
	1 : sw_brcw3_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping


//Automatic


switch(FEAT_TRAINS, SELF, sw_brcw3_col_sectors, most_common_cargo_type){
	PASS	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_col_private, most_common_cargo_type){
	PASS	: palette_2cc(COLOUR_RED, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_brcw3_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	1987..1996	: sw_brcw3_col_sectors ;
	1997..2005  : sw_brcw3_col_private ;
	palette_2cc(COLOUR_RED, COLOUR_RED) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_brcw3_col_manual, cargo_subtype){
	0..1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	2: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	3..4: palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	5: palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	6: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	7: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	8: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	9: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	10: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
	palette_2cc(COLOUR_RED, COLOUR_RED) ;
}


switch(FEAT_TRAINS, SELF, sw_brcw3_col_manual_check, livery_choice){
	1 : sw_brcw3_col_manual ;
	sw_brcw3_col_auto ;
}

switch(FEAT_TRAINS, SELF , sw_brcw3_col_2cc_check, colour_scheme_1){
	1 : sw_brcw3_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Item

item(FEAT_TRAINS, item_brcw3, 33){
	property{
		name                           : string(STR_NAME_BRCWTYPE3) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1960,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 35 ;
		vehicle_life                   : 42 ;
		reliability_decay              : 13 ;
		cost_factor                    : 45 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 125 ;
		speed                          : 85 mph ;
		track_type                     : RAIL ;
		power                          : 909 kW ;
		weight                         : 76 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.39 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 7 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_brcw3_gfx_sprstack ;
		colour_mapping                 : sw_brcw3_col_2cc_check ;
		purchase                       : sw_brcw3_purchase_gfx ;
		purchase_colour_mapping        : sw_brcw3_purchase_colours_2cc_check;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_brcw3_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 38 : 125) ;
		purchase_running_cost_factor : 125 ;
	}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_brcw3, 33){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_brcw3, 33){
	property{
		name                           : string(STR_NAME_BRCWTYPE3_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/EE_Type3_2.pnml" 1
//Class 37! Again!

/*Liveries

BR Green
BR Blue
BR Large Logo (Blue)
BR Large Logo (Grey)
Intercity
Regional Railways
Railfreight Two-Tone Grey
Civil Engineers Dutch
Loadhaul
DRS
DRS (Compass)
EWS
Rail Operations Group
Colas Rail
Network Rail Yellow
Police
Railfreight Red Stripe
British Steel Blue
Network SouthEast (Fictional)
GIF Blue
HNRC Old
HNRC New
GBRf (Fictional)

*/


//Spriteset

spriteset(gfx_37_brgreen,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,50)}
spriteset(gfx_37_brgreen_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_37_brblue,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,75)}
spriteset(gfx_37_brblue_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_37_brll,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,100)}
spriteset(gfx_37_brll_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,100)}
spriteset(gfx_37_intercity,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,125)}
spriteset(gfx_37_intercity_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_37_regional,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,150)}
spriteset(gfx_37_regional_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,150)}
spriteset(gfx_37_railfreight,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,175)}
spriteset(gfx_37_railfreight_rev,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,175)}
spriteset(gfx_37_loadhaul,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,200)}
spriteset(gfx_37_loadhaul_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,200)}
spriteset(gfx_37_drs,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,225)}
spriteset(gfx_37_drs_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,225)}
spriteset(gfx_37_drs_comp,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,250)}
spriteset(gfx_37_drs_comp_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,250)}
spriteset(gfx_37_ews,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,275)}
spriteset(gfx_37_ews_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,275)}
spriteset(gfx_37_rog,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,300)}
spriteset(gfx_37_rog_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,300)}
spriteset(gfx_37_colas,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,325)}
spriteset(gfx_37_colas_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,325)}
spriteset(gfx_37_hnrc,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,350)}
spriteset(gfx_37_hnrc_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,350)}
spriteset(gfx_37_nse,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,375)}
spriteset(gfx_37_nse_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,375)}
spriteset(gfx_37_brsteel,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,400)}
spriteset(gfx_37_brsteel_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,400)}
spriteset(gfx_37_gbrf,				"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,425)}
spriteset(gfx_37_gbrf_rev,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,425)}
spriteset(gfx_37_rfredstripe,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(0,450)}
spriteset(gfx_37_rfredstripe_rev,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(0,450)}

spriteset(gfx_37_police,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(178,0)}
spriteset(gfx_37_police_rev,		"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double_reverse(178,0)}

spriteset(gfx_37_hc_centre_green,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,25)}
spriteset(gfx_37_hc_centre,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,50)}
spriteset(gfx_37_hc_centre_plough,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,75)}
spriteset(gfx_37_hc_split,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,100)}
spriteset(gfx_37_hc_split_green,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(339,100)}
spriteset(gfx_37_hc_centre_refit,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,125)}
spriteset(gfx_37_hc_refit_green,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(339,125)}
spriteset(gfx_37_hc_modern,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,150)}
spriteset(gfx_37_hc_modern_centre,	"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_single(250,175)}

spriteset(gfx_37_lt_tail,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(250,225)}
spriteset(gfx_37_lt_centre,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(250,250)}
spriteset(gfx_37_lt_split,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(250,275)}
spriteset(gfx_37_lt_modern,			"gfx/DIESEL_LOCO/class_37_2.png"){template_Mk2_double(250,300)}

spriteset(gfx_37_purch_brgreen,		"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,325)}
spriteset(gfx_37_purch_brblue,		"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,350)}
spriteset(gfx_37_purch_brll,		"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,375)}
spriteset(gfx_37_purch_regional,	"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,400)}
spriteset(gfx_37_purch_drs,			"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,425)}
spriteset(gfx_37_purch_drs_comp,	"gfx/DIESEL_LOCO/class_37_2.png"){template_purchase(178,450)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_brgreen, vehicle_is_reversed){ 1 : gfx_37_brgreen_rev ; gfx_37_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_brblue, vehicle_is_reversed){ 1 : gfx_37_brblue_rev ; gfx_37_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_brll, vehicle_is_reversed){ 1 : gfx_37_brll_rev ; gfx_37_brll ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_intercity, vehicle_is_reversed){ 1 : gfx_37_intercity_rev ; gfx_37_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_regional, vehicle_is_reversed){ 1 : gfx_37_regional_rev ; gfx_37_regional ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_railfreight, vehicle_is_reversed){ 1 : gfx_37_railfreight_rev ; gfx_37_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_loadhaul, vehicle_is_reversed){ 1 : gfx_37_loadhaul_rev ; gfx_37_loadhaul ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_drs, vehicle_is_reversed){ 1 : gfx_37_drs_rev ; gfx_37_drs ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_drs_comp, vehicle_is_reversed){ 1 : gfx_37_drs_comp_rev ; gfx_37_drs_comp ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_ews, vehicle_is_reversed){ 1 : gfx_37_ews_rev ; gfx_37_ews ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_rog, vehicle_is_reversed){ 1 : gfx_37_rog_rev ; gfx_37_rog ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_colas, vehicle_is_reversed){ 1 : gfx_37_colas_rev ; gfx_37_colas ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_police, vehicle_is_reversed){ 1 : gfx_37_police_rev ; gfx_37_police ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_hnrc, vehicle_is_reversed){ 1 : gfx_37_hnrc_rev ; gfx_37_hnrc ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_nse, vehicle_is_reversed){ 1 : gfx_37_nse_rev ; gfx_37_nse ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_brsteel, vehicle_is_reversed){ 1 : gfx_37_brsteel_rev ; gfx_37_brsteel ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_gbrf, vehicle_is_reversed){ 1 : gfx_37_gbrf_rev ; gfx_37_gbrf ; }
switch(FEAT_TRAINS, PARENT, sw_37_gfx_rev_check_rfredstripe, vehicle_is_reversed){ 1 : gfx_37_rfredstripe_rev ; gfx_37_rfredstripe ; }


//Automatic

switch(FEAT_TRAINS, PARENT, sw_37_gfx_auto_sector, most_common_cargo_type){
	PASS : sw_37_gfx_rev_check_regional ;
	sw_37_gfx_rev_check_railfreight ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_auto_private1, most_common_cargo_type){
	PASS : sw_37_gfx_rev_check_drs ;
	URAN : sw_37_gfx_rev_check_drs ;
	NWST : sw_37_gfx_rev_check_drs ;
	GOOD : sw_37_gfx_rev_check_drs ;
	FOOD : sw_37_gfx_rev_check_drs ;
	MAIL : sw_37_gfx_rev_check_loadhaul ;
	VALU : sw_37_gfx_rev_check_loadhaul ;
	GOLD : sw_37_gfx_rev_check_loadhaul ;
	STEL : sw_37_gfx_rev_check_loadhaul ;
	METL : sw_37_gfx_rev_check_loadhaul ;
	COPR : sw_37_gfx_rev_check_loadhaul ;
	sw_37_gfx_rev_check_ews ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_auto_private2, most_common_cargo_type){
	PASS : sw_37_gfx_rev_check_drs_comp ;
	URAN : sw_37_gfx_rev_check_drs_comp ;
	NWST : sw_37_gfx_rev_check_drs_comp ;
	GOOD : sw_37_gfx_rev_check_drs_comp ;
	FOOD : sw_37_gfx_rev_check_drs_comp ;
	MAIL : sw_37_gfx_rev_check_rog ;
	VALU : sw_37_gfx_rev_check_rog ;
	GOLD : sw_37_gfx_rev_check_rog ;
	STEL : sw_37_gfx_rev_check_rog ;
	METL : sw_37_gfx_rev_check_rog ;
	COPR : sw_37_gfx_rev_check_rog ;
	sw_37_gfx_rev_check_colas ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_auto, current_year){
	1948 .. 1966	: sw_37_gfx_rev_check_brgreen ;
	1967..1981	: sw_37_gfx_rev_check_brblue ;
	1982..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_auto_sector ;
	1997..2008	: sw_37_gfx_auto_private1 ;
	sw_37_gfx_auto_private2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_gfx_manual, cargo_subtype){
	0	: sw_37_gfx_rev_check_brgreen ;
	1	: sw_37_gfx_rev_check_brblue ;
	4	: sw_37_gfx_rev_check_intercity ;
	5	: sw_37_gfx_rev_check_regional ;
	6..7: sw_37_gfx_rev_check_railfreight ;
	8	: sw_37_gfx_rev_check_loadhaul ;
	9	: sw_37_gfx_rev_check_drs ;
	10	: sw_37_gfx_rev_check_drs_comp ;
	11	: sw_37_gfx_rev_check_ews ;
	12	: sw_37_gfx_rev_check_rog ;
	13	: sw_37_gfx_rev_check_colas ;
	14	: sw_37_gfx_rev_check_railfreight ;
	15	: sw_37_gfx_rev_check_police ;
	16	: sw_37_gfx_rev_check_rfredstripe ; // Railfreight Red Stripe
	17	: sw_37_gfx_rev_check_brsteel ; // British Steel Blue
	18	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	19	: sw_37_gfx_rev_check_ews ; // GIF Blue
	20	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	21	: sw_37_gfx_rev_check_hnrc ; // HNRC New
	22	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_manual_check, livery_choice){
	1 : sw_37_gfx_manual ;
	sw_37_gfx_auto ;
}




//DBSO GFX

switch(FEAT_TRAINS, PARENT, sw_37_gfx_auto_dbso, current_year){
	1948 .. 1966	: sw_37_gfx_rev_check_brgreen ;
	1967..1981	: sw_37_gfx_rev_check_brblue ;
	1982..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_rev_check_intercity ;
	1997..2008	: sw_37_gfx_rev_check_drs ;
	sw_37_gfx_rev_check_drs_comp ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_37_gfx_manual_dbso, cargo_subtype){
	0	: sw_37_gfx_rev_check_brgreen ;
	1	: sw_37_gfx_rev_check_brblue ;
	4	: sw_37_gfx_rev_check_intercity ;
	5	: sw_37_gfx_rev_check_regional ;
	6..7: sw_37_gfx_rev_check_railfreight ;
	8	: sw_37_gfx_rev_check_loadhaul ;
	9	: sw_37_gfx_rev_check_drs ;
	10	: sw_37_gfx_rev_check_drs_comp ;
	11	: sw_37_gfx_rev_check_ews ;
	12	: sw_37_gfx_rev_check_rog ;
	13	: sw_37_gfx_rev_check_colas ;
	14	: sw_37_gfx_rev_check_railfreight ;
	15	: sw_37_gfx_rev_check_police ;
	16	: sw_37_gfx_rev_check_rfredstripe ; // Railfreight Red Stripe
	17	: sw_37_gfx_rev_check_brsteel ; // British Steel Blue
	18	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	19	: sw_37_gfx_rev_check_ews ; // GIF Blue
	20	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	21	: sw_37_gfx_rev_check_hnrc ; // HNRC New
	22	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}


switch(FEAT_TRAINS, PARENT, sw_37_gfx_manual_check_dbso, livery_choice){
	1 : sw_37_gfx_manual_dbso ;
	sw_37_gfx_auto_dbso ;
}





switch(FEAT_TRAINS, SELF, sw_37_gfx_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_37_gfx_manual_check_dbso ;
	sw_37_gfx_manual_check ;
}








//Headcodes

//Random switches

random_switch(FEAT_TRAINS, SELF, sw_37_hc_standard_3){
	2 : gfx_37_hc_centre ;
	2 : gfx_37_hc_split ;
	1 : gfx_37_hc_centre_plough ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_hc_centre){
	2 : gfx_37_hc_centre_plough ;
	1 : gfx_37_hc_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_hc_standard_4){
	2 : gfx_37_hc_split ;
	2 : gfx_37_hc_centre_refit ;
	1 : gfx_37_hc_centre ;
	1 : gfx_37_hc_centre_plough ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_hc_modern){
	2 : gfx_37_hc_modern_centre ;
	2 : gfx_37_hc_modern ;
	1 : gfx_37_hc_centre_refit ;
	1 : gfx_37_hc_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_hc_all){
	3 : gfx_37_hc_centre_plough ;
	2 : gfx_37_hc_split ;
	2 : gfx_37_hc_centre_refit ;
	2 : gfx_37_hc_modern ;
	1 : gfx_37_hc_modern_centre ;
	1 : gfx_37_hc_centre ;
}


//Automatic

switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_auto_sector, most_common_cargo_type){
	PASS : sw_37_hc_centre ;
	sw_37_hc_standard_4 ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_auto_private1, most_common_cargo_type){
	PASS : sw_37_hc_centre ;
	URAN : sw_37_hc_all ;
	NWST : sw_37_hc_all ;
	GOOD : sw_37_hc_all ;
	FOOD : sw_37_hc_all ;
	sw_37_hc_standard_4 ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_auto_private2, most_common_cargo_type){
	PASS : sw_37_hc_centre ;
	URAN : sw_37_hc_all ;
	NWST : sw_37_hc_all ;
	GOOD : sw_37_hc_all ;
	FOOD : sw_37_hc_all ;
	MAIL : sw_37_hc_modern ;
	VALU : sw_37_hc_modern ;
	GOLD : sw_37_hc_modern ;
	STEL : sw_37_hc_modern ;
	METL : sw_37_hc_modern ;
	COPR : sw_37_hc_modern ;
	sw_37_hc_standard_4 ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_hc_auto, current_year){
	1948 .. 1966	: gfx_37_hc_centre_green ;
	1967..1986	: sw_37_hc_standard_3 ;
	1987..1996	: sw_37_gfx_hc_auto_sector ;
	1997..2008	: sw_37_gfx_hc_auto_private1 ;
	sw_37_gfx_hc_auto_private2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_gfx_hc_manual, cargo_subtype){
	0		: gfx_37_hc_centre_green ;
	1..3	: sw_37_hc_standard_3 ;
	5		: sw_37_hc_centre ;
	9..10	: sw_37_hc_all ;
	12		: sw_37_hc_modern ;
	14		: sw_37_hc_centre ;
	15		: gfx_37_hc_split ;
	16		: sw_37_hc_standard_4 ; // Railfreight Red Stripe
	17		: gfx_37_hc_centre_refit ; // British Steel Blue
	18		: sw_37_hc_standard_4 ;//  Network SouthEast (Fictional)
	19		: sw_37_hc_standard_4 ; // GIF Blue
	20		: sw_37_hc_standard_4 ; // HNRC Old
	21		: sw_37_hc_modern ; // HNRC New
	22		: sw_37_hc_modern ; // GBRf (Fictional)
	sw_37_hc_standard_4 ;
}

switch(FEAT_TRAINS, SELF, sw_37_gfx_hc_manual_check, livery_choice){
	1 : sw_37_gfx_hc_manual ;
	sw_37_gfx_hc_auto ;
}




//DBSO Headcodes

random_switch(FEAT_TRAINS, PARENT, sw_37_hc_standard_3_dbso){
	2 : gfx_37_hc_centre ;
	2 : gfx_37_hc_split ;
	1 : gfx_37_hc_centre_plough ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_hc_centre_dbso){
	2 : gfx_37_hc_centre_plough ;
	1 : gfx_37_hc_centre ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_hc_standard_4_dbso){
	2 : gfx_37_hc_split ;
	2 : gfx_37_hc_centre_refit ;
	1 : gfx_37_hc_centre ;
	1 : gfx_37_hc_centre_plough ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_hc_modern_dbso){
	2 : gfx_37_hc_modern_centre ;
	2 : gfx_37_hc_modern ;
	1 : gfx_37_hc_centre_refit ;
	1 : gfx_37_hc_centre ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_hc_all_dbso){
	3 : gfx_37_hc_centre_plough ;
	2 : gfx_37_hc_split ;
	2 : gfx_37_hc_centre_refit ;
	2 : gfx_37_hc_modern ;
	1 : gfx_37_hc_modern_centre ;
	1 : gfx_37_hc_centre ;
}


switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_auto_dbso, current_year){
	1948 .. 1966	: gfx_37_hc_centre_green ;
	1967..1986	: sw_37_hc_standard_3_dbso ;
	sw_37_hc_centre_dbso ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_manual_dbso, cargo_subtype){
	0		: gfx_37_hc_centre_green ;
	1..3	: sw_37_hc_standard_3_dbso ;
	5		: sw_37_hc_centre_dbso ;
	9..10	: sw_37_hc_all_dbso ;
	12		: sw_37_hc_modern_dbso ;
	14		: sw_37_hc_centre_dbso ;
	15		: gfx_37_hc_split ;
	16		: sw_37_hc_standard_4 ; // Railfreight Red Stripe
	17		: gfx_37_hc_centre_refit ; // British Steel Blue
	18		: sw_37_hc_standard_4 ;//  Network SouthEast (Fictional)
	19		: sw_37_hc_standard_4 ; // GIF Blue
	20		: sw_37_hc_standard_4 ; // HNRC Old
	21		: sw_37_hc_modern ; // HNRC New
	22		: sw_37_hc_modern ; // GBRf (Fictional)
	sw_37_hc_standard_4_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_hc_manual_check_dbso, livery_choice){
	1 : sw_37_gfx_hc_manual_dbso ;
	sw_37_gfx_hc_auto_dbso ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_hc_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_37_gfx_hc_manual_check_dbso ;
	sw_37_gfx_hc_manual_check ;
}





//Lights


//Random switches

random_switch(FEAT_TRAINS, SELF, sw_37_lt_standard_3){
	dependent : sw_37_hc_standard_3;
	2 : gfx_37_lt_centre ;
	2 : gfx_37_lt_split ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_lt_standard_4){
	dependent : sw_37_hc_standard_4;
	2 : gfx_37_lt_split ;
	2 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_lt_modern){
	dependent : sw_37_hc_modern;
	2 : gfx_37_lt_modern ;
	2 : gfx_37_lt_modern ;
	1 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_lt_all){
	dependent : sw_37_hc_all;
	3 : gfx_37_lt_centre ;
	2 : gfx_37_lt_split ;
	2 : gfx_37_lt_centre ;
	2 : gfx_37_lt_modern ;
	1 : gfx_37_lt_modern ;
	1 : gfx_37_lt_centre ;
}


//Automatic

switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_auto_sector, most_common_cargo_type){
	PASS : gfx_37_lt_centre ;
	sw_37_lt_standard_4 ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_auto_private1, most_common_cargo_type){
	PASS : gfx_37_lt_centre ;
	URAN : sw_37_lt_all ;
	NWST : sw_37_lt_all ;
	GOOD : sw_37_lt_all ;
	FOOD : sw_37_lt_all ;
	sw_37_lt_standard_4 ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_auto_private2, most_common_cargo_type){
	PASS : gfx_37_lt_centre ;
	URAN : sw_37_lt_all ;
	NWST : sw_37_lt_all ;
	GOOD : sw_37_lt_all ;
	FOOD : sw_37_lt_all ;
	MAIL : sw_37_lt_modern ;
	VALU : sw_37_lt_modern ;
	GOLD : sw_37_lt_modern ;
	STEL : sw_37_lt_modern ;
	METL : sw_37_lt_modern ;
	COPR : sw_37_lt_modern ;
	sw_37_lt_standard_4 ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_auto, current_year){
	1948 .. 1966	: gfx_37_lt_centre ;
	1967..1986	: sw_37_lt_standard_3 ;
	1987..1996	: sw_37_gfx_lt_auto_sector ;
	1997..2008	: sw_37_gfx_lt_auto_private1 ;
	sw_37_gfx_lt_auto_private2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_manual, cargo_subtype){
	0		: gfx_37_lt_centre ;
	1..3	: sw_37_lt_standard_3 ;
	5		: gfx_37_lt_centre ;
	9..10	: sw_37_lt_all ;
	12		: sw_37_lt_modern ;
	14		: gfx_37_lt_centre ;
	15		: gfx_37_lt_split ;
	16		: sw_37_lt_standard_4 ; // Railfreight Red Stripe
	17		: gfx_37_lt_centre ; // British Steel Blue
	18		: sw_37_lt_standard_4 ;//  Network SouthEast (Fictional)
	19		: sw_37_lt_standard_4 ; // GIF Blue
	20		: sw_37_lt_standard_4 ; // HNRC Old
	21		: sw_37_lt_modern ; // HNRC New
	22		: sw_37_lt_modern ; // GBRf (Fictional)
	sw_37_lt_standard_4 ;
}

switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_manual_check, livery_choice){
	1 : sw_37_gfx_lt_manual ;
	sw_37_gfx_lt_auto ;
}




//DBSO Headcodes

random_switch(FEAT_TRAINS, PARENT, sw_37_lt_standard_3_dbso){
	dependent : sw_37_hc_standard_3_dbso;
	2 : gfx_37_lt_centre ;
	2 : gfx_37_lt_split ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_lt_standard_4_dbso){
	dependent : sw_37_hc_standard_4_dbso;
	2 : gfx_37_lt_split ;
	2 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_lt_modern_dbso){
	dependent : sw_37_hc_modern_dbso;
	2 : gfx_37_lt_modern ;
	2 : gfx_37_lt_modern ;
	1 : gfx_37_lt_centre ;
	1 : gfx_37_lt_centre ;
}

random_switch(FEAT_TRAINS, PARENT, sw_37_lt_all_dbso){
	dependent : sw_37_hc_all_dbso;
	3 : gfx_37_lt_centre ;
	2 : gfx_37_lt_split ;
	2 : gfx_37_lt_centre ;
	2 : gfx_37_lt_modern ;
	1 : gfx_37_lt_modern ;
	1 : gfx_37_lt_centre ;
}


switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_auto_dbso, current_year){
	1948 .. 1966	: gfx_37_lt_centre ;
	1967..1986	: sw_37_lt_standard_3_dbso ;
	gfx_37_lt_centre ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_manual_dbso, cargo_subtype){
	0		: gfx_37_lt_centre ;
	1..3	: sw_37_lt_standard_3_dbso ;
	5		: gfx_37_lt_centre ;
	9..10	: sw_37_lt_all_dbso ;
	12		: sw_37_lt_modern_dbso ;
	14		: gfx_37_lt_centre ;
	15		: gfx_37_lt_split ;
	16		: sw_37_lt_standard_4 ; // Railfreight Red Stripe
	17		: gfx_37_lt_centre ; // British Steel Blue
	18		: sw_37_lt_standard_4 ;//  Network SouthEast (Fictional)
	19		: sw_37_lt_standard_4 ; // GIF Blue
	20		: sw_37_lt_standard_4 ; // HNRC Old
	21		: sw_37_lt_modern ; // HNRC New
	22		: sw_37_lt_modern ; // GBRf (Fictional)
	sw_37_lt_standard_4_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_37_gfx_lt_manual_check_dbso, livery_choice){
	1 : sw_37_gfx_lt_manual_dbso ;
	sw_37_gfx_lt_auto_dbso ;
}


switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_37_gfx_lt_manual_check_dbso ;
	sw_37_gfx_lt_manual_check ;
}



switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_gfx_lt_front_check, position_in_consist){
	0 : sw_37_gfx_lt_parent_check ;
	sw_37_gfx_lt_back_check ;
}





//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_gfx_parent_check ;
	1 : sw_37_gfx_hc_parent_check ;
	2 : sw_37_gfx_lt_front_check ;
}


//DBSO Check

switch(FEAT_TRAINS, SELF, sw_37_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_37_gfx_spr_stack ;
}

switch(FEAT_TRAINS, SELF, sw_37_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_37_gfx_dbso_check ;
}



//Colours


//Automatic

switch(FEAT_TRAINS, PARENT, sw_37_col_auto_sector, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_37_col_auto_private1, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	FOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	MAIL : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	VALU : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	GOLD : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	STEL : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	METL : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	COPR : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_37_col_auto_private2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	FOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	MAIL : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	VALU : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	GOLD : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	STEL : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	METL : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	COPR : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}


switch(FEAT_TRAINS, SELF, sw_37_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: sw_37_col_auto_sector ;
	1997..2008	: sw_37_col_auto_private1 ;
	sw_37_col_auto_private2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ; // BR Green
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	4	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; //  Intercity
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; // Regional Railways
	6	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	7	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ; // Civil Engineers Dutch
	8	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ; // Loadhaul
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	10	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	11	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	12	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // ROG Europheonix
	13	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
	14	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW)	; // Network Rail
	15	: palette_2cc(COLOUR_WHITE, COLOUR_ORANGE) ; // Police
	16	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // Railfreight Red Stripe
	17	: palette_2cc(COLOUR_BLUE, COLOUR_BLUE) ; // British Steel Blue
	18	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	19	: palette_2cc(COLOUR_BLUE, COLOUR_DARK_BLUE) ; // GIF Blue
	20	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	21	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC New
	22	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}


switch(FEAT_TRAINS, SELF, sw_37_col_manual_check, livery_choice){
	1 : sw_37_col_manual ;
	sw_37_col_auto ;
}




//DBSO Colours

switch(FEAT_TRAINS, PARENT, sw_37_col_auto_dbso, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_37_col_manual_dbso, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ; // BR Green
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	4	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; //  Intercity
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; // Regional Railways
	6	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	7	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ; // Civil Engineers Dutch
	8	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ; // Loadhaul
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	10	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	11	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	12	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // ROG Europheonix
	13	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
	14	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW)	; // Network Rail
	15	: palette_2cc(COLOUR_WHITE, COLOUR_ORANGE) ; // Police
	16	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // Railfreight Red Stripe
	17	: palette_2cc(COLOUR_BLUE, COLOUR_BLUE) ; // British Steel Blue
	18	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	19	: palette_2cc(COLOUR_BLUE, COLOUR_DARK_BLUE) ; // GIF Blue
	20	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	21	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC New
	22	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}


//Colour checks

switch(FEAT_TRAINS, PARENT, sw_37_col_manual_check_dbso, livery_choice){
	1 : sw_37_col_manual_dbso ;
	sw_37_col_auto_dbso ;
}


switch(FEAT_TRAINS, SELF, sw_37_col_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_37_col_manual_check_dbso ;
	sw_37_col_manual_check ;
}

switch(FEAT_TRAINS, SELF, sw_37_col_2cc_check, colour_scheme_1){
	1 : sw_37_col_parent_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_37_col_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_37_col_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_37_col_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_37_col_dbso_check ;
}








//Refit text

switch(FEAT_TRAINS, SELF, sw_37_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRGREEN) ;
	1	: string(STR_LIVERY_BRBLUE) ;
	2	: string(STR_LIVERY_BRBLUE_LOGO) ;
	3	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4	: string(STR_LIVERY_INTERCITY) ;
	5	: string(STR_LIVERY_REG_RAILWAYS) ;
	6	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	7	: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	8	: string(STR_LIVERY_LOADHAUL) ;
	9	: string(STR_LIVERY_DRS) ;
	10	: string(STR_LIVERY_DRS_COMPASS) ;
	11	: string(STR_LIVERY_EWS) ;
	12	: string(STR_LIVERY_ROG_EUROPHENIX) ;
	13	: string(STR_LIVERY_COLAS) ;
	14	: string(STR_LIVERY_NETWORK_RAIL) ;
	15	: string(STR_LIVERY_POLICE) ;
	16	: string(STR_LIVERY_RAILFREIGHT3) ; // Railfreight Red Stripe
	17	: string(STR_LIVERY_BSC) ; // British Steel Blue
	18	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE)); //  Network SouthEast (Fictional)
	19	: string(STR_LIVERY_GIF) ; // GIF Blue
	20	: string(STR_LIVERY_HNRC) ; // HNRC Old
	21	: string(STR_LIVERY_HNRC_NEW) ; // HNRC New
	22	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_GBRF)); // GBRf (Fictional)
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_refit_text_check, livery_choice){
	1 : sw_37_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_37_purch_gfx, current_year){
	1948 .. 1966	: gfx_37_purch_brgreen ;
	1967..1981	: gfx_37_purch_brblue ;
	1982..1986	: gfx_37_purch_brll ;
	1987..1996	: gfx_37_purch_regional ;
	1997..2008	: gfx_37_purch_drs ;
	gfx_37_purch_drs_comp ;
}

switch(FEAT_TRAINS, SELF, sw_37_purch_col, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_37_purch_col_2cc_check, colour_scheme_1){
	1 : sw_37_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Item

switch(FEAT_TRAINS, SELF, sw_37_vfx_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_diesel_default ;
}


item (FEAT_TRAINS, item_37, 37){
	property{
		name                           : string(STR_NAME_EETYPE3) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1959,12,2) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 170 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 100 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.245 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_37_gfx_dvt_check ;
		colour_mapping                 : sw_37_col_dvt_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : sw_37_vfx_dbso_check ;
		cargo_subtype_text             : sw_37_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 42 : 170) ;
		purchase_running_cost_factor : 170 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37, 37){
	property{
		name                           : string(STR_NAME_EETYPE3_ALT) ;
	}
}
}











//Subclasses








// Subclass /0 Split

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_auto, current_year){
	1948 .. 1966	: sw_37_gfx_rev_check_brgreen ;
	1967..1981	: sw_37_gfx_rev_check_brblue ;
	1982..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_rev_check_railfreight ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_colas ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_manual, cargo_subtype){
	0	: sw_37_gfx_rev_check_brgreen ;
	1	: sw_37_gfx_rev_check_brblue ;
	4..5: sw_37_gfx_rev_check_railfreight ;
	6	: sw_37_gfx_rev_check_drs ;
	7	: sw_37_gfx_rev_check_ews ;
	8	: sw_37_gfx_rev_check_colas ;
	9	: sw_37_gfx_rev_check_police ;
	10	: sw_37_gfx_rev_check_rfredstripe ; // Railfreight Red Stripe
	11	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	12	: sw_37_gfx_rev_check_ews ; // GIF Blue
	13	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	sw_37_gfx_rev_check_brll ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_manual_check, livery_choice){
	1 : sw_37_split_gfx_manual ;
	sw_37_split_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_lt_front_check, position_in_consist){
	0 : gfx_37_lt_split ;
	sw_37_split_gfx_lt_back_check ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_lt_check, cargo_subtype >= 1){
	1 : sw_37_split_gfx_lt_front_check ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_hc_check, cargo_subtype){
	0 : gfx_37_hc_split_green ;
	gfx_37_hc_split ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_split_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_split_gfx_manual_check ;
	1 : sw_37_split_gfx_hc_check ;
	2 : sw_37_split_gfx_lt_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_split_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_split_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ; // BR Green
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	4	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	5	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ; // Civil Engineers Dutch
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	7	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	8	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
	9	: palette_2cc(COLOUR_WHITE, COLOUR_ORANGE) ; // Police
	10	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // Railfreight Red Stripe
	11	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	12	: palette_2cc(COLOUR_BLUE, COLOUR_DARK_BLUE) ; // GIF Blue
	13	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}


switch(FEAT_TRAINS, SELF, sw_37_split_col_manual_check, livery_choice){
	1 : sw_37_split_col_manual ;
	sw_37_split_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_col_2cc_check, colour_scheme_1){
	1 : sw_37_split_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_37_split_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRGREEN) ;
	1	: string(STR_LIVERY_BRBLUE) ;
	2	: string(STR_LIVERY_BRBLUE_LOGO) ;
	3	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	5	: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	6	: string(STR_LIVERY_DRS) ;
	7	: string(STR_LIVERY_EWS) ;
	8	: string(STR_LIVERY_COLAS) ;
	9	: string(STR_LIVERY_POLICE) ;
	10	: string(STR_LIVERY_RAILFREIGHT3) ; // Railfreight Red Stripe
	11	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE)); //  Network SouthEast (Fictional)
	12	: string(STR_LIVERY_GIF) ; // GIF Blue
	13	: string(STR_LIVERY_HNRC) ; // HNRC Old
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_split_refit_text_check, livery_choice){
	1 : sw_37_split_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Item



item (FEAT_TRAINS, item_37_split, 3700){
	property{
		name                           : string(STR_NAME_EETYPE3_1) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1959,12,2) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 170 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 102 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.24 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_split_gfx_spr_stack ;
		colour_mapping                 : sw_37_split_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_split_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 42 : 170) ;
		purchase_running_cost_factor : 170 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_split, 3700){
	property{
		name                           : string(STR_NAME_EETYPE3_1_ALT) ;
	}
}
}




// Subclass /0 Centre



switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_auto, current_year){
	1948 .. 1966	: sw_37_gfx_rev_check_brgreen ;
	1967..1981	: sw_37_gfx_rev_check_brblue ;
	1982..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_rev_check_railfreight ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_colas ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_manual, cargo_subtype){
	0	: sw_37_gfx_rev_check_brgreen ;
	1	: sw_37_gfx_rev_check_brblue ;
	4..5: sw_37_gfx_rev_check_railfreight ;
	6	: sw_37_gfx_rev_check_loadhaul ;
	7	: sw_37_gfx_rev_check_drs ;
	8	: sw_37_gfx_rev_check_drs_comp ;
	9	: sw_37_gfx_rev_check_ews ;
	10	: sw_37_gfx_rev_check_rog ;
	11	: sw_37_gfx_rev_check_colas ;
	12	: sw_37_gfx_rev_check_railfreight ;
	13	: sw_37_gfx_rev_check_rfredstripe ; // Railfreight Red Stripe
	14	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	15	: sw_37_gfx_rev_check_ews ;
	16	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	17	: sw_37_gfx_rev_check_hnrc ; // HNRC New
	18	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_manual_check, livery_choice){
	1 : sw_37_centre_gfx_manual ;
	sw_37_centre_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_lt_front_check, position_in_consist){
	0 : gfx_37_lt_centre ;
	sw_37_centre_gfx_lt_back_check ;
}

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_hc_check, cargo_subtype){
	0 : gfx_37_hc_centre_green ;
	sw_37_hc_centre ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_centre_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_centre_gfx_manual_check ;
	1 : sw_37_centre_gfx_hc_check ;
	2 : sw_37_centre_gfx_lt_front_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_centre_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_centre_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ; // BR Green
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	4	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	5	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ; // Civil Engineers Dutch
	6	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ; // Loadhaul
	7	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	9	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	10	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // ROG Europheonix
	11	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
	12	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW)	; // Network Rail
	13	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // Railfreight Red Stripe
	14	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	15	: palette_2cc(COLOUR_BLUE, COLOUR_DARK_BLUE) ; // GIF Blue
	16	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	17	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC New
	18	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}


switch(FEAT_TRAINS, SELF, sw_37_centre_col_manual_check, livery_choice){
	1 : sw_37_centre_col_manual ;
	sw_37_centre_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_centre_col_2cc_check, colour_scheme_1){
	1 : sw_37_centre_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_37_centre_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRGREEN) ;
	1	: string(STR_LIVERY_BRBLUE) ;
	2	: string(STR_LIVERY_BRBLUE_LOGO) ;
	3	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	5	: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	6	: string(STR_LIVERY_LOADHAUL) ;
	7	: string(STR_LIVERY_DRS) ;
	8	: string(STR_LIVERY_DRS_COMPASS) ;
	9	: string(STR_LIVERY_EWS) ;
	10	: string(STR_LIVERY_ROG_EUROPHENIX) ;
	11	: string(STR_LIVERY_COLAS) ;
	12	: string(STR_LIVERY_NETWORK_RAIL) ;
	13	: string(STR_LIVERY_RAILFREIGHT3) ; // Railfreight Red Stripe
	14	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE)); //  Network SouthEast (Fictional)
	15	: string(STR_LIVERY_GIF) ; // GIF Blue
	16	: string(STR_LIVERY_HNRC) ; // HNRC Old
	17	: string(STR_LIVERY_HNRC_NEW) ; // HNRC New
	18	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_GBRF)); // GBRf (Fictional)
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_centre_refit_text_check, livery_choice){
	1 : sw_37_centre_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item



item (FEAT_TRAINS, item_37_centre, 3701){
	property{
		name                           : string(STR_NAME_EETYPE3_2) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1961,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 170 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 102 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.24 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_centre_gfx_spr_stack ;
		colour_mapping                 : sw_37_centre_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_centre_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 42 : 170) ;
		purchase_running_cost_factor : 170 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_centre, 3701){
	property{
		name                           : string(STR_NAME_EETYPE3_2_ALT) ;
	}
}
}


// Subclass /4 Centre



switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_auto, current_year){
	1980..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_rev_check_regional ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_drs_comp ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_manual, cargo_subtype){
	1	: sw_37_gfx_rev_check_intercity ;
	2	: sw_37_gfx_rev_check_regional ;
	3	: sw_37_gfx_rev_check_railfreight ;
	4	: sw_37_gfx_rev_check_drs ;
	5	: sw_37_gfx_rev_check_drs_comp ;
	6	: sw_37_gfx_rev_check_ews ;
	7	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	8	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	9	: sw_37_gfx_rev_check_hnrc ; // HNRC New
	sw_37_gfx_rev_check_brll ;
}

switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_manual_check, livery_choice){
	1 : sw_37_eth_gfx_manual ;
	sw_37_eth_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_lt_front_check, position_in_consist){
	0 : gfx_37_lt_centre ;
	sw_37_eth_gfx_lt_back_check ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_eth_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_eth_gfx_manual_check ;
	1 : sw_37_hc_centre ;
	2 : sw_37_eth_gfx_lt_front_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_eth_col_auto, current_year){
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
	1987..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; // Regional Railways 
	1997..2008	:  palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_eth_col_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; //  Intercity
	2	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; // Regional Railways 
	3	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	6	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	7	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	8	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	9	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC New
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}

switch(FEAT_TRAINS, SELF, sw_37_eth_col_manual_check, livery_choice){
	1 : sw_37_eth_col_manual ;
	sw_37_eth_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_eth_col_2cc_check, colour_scheme_1){
	1 : sw_37_eth_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_37_eth_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRBLUE_LOGO) ;
	1	: string(STR_LIVERY_INTERCITY) ;
	2	: string(STR_LIVERY_REG_RAILWAYS) ;
	3	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	4	: string(STR_LIVERY_DRS) ;
	5	: string(STR_LIVERY_DRS_COMPASS) ;
	6	: string(STR_LIVERY_EWS) ;
	7	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE)); //  Network SouthEast (Fictional)
	8	: string(STR_LIVERY_HNRC) ; // HNRC Old
	9	: string(STR_LIVERY_HNRC_NEW) ; // HNRC New
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_eth_refit_text_check, livery_choice){
	1 : sw_37_eth_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item



item (FEAT_TRAINS, item_37_eth, 3704){
	property{
		name                           : string(STR_NAME_EETYPE3_3) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1982,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 59 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 160 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 107 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.239 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_eth_gfx_spr_stack ;
		colour_mapping                 : sw_37_eth_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_eth_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 47 : 160) ;
		purchase_running_cost_factor : 160 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_eth, 3704){
	property{
		name                           : string(STR_NAME_EETYPE3_3_ALT) ;
	}
}
}



// Subclass /5 Flush



switch(FEAT_TRAINS, SELF, sw_37_refurb_gfx_auto, current_year){
	1980..1986	: sw_37_gfx_rev_check_brll ;
	1987..1996	: sw_37_gfx_rev_check_railfreight ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_drs_comp ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_37_refurb_gfx_manual, cargo_subtype){
	0	: sw_37_gfx_rev_check_brgreen ;
	2	: sw_37_gfx_rev_check_intercity ;
	3	: sw_37_gfx_rev_check_railfreight ;
	4	: sw_37_gfx_rev_check_loadhaul ;
	5	: sw_37_gfx_rev_check_drs ;
	6	: sw_37_gfx_rev_check_drs_comp ;
	7	: sw_37_gfx_rev_check_ews ;
	8	: sw_37_gfx_rev_check_rog ;
	9	: sw_37_gfx_rev_check_colas ;
	10	: sw_37_gfx_rev_check_railfreight ;
	11	: sw_37_gfx_rev_check_rfredstripe ; // Railfreight Red Stripe
	12	: sw_37_gfx_rev_check_brsteel ; // British Steel Blue
	13	: sw_37_gfx_rev_check_nse ;//  Network SouthEast (Fictional)
	14	: sw_37_gfx_rev_check_ews ; // GIF Blue
	15	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	16	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}
	
switch(FEAT_TRAINS, SELF, sw_37_refurb_gfx_manual_check, livery_choice){
	1 : sw_37_refurb_gfx_manual ;
	sw_37_refurb_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_refurb_gfx_hc_check, cargo_subtype){
	0 : gfx_37_hc_refit_green ;
	gfx_37_hc_centre_refit ;
}



//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_refurb_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_refurb_gfx_manual_check ;
	1 : sw_37_refurb_gfx_hc_check ;
	2 : sw_37_centre_gfx_lt_front_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_refurb_col_auto, current_year){
	1967..1986	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	1987..1996	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_refurb_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ; // BR Green
	1	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	2	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; //  Intercity
	3	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	4	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ; // Loadhaul
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	7	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	8	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // ROG Europheonix
	9	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ; // Colas
	10	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW)	; // Network Rail
	11	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // Railfreight Red Stripe
	12	: palette_2cc(COLOUR_BLUE, COLOUR_BLUE) ; // British Steel Blue
	13	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;//  Network SouthEast (Fictional)
	14	: palette_2cc(COLOUR_BLUE, COLOUR_DARK_BLUE) ; // GIF Blue
	15	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	16	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}


switch(FEAT_TRAINS, SELF, sw_37_refurb_col_manual_check, livery_choice){
	1 : sw_37_refurb_col_manual ;
	sw_37_refurb_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_refurb_col_2cc_check, colour_scheme_1){
	1 : sw_37_refurb_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_37_refurb_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRGREEN) ;
	1	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	2	: string(STR_LIVERY_INTERCITY) ;
	3	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	4	: string(STR_LIVERY_LOADHAUL) ;
	5	: string(STR_LIVERY_DRS) ;
	6	: string(STR_LIVERY_DRS_COMPASS) ;
	7	: string(STR_LIVERY_EWS) ;
	8	: string(STR_LIVERY_ROG_EUROPHENIX) ;
	9	: string(STR_LIVERY_COLAS) ;
	10	: string(STR_LIVERY_NETWORK_RAIL) ;
	11	: string(STR_LIVERY_RAILFREIGHT3) ; // Railfreight Red Stripe
	12	: string(STR_LIVERY_BSC) ; // British Steel Blue
	13	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE)); //  Network SouthEast (Fictional)
	14	: string(STR_LIVERY_GIF) ; // GIF Blue
	15	: string(STR_LIVERY_HNRC) ; // HNRC Old
	16	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_GBRF)); // GBRf (Fictional)
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_refurb_refit_text_check, livery_choice){
	1 : sw_37_refurb_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item



item (FEAT_TRAINS, item_37_refurb, 3705){
	property{
		name                           : string(STR_NAME_EETYPE3_4) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1984,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 59 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 155 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 107 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.24 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_refurb_gfx_spr_stack ;
		colour_mapping                 : sw_37_refurb_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_refurb_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 40 : 155) ;
		purchase_running_cost_factor : 155 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_refurb, 3705){
	property{
		name                           : string(STR_NAME_EETYPE3_4_ALT) ;
	}
}
}



// Subclass /6 Modern



switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_auto, current_year){
	1987..1996	: sw_37_gfx_rev_check_railfreight ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_drs_comp ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_manual, cargo_subtype){
	1	: sw_37_gfx_rev_check_railfreight ;
	2	: sw_37_gfx_rev_check_drs ;
	3	: sw_37_gfx_rev_check_drs_comp ;
	4	: sw_37_gfx_rev_check_rog ;
	5	: sw_37_gfx_rev_check_hnrc ; // HNRC New
	6	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}

switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_manual_check, livery_choice){
	1 : sw_37_euro_gfx_manual ;
	sw_37_euro_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_lt_front_check, position_in_consist){
	0 : gfx_37_lt_modern ;
	sw_37_euro_gfx_lt_back_check ;
}

random_switch(FEAT_TRAINS, SELF, sw_37_hc_euro){
	1 : gfx_37_hc_modern_centre ;
	1 : gfx_37_hc_modern ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_euro_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_euro_gfx_manual_check ;
	1 : sw_37_hc_euro ;
	2 : sw_37_euro_gfx_lt_front_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_euro_col_auto, current_year){
	1987..1996	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_euro_col_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	2	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	3	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	4	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // ROG Europheonix
	5	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC New
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}
	
switch(FEAT_TRAINS, SELF, sw_37_euro_col_manual_check, livery_choice){
	1 : sw_37_euro_col_manual ;
	sw_37_euro_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_euro_col_2cc_check, colour_scheme_1){
	1 : sw_37_euro_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_37_euro_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRBLUE_LOGO) ;
	1	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	2	: string(STR_LIVERY_DRS) ;
	3	: string(STR_LIVERY_DRS_COMPASS) ;
	4	: string(STR_LIVERY_ROG_EUROPHENIX) ;
	5	: string(STR_LIVERY_HNRC_NEW) ; // HNRC New
	6	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_GBRF)); // GBRf (Fictional)
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_euro_refit_text_check, livery_choice){
	1 : sw_37_euro_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item



item (FEAT_TRAINS, item_37_euro, 3706){
	property{
		name                           : string(STR_NAME_EETYPE3_5) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1994,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 63 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 150 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 107 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.239 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_euro_gfx_spr_stack ;
		colour_mapping                 : sw_37_euro_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_euro_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 40 : 150) ;
		purchase_running_cost_factor : 150 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_euro, 3706){
	property{
		name                           : string(STR_NAME_EETYPE3_5_ALT) ;
	}
}
}


// Subclass /7 Flush



switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_auto, current_year){
	1985..1996	: sw_37_gfx_rev_check_railfreight ;
	1997..2008	: sw_37_gfx_rev_check_ews ;
	sw_37_gfx_rev_check_drs_comp ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_manual, cargo_subtype){
	0	: sw_37_gfx_rev_check_brblue ;
	2	: sw_37_gfx_rev_check_railfreight ;
	3	: sw_37_gfx_rev_check_loadhaul ;
	4	: sw_37_gfx_rev_check_drs ;
	5	: sw_37_gfx_rev_check_drs_comp ;
	6	: sw_37_gfx_rev_check_ews ;
	7	: sw_37_gfx_rev_check_railfreight ; // HNRC Old
	8	: sw_37_gfx_rev_check_gbrf ; // GBRf (Fictional)
	sw_37_gfx_rev_check_brll ;
}
	
switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_manual_check, livery_choice){
	1 : sw_37_slug_gfx_manual ;
	sw_37_slug_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_lt_back_check, position_in_consist_from_end){
	0 : gfx_37_lt_tail ;
}

switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_lt_front_check, position_in_consist){
	0 : gfx_37_lt_centre ;
	sw_37_slug_gfx_lt_back_check ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_37_slug_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_37_slug_gfx_manual_check ;
	1 : gfx_37_hc_centre_refit ;
	2 : sw_37_slug_gfx_lt_front_check ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_37_slug_col_auto, current_year){
	1985..1996	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
}


//Manual

switch(FEAT_TRAINS, SELF, sw_37_slug_col_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // BR Rail Freight
	2	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ; // Railfreight Triple Grey
	3	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ; // Loadhaul
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; // DRS Compass
	6	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ; // EWS
	7	: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE) ; // HNRC Old
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ; // GBRf (Fictional)
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ; // BR Blue
}

switch(FEAT_TRAINS, SELF, sw_37_slug_col_manual_check, livery_choice){
	1 : sw_37_slug_col_manual ;
	sw_37_slug_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_37_slug_col_2cc_check, colour_scheme_1){
	1 : sw_37_slug_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_37_slug_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRBLUE) ;
	1	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	2	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	3	: string(STR_LIVERY_LOADHAUL) ;
	4	: string(STR_LIVERY_DRS) ;
	5	: string(STR_LIVERY_DRS_COMPASS) ;
	6	: string(STR_LIVERY_EWS) ;
	7	: string(STR_LIVERY_HNRC) ; // HNRC Old
	8	: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_GBRF)); // GBRf (Fictional)
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_37_slug_refit_text_check, livery_choice){
	1 : sw_37_slug_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item



item (FEAT_TRAINS, item_37_slug, 3707){
	property{
		name                           : string(STR_NAME_EETYPE3_6) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1986,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 59 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 150 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 120 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.24 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					37;
	}
	graphics{
		default                        : sw_37_slug_gfx_spr_stack ;
		colour_mapping                 : sw_37_slug_col_2cc_check ;
		purchase_colour_mapping        : sw_37_purch_col_2cc_check ;
		purchase                       : sw_37_purch_gfx ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_37_slug_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 40 : 150) ;
		purchase_running_cost_factor : 150 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_37_slug, 3707){
	property{
		name                           : string(STR_NAME_EETYPE3_6_ALT) ;
	}
}
}






# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/EE_Type4.pnml" 1
//Defining EE Type 4 specific template

template template_eetype4(x,y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+0,y,8,23,-3,-10]    //North
	[x+10,y,21,15,-14,-7]  //North East
	[x+33,y,33,11,-17,-7]  //East
	[x+69,y,21,15,-5,-7]   //South East
	[x+92,y,8,23,-3,-10]   //South
	[x+102,y,21,15,-14,-7]   //South West
	[x+125,y,33,11,-17,-7] //West
	[x+161,y,21,15,-5,-7]  //North West
}
//Reverse
template template_eetype4_reverse(x,y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+92,y,8,23,-3,-10]   //South
	[x+102,y,21,15,-14,-7]   //South West
	[x+125,y,33,11,-17,-7] //West
	[x+161,y,21,15,-5,-7]  //North West
	[x+0,y,8,23,-3,-10]    //North
	[x+10,y,21,15,-14,-7]  //North East
	[x+33,y,33,11,-17,-7]  //East
	[x+69,y,21,15,-5,-7]   //South East}
}

//Defining graphics
spriteset (ee40_headcode_1,       "gfx/FIXTURES/class_40_hc1.png"){template_eetype4(0,0)}        //Headcode 1
spriteset (ee40_headcode_2,       "gfx/FIXTURES/class_40_hc2.png"){template_eetype4(0,0)}        //Headcode 2
spriteset (ee40_headcode_3,       "gfx/FIXTURES/class_40_hc3.png"){template_eetype4(0,0)}        //Headcode 3
spriteset (ee40_headcode_4,       "gfx/FIXTURES/class_40_hc4.png"){template_eetype4(0,0)}        //Headcode 4
spriteset (ee40_headcode_5,       "gfx/FIXTURES/class_40_hc5.png"){template_eetype4(0,0)}        //Headcode 5
spriteset (ee40_br_green,         "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,0)}         //BR Green
spriteset (ee40_br_green_rev,     "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,0)} //BR Green Reverse
spriteset (ee40_br_blue,          "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,25)}         //BR Blue
spriteset (ee40_br_blue_rev,      "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,25)} //BR Blue Reverse
spriteset (ee40_br_blue_logo,     "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,50)}         //BR Large Logo
spriteset (ee40_br_blue_logo_rev, "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,50)} //BR Large Logo Reverse

spriteset (ee40_purchase_brgreen,     "gfx/DIESEL_LOCO/class_40.png"){template_purchase(184,0)} //BR Green Purchase
spriteset (ee40_purchase_brblue,      "gfx/DIESEL_LOCO/class_40.png"){template_purchase(184,0)} //BR Blue Purchase
spriteset (ee40_purchase_brblue_logo, "gfx/DIESEL_LOCO/class_40.png"){template_purchase(184,0)} //BR Large Logo Purchase


//Switches

//Graphics

//Automatic liveries

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brgreen_reverse_check     , vehicle_is_reversed){ 1 : ee40_br_green_rev ; ee40_br_green ; }
switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brblue_reverse_check      , vehicle_is_reversed){ 1 : ee40_br_blue_rev ; ee40_br_blue ; }
switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brblue_logo_reverse_check , vehicle_is_reversed){ 1 : ee40_br_blue_logo_rev ; ee40_br_blue_logo ; }

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_auto, current_year){
	1948 .. 1966 : sw_ee40_gfx_brgreen_reverse_check ;
	1967..1982  : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_ee40_colours_manual, cargo_subtype){
	0 : sw_ee40_gfx_brgreen_reverse_check ;
	1 : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_manual_check, livery_choice){
	1 : sw_ee40_colours_manual ;
	sw_ee40_gfx_auto ;
}


//Sprite stacking

random_switch(FEAT_TRAINS, SELF, sw_ee40_random_headcode, TRIGGER_VEHICLE_SERVICE){
	25 : ee40_headcode_4 ;
	25 : ee40_headcode_5 ;
	15 : ee40_headcode_1 ;
	15 : ee40_headcode_2 ;
	27 : ee40_headcode_3 ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_headcode_dbso_check, count_veh_id(9025) > 0){
	1 : ee40_headcode_2 ;
	sw_ee40_random_headcode ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee40_gfx_manual_check ;
	1 : sw_ee40_headcode_dbso_check ;
}


//Purchase

switch(FEAT_TRAINS, SELF, sw_ee40_purchase, current_year){
	1948 .. 1966       : ee40_purchase_brgreen ;
	1967..1982        : ee40_purchase_brblue ;
	ee40_purchase_brblue_logo ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_ee40_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_refit_text_check, livery_choice){
	1 : sw_ee40_refit_text ;
	CB_RESULT_NO_TEXT;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_ee40_colours_auto, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_recolours_manual, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_ee40_colours_manual_check, livery_choice){
	1 : sw_ee40_recolours_manual ;
	sw_ee40_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_colours_2cc_check, colour_scheme_1){
	1 : sw_ee40_colours_manual_check ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}


//DBSO checks

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_ee40_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_ee40_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_vfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	0 : vfx_diesel_default ;
}


//EE Type 4 item


item (FEAT_TRAINS, item_eetype4, 40){
	property{
		name                           : string(STR_NAME_EETYPE4) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1958,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 27 ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 60 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 200 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 2500 hp ;
		weight                         : 129 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.1723880597014925 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_ee40_gfx_dbso_check ;
		colour_mapping                 : sw_ee40_colours_dbso_check ;
		purchase                       : sw_ee40_purchase ;
		purchase_colour_mapping        : sw_ee40_colours_2cc_check ;
		sound_effect                   : sw_sfx_extension_40_check ;
		create_effect                  : sw_ee40_vfx_dbso_check ;
		cargo_subtype_text             : sw_ee40_refit_text_check ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		running_cost_factor            : return(current_speed == 0 ? 50 : 200) ;
		purchase_running_cost_factor : 200 ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_eetype4, 40){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eetype4, 40){
	property{
		name                           : string(STR_NAME_EETYPE4_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/hoover.pnml" 1
//Hoover

//Spritesets

spriteset(ee50_brblue_pre			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0,  0) }
spriteset(ee50_brblue_pre_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0,  0) }
spriteset(ee50_brblue_llg			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 25) }
spriteset(ee50_brblue_llg_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 25) }
spriteset(ee50_brblue_nse_o			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 50) }
spriteset(ee50_brblue_nse_o_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 50) }
spriteset(ee50_brblue_nse_r			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 75) }
spriteset(ee50_brblue_nse_r_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 75) }
spriteset(ee50_brblue_gbrf			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0,100) }
spriteset(ee50_brblue_gbrf_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0,100) }

spriteset(ee50_purchase_brblue	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase(178, 50) }
spriteset(ee50_purchase_brllg	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase(178, 75) }
spriteset(ee50_purchase_nse_o	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase(178,100) }
spriteset(ee50_purchase_nse_r	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase(178,125) }
spriteset(ee50_purchase_gbrf	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase(178,150) }

spriteset(ee50_headlights		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double( 178,  0) }
spriteset(ee50_taillights		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double( 178, 25) }



//Grahpics switches

switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_pre_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_pre_rev ; ee50_brblue_pre ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_llg_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_llg_rev ; ee50_brblue_llg ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_nse_o_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_nse_o_rev ; ee50_brblue_nse_o ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_nse_r_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_nse_r_rev ; ee50_brblue_nse_r ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_gbrf_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_gbrf_rev ; ee50_brblue_gbrf ; }


random_switch(FEAT_TRAINS, SELF, sw_ee50_nse_random, TRIGGER_VEHICLE_SERVICE){
	1 : sw_ee50_brblue_nse_o_rev_check ;
	1 : sw_ee50_brblue_nse_r_rev_check ;
}


switch(FEAT_TRAINS, SELF, sw_ee50_auto, current_year){
	1948..1979 : sw_ee50_brblue_pre_rev_check ;
	1980..1986 : sw_ee50_brblue_llg_rev_check ;
	1987..1994 : sw_ee50_nse_random ;
	2019..4096 : sw_ee50_gbrf_rev_check ;
	sw_ee50_brblue_pre_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_manual, cargo_subtype){
	0 : sw_ee50_brblue_pre_rev_check ;
	1 : sw_ee50_brblue_llg_rev_check ;
	2 : sw_ee50_nse_random ;
	3 : sw_ee50_gbrf_rev_check ;
	sw_ee50_brblue_pre_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_manual_check, livery_choice){
	1 : sw_ee50_manual ;
	sw_ee50_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_ee50_taillights, position_in_consist_from_end){ 0 : ee50_taillights ; }
switch(FEAT_TRAINS, SELF, sw_ee50_headlights, position_in_consist){ 0 : ee50_headlights ; }

switch(FEAT_TRAINS, SELF, sw_ee50_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee50_manual_check ;
	1 : sw_ee50_headlights ;
	2 : sw_ee50_taillights ;
}

//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_ee50_purchase, current_year){
	1948..1979 : ee50_purchase_brblue ;
	1987..1994 : ee50_purchase_nse_r ;
	2019..4096 : ee50_purchase_gbrf ;
	ee50_purchase_brllg ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_purchase_colours, current_year){
	1987..1994 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	2019..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_purchase_colours_check, colour_scheme_1){
	1 : sw_ee50_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_ee50_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_BRBLUE_LOGO) ;
	2 : string(STR_LIVERY_NSE) ;
	3 : string(STR_LIVERY_GBRF) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_refit_text_check, livery_choice){
	1 : sw_ee50_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_ee50_colours_auto, current_year){
	1987..1994 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	2019..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_colours_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_ee50_colours_manual_check, livery_choice){
	1 : sw_ee50_colours_manual ;
	sw_ee50_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_colours_2cc_check, colour_scheme_1){
	1 : sw_ee50_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Mark 2 override


//Graphics

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_graphics, current_year){
	1983 .. 1995 : gfx_mk2_nse_a_tso ;
	1996 .. 2004   : gfx_mk2_virgin_f_tso ;
	gfx_mk2_brblue_a_tso ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_livery_choice_decider, livery_choice){
	1 : sw_mk2_livery_decider ; 
	sw_ee50_mk2_graphics ;
}




//Colours

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_auto, current_year){
    1983 .. 1995  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
    1996 .. 2004 : sw_mk2_virgin_colour_mapping ;
	sw_mk2_brblue_colour_mapping ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_manual_check, livery_choice){
	1 : sw_mk2_colour_mapping_manual ;
	sw_ee50_mk2_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_decider, colour_scheme_1){
	1 : sw_ee50_mk2_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}





//Item

item(FEAT_TRAINS, item_hoover, 50){
	property{
		name                           : string(STR_NAME_EEHOOVER) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1968,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 18 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 6 ;
		cost_factor                    : 72 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 222 ;
		speed                          : 100 mph ;
		track_type                     : RAIL ;
		power                          : 2010 kW ;
		weight                         : 115 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_ee50_sprite_stack ;
		colour_mapping                 : sw_ee50_colours_2cc_check ;
		purchase                       : sw_ee50_purchase ;
		purchase_colour_mapping        : sw_ee50_purchase_colours_check ;
		sound_effect                   : sw_sfx_diesel_loco_ee ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_ee50_refit_text_check ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		running_cost_factor            : return(current_speed == 0 ? 50 : 222) ;
		purchase_running_cost_factor   : 222 ;
	}
	livery_override(9020){
		default                 : sw_ee50_mk2_livery_choice_decider ;
		cargo_subtype_text      : sw_mk2_refit_text_decider ;
		colour_mapping          : sw_ee50_mk2_colour_mapping_decider ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_hoover, 50){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_hoover, 50){
	property{
		name                           : string(STR_NAME_EEHOOVER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/deltic.pnml" 1
//DELTIC

spriteset(gfx_deltic_brgreen,			"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_single(0,25)}
spriteset(gfx_deltic_brgreen_yfront,	"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_single(89,25)}
spriteset(gfx_deltic_brblue,			"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_single(0,50)}
spriteset(gfx_deltic_brblue_wcab,		"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_single(89,50)}

spriteset(gfx_deltic_taillights,		"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_double(0,75)}
spriteset(gfx_deltic_headlights,		"gfx/DIESEL_LOCO/class_55.png"){template_Mk2_double(0,100)}

spriteset(gfx_deltic_purch_brgreen,		"gfx/DIESEL_LOCO/class_55.png"){template_purchase(178,25)}
spriteset(gfx_deltic_purch_brblue,		"gfx/DIESEL_LOCO/class_55.png"){template_purchase(178,50)}


//Graphics siwtches

random_switch(FEAT_TRAINS, SELF, sw_deltic_gfx_brblue_random){
	3 : gfx_deltic_brblue ;
	1 : gfx_deltic_brblue_wcab ;
}

random_switch(FEAT_TRAINS, SELF, sw_deltic_random_private){
	3 : gfx_deltic_brblue ;
	2 : gfx_deltic_brgreen_yfront ;
	1 : gfx_deltic_brblue_wcab ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_gfx_auto, current_year){
	0..1967		: gfx_deltic_brgreen ;
	1968..1986	: sw_deltic_gfx_brblue_random ;
	sw_deltic_random_private ;
}


switch(FEAT_TRAINS, SELF, sw_deltic_gfx_manual, cargo_subtype){
	0 : gfx_deltic_brgreen ;
	1 : gfx_deltic_brgreen_yfront ;
	3 : gfx_deltic_brblue_wcab ;
	gfx_deltic_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_gfx_manual_check, livery_choice){
	1 : sw_deltic_gfx_manual ;
	sw_deltic_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_deltic_gfx_check_headlight, position_in_consist){ 0 : gfx_deltic_headlights ; }
switch(FEAT_TRAINS, SELF, sw_deltic_gfx_check_taillight, position_in_consist_from_end){ 0 : gfx_deltic_taillights ; }

switch(FEAT_TRAINS, SELF, sw_deltic_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_deltic_gfx_manual_check ;
	1 : sw_deltic_gfx_check_headlight ;
	2 : sw_deltic_gfx_check_taillight ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_deltic_purch_gfx,	current_year){
	0..1967		: gfx_deltic_purch_brgreen ;
	gfx_deltic_purch_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_purch_col, current_year){
	0..1967		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_purch_col_2cc_check, colour_scheme_1){
	1 : sw_deltic_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_deltic_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRGREEN_YELLOW) ;
	2 : string(STR_LIVERY_BRBLUE) ;
	3 : string(STR_LIVERY_BRBLUE_SUBTYPE, string(STR_LIVERY_WHITE_CAB)) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_refit_text_check, livery_choice){
	1 : sw_deltic_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colours

random_switch(FEAT_TRAINS, SELF, sw_deltic_random_private_col){
	dependent : sw_deltic_random_private ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_col_auto, current_year){
	0..1967		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1968..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	sw_deltic_random_private_col ;
}


switch(FEAT_TRAINS, SELF, sw_deltic_col_manual, cargo_subtype){
	0..1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_col_manual_check, livery_choice){
	1 : sw_deltic_col_manual ;
	sw_deltic_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_deltic_col_2cc_check, colour_scheme_1){
	1 : sw_deltic_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item


item(FEAT_TRAINS, item_deltic, 55){
	property{
		name                           : string(STR_NAME_DELTIC) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1961,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 30 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 8 ;
		cost_factor                    : 89 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 248 ;
		speed                          : 100 mph ;
		track_type                     : RAIL ;
		power                          : 2460 kW ;
		weight                         : 100 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.23 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_deltic_gfx_spr_stack ;
		colour_mapping                 : sw_deltic_col_2cc_check ;
		purchase                       : sw_deltic_purch_gfx ;
		purchase_colour_mapping        : sw_deltic_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_diesel_loco_deltic ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_deltic_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 70 : 248) ;
		purchase_running_cost_factor : 248 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_deltic, 55){
	property{
		name                           : string(STR_NAME_DELTIC_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_deltic, 55){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/Brush_Type2.pnml" 1
//Brush Type 2

//Spritesets

spriteset(gfx_brush2_generic_grey				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	0)		}
spriteset(gfx_brush2_generic_grey_rev			, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	0)	}
spriteset(gfx_brush2_brgreen					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	25)		}
spriteset(gfx_brush2_brgreen_rev				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	25)	}
spriteset(gfx_brush2_brblue						, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	50)		}
spriteset(gfx_brush2_brblue_rev					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	50)	}
spriteset(gfx_brush2_brlargelogo				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	75)		}
spriteset(gfx_brush2_brlargelogo_rev			, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	75)	}
spriteset(gfx_brush2_regionalrail				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	100)	}
spriteset(gfx_brush2_regionalrail_rev			, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	100)}
spriteset(gfx_brush2_intercity					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	125)	}
spriteset(gfx_brush2_intercity_rev				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	125)}
spriteset(gfx_brush2_railfreight				, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	150)	}
spriteset(gfx_brush2_railfreight_rev			, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	150)}
spriteset(gfx_brush2_ews						, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	175)	}
spriteset(gfx_brush2_ews_rev					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	175)}
spriteset(gfx_brush2_modern						, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	0,	200)	}
spriteset(gfx_brush2_modern_rev					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_rev_2(	0,	200)}

spriteset(gfx_brush2_taillights					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	235,	0)	}
spriteset(gfx_brush2_headlights					, "gfx/DIESEL_LOCO/class_31.png")	{ template_7_8_2(	235,	25)	}

spriteset(gfx_brush2_purchase_brblue			, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	178,	50)}
spriteset(gfx_brush2_purchase_brgreen			, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	275,	75)	}
spriteset(gfx_brush2_purchase_brlargelogo		, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	178,	75)	}
spriteset(gfx_brush2_purchase_regional			, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	178,	100)}
spriteset(gfx_brush2_purchase_ews				, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	178,	175)}
spriteset(gfx_brush2_purchase_modern			, "gfx/DIESEL_LOCO/class_31.png")	{ template_purchase(	178,	200)}


//Graphics switches

//switch(FEAT_TRAINS, PARENT, sw_brush2_generic_grey_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush2_generic_grey_rev ;			gfx_brush2_generic_grey ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_brgreen_revcheck, vehicle_is_reversed)			{ 1 : gfx_brush2_brgreen_rev ;				gfx_brush2_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_brblue_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush2_brblue_rev ;				gfx_brush2_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_brlargelogo_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush2_brlargelogo_rev ;			gfx_brush2_brlargelogo ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_regionalrail_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush2_regionalrail_rev ;			gfx_brush2_regionalrail ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_intercity_revcheck, vehicle_is_reversed)			{ 1 : gfx_brush2_intercity_rev ;			gfx_brush2_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_railfreight_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush2_railfreight_rev ;			gfx_brush2_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_ews_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush2_ews_rev ;					gfx_brush2_ews ; }
switch(FEAT_TRAINS, PARENT, sw_brush2_modern_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush2_modern_rev ;				gfx_brush2_modern ; }


//Automatic

random_switch(FEAT_TRAINS, SELF, sw_brush2_gfx_sectors_pass, TRIGGER_VEHICLE_SERVICE){ 2 : sw_brush2_regionalrail_revcheck ; 1 : sw_brush2_intercity_revcheck ; }

switch(FEAT_TRAINS, SELF, sw_brush2_gfx_sectors, most_common_cargo_type){
	PASS	: sw_brush2_gfx_sectors_pass ;
	sw_brush2_railfreight_revcheck ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_gfx_private_1, most_common_cargo_type){
	PASS	: sw_brush2_modern_revcheck ;
	sw_brush2_ews_revcheck ;
}

random_switch(FEAT_TRAINS, SELF, sw_brush2_gfx_private_2, TRIGGER_VEHICLE_SERVICE){
	5 : sw_brush2_modern_revcheck ;
	3 : sw_brush2_brgreen_revcheck ;
	2 : sw_brush2_brblue_revcheck ;
	2 : sw_brush2_ews_revcheck ;
	2 : sw_brush2_brlargelogo_revcheck ;
	1 : sw_brush2_railfreight_revcheck ;
	1 : sw_brush2_intercity_revcheck ;
	1 : sw_brush2_regionalrail_revcheck ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_gfx_auto, current_year){
	1948 .. 1966	: sw_brush2_brgreen_revcheck ;
	1967..1980	: sw_brush2_brblue_revcheck ;
	1981..1986	: sw_brush2_brlargelogo_revcheck ;
	1987..1996	: sw_brush2_gfx_sectors ;
	1997..2005  : sw_brush2_gfx_private_1 ;
	sw_brush2_gfx_private_2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_brush2_gfx_manual, cargo_subtype){
	0		: sw_brush2_brgreen_revcheck ;
	1		: sw_brush2_brblue_revcheck ;
	4		: sw_brush2_regionalrail_revcheck ;
	5		: sw_brush2_intercity_revcheck ;
	6..7	: sw_brush2_railfreight_revcheck ;
	8		: sw_brush2_ews_revcheck ;
	9..11	: sw_brush2_modern_revcheck ;
	sw_brush2_brlargelogo_revcheck ;
}


switch(FEAT_TRAINS, SELF, sw_brush2_gfx_manual_check, livery_choice){
	1 : sw_brush2_gfx_manual ;
	sw_brush2_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_brush2_headlight_check, position_in_consist){ 0 : gfx_brush2_headlights ; }
switch(FEAT_TRAINS, SELF, sw_brush2_taillight_check, position_in_consist_from_end){ 0 : gfx_brush2_taillights ; }


switch(FEAT_TRAINS, SELF, sw_brush2_gfx_sprstack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_brush2_gfx_manual_check ;
	1 : sw_brush2_headlight_check ;
	2 : sw_brush2_taillight_check ;
}




//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_brush2_purchase_gfx, current_year){
	1948 .. 1966	: gfx_brush2_purchase_brgreen ;
	1967..1980	: gfx_brush2_purchase_brblue ;
	1981..1986	: gfx_brush2_purchase_brlargelogo ;
	1987..1996	: gfx_brush2_purchase_regional ;
	1997..2005  : gfx_brush2_purchase_ews ;
	gfx_brush2_purchase_modern ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_purchase_colours, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1987..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1997..2005  : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_brush2_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_brush2_refit_text, cargo_subtype){
	0		: string(STR_LIVERY_BRGREEN) ;
	1		: string(STR_LIVERY_BRBLUE) ;
	2		: string(STR_LIVERY_BRBLUE_LOGO) ;
	3		: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4		: string(STR_LIVERY_REG_RAILWAYS) ;
	5		: string(STR_LIVERY_INTERCITY) ;
	6		: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	7		: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	8		: string(STR_LIVERY_EWS) ;
	9		: string(STR_LIVERY_WESSEX_TRAINS) ;
	10		: string(STR_LIVERY_DCR_GREEN) ;
	11		: string(STR_LIVERY_NETWORK_RAIL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_refit_text_check, livery_choice){
	1 : sw_brush2_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping


//Automatic

switch(FEAT_TRAINS, PARENT, sw_brush2_col_largelogo, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_brush2_col_sectors_pass, TRIGGER_VEHICLE_SERVICE){
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_brush2_col_railfreight_random, TRIGGER_VEHICLE_SERVICE){
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_brush2_col_sectors, most_common_cargo_type){
	PASS	: sw_brush2_col_sectors_pass ;
	sw_brush2_col_railfreight_random ;
}

switch(FEAT_TRAINS, SELF, sw_brush2_col_private_1, most_common_cargo_type){
	PASS	: palette_2cc(COLOUR_PINK, COLOUR_WHITE) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}


random_switch(FEAT_TRAINS, SELF, sw_brush2_col_modern_random, TRIGGER_VEHICLE_SERVICE){
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	2 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_PINK, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_brush2_col_private_2, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_brush2_gfx_private_2 ;
	5 : sw_brush2_col_modern_random ;
	3 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2 : sw_brush2_col_largelogo ;
	1 : sw_brush2_col_railfreight_random ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}



switch(FEAT_TRAINS, SELF, sw_brush2_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1980	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1981..1986	: sw_brush2_col_largelogo ;
	1987..1996	: sw_brush2_col_sectors ;
	1997..2005  : sw_brush2_col_private_1 ;
	sw_brush2_col_private_2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_brush2_col_manual, cargo_subtype){
	0		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	3		: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	4		: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5		: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	6		: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	7		: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	8		: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	9		: palette_2cc(COLOUR_PINK, COLOUR_WHITE) ;
	10		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	11		: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_brush2_col_manual_check, livery_choice){
	1 : sw_brush2_col_manual ;
	sw_brush2_col_auto ;
}

switch(FEAT_TRAINS, SELF , sw_brush2_col_2cc_check, colour_scheme_1){
	1 : sw_brush2_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Item

item(FEAT_TRAINS, item_brush2, 31){
	property{
		name                           : string(STR_NAME_BRUSH_2) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1957,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 35 ;
		vehicle_life                   : 42 ;
		reliability_decay              : 13 ;
		cost_factor                    : 45 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 150 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 1044 kW ;
		weight                         : 108 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.14722222222222222222222222222222 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 7 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_brush2_gfx_sprstack ;
		colour_mapping                 : sw_brush2_col_2cc_check ;
		purchase                       : sw_brush2_purchase_gfx ;
		purchase_colour_mapping        : sw_brush2_purchase_colours_2cc_check ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_brush2_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 38 : 150) ;
		purchase_running_cost_factor : 150 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_brush2, 31){
	property{
		name                           : string(STR_NAME_BRUSH_2_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/Brush_Peak.pnml" 1
//Brush Peak

//Spritesets

spriteset(gfx_bshpeak_brgreen         , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0,  0) }
spriteset(gfx_bshpeak_brgreen_rev     , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double_reverse(  0,  0) }
spriteset(gfx_bshpeak_brblue          , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 25) }
spriteset(gfx_bshpeak_brblue_rev      , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double_reverse(  0, 25) }

spriteset(gfx_bshpeak_headlight       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 75) }
spriteset(gfx_bshpeak_taillight       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 50) }
spriteset(gfx_bshpeak_headlight_split , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(235, 75) }

spriteset(gfx_bshpeak_hc_split_brgreen, "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235,  0) }
spriteset(gfx_bshpeak_hc_split_brblue , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235, 25) }
spriteset(gfx_bshpeak_hc_centre       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235, 50) }

spriteset(gfx_bshpeak_purchase_brgreen, "gfx/DIESEL_LOCO/class_46.png"){ template_purchase(324,  0) }
spriteset(gfx_bshpeak_purchase_brblue , "gfx/DIESEL_LOCO/class_46.png"){ template_purchase(324, 25) }

spriteset(gfx_bshpeak_blank           , "gfx/DIESEL_LOCO/class_46.png"){ base_32bpp() }



//Graphics switches

//Headcodes

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_auto, current_year){
	1948..1967 : gfx_bshpeak_hc_split_brgreen ;
	gfx_bshpeak_hc_split_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_manual, cargo_subtype){
	0 : gfx_bshpeak_hc_split_brgreen ;
	gfx_bshpeak_hc_split_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_manual_check, livery_choice){
	1 : sw_bshpeak_hc_split_decider_manual ;
	sw_bshpeak_hc_split_decider_auto ;
}

random_switch(FEAT_TRAINS, SELF, sw_bshpeak_random_headcode){
	1 : gfx_bshpeak_hc_centre ;
	1 : sw_bshpeak_hc_split_decider_manual_check ;
	1 : gfx_bshpeak_blank ;
}


//Liveries

switch(FEAT_TRAINS, PARENT, sw_bshpeak_brgreen_reverse_check, vehicle_is_reversed){ 1 : gfx_bshpeak_brgreen ; gfx_bshpeak_brgreen_rev ; }
switch(FEAT_TRAINS, PARENT, sw_bshpeak_brblue_reverse_check, vehicle_is_reversed){ 1 : gfx_bshpeak_brblue ; gfx_bshpeak_brblue_rev ; }


switch(FEAT_TRAINS, SELF, sw_bshpeak_auto, current_year){
	1948..1967 : sw_bshpeak_brgreen_reverse_check ;
	sw_bshpeak_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_manual, cargo_subtype){
	0 : sw_bshpeak_brgreen_reverse_check ;
	sw_bshpeak_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_manual_check, livery_choice){
	1 : sw_bshpeak_manual ;
	sw_bshpeak_auto ;
}


//Lights

random_switch(FEAT_TRAINS, SELF, sw_bshpeak_headlight_random_decider){
	dependent : sw_bshpeak_random_headcode ;
	1 : gfx_bshpeak_headlight ;
	1 : gfx_bshpeak_headlight_split ;
	1 : gfx_bshpeak_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_taillight_check, position_in_consist_from_end){ 0: gfx_bshpeak_taillight ; }
switch(FEAT_TRAINS, SELF, sw_bshpeak_headlight_check, position_in_consist){ 0: sw_bshpeak_headlight_random_decider ; sw_bshpeak_taillight_check ; }

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_bshpeak_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_bshpeak_manual_check ;
	1 : sw_bshpeak_random_headcode ;
	2 : sw_bshpeak_headlight_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_bshpeak_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_refit_text_check, livery_choice){
	1 : sw_bshpeak_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_bshpeak_purchase, current_year){
	1948..1967 : gfx_bshpeak_purchase_brgreen ;
	gfx_bshpeak_purchase_brblue ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_auto, current_year){
	1948..1967 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_manual_check, livery_choice){
	1 : sw_bshpeak_colours_manual ;
	sw_bshpeak_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_2cc_check, colour_scheme_1){
	1 : sw_bshpeak_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_bshpeak, 46){
	property{
		name                           : string(STR_NAME_BRUSH_PEAK) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1959,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 25 ;
		vehicle_life                   : 35 ;
		reliability_decay              : 11 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 230 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 2600 hp ;
		weight                         : 138 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.1811594202898551 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_bshpeak_spritestack ;
		colour_mapping                 : sw_bshpeak_colours_2cc_check ;
		purchase                       : sw_bshpeak_purchase ;
		purchase_colour_mapping        : sw_bshpeak_colours_auto ;
		sound_effect                   : sw_sfx_diesel_loco_heritage ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_bshpeak_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 57 : 230) ;
		purchase_running_cost_factor : 230 ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_bshpeak, 46){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_bshpeak, 46){
	property{
		name                           : string(STR_NAME_BRUSH_PEAK_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/Brush_Type4.pnml" 1
//Brush Type 4

//Spritesets

spriteset(gfx_brush4_brgreen				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	25)				}
spriteset(gfx_brush4_brgreen_rev			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	25)		}
spriteset(gfx_brush4_brblue					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	50)				}
spriteset(gfx_brush4_brblue_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	50)		}
spriteset(gfx_brush4_brlargelogo			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	75)				}
spriteset(gfx_brush4_brlargelogo_rev		, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	75)		}
spriteset(gfx_brush4_intercity				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	100)			}
spriteset(gfx_brush4_intercity_rev			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	100)	}
spriteset(gfx_brush4_nse					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	125)			}
spriteset(gfx_brush4_nse_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	125)	}
spriteset(gfx_brush4_railfreight			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	150)			}
spriteset(gfx_brush4_railfreight_rev		, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	150)	}
spriteset(gfx_brush4_railexpress			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	175)			}
spriteset(gfx_brush4_railexpress_rev		, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	175)	}
spriteset(gfx_brush4_ews					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	200)			}
spriteset(gfx_brush4_ews_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	200)	}
spriteset(gfx_brush4_virgin					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	225)			}
spriteset(gfx_brush4_virgin_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	225)	}
spriteset(gfx_brush4_first_fag				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	250)			}
spriteset(gfx_brush4_first_fag_rev			, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	250)	}
spriteset(gfx_brush4_drs					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	275)			}
spriteset(gfx_brush4_drs_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	275)	}
spriteset(gfx_brush4_colas					, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	0,	300)			}
spriteset(gfx_brush4_colas_rev				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double_reverse(	0,	300)	}

spriteset(gfx_brush4_taillights				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	235,	0)			}
spriteset(gfx_brush4_headlights				, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_double(	235,	25)			}
spriteset(gfx_brush4_alternate_headcode		, "gfx/DIESEL_LOCO/class_47.png")	{ template_Mk2_single(	235,	50)			}

spriteset(gfx_brush4_purchase_brgreen		, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	275,	100)	}
spriteset(gfx_brush4_purchase_brblue		, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	275,	125)	}
spriteset(gfx_brush4_purchase_brlargelogo	, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	178,	75)		}
spriteset(gfx_brush4_purchase_intercity		, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	178,	100)	}
spriteset(gfx_brush4_purchase_virgin		, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	178,	225)	}
spriteset(gfx_brush4_purchase_drs			, "gfx/DIESEL_LOCO/class_47.png")	{ template_purchase(	178,	275)	}



//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_brgreen_revcheck, vehicle_is_reversed)			{ 1 : gfx_brush4_brgreen_rev ;			gfx_brush4_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_brblue_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_brblue_rev ;			gfx_brush4_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_brlargelogo_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush4_brlargelogo_rev ;		gfx_brush4_brlargelogo ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_intercity_revcheck, vehicle_is_reversed)			{ 1 : gfx_brush4_intercity_rev ;		gfx_brush4_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_nse_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_nse_rev ;				gfx_brush4_nse ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_railfreight_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush4_railfreight_rev ;		gfx_brush4_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_railexpress_revcheck, vehicle_is_reversed)		{ 1 : gfx_brush4_railexpress_rev ;		gfx_brush4_railexpress ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_ews_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_ews_rev ;				gfx_brush4_ews ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_virgin_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_virgin_rev ;			gfx_brush4_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_first_fag_revcheck, vehicle_is_reversed)			{ 1 : gfx_brush4_first_fag_rev ;		gfx_brush4_first_fag ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_drs_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_drs_rev ;				gfx_brush4_drs ; }
switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_colas_revcheck, vehicle_is_reversed)				{ 1 : gfx_brush4_colas_rev ;			gfx_brush4_colas ; }



//Automatic

switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_sectors, most_common_cargo_type){
	PASS : sw_brush4_gfx_intercity_revcheck ;
	MAIL : sw_brush4_gfx_railexpress_revcheck ;
	sw_brush4_gfx_railfreight_revcheck ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_private_1, most_common_cargo_type){
	PASS : sw_brush4_gfx_virgin_revcheck ;
	URAN : sw_brush4_gfx_drs_revcheck ;
	NWST : sw_brush4_gfx_drs_revcheck ;
	sw_brush4_gfx_ews_revcheck ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_gfx_private_2, most_common_cargo_type){
	URAN : sw_brush4_gfx_drs_revcheck ;
	NWST : sw_brush4_gfx_drs_revcheck ;
	PASS : sw_brush4_gfx_drs_revcheck ;
	sw_brush4_gfx_colas_revcheck ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_gfx_auto, current_year){
	1948 .. 1966	: sw_brush4_gfx_brgreen_revcheck ;
	1967..1980	: sw_brush4_gfx_brblue_revcheck ;
	1981..1986	: sw_brush4_gfx_brlargelogo_revcheck ;
	1987..1996	: sw_brush4_gfx_sectors ;
	1997..2005  : sw_brush4_gfx_private_1 ;
	sw_brush4_gfx_private_2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_manual, cargo_subtype){
	0		: sw_brush4_gfx_brgreen_revcheck ;
	1		: sw_brush4_gfx_brblue_revcheck ;
	4..5	: sw_brush4_gfx_intercity_revcheck ;
	6		: sw_brush4_gfx_nse_revcheck ;
	7..8	: sw_brush4_gfx_railfreight_revcheck ;
	9		: sw_brush4_gfx_railexpress_revcheck ;
	10		: sw_brush4_gfx_ews_revcheck ;
	11		: sw_brush4_gfx_virgin_revcheck ;
	12		: sw_brush4_gfx_first_fag_revcheck ;
	13		: sw_brush4_gfx_drs_revcheck ;
	14		: sw_brush4_gfx_colas_revcheck ;
	sw_brush4_gfx_brlargelogo_revcheck ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_gfx_manual_check, livery_choice){
	1 : sw_brush4_gfx_manual ;
	sw_brush4_gfx_auto ;
}

//Sprite stack

random_switch(FEAT_TRAINS, SELF, sw_brush4_random_headcode, TRIGGER_VEHICLE_SERVICE){ 1 : gfx_brush4_alternate_headcode ; 1 : return 0 ; }

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_auto, current_year){
	0..1986 : return 0 ;
	sw_brush4_random_headcode ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_manual, cargo_subtype){
	4..14 : sw_brush4_random_headcode ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_manual_check, livery_choice){
	1 : sw_brush4_gfx_headcode_manual ;
	sw_brush4_gfx_headcode_auto ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_taillight_check, position_in_consist){ 0 : gfx_brush4_taillights ; }
switch(FEAT_TRAINS, SELF, sw_brush4_headlight_check, position_in_consist){ 0 : gfx_brush4_headlights ; sw_brush4_taillight_check ; }


switch(FEAT_TRAINS, SELF, sw_brush4_gfx_sprstack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_brush4_gfx_manual_check ;
	1 : sw_brush4_gfx_headcode_manual_check ;
	2 : sw_brush4_headlight_check ;
}


//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_brush4_purchase_gfx, current_year){
	1948 .. 1966	: gfx_brush4_purchase_brgreen ;
	1967..1980	: gfx_brush4_purchase_brblue ;
	1981..1986	: gfx_brush4_purchase_brlargelogo ;
	1987..1996	: gfx_brush4_purchase_intercity ;
	1997..2005  : gfx_brush4_purchase_virgin ;
	gfx_brush4_purchase_drs ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_purchase_colours, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1980	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1981..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	:  palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	1997..2005  : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_brush4_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_brush4_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRGREEN) ;
	1	: string(STR_LIVERY_BRBLUE) ;
	2	: string(STR_LIVERY_BRBLUE_LOGO) ;
	3	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4	: string(STR_LIVERY_INTERCITY) ;
	5	: string(STR_LIVERY_BR_SCOTRAIL) ;
	6	: string(STR_LIVERY_NSE) ;
	7	: string(STR_LIVERY_RAILFREIGHT) ;
	8	: string(STR_LIVERY_CIVIL_ENGINEERS) ;
	9	: string(STR_LIVERY_RAIL_EXPRESS) ;
	10	: string(STR_LIVERY_EWS) ;
	11	: string(STR_LIVERY_VIRGIN_TRAINS) ;
	12	: string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	13	: string(STR_LIVERY_DRS_COMPASS) ;
	14	: string(STR_LIVERY_COLAS) ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_refit_text_check, livery_choice){
	1 : sw_brush4_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping


//Automatic

switch(FEAT_TRAINS, PARENT, sw_brush4_col_largelogo, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_col_sectors_dbso_check, count_veh_id(9025) > 0){
	1 : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_col_sectors, most_common_cargo_type){
	PASS : sw_brush4_col_sectors_dbso_check ;
	MAIL : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_col_private_1, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_brush4_col_private_2, most_common_cargo_type){
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}


switch(FEAT_TRAINS, SELF, sw_brush4_col_auto, current_year){
	1948 .. 1966	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1980	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1981..1986	: sw_brush4_col_largelogo ;
	1987..1996	: sw_brush4_col_sectors ;
	1997..2005  : sw_brush4_col_private_1 ;
	sw_brush4_col_private_2 ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_brush4_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1..2: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	5	: palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	9	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	10	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	11	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	12	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	14	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_col_manual_check, livery_choice){
	1 : sw_brush4_col_manual ;
	sw_brush4_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_col_2cc_check, colour_scheme_1){
	1 : sw_brush4_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//DBSO Checks

switch(FEAT_TRAINS, SELF, sw_brush4_dbso_check_gfx, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_brush4_gfx_sprstack ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_dbso_check_col, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_brush4_col_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_vfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	0 : vfx_diesel_default ;
}

//Item


item(FEAT_TRAINS, item_brush4, 47){
	property{
		name                           : string(STR_NAME_BRUSH_4) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1962,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 38 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 10 ;
		cost_factor                    : 68 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 242 ;
		speed                          : 95 mph ;
		track_type                     : RAIL ;
		power                          : 2050 kW ;
		weight                         : 114 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.23421052631578947368421052631579 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_brush4_dbso_check_gfx ;
		colour_mapping                 : sw_brush4_dbso_check_col ;
		purchase                       : sw_brush4_purchase_gfx ;
		purchase_colour_mapping        : sw_brush4_purchase_colours_2cc_check ;
		sound_effect                   : sw_sfx_diesel_loco_heritage ;
		create_effect                  : sw_brush4_vfx_dbso_check ;
		cargo_subtype_text             : sw_brush4_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 65 : 242) ;
		purchase_running_cost_factor : 242 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_brush4, 47){
	property{
		name                           : string(STR_NAME_BRUSH_4_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/Brush_Type5.pnml" 1
//Class 60

spriteset(gfx_60_railfreight,			"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,25)}
spriteset(gfx_60_railfreight_rev,		"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_60_loadhaul,				"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,50)}
spriteset(gfx_60_loadhaul_rev,			"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_60_ews,					"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,75)}
spriteset(gfx_60_ews_rev,				"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_60_db,					"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,100)}
spriteset(gfx_60_db_rev,				"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,100)}
spriteset(gfx_60_colas,					"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,125)}
spriteset(gfx_60_colas_rev,				"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_60_gbrf,					"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(0,150)}
spriteset(gfx_60_gbrf_rev,				"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double_reverse(0,150)}

spriteset(gfx_60_lights_front,			"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(235,0)}
spriteset(gfx_60_lights_back,			"gfx/DIESEL_LOCO/class_60.png"){template_Mk2_double(235,25)}

spriteset(gfx_60_purch_railfreight,		"gfx/DIESEL_LOCO/class_60.png"){template_purchase(275,50)}
spriteset(gfx_60_purch_ews,				"gfx/DIESEL_LOCO/class_60.png"){template_purchase(178,75)}
spriteset(gfx_60_purch_db,				"gfx/DIESEL_LOCO/class_60.png"){template_purchase(178,100)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_railfreight, vehicle_is_reversed){ 1 : gfx_60_railfreight_rev ; gfx_60_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_loadhaul, vehicle_is_reversed){ 1 : gfx_60_loadhaul_rev ; gfx_60_loadhaul ; }
switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_ews, vehicle_is_reversed){ 1 : gfx_60_ews_rev ; gfx_60_ews ; }
switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_db, vehicle_is_reversed){ 1 : gfx_60_db_rev ; gfx_60_db ; }
switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_colas, vehicle_is_reversed){ 1 : gfx_60_colas_rev ; gfx_60_colas ; }
switch(FEAT_TRAINS, PARENT, sw_60_gfx_revcheck_gbrf, vehicle_is_reversed){ 1 : gfx_60_gbrf_rev ; gfx_60_gbrf ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_60_gfx_auto, current_year){
	0..1997		: sw_60_gfx_revcheck_railfreight ;
	1998..2008	: sw_60_gfx_revcheck_ews ;
	sw_60_gfx_revcheck_db ;
}

switch(FEAT_TRAINS, SELF, sw_60_gfx_manual, cargo_subtype){
	1 : sw_60_gfx_revcheck_loadhaul ;
	2 : sw_60_gfx_revcheck_ews ;
	3 : sw_60_gfx_revcheck_db ;
	4 : sw_60_gfx_revcheck_colas ;
	5 : sw_60_gfx_revcheck_gbrf ;
	sw_60_gfx_revcheck_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_60_gfx_manual_check, livery_choice){
	1 : sw_60_gfx_manual ;
	sw_60_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_60_lights_check_back, position_in_consist_from_end){ 0 : gfx_60_lights_back ; }
switch(FEAT_TRAINS, SELF, sw_60_lights_check_front, position_in_consist){ 0 : gfx_60_lights_front ; }

switch(FEAT_TRAINS, SELF, sw_60_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_60_gfx_manual_check ;
	1 : sw_60_lights_check_back ;
	2 : sw_60_lights_check_front ;
}



// Purchase sprites

switch(FEAT_TRAINS, SELF, sw_60_purch_gfx, current_year){
	0..1997		: gfx_60_purch_railfreight ;
	1998..2008	: gfx_60_purch_ews ;
	gfx_60_purch_db ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_60_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_RAILFREIGHT2) ;
	1 : string(STR_LIVERY_LOADHAUL) ;
	2 : string(STR_LIVERY_EWS) ;
	3 : string(STR_LIVERY_DBCARGO) ;
	4 : string(STR_LIVERY_COLAS) ;
	5 : string(STR_LIVERY_GBRF) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_60_refit_text_check, livery_choice){
	1 : sw_60_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_60_col_auto, current_year){
	0..1997		: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	1998..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_60_col_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_60_col_manual_check, livery_choice){
	1 : sw_60_col_manual ;
	sw_60_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_60_col_2cc_check, colour_scheme_1){
	1 : sw_60_col_manual_check ;
	palette_2cc(company_colour1, company_colour1) ;
}



//Item


item(FEAT_TRAINS, item_brush5, 60){
	property{
		name                           : string(STR_NAME_BRUSH_5) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1989,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 31 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 7 ;
		cost_factor                    : 85 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 251 ;
		speed                          : 60 mph ;
		track_type                     : RAIL ;
		power                          : 2312 kW ;
		weight                         : 129 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.37 ;
		air_drag_coefficient           : 0.13 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_60_spr_stack ;
		colour_mapping                 : sw_60_col_2cc_check ;
		purchase                       : sw_60_purch_gfx ;
		purchase_colour_mapping        : sw_60_col_auto ;
		sound_effect                   : sw_sfx_extension_60_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_60_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 65 : 251) ;
		purchase_running_cost_factor : 251 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_brush5, 60){
	property{
		name                           : string(STR_NAME_BRUSH_5_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/HST.pnml" 1
//HST

/*

Liveries done:
BR Blue
Intercity 125
Intercity Swallow
Virgin
Midland Mainline (Blue)
EMT
First Fag
First Barbie
FGW
GWR

Liveries to do:
Scotrail
Network Rail

*/

//Spritesets

spriteset(gfx_hst_brblue             , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,  0) }
spriteset(gfx_hst_brblue_rev         , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,  0) }
spriteset(gfx_hst_ic125              , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 25) }
spriteset(gfx_hst_ic125_rev          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 25) }
spriteset(gfx_hst_icswallow          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 50) }
spriteset(gfx_hst_icswallow_rev      , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 50) }
spriteset(gfx_hst_virgin             , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 75) }
spriteset(gfx_hst_virgin_rev         , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 75) }
spriteset(gfx_hst_first_fag          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,100) }
spriteset(gfx_hst_first_fag_rev      , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,100) }
spriteset(gfx_hst_mml                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,125) }
spriteset(gfx_hst_mml_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,125) }
spriteset(gfx_hst_first_barbie       , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,150) }
spriteset(gfx_hst_first_barbie_rev   , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,150) }
spriteset(gfx_hst_fgw                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,175) }
spriteset(gfx_hst_fgw_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,175) }
spriteset(gfx_hst_gwr                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,200) }
spriteset(gfx_hst_gwr_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,200) }
spriteset(gfx_hst_emt                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,225) }
spriteset(gfx_hst_emt_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,225) }
spriteset(gfx_hst_gner               , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,250) }
spriteset(gfx_hst_gner_rev           , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,250) }
spriteset(gfx_hst_lner               , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,275) }
spriteset(gfx_hst_lner_rev           , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,275) }
spriteset(gfx_hst_xc                 , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,300) }
spriteset(gfx_hst_xc_rev             , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,300) }
spriteset(gfx_hst_networkrail        , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,325) }
spriteset(gfx_hst_networkrail_rev    , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,325) }

spriteset(gfx_hst_brblue_purchase    , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,  0) }
spriteset(gfx_hst_ic125_purchase     , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 25) }
spriteset(gfx_hst_icswallow_purchase , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 50) }
spriteset(gfx_hst_virgin_purchase    , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 75) }
spriteset(gfx_hst_mml_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,125) }
spriteset(gfx_hst_fgw_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,175) }
spriteset(gfx_hst_gwr_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,200) }
spriteset(gfx_hst_emt_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,225) }


spriteset(gfx_hst_headlight          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (259,  0) }
spriteset(gfx_hst_taillight          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (259, 25) }
spriteset(gfx_hst_taillight_refurb   , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (259, 50) }


//Graphics switches

/*
switch(FEAT_TRAINS, PARENT, sw_hst_brblue_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_brblue_rev ; gfx_hst_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_hst_brblue_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_brblue ; gfx_hst_brblue_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_ic125_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_ic125_rev ; gfx_hst_ic125 ; }
switch(FEAT_TRAINS, PARENT, sw_hst_ic125_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_ic125 ; gfx_hst_ic125_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_icswallow_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_icswallow_rev ; gfx_hst_icswallow ; }
switch(FEAT_TRAINS, PARENT, sw_hst_icswallow_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_icswallow ; gfx_hst_icswallow_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_virgin_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_virgin_rev ; gfx_hst_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_hst_virgin_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_virgin ; gfx_hst_virgin_rev ; }
*/
switch(FEAT_TRAINS, SELF, sw_hst_brblue_backcheck       , position_in_consist){ 0 : gfx_hst_brblue       ; gfx_hst_brblue_rev ;       }
switch(FEAT_TRAINS, SELF, sw_hst_ic125_backcheck        , position_in_consist){ 0 : gfx_hst_ic125        ; gfx_hst_ic125_rev ;        }
switch(FEAT_TRAINS, SELF, sw_hst_icswallow_backcheck    , position_in_consist){ 0 : gfx_hst_icswallow    ; gfx_hst_icswallow_rev ;    }
switch(FEAT_TRAINS, SELF, sw_hst_virgin_backcheck       , position_in_consist){ 0 : gfx_hst_virgin       ; gfx_hst_virgin_rev ;       }
switch(FEAT_TRAINS, SELF, sw_hst_first_fag_backcheck    , position_in_consist){ 0 : gfx_hst_first_fag    ; gfx_hst_first_fag_rev ;    }
switch(FEAT_TRAINS, SELF, sw_hst_mml_backcheck          , position_in_consist){ 0 : gfx_hst_mml          ; gfx_hst_mml_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_first_barbie_backcheck , position_in_consist){ 0 : gfx_hst_first_barbie ; gfx_hst_first_barbie_rev ; }
switch(FEAT_TRAINS, SELF, sw_hst_fgw_backcheck          , position_in_consist){ 0 : gfx_hst_fgw          ; gfx_hst_fgw_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_gwr_backcheck          , position_in_consist){ 0 : gfx_hst_gwr          ; gfx_hst_gwr_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_emt_backcheck          , position_in_consist){ 0 : gfx_hst_emt          ; gfx_hst_emt_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_gner_backcheck         , position_in_consist){ 0 : gfx_hst_gner         ; gfx_hst_gner_rev ;         }
switch(FEAT_TRAINS, SELF, sw_hst_lner_backcheck         , position_in_consist){ 0 : gfx_hst_lner         ; gfx_hst_lner_rev ;         }
switch(FEAT_TRAINS, SELF, sw_hst_xc_backcheck           , position_in_consist){ 0 : gfx_hst_xc           ; gfx_hst_xc_rev ;           }
switch(FEAT_TRAINS, SELF, sw_hst_networkrail_backcheck  , position_in_consist){ 0 : gfx_hst_networkrail  ; gfx_hst_networkrail_rev ;  }


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_hst_gfx_auto, current_year){
	1971 .. 1982 : sw_hst_brblue_backcheck ;
	1983..1986 : sw_hst_ic125_backcheck ;
	1987..1995 : sw_hst_icswallow_backcheck ;
	//1996..2005 :  ;
	2005..2009 : sw_hst_mml_backcheck ;
	2010..2016 : sw_hst_emt_backcheck ;
	2017..2048 : sw_hst_gwr_backcheck ;
	//2017..4096 :  ;
	sw_hst_virgin_backcheck ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_hst_gfx_manual, cargo_subtype){
	0 : sw_hst_brblue_backcheck ;
	1 : sw_hst_ic125_backcheck ;
	2 : sw_hst_icswallow_backcheck ;
	4 : sw_hst_mml_backcheck ;
	5 : sw_hst_emt_backcheck ;
	6 : sw_hst_first_fag_backcheck ;
	7 : sw_hst_first_barbie_backcheck ;
	8 : sw_hst_fgw_backcheck ;
	9 : sw_hst_gwr_backcheck ;
	10: sw_hst_gner_backcheck ;
	11: sw_hst_lner_backcheck ;
	12: sw_hst_xc_backcheck ;
	13: sw_hst_networkrail_backcheck ;
	sw_hst_virgin_backcheck ;
}

//Manual check

switch(FEAT_TRAINS, SELF, sw_hst_gfx_manual_check, livery_choice){
	1 : sw_hst_gfx_manual ;
	sw_hst_gfx_auto ;
}


//Lights deciders

switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_auto, current_year){
	gfx_hst_taillight ;
}


switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_manual, cargo_subtype){
	8..9 : gfx_hst_taillight_refurb ;
	gfx_hst_taillight ;
}


switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_manual_check, livery_choice){
	1 : sw_gfx_hst_taillight_decider_manual ;
	sw_gfx_hst_taillight_decider_auto ;
}

switch(FEAT_TRAINS, SELF, sw_hst_gfx_taillight_check, position_in_consist_from_end){ 0 : sw_gfx_hst_taillight_decider_manual_check ; }
switch(FEAT_TRAINS, SELF, sw_hst_gfx_headlight_check, position_in_consist){ 0 : gfx_hst_headlight ; sw_hst_gfx_taillight_check ; }



//Random buffers decider


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_hst_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_hst_gfx_manual_check ;
	2 : sw_hst_gfx_headlight_check ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_hst_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_INTERCITY_SWL) ;
	3 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	4 : string(STR_LIVERY_MIDLAND_MAINLINE_BLUE) ;
	5 : string(STR_LIVERY_EMT) ;
	6 : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	7 : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_EMPTY)) ;
	8 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	9 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	10: string(STR_LIVERY_GNER) ;
	11: string(STR_LIVERY_VTEC_LNER) ;
	12: string(STR_LIVERY_ARRIVA_XC) ;
	13: string(STR_LIVERY_NETWORK_RAIL) ;
	// 13: string(STR_LIVERY_GC_OG) ;
	// 15: string(STR_LIVERY_GC) ;
	// 16: string(STR_LIVERY_SCOTRAIL) ;
	// 17: string(STR_LIVERY_NXEC) ;
	// 18: string(STR_LIVERY_ESCS) ;
	// 19: string(STR_LIVERY_LNER) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_hst_refit_text_check, livery_choice){
	1 : sw_hst_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite, current_year){
	1971 .. 1982 : gfx_hst_brblue_purchase ;
	1983..1986 : gfx_hst_ic125_purchase ;
	1987..1995 : gfx_hst_icswallow_purchase ;
	//1996..2005 :  ;
	2005..2016 : gfx_hst_mml_purchase ;
	2017..4096 : gfx_hst_gwr_purchase ;
	gfx_hst_virgin_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite_colours, current_year){
	1971 .. 1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	1987..1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	//1996..2005 :  ;
	2005..2016 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2017..4096 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite_colours_2cc_check, colour_scheme_1){
	1 : sw_hst_purchase_sprite_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_hst_colours_auto, current_year){
	1971 .. 1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	1987..1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	//1996..2005 :  ;
	2005..2009 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2010..2016 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2017..4096 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_hst_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;   //BR Blue
	1 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;         //Intercity 125
	2 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;         //Intercity Swallow
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;    //MML
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;     //EMT
	6 : palette_2cc(COLOUR_PALE_GREEN, COLOUR_YELLOW) ; //First Fag
	7 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;  //First Barbie
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;    //First Great Western
	9 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;  //GWR
	10: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;     //GNER
	12: palette_2cc(COLOUR_PINK, COLOUR_RED) ;          //XC
	13: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;     //Network Rail
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;             //Virgin (both)
}


switch(FEAT_TRAINS, SELF, sw_hst_colours_manual_check, livery_choice){
	1 : sw_hst_colours_manual ;
	sw_hst_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_hst_colours_2cc_check, colour_scheme_1){
	1 : sw_hst_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Power switch



//Item

item(FEAT_TRAINS, item_hst, 43){
	property{
		name                           : string(STR_NAME_HST) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1975,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 6 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 240 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL] ;
		cargo_capacity                 : 10 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 125 mph ;
		power                          : 1680 kW ;
		weight                         : 70 ton ;
		tractive_effort_coefficient    : 0.1142857142857143 ;
		air_drag_coefficient           : 0.064 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		ai_special_flag                : AI_FLAG_PASSENGER ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_hst_sprite_stack ;
		purchase                : sw_hst_purchase_sprite ;
		sound_effect            : sw_sfx_hst ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_hst_colours_2cc_check ;
		purchase_colour_mapping : sw_hst_purchase_sprite_colours_2cc_check ;
		cargo_subtype_text      : sw_hst_refit_text_check ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 60 : 240) ;
		purchase_running_cost_factor : 240 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_hst, 43){
	property{
		name                           : string(STR_NAME_HST_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_52.pnml" 1
//Brush Peak

//Spritesets

spriteset(gfx_western_maroon_s		, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0,  0) }
spriteset(gfx_western_sand			, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0, 25) }
spriteset(gfx_western_green			, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0, 50) }
spriteset(gfx_western_blue_s		, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0, 75) }
spriteset(gfx_western_blue_l		, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0,100) }
spriteset(gfx_western_maroon_l		, "gfx/DIESEL_LOCO/class_52.png"){	template_8_4_2		(  0,125) }

spriteset(gfx_western_purchase_maroon	, "gfx/DIESEL_LOCO/class_52.png"){ template_purchase(89,  0) }
spriteset(gfx_western_purchase_blue		, "gfx/DIESEL_LOCO/class_52.png"){ template_purchase(89, 100) }

//Graphics switches


switch(FEAT_TRAINS, SELF, sw_western_auto, current_year){
	0..1969 : gfx_western_maroon_s ;
	gfx_western_blue_l ;
}

switch(FEAT_TRAINS, SELF, sw_western_manual, cargo_subtype){
	0 : gfx_western_maroon_s ;
	1 : gfx_western_maroon_l ;
	2 : gfx_western_sand ;
	3 : gfx_western_green ;
	4 : gfx_western_blue_s ;
	gfx_western_blue_l ;
}

switch(FEAT_TRAINS, SELF, sw_western_manual_check, livery_choice){
	1 : sw_western_manual ;
	sw_western_auto ;
}


switch(FEAT_TRAINS, SELF, sw_western_auto_2cc, current_year){
	0..1969 : gfx_western_blue_s ;
	gfx_western_blue_l ;
}

switch(FEAT_TRAINS, SELF, sw_western_manual_check_2cc, colour_scheme_1){
	1 : sw_western_manual_check ;
	sw_western_auto_2cc ;
}






//Refit text

switch(FEAT_TRAINS, SELF, sw_western_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_WARNING_SMALL, string(STR_LIVERY_MAROON)) ;
	1 : string(STR_LIVERY_WARNING_LARGE, string(STR_LIVERY_MAROON)) ;
	2 : string(STR_LIVERY_BR_SAND) ;
	3 : string(STR_LIVERY_BR_BRUNSWICK) ;
	4 : string(STR_LIVERY_WARNING_SMALL, string(STR_LIVERY_BRBLUE)) ;
	5 : string(STR_LIVERY_WARNING_LARGE, string(STR_LIVERY_BRBLUE)) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_western_refit_text_check, livery_choice){
	1 : sw_western_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_western_purchase, colour_scheme_1){
	1 : gfx_western_purchase_maroon ;
	gfx_western_purchase_blue ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_western_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_western, 52){
	property{
		name                           : string(STR_NAME_WESTERN) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1961,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 15 ;
		vehicle_life                   : 17 ;
		reliability_decay              : 19 ;
		cost_factor                    : 78 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 253 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 2700 hp ;
		weight                         : 110 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.27 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_western_manual_check_2cc ;
		colour_mapping                 : sw_western_colours_2cc_check ;
		purchase                       : sw_western_purchase ;
		purchase_colour_mapping        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
		sound_effect                   : sw_sfx_diesel_loco_heritage ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_western_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 50 : 253) ;
		purchase_running_cost_factor : 253 ;
	}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_western, 52){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_western, 52){
	property{
		name                           : string(STR_NAME_WESTERN_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_56.pnml" 1
//Class 56

spriteset(gfx_56_brblue,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,0)}
spriteset(gfx_56_brblue_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,0)}
spriteset(gfx_56_brlarge,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,25)}
spriteset(gfx_56_brlarge_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_56_railfreight,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,50)}
spriteset(gfx_56_railfreight_rev,		"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_56_ews,					"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,75)}
spriteset(gfx_56_ews_rev,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_56_colas,					"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,100)}
spriteset(gfx_56_colas_rev,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,100)}
spriteset(gfx_56_loadhaul,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,125)}
spriteset(gfx_56_loadhaul_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_56_fastline,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,150)}
spriteset(gfx_56_fastline_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,150)}
spriteset(gfx_56_dcrgrey,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,175)}
spriteset(gfx_56_dcrgrey_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,175)}
spriteset(gfx_56_dcrgreen,				"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(0,200)}
spriteset(gfx_56_dcrgreen_rev,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double_reverse(0,200)}

spriteset(gfx_56_lights_back,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(235,0)}
spriteset(gfx_56_lights_front,			"gfx/DIESEL_LOCO/class_56.png"){template_Mk2_double(235,25)}

spriteset(gfx_56_purch_brblue,			"gfx/DIESEL_LOCO/class_56.png"){template_purchase(178,150)}
spriteset(gfx_56_purch_brlarge,			"gfx/DIESEL_LOCO/class_56.png"){template_purchase(178,175)}
spriteset(gfx_56_purch_railfreight,		"gfx/DIESEL_LOCO/class_56.png"){template_purchase(178,50)}
spriteset(gfx_56_purch_ews,				"gfx/DIESEL_LOCO/class_56.png"){template_purchase(178,75)}
spriteset(gfx_56_purch_colas,			"gfx/DIESEL_LOCO/class_56.png"){template_purchase(178,100)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_brblue, vehicle_is_reversed){ 1 : gfx_56_brblue_rev ; gfx_56_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_brlarge, vehicle_is_reversed){ 1 : gfx_56_brlarge_rev ; gfx_56_brlarge ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_railfreight, vehicle_is_reversed){ 1 : gfx_56_railfreight_rev ; gfx_56_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_ews, vehicle_is_reversed){ 1 : gfx_56_ews_rev ; gfx_56_ews ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_colas, vehicle_is_reversed){ 1 : gfx_56_colas_rev ; gfx_56_colas ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_loadhaul, vehicle_is_reversed){ 1 : gfx_56_loadhaul_rev ; gfx_56_loadhaul ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_fastline, vehicle_is_reversed){ 1 : gfx_56_fastline_rev ; gfx_56_fastline ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_dcrgrey, vehicle_is_reversed){ 1 : gfx_56_dcrgrey_rev ; gfx_56_dcrgrey ; }
switch(FEAT_TRAINS, PARENT, sw_56_gfx_rev_check_dcrgreen, vehicle_is_reversed){ 1 : gfx_56_dcrgreen_rev ; gfx_56_dcrgreen ; }


//Liveries

switch(FEAT_TRAINS, SELF, sw_56_gfx_auto, current_year){
	1967..1981	: sw_56_gfx_rev_check_brblue ;
	1982..1986	: sw_56_gfx_rev_check_brlarge ;
	1987..1996	: sw_56_gfx_rev_check_railfreight ;
	1997..2008	: sw_56_gfx_rev_check_ews ;
	sw_56_gfx_rev_check_colas ;
}

switch(FEAT_TRAINS, SELF, sw_56_gfx_manual, cargo_subtype){
	0	: sw_56_gfx_rev_check_brblue ;
	3	: sw_56_gfx_rev_check_railfreight ;
	4	: sw_56_gfx_rev_check_ews ;
	5	: sw_56_gfx_rev_check_loadhaul ;
	6	: sw_56_gfx_rev_check_colas ;
	7	: sw_56_gfx_rev_check_fastline ;
	8	: sw_56_gfx_rev_check_dcrgrey ;
	9	: sw_56_gfx_rev_check_dcrgreen ;
	sw_56_gfx_rev_check_brlarge ;
}

switch(FEAT_TRAINS, SELF, sw_56_gfx_manual_check, livery_choice){
	1 : sw_56_gfx_manual ;
	sw_56_gfx_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_56_gfx_lights_back, position_in_consist_from_end){ 0 : gfx_56_lights_back ; }
switch(FEAT_TRAINS, SELF, sw_56_gfx_lights_front, position_in_consist){ 0 : gfx_56_lights_front ; }

switch(FEAT_TRAINS, SELF, sw_56_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_56_gfx_manual_check ;
	1 : sw_56_gfx_lights_back ;
	2 : sw_56_gfx_lights_front ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_56_purch_gfx, current_year){
	1967..1981	: gfx_56_purch_brblue ;
	1982..1986	: gfx_56_purch_brlarge ;
	1987..1996	: gfx_56_purch_railfreight ;
	1997..2008	: gfx_56_purch_ews ;
	gfx_56_purch_colas ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_56_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_BRBLUE) ;
	1	: string(STR_LIVERY_BRBLUE_LOGO) ;
	2	: string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	3	: string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	4	: string(STR_LIVERY_EWS) ;
	5	: string(STR_LIVERY_LOADHAUL) ;
	6	: string(STR_LIVERY_COLAS) ;
	7	: string(STR_LIVERY_FASTLINE) ;
	8	: string(STR_LIVERY_DCR_GREY) ;
	9	: string(STR_LIVERY_DCR_GREEN) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_56_refit_text_check, livery_choice){
	1 : sw_56_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_56_col_auto, current_year){
	1967..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_56_col_manual, cargo_subtype){
	2	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	4	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	5	: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	6	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	7	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	8	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	9	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_56_col_manual_check, livery_choice){
	1 : sw_56_col_manual ;
	sw_56_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_56_col_2cc_check, colour_scheme_1){
	1 : sw_56_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_grid, 56){
	property{
		name                           : string(STR_NAME_BREL56) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1976,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 30 ;
		reliability_decay              : 15 ;
		cost_factor                    : 82 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 240 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 2424 kW ;
		weight                         : 128 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.21 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_56_gfx_spr_stack ;
		colour_mapping                 : sw_56_col_2cc_check ;
		purchase                       : sw_56_purch_gfx ;
		purchase_colour_mapping        : sw_56_col_auto ;
		sound_effect                   : sw_sfx_diesel_loco_emd ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_56_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 70 : 240) ;
		purchase_running_cost_factor : 240 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_grid, 56){
	property{
		name                           : string(STR_NAME_BREL56_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_bone, 58){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_57.pnml" 1
//Class 57

spriteset(gfx_57_base,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,0)}
spriteset(gfx_57_base_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,0)}
spriteset(gfx_57_drs,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,25)}
spriteset(gfx_57_drs_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_57_fliner,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,50)}
spriteset(gfx_57_fliner_rev,		"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_57_atw,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,75)}
spriteset(gfx_57_atw_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_57_fag,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,100)}
spriteset(gfx_57_fag_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,100)}
spriteset(gfx_57_fgw,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,125)}
spriteset(gfx_57_fgw_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_57_gwr,				"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,150)}
spriteset(gfx_57_gwr_rev,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,150)}
spriteset(gfx_57_virgin,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(0,175)}
spriteset(gfx_57_virgin_rev,		"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double_reverse(0,175)}

spriteset(gfx_57_cab_old,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_single(235,50)}
spriteset(gfx_57_cab_new,			"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_single(235,75)}
spriteset(gfx_57_cab_dellner,		"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_single(324,75)}

spriteset(gfx_57_lights_old_back,	"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(235,0)}
spriteset(gfx_57_lights_old_front,	"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(235,25)}
spriteset(gfx_57_lights_new_back,	"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(235,100)}
spriteset(gfx_57_lights_new_front,	"gfx/DIESEL_LOCO/class_57.png"){template_Mk2_double(235,125)}

spriteset(gfx_57_purch_drs,			"gfx/DIESEL_LOCO/class_57.png"){template_purchase(178,150)}
spriteset(gfx_57_purch_fliner,		"gfx/DIESEL_LOCO/class_57.png"){template_purchase(178,175)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_57_rev_check_base, vehicle_is_reversed){ 1 : gfx_57_base_rev ; gfx_57_base ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_drs, vehicle_is_reversed){ 1 : gfx_57_drs_rev ; gfx_57_drs ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_fliner, vehicle_is_reversed){ 1 : gfx_57_fliner_rev ; gfx_57_fliner ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_atw, vehicle_is_reversed){ 1 : gfx_57_atw_rev ; gfx_57_atw ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_fag, vehicle_is_reversed){ 1 : gfx_57_fag_rev ; gfx_57_fag ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_fgw, vehicle_is_reversed){ 1 : gfx_57_fgw_rev ; gfx_57_fgw ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_gwr, vehicle_is_reversed){ 1 : gfx_57_gwr_rev ; gfx_57_gwr ; }
switch(FEAT_TRAINS, PARENT, sw_57_rev_check_virgin, vehicle_is_reversed){ 1 : gfx_57_virgin_rev ; gfx_57_virgin ; }




//Liveries

switch(FEAT_TRAINS, PARENT, sw_57_gfx_auto_1, most_common_cargo_type){
	PASS : sw_57_rev_check_fag ;
	sw_57_rev_check_fliner ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_auto_2, most_common_cargo_type){
	PASS : sw_57_rev_check_fgw ;
	sw_57_rev_check_drs ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_auto_3, most_common_cargo_type){
	PASS : sw_57_rev_check_gwr ;
	sw_57_rev_check_drs ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_auto, current_year){
	0..2005		: sw_57_gfx_auto_1 ;
	2006..2015	: sw_57_gfx_auto_2 ;
	sw_57_gfx_auto_3 ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_manual, cargo_subtype){
	0 : sw_57_rev_check_fliner ;
	1 : sw_57_rev_check_drs ;
	2 : sw_57_rev_check_base ;
	3 : sw_57_rev_check_fag ;
	4 : sw_57_rev_check_fgw ;
	6 : sw_57_rev_check_atw ;
	7 : sw_57_rev_check_virgin ;
	sw_57_rev_check_gwr ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_manual_check, livery_choice){
	1 : sw_57_gfx_manual ;
	sw_57_gfx_auto ;
}




//DBSO

switch(FEAT_TRAINS, PARENT, sw_57_gfx_dbso_manual, cargo_subtype){
	0 : sw_57_rev_check_fliner ;
	1 : sw_57_rev_check_drs ;
	2 : sw_57_rev_check_base ;
	3 : sw_57_rev_check_fag ;
	4 : sw_57_rev_check_fgw ;
	6 : sw_57_rev_check_atw ;
	7 : sw_57_rev_check_virgin ;
	sw_57_rev_check_gwr ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_dbso_manual_check, livery_choice){
	1 : sw_57_gfx_dbso_manual ;
	sw_57_gfx_auto ;
}


switch(FEAT_TRAINS, SELF, sw_57_gfx_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_57_gfx_dbso_manual_check ;
	sw_57_gfx_manual_check ;
}






//Sprite stack

//Cab style

random_switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_dellner){
	2 : gfx_57_cab_dellner ;
	1 : gfx_57_cab_new ;
}

random_switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_drs){
	2 : gfx_57_cab_new ;
	2 : gfx_57_cab_old ;
	1 : gfx_57_cab_dellner ;
}


switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_auto_1, most_common_cargo_type){
	PASS : gfx_57_cab_new ;
	gfx_57_cab_old ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_auto_2, most_common_cargo_type){
	PASS : gfx_57_cab_new ;
	sw_57_gfx_cab_dellner ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_auto, current_year){
	0..2005		: sw_57_gfx_cab_auto_1 ;
	sw_57_gfx_cab_auto_2 ;
}


switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_manual, cargo_subtype){
	0 : gfx_57_cab_old ;
	1 : sw_57_gfx_cab_drs ;
	7 : sw_57_gfx_cab_dellner ;
	gfx_57_cab_new ;
}


switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_manual_check, livery_choice){
	1 : sw_57_gfx_cab_manual ;
	sw_57_gfx_cab_auto ;
}




//DBSO

random_switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_dellner){
	2 : gfx_57_cab_dellner ;
	1 : gfx_57_cab_new ;
}

random_switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_drs){
	2 : gfx_57_cab_new ;
	2 : gfx_57_cab_old ;
	1 : gfx_57_cab_dellner ;
}


switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_auto_1, most_common_cargo_type){
	PASS : gfx_57_cab_new ;
	gfx_57_cab_old ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_auto_2, most_common_cargo_type){
	PASS : gfx_57_cab_new ;
	sw_57_gfx_cab_dbso_dellner ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_auto, current_year){
	0..2005		: sw_57_gfx_cab_dbso_auto_1 ;
	sw_57_gfx_cab_dbso_auto_2 ;
}


switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_manual, cargo_subtype){
	0 : gfx_57_cab_old ;
	1 : sw_57_gfx_cab_dbso_drs ;
	7 : sw_57_gfx_cab_dbso_dellner ;
	gfx_57_cab_new ;
}


switch(FEAT_TRAINS, PARENT, sw_57_gfx_cab_dbso_manual_check, livery_choice){
	1 : sw_57_gfx_cab_dbso_manual ;
	sw_57_gfx_cab_dbso_auto ;
}






switch(FEAT_TRAINS, SELF, sw_57_gfx_cab_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_57_gfx_cab_dbso_manual_check ;
	sw_57_gfx_cab_manual_check ;
}








//Lights

switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_old_back, position_in_consist_from_end){ 0 : gfx_57_lights_old_back ; }
switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_old_front, position_in_consist){ 0 : gfx_57_lights_old_front ; sw_57_gfx_lt_old_back ; }
switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_new_back, position_in_consist_from_end){ 0 : gfx_57_lights_new_back ; }
switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_new_front, position_in_consist){ 0 : gfx_57_lights_new_front ; sw_57_gfx_lt_new_back ; }

random_switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_drs){
	dependent : sw_57_gfx_cab_drs ;
	2 : sw_57_gfx_lt_new_front ;
	2 : sw_57_gfx_lt_old_front ;
	1 : sw_57_gfx_lt_new_front ;
}



switch(FEAT_TRAINS, PARENT, sw_57_gfx_lt_auto_1, most_common_cargo_type){
	PASS : sw_57_gfx_lt_new_front ;
	sw_57_gfx_lt_old_front ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_auto, current_year){
	0..2005		: sw_57_gfx_lt_auto_1 ;
	sw_57_gfx_lt_new_front ;
}


switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_manual, cargo_subtype){
	0 : sw_57_gfx_lt_old_front ;
	1 : sw_57_gfx_lt_drs ;
	sw_57_gfx_lt_new_front ;
}


switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_manual_check, livery_choice){
	1 : sw_57_gfx_lt_manual ;
	sw_57_gfx_lt_auto ;
}





//DBSO

random_switch(FEAT_TRAINS, PARENT, sw_57_gfx_lt_dbso_drs){
	dependent : sw_57_gfx_cab_dbso_drs ;
	2 : sw_57_gfx_lt_new_front ;
	2 : sw_57_gfx_lt_old_front ;
	1 : sw_57_gfx_lt_new_front ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_lt_dbso_manual, cargo_subtype){
	0 : sw_57_gfx_lt_old_front ;
	1 : sw_57_gfx_lt_dbso_drs ;
	sw_57_gfx_lt_new_front ;
}

switch(FEAT_TRAINS, PARENT, sw_57_gfx_lt_dbso_manual_check, livery_choice){
	1 : sw_57_gfx_lt_dbso_manual ;
	sw_57_gfx_lt_auto ;
}



switch(FEAT_TRAINS, SELF, sw_57_gfx_lt_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_57_gfx_lt_dbso_manual_check ;
	sw_57_gfx_lt_manual_check ;
}







switch(FEAT_TRAINS, SELF, sw_57_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_57_gfx_parent_check ;
	1 : sw_57_gfx_cab_parent_check ;
	2 : sw_57_gfx_lt_parent_check ;
}




switch(FEAT_TRAINS, SELF, sw_57_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_57_gfx_spr_stack ;
}

switch(FEAT_TRAINS, SELF, sw_57_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_57_gfx_dbso_check ;
}





//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_57_purch_gfx, current_year){
	0..2005		: gfx_57_purch_fliner ;
	gfx_57_purch_drs ;
}

switch(FEAT_TRAINS, SELF, sw_57_purch_col, current_year){
	0..2005		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_57_purch_col_2cc_check, colour_scheme_1){
	1 : sw_57_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_57_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_FREIGHTLINER) ;
	1 : string(STR_LIVERY_DRS_COMPASS) ;
	2 : string(STR_LIVERY_NETWORK_RAIL) ;
	3 : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	4 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	5 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6 : string(STR_LIVERY_ATW) ;
	7 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_57_refit_text_check, livery_choice){
	1 : sw_57_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_57_col_auto_2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_57_col_auto_3, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_auto, current_year){
	0..2005		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	2006..2015	: sw_57_col_auto_2 ;
	sw_57_col_auto_3 ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	7 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_manual_check, livery_choice){
	1 : sw_57_col_manual ;
	sw_57_col_auto ;
}



//DBSO

switch(FEAT_TRAINS, PARENT, sw_57_col_dbso_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	7 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_dbso_manual_check, livery_choice){
	1 : sw_57_col_dbso_manual ;
	sw_57_col_auto ;
}


switch(FEAT_TRAINS, SELF, sw_57_col_parent_check, ((count_veh_id(9025) > 0) | (count_veh_id(9035) > 0)) & ((position_in_consist == 0) | (position_in_consist_from_end == 0))){
	1 : sw_57_col_dbso_manual_check ;
	sw_57_col_manual_check ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_2cc_check, colour_scheme_1){
	1 : sw_57_col_parent_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



switch(FEAT_TRAINS, SELF, sw_57_col_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_57_col_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_57_col_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_57_col_dbso_check ;
}


//Item



item(FEAT_TRAINS, item_ge4, 57){
	property{
		name                           : string(STR_NAME_BRUSH_57) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1998,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 30 ;
		reliability_decay              : 14 ;
		cost_factor                    : 57 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 236 ;
		speed                          : 95 mph ;
		track_type                     : RAIL ;
		power                          : 2050 kW ;
		weight                         : 114 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.23421052631578947368421052631579 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					47;
	}
	graphics{
		default                        : sw_57_gfx_dvt_check ;
		colour_mapping                 : sw_57_col_dvt_check ;
		purchase                       : sw_57_purch_gfx ;
		purchase_colour_mapping        : sw_57_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_diesel_loco_emd ;
		create_effect                  : sw_37_vfx_dbso_check ;
		cargo_subtype_text             : sw_57_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 65 : 236) ;
		purchase_running_cost_factor : 236 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_ge4, 57){
	property{
		name                           : string(STR_NAME_BRUSH_57_ALT) ;
	}
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_ge4, 57){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_58.pnml" 1
//Class 58

spriteset(gfx_bone_rfreight_red,		"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double(0,0)}
spriteset(gfx_bone_rfreight_red_rev,	"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double_reverse(0,0)}
spriteset(gfx_bone_rfreight_grey,		"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double(0,25)}
spriteset(gfx_bone_rfreight_grey_rev,	"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_bone_ews,					"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double(0,50)}
spriteset(gfx_bone_ews_rev,				"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double_reverse(0,50)}

spriteset(gfx_bone_taillights,			"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double(0,75)}
spriteset(gfx_bone_headlights,			"gfx/DIESEL_LOCO/class_58.png"){template_Mk2_double(0,100)}

spriteset(gfx_bone_purch_rfreight_red,	"gfx/DIESEL_LOCO/class_58.png"){template_purchase(178,0)}
spriteset(gfx_bone_purch_rfreight_grey,	"gfx/DIESEL_LOCO/class_58.png"){template_purchase(178,25)}
spriteset(gfx_bone_purch_ews,			"gfx/DIESEL_LOCO/class_58.png"){template_purchase(178,50)}



//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_bone_rev_check_rfreight_red, vehicle_is_reversed){ 1 : gfx_bone_rfreight_red_rev ; gfx_bone_rfreight_red ; }
switch(FEAT_TRAINS, PARENT, sw_bone_rev_check_rfreight_grey, vehicle_is_reversed){ 1 : gfx_bone_rfreight_grey_rev ; gfx_bone_rfreight_grey ; }
switch(FEAT_TRAINS, PARENT, sw_bone_rev_check_ews, vehicle_is_reversed){ 1 : gfx_bone_ews_rev ; gfx_bone_ews ; }


switch(FEAT_TRAINS, SELF, sw_bone_gfx_auto, current_year){
	0..1987		: sw_bone_rev_check_rfreight_red ;
	1988..1996	: sw_bone_rev_check_rfreight_grey ;
	sw_bone_rev_check_ews ;
}

switch(FEAT_TRAINS, SELF, sw_bone_gfx_manual, cargo_subtype){
	0 : sw_bone_rev_check_rfreight_red ;
	1 : sw_bone_rev_check_rfreight_grey ;
	sw_bone_rev_check_ews ;
}


switch(FEAT_TRAINS, SELF, sw_bone_gfx_manual_check, livery_choice){
	1 : sw_bone_gfx_manual ;
	sw_bone_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_bone_gfx_check_headlights, position_in_consist){ 0 : gfx_bone_headlights ; }
switch(FEAT_TRAINS, SELF, sw_bone_gfx_check_taillights, position_in_consist_from_end){ 0 : gfx_bone_taillights ; }

switch(FEAT_TRAINS, SELF, sw_bone_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	 0 : sw_bone_gfx_manual_check ;
	 1 : sw_bone_gfx_check_headlights ;
	 2 : sw_bone_gfx_check_taillights ;
}



//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_bone_purch_gfx, current_year){
	0..1987		: gfx_bone_purch_rfreight_red ;
	1988..1996	: gfx_bone_purch_rfreight_grey ;
	gfx_bone_purch_ews ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_bone_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_RAILFREIGHT2) ;
	 1 : string(STR_LIVERY_RAILFREIGHT) ;
	 2 : string(STR_LIVERY_EWS) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_bone_refit_text_check, livery_choice){
	1 : sw_bone_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_bone_col_auto, current_year){
	0..1987		: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1988..1996	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_bone_col_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_bone_col_manual_check, livery_choice){
	1 : sw_bone_col_manual ;
	sw_bone_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_bone_col_2cc_check, colour_scheme_1){
	1 : sw_bone_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_bone, 58){
	property{
		name                           : string(STR_NAME_BREL58) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1983,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 25 ;
		vehicle_life                   : 38 ;
		reliability_decay              : 13 ;
		cost_factor                    : 78 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 252 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 2460 kW ;
		weight                         : 130 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.23 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_bone_spr_stack ;
		colour_mapping                 : sw_bone_col_2cc_check ;
		purchase                       : sw_bone_purch_gfx ;
		purchase_colour_mapping        : sw_bone_col_auto ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_bone_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 70 : 252) ;
		purchase_running_cost_factor : 252 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_bone, 58){
	property{
		name                           : string(STR_NAME_BREL58_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_bone, 58){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/shed.pnml" 1
//SHED

spriteset(gfx_shed_base,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,25	)}
spriteset(gfx_shed_base_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,25	)}

spriteset(gfx_shed_ews,						"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,100)}
spriteset(gfx_shed_ews_rev,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,100)}
spriteset(gfx_shed_db,						"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,125)}
spriteset(gfx_shed_db_rev,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,125)}
spriteset(gfx_shed_db_green,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,150)}
spriteset(gfx_shed_db_green_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,150)}
spriteset(gfx_shed_freightliner,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,175)}
spriteset(gfx_shed_freightliner_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,175)}
spriteset(gfx_shed_powerhaul,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,200)}
spriteset(gfx_shed_powerhaul_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,200)}
spriteset(gfx_shed_one,						"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,225)}
spriteset(gfx_shed_one_rev,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,225)}
spriteset(gfx_shed_freightliner_orange,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,250)}
spriteset(gfx_shed_freightliner_orange_rev,	"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,250)}
spriteset(gfx_shed_first_gbrf,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,275)}
spriteset(gfx_shed_first_gbrf_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,275)}
spriteset(gfx_shed_gbrf,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,300)}
spriteset(gfx_shed_gbrf_rev,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,300)}
spriteset(gfx_shed_gbrf_cemex,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,325)}
spriteset(gfx_shed_gbrf_cemex_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,325)}
spriteset(gfx_shed_gbrf_biffa,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,350)}
spriteset(gfx_shed_gbrf_biffa_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,350)}
spriteset(gfx_shed_gbrf_large,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,375)}
spriteset(gfx_shed_gbrf_large_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,375)}
spriteset(gfx_shed_gbrf_sectors,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,400)}
spriteset(gfx_shed_gbrf_sectors_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,400)}
spriteset(gfx_shed_gbrf_star,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,425)}
spriteset(gfx_shed_gbrf_star_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,425)}
spriteset(gfx_shed_fastline,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,450)}
spriteset(gfx_shed_fastline_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,450)}
spriteset(gfx_shed_colas,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,475)}
spriteset(gfx_shed_colas_rev,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,475)}
spriteset(gfx_shed_drs,						"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(0	,500)}
spriteset(gfx_shed_drs_rev,					"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(0	,500)}

spriteset(gfx_shed_taillights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,0	)}
spriteset(gfx_shed_headlights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,25	)}

spriteset(gfx_shed_purch_ews,		"gfx/DIESEL_LOCO/class_66.png"){ template_purchase(648,50)}
spriteset(gfx_shed_purch_db,		"gfx/DIESEL_LOCO/class_66.png"){ template_purchase(648,75)}


//Graphics switches

//Reversal

switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_base,						vehicle_is_reversed	){ 1 : gfx_shed_base_rev	; gfx_shed_base	;}

switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_ews,						vehicle_is_reversed	){ 1 : gfx_shed_ews_rev	; gfx_shed_ews	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_db,						vehicle_is_reversed	){ 1 : gfx_shed_db_rev	; gfx_shed_db	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_db_green,					vehicle_is_reversed	){ 1 : gfx_shed_db_green_rev	; gfx_shed_db_green	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_freightliner,				vehicle_is_reversed	){ 1 : gfx_shed_freightliner_rev	; gfx_shed_freightliner	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_powerhaul,				vehicle_is_reversed	){ 1 : gfx_shed_powerhaul_rev	; gfx_shed_powerhaul	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_one,						vehicle_is_reversed	){ 1 : gfx_shed_one_rev	; gfx_shed_one	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_freightliner_orange,		vehicle_is_reversed	){ 1 : gfx_shed_freightliner_orange_rev	; gfx_shed_freightliner_orange	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_first_gbrf,				vehicle_is_reversed	){ 1 : gfx_shed_first_gbrf_rev	; gfx_shed_first_gbrf	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf,						vehicle_is_reversed	){ 1 : gfx_shed_gbrf_rev	; gfx_shed_gbrf	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf_cemex,				vehicle_is_reversed	){ 1 : gfx_shed_gbrf_cemex_rev	; gfx_shed_gbrf_cemex	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf_biffa,				vehicle_is_reversed	){ 1 : gfx_shed_gbrf_biffa_rev	; gfx_shed_gbrf_biffa	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf_large,				vehicle_is_reversed	){ 1 : gfx_shed_gbrf_large_rev	; gfx_shed_gbrf_large	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf_sectors,				vehicle_is_reversed	){ 1 : gfx_shed_gbrf_sectors_rev	; gfx_shed_gbrf_sectors	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_gbrf_star,				vehicle_is_reversed	){ 1 : gfx_shed_gbrf_star_rev	; gfx_shed_gbrf_star	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_fastline,					vehicle_is_reversed	){ 1 : gfx_shed_fastline_rev	; gfx_shed_fastline	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_colas,					vehicle_is_reversed	){ 1 : gfx_shed_colas_rev	; gfx_shed_colas	;}
switch(FEAT_TRAINS,	PARENT,	sw_shed_rev_check_drs,						vehicle_is_reversed	){ 1 : gfx_shed_drs_rev	; gfx_shed_drs	;}


//Auto

switch(FEAT_TRAINS, SELF, sw_shed_gfx_auto, current_year){
	2008..4096 : sw_shed_rev_check_db ;
	sw_shed_rev_check_ews ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_shed_gfx_manual, cargo_subtype){
	1	: sw_shed_rev_check_db;
	2	: sw_shed_rev_check_db_green;
	3	: sw_shed_rev_check_freightliner;
	4	: sw_shed_rev_check_one;
	5	: sw_shed_rev_check_powerhaul;
	6	: sw_shed_rev_check_freightliner_orange;
	7	: sw_shed_rev_check_first_gbrf;
	8	: sw_shed_rev_check_gbrf;
	9	: sw_shed_rev_check_gbrf_cemex;
	10	: sw_shed_rev_check_gbrf_biffa;
	11	: sw_shed_rev_check_gbrf_large;
	12	: sw_shed_rev_check_gbrf_sectors;
	13	: sw_shed_rev_check_gbrf_star;
	14	: sw_shed_rev_check_base;
	15	: sw_shed_rev_check_fastline;
	16	: sw_shed_rev_check_colas;
	17	: sw_shed_rev_check_drs;
	18	: sw_shed_rev_check_base;
	sw_shed_rev_check_ews ;
}


switch(FEAT_TRAINS, SELF, sw_shed_gfx_manual_check, livery_choice){
	1 : sw_shed_gfx_manual ;
	sw_shed_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_shed_gfx_check_headlight, position_in_consist){ 0 : gfx_shed_headlights ; }
switch(FEAT_TRAINS, SELF, sw_shed_gfx_check_taillight, position_in_consist_from_end){ 0 : gfx_shed_taillights ; }

switch(FEAT_TRAINS, SELF, sw_shed_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_shed_gfx_manual_check ;
	1 : sw_shed_gfx_check_headlight ;
	2 : sw_shed_gfx_check_taillight ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_shed_purch_gfx,	current_year){
	2008..4096 : gfx_shed_purch_db ;
	gfx_shed_purch_ews ;
}

switch(FEAT_TRAINS, SELF, sw_shed_purch_col, current_year){
	2008..4096 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_shed_purch_col_2cc_check, colour_scheme_1){
	1 : sw_shed_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_shed_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_EWS) ;
	1	: string(STR_LIVERY_DBCARGO) ;
	2	: string(STR_LIVERY_DBCARGO_GREEN) ;
	3	: string(STR_LIVERY_FREIGHTLINER) ;
	4	: string(STR_LIVERY_FREIGHTLINER_PINK) ;
	5	: string(STR_LIVERY_FREIGHTLINER_POWERHAUL) ;
	6	: string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	7	: string(STR_LIVERY_FIRST_GBRF) ;
	8	: string(STR_LIVERY_GBRF) ;
	9	: string(STR_LIVERY_GBRF_CEMEX) ;
	10	: string(STR_LIVERY_GBRF_BIFFA) ;
	11	: string(STR_LIVERY_GBRF_LARGELOGO) ;
	12	: string(STR_LIVERY_GBRF_SECTORS) ;
	13	: string(STR_LIVERY_GBRF_EVENINGSTAR) ;
	14	: string(STR_LIVERY_GBRF_GREY) ;
	15	: string(STR_LIVERY_FASTLINE) ;
	16	: string(STR_LIVERY_COLAS) ;
	17	: string(STR_LIVERY_DRS) ;
	18	: string(STR_LIVER_COMP_COLOURS);
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_shed_refit_text_check, livery_choice){
	1 : sw_shed_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colours
switch(FEAT_TRAINS, SELF, sw_shed_col_auto, current_year){
	2008..4096 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_shed_col_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	2	: palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	3	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	4	: palette_2cc(COLOUR_PINK, COLOUR_WHITE) ;
	5	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	6	: palette_2cc(COLOUR_ORANGE, COLOUR_GREY) ;
	7	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	10	: palette_2cc(COLOUR_RED, COLOUR_ORANGE) ;
	11	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	12	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	13	: palette_2cc(COLOUR_YELLOW, COLOUR_DARK_GREEN) ;
	14	: palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	15	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	16	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	17	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	18	: palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_shed_col_manual_check, livery_choice){
	1 : sw_shed_col_manual ;
	sw_shed_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_shed_col_2cc_check, colour_scheme_1){
	1 : sw_shed_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item



item(FEAT_TRAINS, item_shed, 66){
	property{
		name                           : string(STR_NAME_SHED) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1998,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 10 ;
		cost_factor                    : 82 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 246 ;
		speed                          : 75 mph ;
		track_type                     : RAIL ;
		power                          : 2460 kW ;
		weight                         : 129 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.32 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_shed_gfx_spr_stack ;
		colour_mapping                 : sw_shed_col_2cc_check ;
		purchase                       : sw_shed_purch_gfx ;
		purchase_colour_mapping        : sw_shed_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_extension_66_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_shed_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 50 : 246) ;
		purchase_running_cost_factor   : 246 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_shed, 66){
	property{
		name                           : string(STR_NAME_SHED_ALT) ;
	}
}
}








//Class 59


spriteset(gfx_59_yeoman,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,100)}
spriteset(gfx_59_yeoman_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(470,100)}
spriteset(gfx_59_gbrf,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,125)}
spriteset(gfx_59_gbrf_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(470,125)}
spriteset(gfx_59_aggr,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,150)}
spriteset(gfx_59_aggr_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(470,150)}
spriteset(gfx_59_arc,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,175)}
spriteset(gfx_59_arc_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(470,175)}
spriteset(gfx_59_mendip,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,200)}
spriteset(gfx_59_mendip_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(470,200)}

spriteset(gfx_59_taillights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,25	)}
spriteset(gfx_59_headlights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(470,50	)}

spriteset(gfx_59_purch,				"gfx/DIESEL_LOCO/class_66.png"){ template_purchase(648,100)}
spriteset(gfx_59_purch_gbrf,		"gfx/DIESEL_LOCO/class_66.png"){ template_purchase(648,125)}


//Graphics switches

//Reversal

switch(FEAT_TRAINS,	PARENT,	sw_59_rev_check_yeoman,			vehicle_is_reversed	){ 1 : gfx_59_yeoman_rev	; gfx_59_yeoman	;}
switch(FEAT_TRAINS,	PARENT,	sw_59_rev_check_gbrf,			vehicle_is_reversed	){ 1 : gfx_59_gbrf_rev	; gfx_59_gbrf	;}
switch(FEAT_TRAINS,	PARENT,	sw_59_rev_check_aggr,			vehicle_is_reversed	){ 1 : gfx_59_aggr_rev	; gfx_59_aggr	;}
switch(FEAT_TRAINS,	PARENT,	sw_59_rev_check_arc,			vehicle_is_reversed	){ 1 : gfx_59_arc_rev	; gfx_59_arc	;}
switch(FEAT_TRAINS,	PARENT,	sw_59_rev_check_mendip,			vehicle_is_reversed	){ 1 : gfx_59_mendip_rev	; gfx_59_mendip	;}


//Auto

switch(FEAT_TRAINS, SELF, sw_59_gfx_auto, current_year){
	sw_59_rev_check_yeoman ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_59_gfx_manual, cargo_subtype){
	1	: sw_59_rev_check_aggr;
	2	: sw_59_rev_check_arc;
	3	: sw_59_rev_check_mendip;
	4	: sw_shed_rev_check_db;
	5	: sw_shed_rev_check_freightliner_orange;
	6	: sw_59_rev_check_gbrf;
	7	: sw_59_rev_check_arc;
	sw_59_rev_check_yeoman ;
}


switch(FEAT_TRAINS, SELF, sw_59_gfx_manual_check, livery_choice){
	1 : sw_59_gfx_manual ;
	sw_59_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_59_gfx_check_headlight_2, position_in_consist){ 0 : gfx_59_headlights ; }
switch(FEAT_TRAINS, SELF, sw_59_gfx_check_taillight_2, position_in_consist_from_end){ 0 : gfx_59_taillights ; }

switch(FEAT_TRAINS, SELF, sw_59_gfx_check_headlight, cargo_subtype){ 4..5 : sw_shed_gfx_check_headlight ; sw_59_gfx_check_headlight_2 ; }
switch(FEAT_TRAINS, SELF, sw_59_gfx_check_taillight, cargo_subtype){ 4..5 : sw_shed_gfx_check_taillight ; sw_59_gfx_check_taillight_2 ; }

switch(FEAT_TRAINS, SELF, sw_59_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_59_gfx_manual_check ;
	1 : sw_59_gfx_check_headlight ;
	2 : sw_59_gfx_check_taillight ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_59_purch_gfx,	current_year){
	gfx_59_purch ;
}

switch(FEAT_TRAINS, SELF, sw_59_purch_col, current_year){
	palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_59_purch_col_2cc_check, colour_scheme_1){
	1 : sw_59_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}






//Colours
switch(FEAT_TRAINS, SELF, sw_59_col_auto, current_year){
	palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
}


switch(FEAT_TRAINS, SELF, sw_59_col_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_GREEN, COLOUR_DARK_BLUE);
	2	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW);
	3	: palette_2cc(COLOUR_GREY, COLOUR_GREEN);
	4	: palette_2cc(COLOUR_RED, COLOUR_GREY);
	5	: palette_2cc(COLOUR_ORANGE, COLOUR_GREY);
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE);
	7	: palette_2cc(company_colour1, company_colour2);
	palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_59_col_manual_check, livery_choice){
	1 : sw_59_col_manual ;
	sw_59_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_59_col_2cc_check, colour_scheme_1){
	1 : sw_59_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_59_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_YEOMAN);
	1	: string(STR_LIVERY_AGGREGATES);
	2	: string(STR_LIVERY_ARC);
	3	: string(STR_LIVERY_MENDIP);
	4	: string(STR_LIVERY_DBCARGO);
	5	: string(STR_LIVERY_FREIGHTLINER_ORANGE);
	6	: string(STR_LIVERY_GBRF);
	7	: string(STR_LIVER_COMP_COLOURS);
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_59_refit_text_check, livery_choice){
	1 : sw_59_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item


item(FEAT_TRAINS, item_59, 59){
	property{
		name                           : string(STR_NAME_SHED_YEOMAN) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1986,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 20 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 4 ;
		cost_factor                    : 100 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 230 ;
		speed                          : 60 mph ;
		track_type                     : RAIL ;
		power                          : 2460 kW ;
		weight                         : 121 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.45 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_59_gfx_spr_stack ;
		colour_mapping                 : sw_59_col_2cc_check ;
		purchase                       : sw_59_purch_gfx ;
		purchase_colour_mapping        : sw_59_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_extension_66_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_59_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 35 : 230) ;
		purchase_running_cost_factor   : 230 ;
	}
}










if (alt_names == 1){
item (FEAT_TRAINS, item_59, 59){
	property{
		name                           : string(STR_NAME_SHED_YEOMAN_ALT) ;
	}
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_59, 59){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}























//Class 67


spriteset(gfx_67_ews,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,100)}
spriteset(gfx_67_ews_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(235,100)}
spriteset(gfx_67_db,				"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,125)}
spriteset(gfx_67_db_rev,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(235,125)}
spriteset(gfx_67_arriva,			"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,150)}
spriteset(gfx_67_arriva_rev,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_rev_2		(235,150)}

spriteset(gfx_67_taillights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,50	)}
spriteset(gfx_67_headlights,		"gfx/DIESEL_LOCO/class_66.png"){ template_8_8_2			(235,75	)}

spriteset(gfx_67_purch,				"gfx/DIESEL_LOCO/class_66.png"){ template_purchase		(648,150)}
spriteset(gfx_67_purch_db,			"gfx/DIESEL_LOCO/class_66.png"){ template_purchase		(648,175)}


//Graphics siwtches

//Reversal

switch(FEAT_TRAINS,	PARENT,	sw_67_rev_check_ews,			vehicle_is_reversed	){ 1 : gfx_67_ews_rev	; gfx_67_ews	;}
switch(FEAT_TRAINS,	PARENT,	sw_67_rev_check_db,				vehicle_is_reversed	){ 1 : gfx_67_db_rev	; gfx_67_db		;}
switch(FEAT_TRAINS,	PARENT,	sw_67_rev_check_arriva,				vehicle_is_reversed	){ 1 : gfx_67_arriva_rev	; gfx_67_arriva		;}


//Auto

switch(FEAT_TRAINS, SELF, sw_67_gfx_auto, current_year){
	2008..4096 : sw_67_rev_check_db ;
	sw_67_rev_check_ews ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_67_gfx_manual, cargo_subtype){
	1	: sw_67_rev_check_db ;
	2	: sw_67_rev_check_arriva;
	/*3	: string(Pullman);
	4	: string(Colas);
	5	: string(Chiltern);
	6	: sw_67_rev_check_arriva;
	7	: string(TfW);*/
	sw_67_rev_check_ews ;
}


switch(FEAT_TRAINS, SELF, sw_67_gfx_manual_check, livery_choice){
	1 : sw_67_gfx_manual ;
	sw_67_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_67_gfx_check_headlight, position_in_consist){ 0 : gfx_67_headlights ; }
switch(FEAT_TRAINS, SELF, sw_67_gfx_check_taillight, position_in_consist_from_end){ 0 : gfx_67_taillights ; }

switch(FEAT_TRAINS, SELF, sw_67_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_67_gfx_manual_check ;
	1 : sw_67_gfx_check_headlight ;
	2 : sw_67_gfx_check_taillight ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_67_purch_gfx,	current_year){
	2008..4096 : gfx_67_purch_db ;
	gfx_67_purch ;
}

switch(FEAT_TRAINS, SELF, sw_67_purch_col, current_year){
	2008..4096 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_67_purch_col_2cc_check, colour_scheme_1){
	1 : sw_67_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}






//Colours
switch(FEAT_TRAINS, SELF, sw_67_col_auto, current_year){
	2008..4096 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_67_col_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	/*3	: string(Pullman);
	4	: string(Colas);
	5	: string(Chiltern);
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	7	: string(TfW);*/
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_67_col_manual_check, livery_choice){
	1 : sw_67_col_manual ;
	sw_67_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_67_col_2cc_check, colour_scheme_1){
	1 : sw_67_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_67_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_EWS);
	1	: string(STR_LIVERY_DBCARGO);
	2	: string(STR_LIVERY_DBSCHENKER);
	/*3	: string(Pullman);
	4	: string(Colas);
	5	: string(Chiltern);
	6	: string(Arriva);
	7	: string(TfW);*/
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_67_refit_text_check, livery_choice){
	1 : sw_67_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item


switch(FEAT_TRAINS, SELF, sw_67_gfx_dbso, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_sprite_stack ; sw_67_gfx_spr_stack ; }
switch(FEAT_TRAINS, SELF, sw_67_col_dbso, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_colours_2cc_check ; sw_67_col_2cc_check ; }
switch(FEAT_TRAINS, SELF, sw_67_vfx_dbso, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 0 : vfx_diesel_default ; }



item(FEAT_TRAINS, item_67, 67){
	property{
		name                           : string(STR_NAME_SKIP) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1999,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 23 ;
		reliability_decay              : 16 ;
		cost_factor                    : 110 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 245 ;
		speed                          : 125 mph ;
		track_type                     : RAIL ;
		power                          : 2386 kW ;
		weight                         : 90 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.16 ;
		air_drag_coefficient           : 0.08 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_67_gfx_dbso ;
		colour_mapping                 : sw_67_col_dbso ;
		purchase                       : sw_67_purch_gfx ;
		purchase_colour_mapping        : sw_67_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_extension_66_check ;
		create_effect                  : sw_67_vfx_dbso ;
		cargo_subtype_text             : sw_67_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 55 : 245) ;
		purchase_running_cost_factor   : 245 ;
	}
}










if (alt_names == 1){
item (FEAT_TRAINS, item_67, 67){
	property{
		name                           : string(STR_NAME_SKIP_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_67, 67){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


















































# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_69.pnml" 1
//Class 69

spriteset(gfx_69_gbrf,			"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2		(0,0)}
spriteset(gfx_69_gbrf_rev,		"gfx/DIESEL_LOCO/class_69.png"){template_8_8_rev_2	(0,0)}
spriteset(gfx_69_brlarge,		"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2		(0,25)}
spriteset(gfx_69_brlarge_rev,	"gfx/DIESEL_LOCO/class_69.png"){template_8_8_rev_2	(0,25)}
spriteset(gfx_69_rtc,			"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2		(0,50)}
spriteset(gfx_69_rtc_rev,		"gfx/DIESEL_LOCO/class_69.png"){template_8_8_rev_2	(0,50)}
spriteset(gfx_69_brgreen,		"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2		(0,75)}
spriteset(gfx_69_brgreen_rev,	"gfx/DIESEL_LOCO/class_69.png"){template_8_8_rev_2	(0,75)}
spriteset(gfx_69_brblue,		"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2		(0,100)}
spriteset(gfx_69_brblue_rev,	"gfx/DIESEL_LOCO/class_69.png"){template_8_8_rev_2	(0,100)}

spriteset(gfx_69_lights_back,	"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2(235,0)}
spriteset(gfx_69_lights_front,	"gfx/DIESEL_LOCO/class_69.png"){template_8_8_2(235,25)}

spriteset(gfx_69_purch_gbrf,	"gfx/DIESEL_LOCO/class_69.png"){template_purchase(178,50)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_69_gfx_rev_check_gbrf, vehicle_is_reversed){ 1 : gfx_69_gbrf_rev ; gfx_69_gbrf ; }
switch(FEAT_TRAINS, PARENT, sw_69_gfx_rev_check_brblue, vehicle_is_reversed){ 1 : gfx_69_brblue_rev ; gfx_69_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_69_gfx_rev_check_brlarge, vehicle_is_reversed){ 1 : gfx_69_brlarge_rev ; gfx_69_brlarge ; }
switch(FEAT_TRAINS, PARENT, sw_69_gfx_rev_check_rtc, vehicle_is_reversed){ 1 : gfx_69_rtc_rev ; gfx_69_rtc ; }
switch(FEAT_TRAINS, PARENT, sw_69_gfx_rev_check_brgreen, vehicle_is_reversed){ 1 : gfx_69_brgreen_rev ; gfx_69_brgreen ; }


//Liveries

switch(FEAT_TRAINS, SELF, sw_69_gfx_manual, cargo_subtype){
	0	: sw_69_gfx_rev_check_gbrf ;
	1	: sw_69_gfx_rev_check_brblue ;
	3	: sw_69_gfx_rev_check_brgreen ;
	4	: sw_69_gfx_rev_check_rtc ;
	sw_69_gfx_rev_check_brlarge ;
}

switch(FEAT_TRAINS, SELF, sw_69_gfx_manual_check, livery_choice){
	1 : sw_69_gfx_manual ;
	sw_69_gfx_rev_check_gbrf ;
}



//Lights

switch(FEAT_TRAINS, SELF, sw_69_gfx_lights_back, position_in_consist_from_end){ 0 : gfx_69_lights_back ; }
switch(FEAT_TRAINS, SELF, sw_69_gfx_lights_front, position_in_consist){ 0 : gfx_69_lights_front ; }

switch(FEAT_TRAINS, SELF, sw_69_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_69_gfx_manual_check ;
	1 : sw_69_gfx_lights_back ;
	2 : sw_69_gfx_lights_front ;
}




//Purchase sprite


//Refit text

switch(FEAT_TRAINS, SELF, sw_69_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_GBRF) ;
	1	: string(STR_LIVERY_BRBLUE) ;
	2	: string(STR_LIVERY_BRBLUE_LOGO) ;
	3	: string(STR_LIVERY_BRGREEN_YELLOW) ;
	4	: string(STR_LIVERY_RTC) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_69_refit_text_check, livery_choice){
	1 : sw_69_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_69_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	3	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_69_col_manual_check, livery_choice){
	1 : sw_69_col_manual ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_69_col_2cc_check, colour_scheme_1){
	1 : sw_69_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



switch(FEAT_TRAINS, SELF, sw_69_purch_col_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_funnynumber, 69){
	property{
		name                           : string(STR_NAME_BREL69) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2020,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 20 ;
		reliability_decay              : 7 ;
		cost_factor                    : 72 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 222 ;
		speed                          : 80 mph ;
		track_type                     : RAIL ;
		power                          : 2390 kW ;
		weight                         : 128 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.21 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
        variant_group:					56;
	}
	graphics{
		default                        : sw_69_gfx_spr_stack ;
		colour_mapping                 : sw_69_col_2cc_check ;
		purchase                       : gfx_69_purch_gbrf ;
		purchase_colour_mapping        : sw_69_purch_col_2cc_check ;
		sound_effect                   : sw_sfx_extension_66_check ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_69_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 40 : 222) ;
		purchase_running_cost_factor : 222 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_funnynumber, 69){
	property{
		name                           : string(STR_NAME_BREL69_ALT) ;
	}
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_funnynumber, 69){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/class_73.pnml" 1
//Class 73

spriteset(gfx_73_base,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,0)}
spriteset(gfx_73_base_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,0)}
spriteset(gfx_73_brblue,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,25)}
spriteset(gfx_73_brblue_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,25)}
spriteset(gfx_73_brgreen,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,50)}
spriteset(gfx_73_brgreen_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,50)}
spriteset(gfx_73_brlogo,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,75)}
spriteset(gfx_73_brlogo_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,75)}
spriteset(gfx_73_dutch,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,100)}
spriteset(gfx_73_dutch_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,100)}
spriteset(gfx_73_nse,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,125)}
spriteset(gfx_73_nse_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,125)}
spriteset(gfx_73_intercity,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,150)}
spriteset(gfx_73_intercity_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,150)}
spriteset(gfx_73_ews,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,175)}
spriteset(gfx_73_ews_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,175)}
spriteset(gfx_73_gbrf,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,200)}
spriteset(gfx_73_gbrf_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,200)}
spriteset(gfx_73_calsleep,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,225)}
spriteset(gfx_73_calsleep_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,225)}

spriteset(gfx_73_swt,				"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,250)}
spriteset(gfx_73_swt_rev,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,250)}
spriteset(gfx_73_sw_refurb,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,275)}
spriteset(gfx_73_sw_refurb_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,275)}
spriteset(gfx_73_southern,			"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,300)}
spriteset(gfx_73_southern_rev,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,300)}
spriteset(gfx_73_bournemouth,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(0,325)}
spriteset(gfx_73_bournemouth_rev,	"gfx/DIESEL_LOCO/class_73.png"){template_7_8_rev_2(0,325)}


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_base, vehicle_is_reversed){ 1 : gfx_73_base_rev ; gfx_73_base ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_brblue, vehicle_is_reversed){ 1 : gfx_73_brblue_rev ; gfx_73_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_brgreen, vehicle_is_reversed){ 1 : gfx_73_brgreen_rev ; gfx_73_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_brlogo, vehicle_is_reversed){ 1 : gfx_73_brlogo_rev ; gfx_73_brlogo ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_dutch, vehicle_is_reversed){ 1 : gfx_73_dutch_rev ; gfx_73_dutch ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_nse, vehicle_is_reversed){ 1 : gfx_73_nse_rev ; gfx_73_nse ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_intercity, vehicle_is_reversed){ 1 : gfx_73_intercity_rev ; gfx_73_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_ews, vehicle_is_reversed){ 1 : gfx_73_ews_rev ; gfx_73_ews ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_gbrf, vehicle_is_reversed){ 1 : gfx_73_gbrf_rev ; gfx_73_gbrf ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_calsleep, vehicle_is_reversed){ 1 : gfx_73_calsleep_rev ; gfx_73_calsleep ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_swt, vehicle_is_reversed){ 1 : gfx_73_swt_rev ; gfx_73_swt ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_sw_refurb, vehicle_is_reversed){ 1 : gfx_73_sw_refurb_rev ; gfx_73_sw_refurb ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_southern, vehicle_is_reversed){ 1 : gfx_73_southern_rev ; gfx_73_southern ; }
switch(FEAT_TRAINS, PARENT, sw_73_gfx_rev_check_bournemouth, vehicle_is_reversed){ 1 : gfx_73_bournemouth_rev ; gfx_73_bournemouth ; }


//Liveries

random_switch(FEAT_TRAINS, SELF, sw_73_gfx_auto_br){
	2 : sw_73_gfx_rev_check_brblue ;
	1 : sw_73_gfx_rev_check_base ;
}

switch(FEAT_TRAINS, PARENT, sw_73_gfx_auto_sector, most_common_cargo_type){
	PASS : sw_73_gfx_rev_check_nse ;
	MAIL : sw_73_gfx_rev_check_brlogo ;
	sw_73_gfx_rev_check_dutch ;
}

switch(FEAT_TRAINS, PARENT, sw_73_gfx_auto_private2, most_common_cargo_type){
	PASS : sw_73_gfx_rev_check_calsleep ;
	sw_73_gfx_rev_check_gbrf ;
}

switch(FEAT_TRAINS, SELF, sw_73_gfx_auto, current_year){
	0..1967		: sw_73_gfx_rev_check_brgreen ;
	1968..1981	: sw_73_gfx_auto_br ;
	1982..1986	: sw_73_gfx_rev_check_brlogo ;
	1987..1996	: sw_73_gfx_auto_sector ;
	1997..2008	: sw_73_gfx_rev_check_ews ;
	sw_73_gfx_auto_private2 ;
}

switch(FEAT_TRAINS, SELF, sw_73_gfx_manual, cargo_subtype){
	0	: sw_73_gfx_rev_check_brgreen ;
	2	: sw_73_gfx_rev_check_brlogo ;
	3	: sw_73_gfx_rev_check_dutch ;
	4	: sw_73_gfx_rev_check_nse ;
	5	: sw_73_gfx_rev_check_intercity ;
	6	: sw_73_gfx_rev_check_ews ;
	7	: sw_73_gfx_rev_check_gbrf ;
	8	: sw_73_gfx_rev_check_calsleep ;
	9	: sw_73_gfx_rev_check_swt ;
	10	: sw_73_gfx_rev_check_sw_refurb ;
	11	: sw_73_gfx_rev_check_southern ;
	12	: sw_73_gfx_rev_check_bournemouth ;
	sw_73_gfx_auto_br ;
}

switch(FEAT_TRAINS, SELF, sw_73_gfx_manual_check, livery_choice){
	1 : sw_73_gfx_manual ;
	sw_73_gfx_auto ;
}


//Lights

spriteset(gfx_73_lights_old_front,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(250,0)}
spriteset(gfx_73_lights_old_back,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(250,25)}
spriteset(gfx_73_lights_new_front,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(250,200)}
spriteset(gfx_73_lights_new_back,		"gfx/DIESEL_LOCO/class_73.png"){template_7_8_2(250,225)}

switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_old_back, position_in_consist_from_end){ 0 : gfx_73_lights_old_back ; }
switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_old_front, position_in_consist){ 0 : gfx_73_lights_old_front ; sw_73_gfx_lights_old_back ;}
switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_new_back, position_in_consist_from_end){ 0 : gfx_73_lights_new_back ; }
switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_new_front, position_in_consist){ 0 : gfx_73_lights_new_front ; sw_73_gfx_lights_new_back ;}

switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_auto, current_year){
	0..2008	: sw_73_gfx_lights_old_front ;
	sw_73_gfx_lights_new_front ;
}

switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_manual, cargo_subtype){
	7..8 : sw_73_gfx_lights_new_front ;
	sw_73_gfx_lights_old_front ;
}

switch(FEAT_TRAINS, SELF, sw_73_gfx_lights_manual_check, livery_choice){
	1 : sw_73_gfx_lights_manual ;
	sw_73_gfx_lights_auto ;
}


switch(FEAT_TRAINS, SELF, sw_73_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_73_gfx_manual_check ;
	1 : sw_73_gfx_lights_manual_check ;
}



// Refit text

switch(FEAT_TRAINS, SELF, sw_73_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	3 : string(STR_LIVERY_CIVIL_ENGINEERS) ;
	4 : string(STR_LIVERY_NSE) ;
	5 : string(STR_LIVERY_INTERCITY) ;
	6 : string(STR_LIVERY_EWS) ;
	7 : string(STR_LIVERY_GBRF) ;
	8 : string(STR_LIVERY_CAL_SLEEPER) ;
	9 : string(STR_LIVERY_SWT) ;
	10: string(STR_LIVERY_SWT_REFURB) ;
	11: string(STR_LIVERY_SOUTHERN) ;
	12: string(STR_LIVERY_BOURNEMOUTH) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_73_refit_text_check, livery_choice){
	1 : sw_73_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprites

spriteset(gfx_73_purch_base,		"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,50)}
spriteset(gfx_73_purch_brgreen,		"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,75)}
spriteset(gfx_73_purch_brlogo,		"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,100)}
spriteset(gfx_73_purch_nse,			"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,125)}
spriteset(gfx_73_purch_ews,			"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,150)}
spriteset(gfx_73_purch_gbrf,		"gfx/DIESEL_LOCO/class_73.png"){template_purchase(178,175)}

switch(FEAT_TRAINS, SELF, sw_73_purch_gfx, current_year){
	0..1967		: gfx_73_purch_brgreen ;
	1968..1981	: gfx_73_purch_base ;
	1982..1986	: gfx_73_purch_brlogo ;
	1987..1996	: gfx_73_purch_nse ;
	1997..2008	: gfx_73_purch_ews ;
	gfx_73_purch_gbrf ;
}

switch(FEAT_TRAINS, SELF, sw_73_purch_col, current_year){
	0..1967		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	1968..1981	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1982..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_73_purch_col_2cc_check, colour_scheme_1){
	1 : sw_73_purch_col ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_73_col_auto_sector, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	MAIL : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_73_col_auto_private2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_73_col_auto, current_year){
	0..1967		: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	1968..1986	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1996	: sw_73_col_auto_sector ;
	1997..2008	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	sw_73_col_auto_private2 ;
}

switch(FEAT_TRAINS, SELF, sw_73_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	5	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	6	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	7	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	10	: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
	11	: palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_73_col_manual_check, livery_choice){
	1 : sw_73_col_manual ;
	sw_73_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_73_col_2cc_check, colour_scheme_1){
	1 : sw_73_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Sounds

switch(FEAT_TRAINS, SELF, sw_73_sound_diesel, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/voyager_idle.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/voyager_run.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_8.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_8.wav") ;
}
switch(FEAT_TRAINS, SELF, sw_73_sound_diesel_check, (livery_choice == 1) & (cargo_subtype == 8)){
	1 : sw_73_sound_diesel ;
	sw_sfx_diesel_loco_small ;
}

switch(FEAT_TRAINS, SELF, sw_73_sound_check, (tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR"))){
	1 : sw_sfx_electric_loco_old ;
	sw_73_sound_diesel_check ;
}



//Item


switch(FEAT_TRAINS, SELF, sw_73_effect_check, (tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR"))){
	1 : vfx_3rd ;
	vfx_diesel_default ;
}
switch(FEAT_TRAINS, SELF, sw_73_effect_2_check, (tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR"))){
	1 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	EFFECT_SPAWN_MODEL_DIESEL ;
}



switch(FEAT_TRAINS, SELF, sw_73_power_diesel, (livery_choice == 1) & (cargo_subtype == 8)){
	1 : 1600 ;
	600 ;
}

switch(FEAT_TRAINS, SELF, sw_73_power_check, (tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR"))){
	1 : 1600 ;
	sw_73_power_diesel ;
}


item(FEAT_TRAINS, item_ee73, 73){
	property{
		name                           : string(STR_NAME_EE73) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1962,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 40 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 17 ;
		cost_factor                    : 38 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 155 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1200 kW ;
		weight                         : 77 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.25 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 7 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_73_gfx_spr_stack ;
		colour_mapping                 : sw_73_col_2cc_check ;
		purchase                       : sw_73_purch_gfx ;
		purchase_colour_mapping        : sw_73_purch_col_2cc_check ;
		sound_effect                   : sw_73_sound_check ;
		create_effect                  : sw_73_effect_check ;
		cargo_subtype_text             : sw_73_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 30 : 155) ;
		effect_spawn_model_and_powered : sw_73_effect_2_check ;
		power                          : sw_73_power_check ;
		purchase_power				   : 1200 ;
		purchase_running_cost_factor : 155 ;
		additional_text				: string(STR_ADD_INFO_73) ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_ee73, 73){
	property{
		name                           : string(STR_NAME_EE73_ALT) ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_ee73, 73){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/GE_Powerhaul.pnml" 1
//GE Powerhaul

//Templates


//Sritesets

spriteset (gfx_powerhaul_fliner				, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_2			(0	,25	)}
spriteset (gfx_powerhaul_fliner_reverse		, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_rev_2		(0	,25	)}
spriteset (gfx_powerhaul_colas				, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_2			(0	,0	)}
spriteset (gfx_powerhaul_colas_reverse		, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_rev_2		(0	,0	)}
spriteset (gfx_powerhaul_2cc				, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_2			(0	,50	)}
spriteset (gfx_powerhaul_2cc_reverse		, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_rev_2		(0	,50	)}

spriteset (gfx_powerhaul_headlights			, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_2			(0	,100)}
spriteset (gfx_powerhaul_taillights			, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_8_8_2			(0	,125)}

spriteset (gfx_powerhaul_fliner_purchase	, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_purchase		(178,25	)}
spriteset (gfx_powerhaul_colas_purchase		, "gfx/DIESEL_LOCO/class_70_2.png"	){	template_purchase		(178,0	)}


//Graphics

switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_fliner_reverse_check, vehicle_is_reversed){ 1 : gfx_powerhaul_fliner_reverse  ; gfx_powerhaul_fliner ; }
switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_colas_reverse_check, vehicle_is_reversed){ 1 : gfx_powerhaul_colas_reverse ; gfx_powerhaul_colas ; }
switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_2cc_reverse_check, vehicle_is_reversed){ 1 : gfx_powerhaul_2cc_reverse ; gfx_powerhaul_2cc ; }

//Automatic

switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_auto_decider, most_common_cargo_type){
	GOOD : sw_powerhaul_gfx_fliner_reverse_check ;
	FOOD : sw_powerhaul_gfx_fliner_reverse_check ;
	STEL : sw_powerhaul_gfx_fliner_reverse_check ;
	MAIL : sw_powerhaul_gfx_fliner_reverse_check ;
	sw_powerhaul_gfx_colas_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_auto, current_year){
	2008..2014 : sw_powerhaul_gfx_fliner_reverse_check ;
	sw_powerhaul_gfx_auto_decider ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_manual, cargo_subtype){
	0 : sw_powerhaul_gfx_fliner_reverse_check ;
	2 : sw_powerhaul_gfx_2cc_reverse_check ;
	sw_powerhaul_gfx_colas_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_manual_check, livery_choice){
	1 : sw_powerhaul_gfx_manual ;
	sw_powerhaul_gfx_auto ;
}


//Spritestacking

switch(FEAT_TRAINS, SELF, sw_powerhaul_headlights, position_in_consist){ 0 : gfx_powerhaul_headlights;}
switch(FEAT_TRAINS, SELF, sw_powerhaul_taillights, position_in_consist_from_end){ 0 : gfx_powerhaul_taillights;}

switch(FEAT_TRAINS, SELF, sw_powerhaul_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_powerhaul_gfx_manual_check ;
	1 : sw_powerhaul_headlights ;
	2 : sw_powerhaul_taillights ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_powerhaul_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_FREIGHTLINER_POWERHAUL) ;
	1 : string(STR_LIVERY_COLAS) ;
	2 : string(STR_LIVER_COMP_COLOURS);
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_refit_text_check, livery_choice){
	1 : sw_powerhaul_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase, current_year){
	2008..2014 : gfx_powerhaul_fliner_purchase ;
	gfx_powerhaul_colas_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase_colours, current_year){
	2008..2014 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase_2cc_check, colour_scheme_1){
	1 : sw_powerhaul_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_powerhaul_colours_auto_decider, most_common_cargo_type){
	GOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	FOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	STEL : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	MAIL : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_auto, current_year){
	2008..2014 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	sw_powerhaul_colours_auto_decider ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	2 : palette_2cc(company_colour1, company_colour2) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_manual_check, livery_choice){
	1 : sw_powerhaul_colours_manual ;
	sw_powerhaul_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_2cc_check, colour_scheme_1){
	1 : sw_powerhaul_colours_manual_check ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}


//item
item(FEAT_TRAINS, item_powerhaul, 70){
	property{
		name                           : string(STR_NAME_POWERHAUL) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2009,11,28) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 30 ;
		reliability_decay              : 5 ;
		cost_factor                    : 75 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 255 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [MAIL,GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 3690 hp ;
		weight                         : 129 ton ;
		tractive_effort_coefficient    : 0.4217054263565891 ;
		air_drag_coefficient           : 0.1066666666666667 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_powerhaul_spritestack ;
		purchase                : sw_powerhaul_purchase ;
		sound_effect            : sw_sfx_diesel_loco_modern ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_powerhaul_colours_2cc_check ;
		purchase_colour_mapping : sw_powerhaul_purchase_2cc_check ;
		cargo_subtype_text      : sw_powerhaul_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 64 : 255) ;
		purchase_running_cost_factor : 255 ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_powerhaul, 70){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_powerhaul, 70){
	property{
		name                           : string(STR_NAME_POWERHAUL_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DIESEL_LOCO/UKLight.pnml" 1
//UK Light

//Spritesets

spriteset (gfx_uklight_drs					, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,0	)}
spriteset (gfx_uklight_drs_reverse			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,0	)}
spriteset (gfx_uklight_drs_plain			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,25	)}
spriteset (gfx_uklight_drs_plain_reverse	, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,25	)}
spriteset (gfx_uklight_tpe					, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,50	)}
spriteset (gfx_uklight_tpe_reverse			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,50	)}
spriteset (gfx_uklight_scot					, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,75	)}
spriteset (gfx_uklight_scot_reverse			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,75	)}
spriteset (gfx_uklight_chr					, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,100)}
spriteset (gfx_uklight_chr_reverse			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,100)}
spriteset (gfx_uklight_nts					, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_2		(0	,125)}
spriteset (gfx_uklight_nts_reverse			, "gfx/DIESEL_LOCO/class_68_2.png"){template_8_8_rev_2	(0	,125)}
                                   
spriteset (gfx_uklight_headlight   , "gfx/FIXTURES/uklight_headlight.png"){template_8_8_2(0,0)}
spriteset (gfx_uklight_taillight   , "gfx/FIXTURES/uklight_headlight.png"){template_8_8_2(0,25)}

spriteset (gfx_uklight_drs_purchase, "gfx/DIESEL_LOCO/class_68_2.png"){template_purchase(178, 0)}

//Graphics

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_drs_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_drs_reverse ; gfx_uklight_drs ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_drs_plain_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_drs_plain_reverse ; gfx_uklight_drs_plain ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_tpe_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_tpe_reverse ; gfx_uklight_tpe ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_scot_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_scot_reverse ; gfx_uklight_scot ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_chr_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_chr_reverse ; gfx_uklight_chr ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_nts_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_nts_reverse ; gfx_uklight_nts ; }


//Automatic

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_dvt_check, count_veh_id(9035)){
	0 : sw_uklight_gfx_scot_reverse_check ;
	sw_uklight_gfx_chr_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check, most_common_cargo_type){
	PASS : sw_uklight_gfx_passenger_dvt_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check_2, most_common_cargo_type){
	PASS : sw_uklight_gfx_tpe_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_auto, current_year){
	2013 : sw_uklight_gfx_drs_reverse_check ;
	2014..2018 : sw_uklight_gfx_passenger_check ;
	sw_uklight_gfx_passenger_check_2 ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_manual, cargo_subtype){
	1 : sw_uklight_gfx_drs_plain_reverse_check ;
	2 : sw_uklight_gfx_tpe_reverse_check ;
	3 : sw_uklight_gfx_scot_reverse_check ;
	4 : sw_uklight_gfx_chr_reverse_check ;
	5 : sw_uklight_gfx_nts_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_uklight_gfx_manual_check, livery_choice){
	1 : sw_uklight_gfx_manual ;
	sw_uklight_gfx_auto ;
}


//Spritestacking

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_headlights, position_in_consist){
	0 : gfx_uklight_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_taillights, position_in_consist_from_end){
	0 : gfx_uklight_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_uklight_gfx_manual_check ;
	1 : sw_uklight_gfx_headlights ;
	2 : sw_uklight_gfx_taillights ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_uklight_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_DRS_COMPASS) ;
	1 : string(STR_LIVERY_DRS) ;
	2 : string(STR_LIVERY_TPE_NEW) ;
	3 : string(STR_LIVERY_SCOTRAIL) ;
	4 : string(STR_LIVERY_CHILTERN) ;
	5 : string(STR_LIVERY_DRS_NTS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_refit_text_check, livery_choice){
	1 : sw_uklight_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_dvt_check, count_veh_id(9035)){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_check, most_common_cargo_type){
	PASS : sw_uklight_colours_passenger_dvt_check ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_check_2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_auto, current_year){
	2013 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2014..2018 : sw_uklight_colours_passenger_check ;
	sw_uklight_colours_passenger_check_2 ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	4 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
}


switch(FEAT_TRAINS, SELF, sw_uklight_colours_manual_check, livery_choice){
	1 : sw_uklight_colours_manual ;
	sw_uklight_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_uklight_colours_2cc_check, colour_scheme_1){
	1 : sw_uklight_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//DBSO checks

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_uklight_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_uklight_gfx_dbso_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_uklight_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_uklight_colours_dbso_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_vfx_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_diesel_default ;
}


//Mark 3 override

//Graphics

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx, current_year){
	2013..2018 : gfx_mk3_chiltern ;    //First Barbie
	sw_mk3_gfx_auto ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_uklight_mk3_override_gfx ;
	2 : sw_mk3_gfx_window_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx_check, livery_choice){
	1 : sw_mk3_sprite_stack ;
	sw_uklight_mk3_override_gfx_spritestack ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_colours, current_year){
	2014..2018 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_colour_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_uklight_mk3_override_colours ;
}



//Item

item (FEAT_TRAINS, item_uklight, 68){
	property{
		name                           : string(STR_NAME_UKLIGHT) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2014, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 7 ;
		cost_factor                    : 42 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 240 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [MAIL, GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 100 mph ;
		power                          : 3800 hp ;
		weight                         : 85 ton ;
		tractive_effort_coefficient    : 0.3729411764705882 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_uklight_gfx_dvt_check ;
		purchase                : gfx_uklight_drs_purchase ;
		colour_mapping          : sw_uklight_colours_dvt_check ;
		purchase_colour_mapping : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
		sound_effect            : sw_sfx_diesel_loco_modern ;
		create_effect           : sw_uklight_vfx_dbso_check ;
		cargo_subtype_text      : sw_uklight_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 60 : 240) ;
		purchase_running_cost_factor : 240 ;
	}
	livery_override(9030){
		default                 : sw_uklight_mk3_override_gfx_check ;
		colour_mapping          : sw_uklight_mk3_override_colour_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_uklight, 68){
	property{
		name                           : string(STR_NAME_UKLIGHT_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3

# 1 "src/ELECTRIC_LOCO/BR_Class87.pnml" 1
//Class 87

//Spritesets

spriteset(gfx_br87_brblue              , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_2(0,0)}
spriteset(gfx_br87_brblue_reverse      , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_rev_2(0,0)}
spriteset(gfx_br87_intercity           , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_2(0,25)}
spriteset(gfx_br87_intercity_reverse   , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_rev_2(0,25)}
spriteset(gfx_br87_virgin              , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_2(0,50)}
spriteset(gfx_br87_virgin_reverse      , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_rev_2(0,50)}
spriteset(gfx_br87_calsleeper          , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_2(0,75)}
spriteset(gfx_br87_calsleeper_reverse  , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_rev_2(0,75)}
spriteset(gfx_br87_gbrf                , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_2(0,100)}
spriteset(gfx_br87_gbrf_reverse        , "gfx/ELECTRIC_LOCO/class_87.png"){template_8_8_rev_2(0,100)}

spriteset(gfx_br87_brblue_purchase     , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,0)}
spriteset(gfx_br87_intercity_purchase  , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,25)}
spriteset(gfx_br87_virgin_purchase     , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,50)}
spriteset(gfx_br87_calsleeper_purchase , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,75)}

spriteset(gfx_br87_headlight     , "gfx/FIXTURES/class_87_headlights.png"){template_8_8_2(0,0)}
spriteset(gfx_br87_taillight     , "gfx/FIXTURES/class_87_headlights.png"){template_8_8_2(0,25)}

//Switches

//Graphics

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_brblue_reverse_check     , vehicle_is_reversed){ 1 : gfx_br87_brblue_reverse     ; gfx_br87_brblue ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_intercity_reverse_check  , vehicle_is_reversed){ 1 : gfx_br87_intercity_reverse  ; gfx_br87_intercity ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_virgin_reverse_check     , vehicle_is_reversed){ 1 : gfx_br87_virgin_reverse     ; gfx_br87_virgin ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_calsleeper_reverse_check , vehicle_is_reversed){ 1 : gfx_br87_calsleeper_reverse ; gfx_br87_calsleeper ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_gbrf_reverse_check       , vehicle_is_reversed){ 1 : gfx_br87_gbrf_reverse       ; gfx_br87_gbrf ;}

//Automatic liveries

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_privatised, most_common_cargo_type){
	PASS : sw_br87_gfx_calsleeper_reverse_check ;
	sw_br87_gfx_gbrf_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_gfx_auto, current_year){
	1971 .. 1982 : sw_br87_gfx_brblue_reverse_check ;
	1983 .. 1995 : sw_br87_gfx_intercity_reverse_check ;
	2005 .. 4096 : sw_br87_gfx_privatised ;
	sw_br87_gfx_virgin_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_br87_gfx_manual, cargo_subtype){
	0 : sw_br87_gfx_brblue_reverse_check ;
	1 : sw_br87_gfx_intercity_reverse_check ;
	2 : sw_br87_gfx_virgin_reverse_check ;
	3 : sw_br87_gfx_calsleeper_reverse_check ;
	4 : sw_br87_gfx_gbrf_reverse_check ;
	sw_br87_gfx_virgin_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_br87_gfx_manual_check, livery_choice){
	1 : sw_br87_gfx_manual ;
	sw_br87_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_br87_taillight_decider, position_in_consist_from_end){
	0 : gfx_br87_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_br87_headlight_decider, position_in_consist){
	0 : gfx_br87_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_br87_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_br87_gfx_manual_check ;
	1 : sw_br87_headlight_decider ;
	2 : sw_br87_taillight_decider ;
}


//Cargo refit text

switch(FEAT_TRAINS, SELF, sw_br87_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	3 : string(STR_LIVERY_CAL_SLEEPER) ;
	4 : string(STR_LIVERY_GBRF) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_br87_refit_text_checker, livery_choice){
	1 : sw_br87_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_br87_purchase, current_year){
	1971 .. 1982     : gfx_br87_brblue_purchase ;  
	1983 .. 1995  : gfx_br87_intercity_purchase ;  
	2005 .. 4096 : gfx_br87_calsleeper_purchase ;
	gfx_br87_virgin_purchase ;
}

//Colour mapping


random_switch(FEAT_TRAINS, SELF, sw_br87_sectorised_colours, TRIGGER_VEHICLE_SERVICE){ 3 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}

switch(FEAT_TRAINS, SELF, sw_br87_sectorised_colours_dbso_check, count_veh_id(9025) > 0){
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	sw_br87_sectorised_colours ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_privatised_colours, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_auto, current_year){
	1971 .. 1982     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995  : sw_br87_sectorised_colours_dbso_check ;
	2005 .. 4096 : sw_br87_privatised_colours ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_manual_check, livery_choice){
	1 : sw_br87_colours_manual ;
	sw_br87_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_2cc_check, colour_scheme_1){
	1 : sw_br87_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Mark 3 override

//Graphics

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx, current_year){
	2005..2014 : gfx_mk3_first_scotrail ;    //First Barbie
	sw_mk3_gfx_auto ;
}


//Windows deciders

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows, position_in_vehid_chain){
	2 : gfx_mk3_windows_buffet ;
	gfx_mk3_windows_sleeper ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows_rev, position_in_vehid_chain_from_end){
	2 : gfx_mk3_windows_buffet_rev ;
	gfx_mk3_windows_sleeper ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_mk3_override_windows_rev_check, vehicle_is_reversed){
	1 : sw_br87_mk3_override_windows_rev ;
	sw_br87_mk3_override_windows ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows_year_check, current_year){
	2005..2014 : sw_br87_mk3_override_windows_rev_check ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_gfx_window_reverse_check ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_br87_mk3_override_gfx ;
	2 : sw_br87_mk3_override_windows_year_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx_check, livery_choice){
	1 : sw_mk3_sprite_stack ;
	sw_br87_mk3_override_gfx_spritestack ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_colours, current_year){
	2005..2014 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_colour_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_br87_mk3_override_colours ;
}


//DBSO & DVT checks

//GFX
switch(FEAT_TRAINS, SELF, sw_br87_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_br87_sprite_stack ;
}

switch(FEAT_TRAINS, SELF, sw_br87_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_br87_gfx_dbso_check ;
}

//Colours

switch(FEAT_TRAINS, SELF, sw_br87_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_br87_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_br87_colours_dbso_check ;
}

//VFX
switch(FEAT_TRAINS, SELF, sw_br87_vfx_dbso_dvt_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_ohle ;
}


//Item


item (FEAT_TRAINS, item_br87, 87){
	property{
		name                           : string(STR_NAME_87) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1972,1,1) ;
		model_life                     : 28 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 7 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 250 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : ELRL ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 110 mph ;
		power                          : 3700 kW ;
		weight                         : 83 ton ;
		tractive_effort_coefficient    : 0.3108433734939759 ;
		air_drag_coefficient           : 0.0727272727272727 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_br87_gfx_dvt_check ;
		purchase                : sw_br87_purchase ;
		sound_effect            : sw_sfx_electric_loco_old ;
		create_effect           : sw_br87_vfx_dbso_dvt_check ;
		colour_mapping          : sw_br87_colours_dvt_check ;
		purchase_colour_mapping : sw_br87_colours_auto ;
		cargo_subtype_text      : sw_br87_refit_text_checker ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 65 : 250) ;
		purchase_running_cost_factor : 250 ;
	}
	livery_override(9030){
		default                 : sw_br87_mk3_override_gfx_check ;
		colour_mapping          : sw_br87_mk3_override_colour_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_br87, 87){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_br87, 87){
	property{
		name                           : string(STR_NAME_87_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/ELECTRIC_LOCO/EE_AL6.pnml" 1
//Class 87

//Spritesets

spriteset(gfx_al6_brblue				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,  0)}
spriteset(gfx_al6_brblue_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,  0)}
spriteset(gfx_al6_acblue				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0, 25)}
spriteset(gfx_al6_acblue_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0, 25)}
spriteset(gfx_al6_intercity				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0, 50)}
spriteset(gfx_al6_intercity_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0, 50)}
spriteset(gfx_al6_railfreight			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0, 75)}
spriteset(gfx_al6_railfreight_rev		, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0, 75)}
spriteset(gfx_al6_virgin				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,100)}
spriteset(gfx_al6_virgin_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,100)}
spriteset(gfx_al6_freightliner			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,125)}
spriteset(gfx_al6_freightliner_rev		, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,125)}
spriteset(gfx_al6_colasrail				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,150)}
spriteset(gfx_al6_colasrail_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,150)}
spriteset(gfx_al6_railexpress			, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,175)}
spriteset(gfx_al6_railexpress_rev		, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,175)}
spriteset(gfx_al6_ews					, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_2(  0,200)}
spriteset(gfx_al6_ews_rev				, "gfx/ELECTRIC_LOCO/class_86.png"){template_8_8_rev_2(  0,200)}

spriteset(gfx_al6_brblue_purchase		, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178,  0)}
spriteset(gfx_al6_acblue_purchase		, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 25)}
spriteset(gfx_al6_intercity_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 50)}
spriteset(gfx_al6_railfreight_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 75)}
spriteset(gfx_al6_virgin_purchase		, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178,100)}
spriteset(gfx_al6_freightliner_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178,125)}
spriteset(gfx_al6_colasrail_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178,150)}

spriteset(gfx_al6_headlight				, "gfx/FIXTURES/class_86_headlights.png"){template_8_8_2(0,0)}
spriteset(gfx_al6_taillight				, "gfx/FIXTURES/class_86_headlights.png"){template_8_8_2(0,25)}


//Switches

//Graphics

switch(FEAT_TRAINS, PARENT, sw_al6_gfx_brblue_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_brblue_rev 		; gfx_al6_brblue ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_acblue_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_acblue_rev 		; gfx_al6_acblue ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_intercity_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_intercity_rev 	; gfx_al6_intercity ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_railfreight_reverse_check , vehicle_is_reversed){	1 : gfx_al6_railfreight_rev ; gfx_al6_railfreight ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_virgin_reverse_check , vehicle_is_reversed){			1 : gfx_al6_virgin_rev 		; gfx_al6_virgin ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_freightliner_reverse_check , vehicle_is_reversed){	1 : gfx_al6_freightliner_rev; gfx_al6_freightliner ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_colasrail_reverse_check , vehicle_is_reversed){		1 : gfx_al6_colasrail_rev 	; gfx_al6_colasrail ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_railexpress_reverse_check , vehicle_is_reversed){	1 : gfx_al6_railexpress_rev ; gfx_al6_railexpress ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_ews_reverse_check , vehicle_is_reversed){			1 : gfx_al6_ews_rev 		; gfx_al6_ews ;}


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto_sectorised, most_common_cargo_type){
	PASS : sw_al6_gfx_intercity_reverse_check ;
	MAIL : sw_al6_gfx_railexpress_reverse_check ;
	sw_al6_gfx_railfreight_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto_private1, most_common_cargo_type){
	PASS : sw_al6_gfx_virgin_reverse_check ;
	sw_al6_gfx_freightliner_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto_private2, most_common_cargo_type){
	GOOD : sw_al6_gfx_freightliner_reverse_check ;
	FOOD : sw_al6_gfx_freightliner_reverse_check ;
	sw_al6_gfx_colasrail_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto, current_year){
	0..1967		: sw_al6_gfx_acblue_reverse_check ;
	1968..1982	: sw_al6_gfx_brblue_reverse_check ;
	1983..1995	: sw_al6_gfx_auto_sectorised ;
	1996..2005  : sw_al6_gfx_auto_private1 ;
	2006..2011  : sw_al6_gfx_freightliner_reverse_check ;
	2012..4096  : sw_al6_gfx_auto_private2 ;
	sw_al6_gfx_brblue_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual, cargo_subtype){
	0 : sw_al6_gfx_acblue_reverse_check ;
	1 : sw_al6_gfx_brblue_reverse_check ;
	2 : sw_al6_gfx_intercity_reverse_check ;
	3 : sw_al6_gfx_railfreight_reverse_check ;
	4 : sw_al6_gfx_railexpress_reverse_check ;
	5 : sw_al6_gfx_virgin_reverse_check ;
	6 : sw_al6_gfx_freightliner_reverse_check ;
	7 : sw_al6_gfx_colasrail_reverse_check ;
	8 : sw_al6_gfx_ews_reverse_check ;
	sw_al6_gfx_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual_check, livery_choice){
	1 : sw_al6_gfx_manual ;
	sw_al6_gfx_auto ;
}

//Lights sprite stacking

switch(FEAT_TRAINS, SELF, sw_al6_taillights, position_in_consist_from_end){
	0 : gfx_al6_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_al6_headlights, position_in_consist){
	0 : gfx_al6_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_al6_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_al6_gfx_manual_check ;
	1 : sw_al6_taillights ;
	2 : sw_al6_headlights ;
}


//Graphics DBSO/DVT checks

switch(FEAT_TRAINS, SELF, sw_al6_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_al6_sprite_stack ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_al6_gfx_dbso_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_al6_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRELECTRIC) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_GENERAL))) ;
	4 : string(STR_LIVERY_RAIL_EXPRESS) ;
	5 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	6 : string(STR_LIVERY_FREIGHTLINER) ;
	7 : string(STR_LIVERY_COLAS) ;
	8 : string(STR_LIVERY_EWS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_al6_refit_text_check, livery_choice){
	1 : sw_al6_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping

//Automatic


switch(FEAT_TRAINS, SELF, sw_al6_colours_auto_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	MAIL : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_auto_private1, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_auto_private2, most_common_cargo_type){
	GOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_auto, current_year){
	0..1967		: palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1968..1982	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1995	: sw_al6_colours_auto_sectorised ;
	1996..2005  : sw_al6_colours_auto_private1 ;
	2006..2011  : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	2012..4096  : sw_al6_colours_auto_private2 ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	5 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	7 : palette_2cc(COLOUR_YELLOW, company_colour2) ;
	8 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual_check, livery_choice){
	1 : sw_al6_colours_manual ;
	sw_al6_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_2cc_check, colour_scheme_1){
	1 : sw_al6_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Colours DBSO/DVT checks

switch(FEAT_TRAINS, SELF, sw_al6_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_al6_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_al6_colours_dbso_check ;
}


//Purchase spriteset

switch(FEAT_TRAINS, SELF, sw_al6_purchase, current_year){
	0..1967		: gfx_al6_acblue_purchase ;
	1968..1982	: gfx_al6_brblue_purchase ;
	1983..1995	: gfx_al6_intercity_purchase ;
	gfx_al6_railfreight_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_al6_purchase_colours, current_year){
	0..1967		: palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1968..1982	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1995	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_al6_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item


item (FEAT_TRAINS, item_al6, 86){
	property{
		name                           : string(STR_NAME_AL6) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1965,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 53 ;
		reliability_decay              : 9 ;
		cost_factor                    : 48 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 235 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : ELRL ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 100 mph ;
		power                          : 3013 kW ;
		weight                         : 86 ton ;
		tractive_effort_coefficient    : 0.3 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_al6_gfx_dvt_check ;
		purchase                : sw_al6_purchase ;
		sound_effect            : sw_sfx_electric_loco_old ;
		create_effect           : sw_br87_vfx_dbso_dvt_check ;
		colour_mapping          : sw_al6_colours_dvt_check ;
		purchase_colour_mapping : sw_al6_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_al6_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 40 : 235) ;
		purchase_power          : 3013 ;
		purchase_running_cost_factor : 235 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_al6, 86){
	property{
		name                           : string(STR_NAME_AL6_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/ELECTRIC_LOCO/class_90.pnml" 1
//Class 90

//Sprite sets

spriteset(gfx_cl90_intercity			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0,  25) }
spriteset(gfx_cl90_intercity_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0,  25) }
spriteset(gfx_cl90_railfreight			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0,  50) }
spriteset(gfx_cl90_railfreight_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0,  50) }
spriteset(gfx_cl90_railexpress			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0,  75) }
spriteset(gfx_cl90_railexpress_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0,  75) }
spriteset(gfx_cl90_virgin				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 100) }
spriteset(gfx_cl90_virgin_rev			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 100) }
spriteset(gfx_cl90_one					, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 125) }
spriteset(gfx_cl90_one_rev				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 125) }
spriteset(gfx_cl90_greateranglia		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 150) }
spriteset(gfx_cl90_greateranglia_rev	, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 150) }
spriteset(gfx_cl90_firstscotrail		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 175) }
spriteset(gfx_cl90_firstscotrail_rev	, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 175) }
spriteset(gfx_cl90_freightliner			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 200) }
spriteset(gfx_cl90_freightliner_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 200) }
spriteset(gfx_cl90_ews					, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 225) }
spriteset(gfx_cl90_ews_rev				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 225) }
spriteset(gfx_cl90_dbcargo				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 250) }
spriteset(gfx_cl90_dbcargo_rev			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 250) }
spriteset(gfx_cl90_gc					, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 275) }
spriteset(gfx_cl90_gc_rev				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 275) }
spriteset(gfx_cl90_virgin_p				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 300) }
spriteset(gfx_cl90_virgin_p_rev			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 300) }
spriteset(gfx_cl90_fl_orange			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			(   0, 325) }
spriteset(gfx_cl90_fl_orange_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	(   0, 325) }
//New freightliner
//New freightliner
//Grand Central
//Grand Central

spriteset(gfx_cl90_purchase_intercity	, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_purchase	( 178,  25) }
spriteset(gfx_cl90_purchase_virgin		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_purchase	( 178, 100) }
spriteset(gfx_cl90_purchase_one			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_purchase	( 178, 125) }
spriteset(gfx_cl90_purchase_greaterangla, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_purchase	( 178, 150) }
spriteset(gfx_cl90_purchase_fl_orange	, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_purchase	( 178, 325) }


spriteset(gfx_cl90_panto_up				, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			( 260,   0) }
spriteset(gfx_cl90_panto_up_rev			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	( 260,   0) }
spriteset(gfx_cl90_panto_down			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double			( 260,  25) }
spriteset(gfx_cl90_panto_down_rev		, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double_reverse	( 260,  25) }

spriteset(gfx_cl90_headlight			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double	( 260,  50) }
spriteset(gfx_cl90_taillight			, "gfx/ELECTRIC_LOCO/class_90_8.png"){ template_Mk2_double	( 260,  75) }


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_intercity, vehicle_is_reversed){		1 : gfx_cl90_intercity_rev ;	gfx_cl90_intercity		; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_railfreight, vehicle_is_reversed){	1 : gfx_cl90_railfreight_rev ;	gfx_cl90_railfreight	; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_railexpress, vehicle_is_reversed){	1 : gfx_cl90_railexpress_rev ;	gfx_cl90_railexpress	; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_virgin, vehicle_is_reversed){			1 : gfx_cl90_virgin_rev ;		gfx_cl90_virgin			; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_one, vehicle_is_reversed){			1 : gfx_cl90_one_rev ;			gfx_cl90_one			; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_greateranglia, vehicle_is_reversed){	1 : gfx_cl90_greateranglia_rev ;gfx_cl90_greateranglia	; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_firstscotrail, vehicle_is_reversed){	1 : gfx_cl90_firstscotrail_rev ;gfx_cl90_firstscotrail	; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_freightliner, vehicle_is_reversed){	1 : gfx_cl90_freightliner_rev ;	gfx_cl90_freightliner	; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_ews, vehicle_is_reversed){			1 : gfx_cl90_ews_rev ;			gfx_cl90_ews			; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_dbcargo, vehicle_is_reversed){		1 : gfx_cl90_dbcargo_rev ;		gfx_cl90_dbcargo		; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_gc, vehicle_is_reversed){				1 : gfx_cl90_gc_rev ;			gfx_cl90_gc		; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_virgin_p, vehicle_is_reversed){		1 : gfx_cl90_virgin_p_rev ;		gfx_cl90_virgin_p			; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_fl_orange, vehicle_is_reversed){		1 : gfx_cl90_fl_orange_rev ;	gfx_cl90_fl_orange			; }


//Automatic


switch(FEAT_TRAINS, PARENT, sw_cl90_auto_sectorised, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_intercity ;
	MAIL : sw_cl90_gfx_rev_check_railexpress ;
	sw_cl90_gfx_rev_check_railfreight ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_auto_private1, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_virgin ;
	FOOD : sw_cl90_gfx_rev_check_freightliner ;
	sw_cl90_gfx_rev_check_ews ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_auto_private2, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_one ;
	FOOD : sw_cl90_gfx_rev_check_freightliner ;
	sw_cl90_gfx_rev_check_dbcargo ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_auto_private3, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_greateranglia ;
	FOOD : sw_cl90_gfx_rev_check_freightliner ;
	sw_cl90_gfx_rev_check_dbcargo ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_auto_private4, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_gc ;
	sw_cl90_gfx_rev_check_fl_orange ;
}


switch(FEAT_TRAINS, SELF, sw_cl90_gfx_auto, current_year){
	1983 .. 1995 : sw_cl90_auto_sectorised ;
	2004..2012 : sw_cl90_auto_private2 ;
	2014..2019 : sw_cl90_auto_private3 ;
	2020..4096 : sw_cl90_auto_private4 ;
	sw_cl90_auto_private1 ;
}



//Manual

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_manual, cargo_subtype){
	0 : sw_cl90_gfx_rev_check_intercity ;
	1 : sw_cl90_gfx_rev_check_railfreight ;
	2 : sw_cl90_gfx_rev_check_railexpress ;
	4 : sw_cl90_gfx_rev_check_one ;
	5 : sw_cl90_gfx_rev_check_greateranglia ;
	6 : sw_cl90_gfx_rev_check_firstscotrail ;
	7 : sw_cl90_gfx_rev_check_freightliner ;
	8 : sw_cl90_gfx_rev_check_ews ;
	9 : sw_cl90_gfx_rev_check_dbcargo ;
	10: sw_cl90_gfx_rev_check_virgin_p ;
	11: sw_cl90_gfx_rev_check_gc ;
	12: sw_cl90_gfx_rev_check_fl_orange ;
	sw_cl90_gfx_rev_check_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_manual_check, livery_choice){
	1 : sw_cl90_gfx_manual ;
	sw_cl90_gfx_auto ;
}



//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_panto_up_rev_check, vehicle_is_reversed){
	1 : gfx_cl90_panto_up_rev ;
	gfx_cl90_panto_up ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_panto_down_rev_check, vehicle_is_reversed){
	1 : gfx_cl90_panto_down_rev ;
	gfx_cl90_panto_down ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_panto_check, vehicle_is_potentially_powered){
	1 : sw_cl90_gfx_panto_up_rev_check ;
	sw_cl90_gfx_panto_down_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_taillights_check, position_in_consist_from_end){ 0 : gfx_cl90_taillight ; }
switch(FEAT_TRAINS, SELF, sw_cl90_gfx_headlights_check, position_in_consist){ 0 : gfx_cl90_headlight ; sw_cl90_gfx_taillights_check ; }

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl90_gfx_manual_check ;
	1 : sw_cl90_gfx_panto_check ;
	2 : sw_cl90_gfx_headlights_check ;
}

//Graphics DVT check

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_cl90_gfx_sprite_stack ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_auto_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	MAIL : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_auto_private1, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	FOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_auto_private2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	FOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_auto_private3, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	FOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_auto_private4, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_ORANGE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_auto, current_year){
	1983 .. 1995 : sw_cl90_colours_auto_sectorised ;
	2004..2012 : sw_cl90_colours_auto_private2 ;
	2014..2019 : sw_cl90_colours_auto_private3 ;
	2020..4096 : sw_cl90_colours_auto_private4 ;
	sw_cl90_colours_auto_private1 ;
}



//Manual

switch(FEAT_TRAINS, SELF, sw_cl90_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	5 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	7 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	8 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	9 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	10: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	11: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	12: palette_2cc(COLOUR_ORANGE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_manual_check, livery_choice){
	1 : sw_cl90_colours_manual ;
	sw_cl90_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_2cc_check, colour_scheme_1){
	1 : sw_cl90_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Colours DVT check

switch(FEAT_TRAINS, SELF, sw_cl90_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_cl90_colours_2cc_check ;
} 




//Refit text

switch(FEAT_TRAINS, SELF, sw_cl90_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_INTERCITY) ;
	1 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_GENERAL))) ;
	2 : string(STR_LIVERY_RAIL_EXPRESS) ;
	3 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	4 : string(STR_LIVERY_ONE_ANGLIA) ;
	5 : string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	6 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	7 : string(STR_LIVERY_FREIGHTLINER) ;
	8 : string(STR_LIVERY_EWS) ;
	9 : string(STR_LIVERY_DBCARGO) ;
	10: string(STR_LIVERY_VIRGIN_TRAINS_FAKE) ;
	11: string(STR_LIVERY_GC) ;
	12: string(STR_LIVERY_FREIGHTLINER_ORANGE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_refit_text_check, livery_choice){
	1 : sw_cl90_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_cl90_purchase, current_year){
	1983 .. 1995 : gfx_cl90_purchase_intercity ;
	2004..2012 : gfx_cl90_purchase_one ;
	2014..2019 : gfx_cl90_purchase_greaterangla ;
	2020..4096 : gfx_cl90_purchase_fl_orange ;
	gfx_cl90_purchase_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_purchase_colours, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2004..2012 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	2014..2019 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2020..4096: palette_2cc(COLOUR_ORANGE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_cl90_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_cl90, 90){
	property{
		name		                    : string(STR_NAME_90) ;
		misc_flags		                : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id		                : SPRITE_ID_NEW_TRAIN ;
		length		                    : 8 ;
		climates_available		        : ALL_CLIMATES ;
		introduction_date		        : date(1987,1,1) ;
		model_life		                : 25 ;
		vehicle_life		            : 40 ;
		reliability_decay		        : 6 ;
		cost_factor		                : 54 ;
		running_cost_base		        : RUNNING_COST_ELECTRIC ;
		running_cost_factor		        : 235 ;
		refit_cost		                : 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit		        : [MAIL, GOOD] ;
		cargo_capacity		            : 1 ;
		track_type		                : ELRL ;
		engine_class		            : ENGINE_CLASS_ELECTRIC ;
		speed		                    : 110 mph ;
		power		                    : 3730 kW ;
		weight		                    : 84.5 ton ;
		tractive_effort_coefficient		: 0.34 ;
		air_drag_coefficient		    : 0.08 ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed						: 0 ;
	}
		graphics{
			default			                : sw_cl90_gfx_dvt_check ;
			purchase			            : sw_cl90_purchase ;
			sound_effect			        : sw_sfx_electric_loco_old ;
			create_effect			        : sw_br87_vfx_dbso_dvt_check ;
			colour_mapping			        : sw_cl90_colours_dvt_check ;
			purchase_colour_mapping			: sw_cl90_purchase_colours_2cc_check ;
			cargo_subtype_text			    : sw_cl90_refit_text_check ;
			purchase_cargo_capacity			: 0 ;
			cargo_capacity			        : return 0 ;
			can_attach_wagon			    : sw_all_but_MU90 ;
			running_cost_factor			    : return(current_speed == 0 ? 50 : 255) ;
			purchase_running_cost_factor	: 255 ;
		}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_cl90, 90){
	property{
		name                           : string(STR_NAME_90_ALT) ;
	}
}
}


# 1 "rukts.pnml" 3
# 1 "src/ELECTRIC_LOCO/class_91.pnml" 1
//Class 91

//Sprite sets

spriteset(gfx_cl91_generic_back			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,  0)	}
spriteset(gfx_cl91_generic_front		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,  0)	}
spriteset(gfx_cl91_intercity_back		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,100)	}
spriteset(gfx_cl91_intercity_front		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,100)	}
spriteset(gfx_cl91_gner_back			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,125)	}
spriteset(gfx_cl91_gner_front			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,125)	}
spriteset(gfx_cl91_nxec_back			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,150)	}
spriteset(gfx_cl91_nxec_front			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,150)	}
spriteset(gfx_cl91_east_coast_back		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,175)	}
spriteset(gfx_cl91_east_coast_front		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,175)	}
spriteset(gfx_cl91_vtec_back			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,200)	}
spriteset(gfx_cl91_vtec_front			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,200)	}
spriteset(gfx_cl91_europheonix_back		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			(   0,225)	}
spriteset(gfx_cl91_europheonix_front	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	(   0,225)	}

spriteset(gfx_cl91_purchase_generic		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,  0) }
spriteset(gfx_cl91_purchase_intercity	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,100) }
spriteset(gfx_cl91_purchase_gner		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,125) }
spriteset(gfx_cl91_purchase_nxec		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,150) }
spriteset(gfx_cl91_purchase_east_coast	, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,175) }
spriteset(gfx_cl91_purchase_vtec		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_purchase	( 178,200) }

spriteset(gfx_cl91_panto_up_back		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			( 260,  50)	}
spriteset(gfx_cl91_panto_up_front		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	( 260,  50)	}
spriteset(gfx_cl91_panto_down_back		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			( 260,  75)	}
spriteset(gfx_cl91_panto_down_front		, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	( 260,  75)	}

spriteset(gfx_cl91_lights_back			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double			( 260,   0) }
spriteset(gfx_cl91_lights_front			, "gfx/ELECTRIC_LOCO/class_91.png"){ template_Mk2_double_reverse	( 260,  25) }



//Graphics switches

//Reverse checks

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_generic_rev_check_front,		vehicle_is_reversed ){ 1 : gfx_cl91_generic_back	; gfx_cl91_generic_front			; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_generic_rev_check_back,			vehicle_is_reversed ){ 1 : gfx_cl91_generic_front	; gfx_cl91_generic_back				; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_intercity_rev_check_front,		vehicle_is_reversed ){ 1 : gfx_cl91_intercity_back	; gfx_cl91_intercity_front			; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_intercity_rev_check_back,		vehicle_is_reversed ){ 1 : gfx_cl91_intercity_front	; gfx_cl91_intercity_back			; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_gner_rev_check_front,			vehicle_is_reversed ){ 1 : gfx_cl91_gner_back	; gfx_cl91_gner_front					; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_gner_rev_check_back,			vehicle_is_reversed ){ 1 : gfx_cl91_gner_front	; gfx_cl91_gner_back					; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_nxec_rev_check_front,			vehicle_is_reversed ){ 1 : gfx_cl91_nxec_back	; gfx_cl91_nxec_front					; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_nxec_rev_check_back,			vehicle_is_reversed ){ 1 : gfx_cl91_nxec_front	; gfx_cl91_nxec_back					; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_east_coast_rev_check_front,		vehicle_is_reversed ){ 1 : gfx_cl91_east_coast_back	; gfx_cl91_east_coast_front	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_east_coast_rev_check_back,		vehicle_is_reversed ){ 1 : gfx_cl91_east_coast_front	; gfx_cl91_east_coast_back		; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_vtec_rev_check_front,			vehicle_is_reversed ){ 1 : gfx_cl91_vtec_back	; gfx_cl91_vtec_front					; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_vtec_rev_check_back,			vehicle_is_reversed ){ 1 : gfx_cl91_vtec_front	; gfx_cl91_vtec_back					; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_europheonix_rev_check_front,	vehicle_is_reversed ){ 1 : gfx_cl91_europheonix_back	; gfx_cl91_europheonix_front	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_europheonix_rev_check_back,		vehicle_is_reversed ){ 1 : gfx_cl91_europheonix_front	; gfx_cl91_europheonix_back		; }


//Position checks

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_generic_pos_check_back,	position_in_consist_from_end){ 0 : gfx_cl91_generic_back				; sw_cl91_gfx_generic_rev_check_back	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_generic_num_check_front,	count_veh_id(91) > 1		){ 1 : gfx_cl91_generic_front				; sw_cl91_gfx_generic_rev_check_front	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_generic_pos_check_front,	position_in_consist 		){ 0 : sw_cl91_gfx_generic_num_check_front	; sw_cl91_gfx_generic_pos_check_back	; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_intercity_pos_check_back,	position_in_consist_from_end){ 0 : gfx_cl91_intercity_back				; sw_cl91_gfx_intercity_rev_check_back	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_intercity_num_check_front,	count_veh_id(91) > 1	){ 1 : gfx_cl91_intercity_front				; sw_cl91_gfx_intercity_rev_check_front	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_intercity_pos_check_front,	position_in_consist 	){ 0 : sw_cl91_gfx_intercity_num_check_front; sw_cl91_gfx_intercity_pos_check_back	; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_gner_pos_check_back,	position_in_consist_from_end	){ 0 : gfx_cl91_gner_back					; sw_cl91_gfx_gner_rev_check_back		; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_gner_num_check_front,	count_veh_id(91) > 1			){ 1 : gfx_cl91_gner_front					; sw_cl91_gfx_gner_rev_check_front		; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_gner_pos_check_front,	position_in_consist 			){ 0 : sw_cl91_gfx_gner_num_check_front		; sw_cl91_gfx_gner_pos_check_back		; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_nxec_pos_check_back,	position_in_consist_from_end	){ 0 : gfx_cl91_nxec_back				; sw_cl91_gfx_nxec_rev_check_back	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_nxec_num_check_front,	count_veh_id(91) > 1			){ 1 : gfx_cl91_nxec_front				; sw_cl91_gfx_nxec_rev_check_front	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_nxec_pos_check_front,	position_in_consist 			){ 0 : sw_cl91_gfx_nxec_num_check_front	; sw_cl91_gfx_nxec_pos_check_back	; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_east_coast_pos_check_back,	position_in_consist_from_end){ 0 : gfx_cl91_east_coast_back				; sw_cl91_gfx_east_coast_rev_check_back	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_east_coast_num_check_front,	count_veh_id(91) > 1		){ 1 : gfx_cl91_east_coast_front			; sw_cl91_gfx_east_coast_rev_check_front; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_east_coast_pos_check_front,	position_in_consist 		){ 0 : sw_cl91_gfx_east_coast_num_check_front; sw_cl91_gfx_east_coast_pos_check_back; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_vtec_pos_check_back,	position_in_consist_from_end){ 0 : gfx_cl91_vtec_back				; sw_cl91_gfx_vtec_rev_check_back	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_vtec_num_check_front,	count_veh_id(91) > 1		){ 1 : gfx_cl91_vtec_front				; sw_cl91_gfx_vtec_rev_check_front	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_vtec_pos_check_front,	position_in_consist 		){ 0 : sw_cl91_gfx_vtec_num_check_front	; sw_cl91_gfx_vtec_pos_check_back	; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_europheonix_pos_check_back,	position_in_consist_from_end){ 0 : gfx_cl91_europheonix_back	; sw_cl91_gfx_europheonix_rev_check_back		; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_europheonix_num_check_front,	count_veh_id(91) > 1		){ 1 : gfx_cl91_europheonix_front	; sw_cl91_gfx_europheonix_rev_check_front		; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_europheonix_pos_check_front,	position_in_consist 		){ 0 : sw_cl91_gfx_europheonix_num_check_front; sw_cl91_gfx_europheonix_pos_check_back;}



//Automatic

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_auto_private, most_common_cargo_type){
	PASS : sw_cl91_gfx_vtec_pos_check_front ; // LNER
	sw_cl91_gfx_europheonix_pos_check_front ; //ROG
}

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_auto, current_year){
	1983 .. 1995 : sw_cl91_gfx_intercity_pos_check_front ; // IC
	2007..2009	: sw_cl91_gfx_nxec_pos_check_front ; // NXEC
	2010..2014	: sw_cl91_gfx_east_coast_pos_check_front ; // EAST COAST
	2015..2019	: sw_cl91_gfx_vtec_pos_check_front ; // VTEC
	2020..4096	: sw_cl91_gfx_auto_private ;
	sw_cl91_gfx_gner_pos_check_front ; // GNER
}


//Manual

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_manual, cargo_subtype){
	0 : sw_cl91_gfx_intercity_pos_check_front ; // IC
	2 : sw_cl91_gfx_nxec_pos_check_front ; // NXEC
	3 : sw_cl91_gfx_east_coast_pos_check_front ; // EAST COAST
	4 : sw_cl91_gfx_vtec_pos_check_front ; // VTEC/LNER
	5 : sw_cl91_gfx_europheonix_pos_check_front ; // EUROPHEONIX
	6 : sw_cl91_gfx_intercity_pos_check_front ; // IC + VTEC
	sw_cl91_gfx_gner_pos_check_front ; //GNER
}

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_manual_check, livery_choice){
	1 : sw_cl91_gfx_manual ;
	sw_cl91_gfx_auto ;
}



//Pantograph

//Reverse checks

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_up_rev_check_front, vehicle_is_reversed		){ 1 : gfx_cl91_panto_up_back	; gfx_cl91_panto_up_front	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_up_rev_check_back, vehicle_is_reversed		){ 1 : gfx_cl91_panto_up_front	; gfx_cl91_panto_up_back	; }

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_down_rev_check_front, vehicle_is_reversed		){ 1 : gfx_cl91_panto_down_back	; gfx_cl91_panto_down_front	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_down_rev_check_back, vehicle_is_reversed		){ 1 : gfx_cl91_panto_down_front; gfx_cl91_panto_down_back	; }

//Position checks

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_panto_up_back_check, position_in_consist_from_end		){ 0 : gfx_cl91_panto_up_back					; sw_cl91_gfx_panto_up_rev_check_back	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_up_num_check_front,	count_veh_id(91) > 1	){ 1 : gfx_cl91_panto_up_front					; sw_cl91_gfx_panto_up_rev_check_front	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_panto_up_front_check, position_in_consist				){ 0 : sw_cl91_gfx_panto_up_num_check_front		; sw_cl91_gfx_panto_up_back_check		; }

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_panto_down_back_check, position_in_consist_from_end	){ 0 : gfx_cl91_panto_down_back					; sw_cl91_gfx_panto_down_rev_check_back	; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_panto_down_num_check_front,	count_veh_id(91) > 1	){ 1 : gfx_cl91_panto_down_front				; sw_cl91_gfx_panto_down_rev_check_front; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_panto_down_front_check, position_in_consist			){ 0 : sw_cl91_gfx_panto_down_num_check_front	; sw_cl91_gfx_panto_down_back_check		; }

//Power check

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_panto_power_check, vehicle_is_potentially_powered	){ 1 : sw_cl91_gfx_panto_up_front_check	; sw_cl91_gfx_panto_down_front_check ; }



//Lights

switch(FEAT_TRAINS, SELF, sw_gfx_cl91_lights_back_check, position_in_consist_from_end){ 0 : gfx_cl91_lights_back				; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_lights_front_rev_check,	vehicle_is_reversed	){ 1 : gfx_cl91_lights_back					; gfx_cl91_lights_front 				; }
switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_lights_num_check_front,	count_veh_id(91) > 1){ 1 : gfx_cl91_lights_front				; sw_cl91_gfx_lights_front_rev_check	; }
switch(FEAT_TRAINS, SELF, sw_cl91_gfx_lights_pos_check_front,	position_in_consist	){ 0 : sw_cl91_gfx_lights_num_check_front	; sw_gfx_cl91_lights_back_check			; }



//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl91_gfx_manual_check ;
	1 : sw_cl91_gfx_panto_power_check ;
	2 : sw_cl91_gfx_lights_pos_check_front ;
}



//Graphics DVT check

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_cl91_gfx_sprite_stack ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, PARENT, sw_cl91_colours_auto_private, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_colours_auto, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2007..2009	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	2010..2014	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	2015..2019	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC
	2020..4096	: sw_cl91_colours_auto_private ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}



//Manual

switch(FEAT_TRAINS, SELF, sw_cl91_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	3	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	4	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC/LNER
	5	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // EUROPHEONIX
	6	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC + VTEC
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_colours_manual_check, livery_choice){
	1 : sw_cl91_colours_manual ;
	sw_cl91_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_colours_2cc_check, colour_scheme_1){
	1 : sw_cl91_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Colours DVT check

switch(FEAT_TRAINS, SELF, sw_cl91_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_cl91_colours_2cc_check ;
} 




//Refit text

switch(FEAT_TRAINS, SELF, sw_cl91_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_INTERCITY) ; // IC
	1 : string(STR_LIVERY_GNER) ; // GNER
	2 : string(STR_LIVERY_NXEC) ; // NXEC
	3 : string(STR_LIVERY_ESCS) ; // EAST COAST
	4 : string(STR_LIVERY_VTEC_LNER) ; // VTEC/LNER
	5 : string(STR_LIVERY_ROG_EUROPHENIX) ; // EUROPHEONIX
	6 : string(STR_LIVERY_INTERCITY_VTEC) ; // IC
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_refit_text_check, livery_choice){
	1 : sw_cl91_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_cl91_purchase, current_year){
	1983 .. 1995 : gfx_cl91_purchase_intercity ;
	2007..2009 : gfx_cl91_purchase_nxec ;
	2010..2014 : gfx_cl91_purchase_east_coast ;
	2015..4096 : gfx_cl91_purchase_vtec ;
	gfx_cl91_purchase_gner ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_purchase_colours, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2007..2009	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	2010..2014	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	2015..4096	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; // GNER
}

switch(FEAT_TRAINS, SELF, sw_cl91_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_cl91_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_cl91, 91){
	property{
		name		                    : string(STR_NAME_91) ;
		misc_flags		                : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id		                : SPRITE_ID_NEW_TRAIN ;
		length		                    : 8 ;
		climates_available		        : ALL_CLIMATES ;
		introduction_date		        : date(1988,1,1) ;
		model_life		                : 20 ;
		vehicle_life		            : 35 ;
		reliability_decay		        : 11 ;
		cost_factor		                : 85 ;
		running_cost_base		        : RUNNING_COST_ELECTRIC ;
		running_cost_factor		        : 255 ;
		refit_cost		                : 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit		        : [MAIL, GOOD] ;
		cargo_capacity		            : 1 ;
		track_type		                : ELRL ;
		engine_class		            : ENGINE_CLASS_ELECTRIC ;
		speed		                    : 140 mph ;
		power		                    : 4698 kW ;
		weight		                    : 84 ton ;
		tractive_effort_coefficient		: 0.23 ;
		air_drag_coefficient		    : 0.07 ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed						: 0 ;
	}
	graphics{
		default			                : sw_cl91_gfx_dvt_check ;
		purchase			            : sw_cl91_purchase ;
		sound_effect			        : sw_sfx_electric_loco_old ;
		create_effect			        : sw_br87_vfx_dbso_dvt_check ;
		colour_mapping			        : sw_cl91_colours_dvt_check ;
		purchase_colour_mapping			: sw_cl91_purchase_colours_2cc_check ;
		cargo_subtype_text			    : sw_cl91_refit_text_check ;
		purchase_cargo_capacity			: 0 ;
		cargo_capacity			        : return 0 ;
		can_attach_wagon			    : sw_all_but_MU90 ;
		running_cost_factor			    : return(current_speed == 0 ? 65 : 255) ;
		purchase_running_cost_factor	: 255 ;
	}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_cl91, 91){
	property{
		name                           : string(STR_NAME_91_ALT) ;
	}
}
}


# 1 "rukts.pnml" 3
# 1 "src/ELECTRIC_LOCO/class_92.pnml" 1
///Brush/ABB 92

//Spritesets

spriteset(gfx_abb92_railfreight       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0, 50) }
spriteset(gfx_abb92_railfreight_rev   , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0, 50) }
spriteset(gfx_abb92_ews               , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0, 75) }
spriteset(gfx_abb92_ews_rev           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0, 75) }
spriteset(gfx_abb92_dbcargo           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,100) }
spriteset(gfx_abb92_dbcargo_rev       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,100) }
spriteset(gfx_abb92_calsleeper        , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,125) }
spriteset(gfx_abb92_calsleeper_rev    , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,125) }
spriteset(gfx_abb92_gbrf              , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,150) }
spriteset(gfx_abb92_gbrf_rev          , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,150) }

spriteset(gfx_abb92_purchase_railfreight, "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase(275,125) }
spriteset(gfx_abb92_purchase_ews        , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase(275,150) }
spriteset(gfx_abb92_purchase_dbcargo    , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase(178,100) }
spriteset(gfx_abb92_purchase_calsleeper , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase(178,125) }
spriteset(gfx_abb92_purchase_gbrf       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase(178,150) }

spriteset(gfx_abb92_pantograph          , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 0) }
spriteset(gfx_abb92_pantograph_rev      , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 25) }
spriteset(gfx_abb92_headlight           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 50) }
spriteset(gfx_abb92_taillight           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 75) }



//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_abb92_railfreight_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_railfreight_rev ; gfx_abb92_railfreight ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_ews_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_ews_rev ; gfx_abb92_ews ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_dbcargo_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_dbcargo_rev ; gfx_abb92_dbcargo ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_calsleeper_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_calsleeper_rev ; gfx_abb92_calsleeper ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_gbrf_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_gbrf_rev ; gfx_abb92_gbrf ;}


switch(FEAT_TRAINS, PARENT, sw_abb92_private_2_decider, most_common_cargo_type){
	PASS : sw_abb92_calsleeper_rev_check ;
	sw_abb92_gbrf_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_auto, current_year){
	1995..2007 : sw_abb92_ews_rev_check ;
	2008..2012 : sw_abb92_dbcargo_rev_check ;
	2013..4096 : sw_abb92_private_2_decider ;
	sw_abb92_railfreight_rev_check ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_manual, cargo_subtype){
	1 : sw_abb92_ews_rev_check ;
	2 : sw_abb92_dbcargo_rev_check ;
	3 : sw_abb92_gbrf_rev_check ;
	4 : sw_abb92_calsleeper_rev_check ;
	sw_abb92_railfreight_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_abb92_manual_check, livery_choice){
	1 : sw_abb92_manual ;
	sw_abb92_auto ;
}

//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_abb92_panto_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_pantograph_rev ; gfx_abb92_pantograph ; }
switch(FEAT_TRAINS, SELF, sw_abb92_panto_check, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){ 1 : sw_abb92_panto_rev_check ; gfx_blank ; }

switch(FEAT_TRAINS, SELF, sw_abb92_taillight_check, position_in_consist_from_end){ 0 : gfx_abb92_taillight ; }
switch(FEAT_TRAINS, SELF, sw_abb92_headlight_check, position_in_consist){ 0 : gfx_abb92_headlight ; sw_abb92_taillight_check ; }

switch(FEAT_TRAINS, SELF, sw_abb92_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_abb92_manual_check ;
	1 : sw_abb92_headlight_check ;
	//2 : sw_abb92_taillight_check ;
	2 : sw_abb92_panto_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_abb92_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	1 : string(STR_LIVERY_EWS) ;
	2 : string(STR_LIVERY_DBSCHENKER) ;
	3 : string(STR_LIVERY_GBRF) ;
	4 : string(STR_LIVERY_CAL_SLEEPER) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_refit_text_checker, livery_choice){
	1 : sw_abb92_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Purchase

switch(FEAT_TRAINS, SELF, sw_abb92_purchase, current_year){
	1995..2007 : gfx_abb92_purchase_ews ;
	2008..2012 : gfx_abb92_purchase_dbcargo ;
	2013..4096 : gfx_abb92_purchase_gbrf ;
	gfx_abb92_purchase_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_purchase_colours, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_purchase_2cc_check, colour_scheme_1){
	1 : sw_abb92_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_abb92_colours_private_2_decider, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_auto, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : sw_abb92_colours_private_2_decider ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual, cargo_subtype){
	1..2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	3    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual_check, livery_choice){
	1 : sw_abb92_colours_manual ;
	sw_abb92_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_2cc_check, colour_scheme_1){
	1 : sw_abb92_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Other switches

switch(FEAT_TRAINS, SELF, sw_abb92_power, (tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR"))){ 1 : return 5365 ; return 6705 ;}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){ 1 : sw_dbso_colours_2cc_check ; sw_abb92_colours_2cc_check ;}
switch(FEAT_TRAINS, SELF, sw_abb92_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_colours_2cc_check ; sw_abb92_colours_dbso_check ;}

switch(FEAT_TRAINS, SELF, sw_abb92_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){ 1 : sw_dbso_sprite_stack ; sw_abb92_spritestack ;}
switch(FEAT_TRAINS, SELF, sw_abb92_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_sprite_stack ; sw_abb92_gfx_dbso_check ;}

switch(FEAT_TRAINS, SELF, sw_abb92_vfx_dbso_dvt_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){ 0 : vfx_dual_voltage ; }

//Item

item (FEAT_TRAINS, item_abb92, 92){
	property{
		name                           : string(STR_NAME_92) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1993,4,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 5 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 225 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL, GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : SAAZ ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 140 km/h ;
		power                          : 5000 kW ;
		weight                         : 126 ton ;
		tractive_effort_coefficient    : 0.2857142857142857 ;
		air_drag_coefficient           : 0.095 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_abb92_gfx_dvt_check ;
		purchase                : sw_abb92_purchase ;
		sound_effect            : sw_sfx_electric_loco_modern ;
		create_effect           : sw_abb92_vfx_dbso_dvt_check ;
		colour_mapping          : sw_abb92_colours_dvt_check ;
		purchase_colour_mapping : sw_abb92_purchase_2cc_check ;
		cargo_subtype_text      : sw_abb92_refit_text_checker ;
		purchase_power          : 6705 ;
		power                   : sw_abb92_power ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 55 : 225) ;
		purchase_running_cost_factor : 225 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_abb92, 92){
	property{
		name                           : string(STR_NAME_92_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/ELECTRIC_LOCO/EuroDual.pnml" 1
//Class 88

//Spritesets

spriteset(gfx_eurodual_drs				, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_2		(0	,0	)}
spriteset(gfx_eurodual_drs_reverse		, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_rev_2	(0	,0	)}
spriteset(gfx_eurodual_cold				, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_2		(0	,25	)}
spriteset(gfx_eurodual_cold_reverse		, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_rev_2	(0	,25	)}

spriteset(gfx_eurodual_panto_up			, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_2		(0	,50	)}
spriteset(gfx_eurodual_panto_up_reverse	, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_rev_2	(0	,50	)}
spriteset(gfx_eurodual_panto_dn			, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_2		(0	,75	)}
spriteset(gfx_eurodual_panto_dn_reverse	, "gfx/ELECTRIC_LOCO/class_88.png"){template_8_8_rev_2	(0	,75	)}

spriteset(gfx_eurodual_drs_purchase, "gfx/ELECTRIC_LOCO/class_88.png"){template_purchase(178,0)}


switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_drs_reversal_check, vehicle_is_reversed){
	1 : gfx_eurodual_drs_reverse ;
	gfx_eurodual_drs ;
}
switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_cold_reversal_check, vehicle_is_reversed){
	1 : gfx_eurodual_cold_reverse ;
	gfx_eurodual_cold ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_gfx_manual, cargo_subtype){
	1 : sw_eurodual_gfx_cold_reversal_check ;
	sw_eurodual_gfx_drs_reversal_check ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_gfx_manual_check, livery_choice){
	1 : sw_eurodual_gfx_manual ;
	sw_eurodual_gfx_drs_reversal_check ;
}

switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_panto_up_rev_check, vehicle_is_reversed){ 1 : gfx_eurodual_panto_up_reverse ; gfx_eurodual_panto_up ; }
switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_panto_dn_rev_check, vehicle_is_reversed){ 1 : gfx_eurodual_panto_dn_reverse ; gfx_eurodual_panto_dn ; }
switch(FEAT_TRAINS, SELF, sw_eurodual_gfx_panto, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){ 1 : sw_eurodual_gfx_panto_up_rev_check ; sw_eurodual_gfx_panto_dn_rev_check ; }

switch(FEAT_TRAINS, SELF, sw_eurodual_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_eurodual_gfx_manual_check ;
	1 : sw_uklight_gfx_headlights ;
	2 : sw_eurodual_gfx_panto ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_eurodual_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_eurodual_dbso_check ;
}


//Colour mapping

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_manual_check, livery_choice){
	1 : sw_eurodual_colours_manual ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours, colour_scheme_1){
	1 :sw_eurodual_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_eurodual_colours ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_eurodual_colours_dbso_check ;
}


//Effects deciders

switch(FEAT_TRAINS, SELF, sw_eurodual_sfx_decider, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1   : sw_sfx_electric_loco_modern ;
	//"3RDC" : sw_sfx_electric_loco_modern ;
	sw_sfx_diesel_loco_modern ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_effect_decider, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1   : vfx_ohle ;
	//"3RDC" : vfx_ohle ;
	vfx_diesel_default ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_effect_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : sw_eurodual_effect_decider ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_power_decider, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1   : 5400 ;
	//"3RDC" : 5364 ;
	1000 ;	
}

switch(FEAT_TRAINS, SELF, sw_eurodual_effect_model, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1   : EFFECT_SPAWN_MODEL_ELECTRIC ;
	//"3RDC" : 5364 ;
	EFFECT_SPAWN_MODEL_DIESEL ;	
}

switch(FEAT_TRAINS, SELF, sw_eurodual_refit_text, cargo_subtype){
	 0 : string(STR_LIVERY_DRS_COMPASS) ;
	 1 : string(STR_LIVERY_DRS_COLD) ;
	 CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_refit_text_check, livery_choice){
	1 : sw_eurodual_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Item

item (FEAT_TRAINS, item_eurodual, 88){
	property{
		name                           : string(STR_NAME_EURODUAL) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2016, 7, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 46 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 250 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [MAIL, GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 100 mph ;
		power                          : 4000 kW ;
		weight                         : 86 ton ;
		tractive_effort_coefficient    : 0.3686046511627907 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default:						sw_eurodual_dvt_check ;
		purchase:						gfx_eurodual_drs_purchase ;
		purchase_colour_mapping:		sw_eurodual_colours ;
		colour_mapping:					sw_eurodual_colours_dvt_check ;
		sound_effect:					sw_eurodual_sfx_decider ;
		create_effect:					sw_eurodual_effect_dbso_check ;
		purchase_power:					5400 ;
		purchase_cargo_capacity:		0 ;
		cargo_capacity:					return 0 ;
		power:							sw_eurodual_power_decider;
		can_attach_wagon:				sw_all_but_MU90;
		running_cost_factor:			return(current_speed == 0 ? 60 : 250) ;
		purchase_running_cost_factor:	250 ;
		additional_text:				string(STR_ADD_INFO_88) ;
		effect_spawn_model_and_powered:	sw_eurodual_effect_model ;
		cargo_subtype_text:				sw_eurodual_refit_text_check ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_eurodual, 88){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eurodual, 88){
	property{
		name                           : string(STR_NAME_EURODUAL_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3

# 1 "src/WAGON/DBSO.pnml" 1
//DBSO Item

//Over ride headers

// #include "src/WAGON/DBSO/ee_type3.pnml"
# 1 "src/WAGON/DBSO/ee_type4.pnml" 1
//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_auto_dbso, current_year){
	1948 .. 1966 : sw_ee40_gfx_brgreen_reverse_check ;
	1967..1982  : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}


//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_manual_dbso, cargo_subtype){
	0 : sw_ee40_gfx_brgreen_reverse_check ;
	1 : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_manual_check_dbso, livery_choice){
	1 : sw_ee40_colours_manual_dbso ;
	sw_ee40_gfx_auto_dbso ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_ee40_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee40_gfx_manual_check_dbso ;
	1 : ee40_headcode_2 ;
}


//Colours

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_auto_dbso, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_recolours_manual_dbso, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, PARENT, sw_ee40_colours_manual_check_dbso, livery_choice){
	1 : sw_ee40_recolours_manual_dbso ;
	sw_ee40_colours_auto_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_ee40_colours_manual_check_dbso ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/uklight.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check_dbso, most_common_cargo_type){
	PASS : sw_uklight_gfx_tpe_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_auto_dbso, current_year){
	2013 : sw_uklight_gfx_drs_reverse_check ;
	2014..2018 : sw_uklight_gfx_passenger_check ;
	sw_uklight_gfx_passenger_check_2 ;
}

//Manual

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_manual_dbso, cargo_subtype){
	1 : sw_uklight_gfx_drs_plain_reverse_check ;
	2 : sw_uklight_gfx_tpe_reverse_check ;
	3 : sw_uklight_gfx_scot_reverse_check ;
	4 : sw_uklight_gfx_chr_reverse_check ;
	5 : sw_uklight_gfx_nts_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}


switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_manual_check_dbso, livery_choice){
	1 : sw_uklight_gfx_manual_dbso ;
	sw_uklight_gfx_auto_dbso ;
}


//Spritestacking

switch(FEAT_TRAINS, PARENT, sw_uklight_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_uklight_gfx_manual_check ;
	1 : sw_uklight_gfx_headlights ;
	2 : sw_uklight_gfx_taillights ;
}


//Colour mapping



switch(FEAT_TRAINS, PARENT, sw_uklight_colours_auto_dbso, current_year){
	2013 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2014..2018 : sw_uklight_colours_passenger_check ;
	sw_uklight_colours_passenger_check_2 ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_manual_dbso, cargo_subtype){
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	4 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
}


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_manual_check_dbso, livery_choice){
	1 : sw_uklight_colours_manual_dbso ;
	sw_uklight_colours_auto_dbso ;
}


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_uklight_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}















switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_manual_dvt, cargo_subtype){
	1 : sw_eurodual_gfx_cold_reversal_check ;
	sw_eurodual_gfx_drs_reversal_check ;
}

switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_manual_check_dvt, livery_choice){
	1 : sw_eurodual_gfx_manual_dvt ;
	sw_eurodual_gfx_drs_reversal_check ;
}


switch(FEAT_TRAINS, SELF, sw_eurodual_spritestack_dvt, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_eurodual_gfx_manual_check_dvt ;
	1 : sw_uklight_gfx_headlights ;
	2 : sw_eurodual_gfx_panto ;
}




switch(FEAT_TRAINS, PARENT, sw_eurodual_colours_manual_dvt, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_eurodual_colours_manual_check_dvt, livery_choice){
	1 : sw_eurodual_colours_manual_dvt ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_eurodual_colours_dvt, colour_scheme_1){
	1 :sw_eurodual_colours_manual_check_dvt ;
	palette_2cc(company_colour1, company_colour2) ;
}
















# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/br87.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_privatised_dbso, most_common_cargo_type){
	PASS : sw_br87_gfx_calsleeper_reverse_check ;
	sw_br87_gfx_gbrf_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_auto_dbso, current_year){
	1971 .. 1982 : sw_br87_gfx_brblue_reverse_check ;
	1983 .. 1995 : sw_br87_gfx_intercity_reverse_check ;
	2005 .. 4096 : sw_br87_gfx_privatised_dbso ;
	sw_br87_gfx_virgin_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_manual_dbso, cargo_subtype){
	0 : sw_br87_gfx_brblue_reverse_check ;
	1 : sw_br87_gfx_intercity_reverse_check ;
	2 : sw_br87_gfx_virgin_reverse_check ;
	3 : sw_br87_gfx_calsleeper_reverse_check ;
	4 : sw_br87_gfx_gbrf_reverse_check ;
	sw_br87_gfx_virgin_reverse_check ;
}


switch(FEAT_TRAINS, PARENT, sw_br87_gfx_manual_check_dbso, livery_choice){
	1 : sw_br87_gfx_manual_dbso ;
	sw_br87_gfx_auto_dbso ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_br87_sprite_stack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_br87_gfx_manual_check_dbso ;
	1 : sw_br87_headlight_decider ;
	2 : sw_br87_taillight_decider ;
}


//Colours

switch(FEAT_TRAINS, PARENT, sw_br87_privatised_colours_dbso, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_auto_dbso, current_year){
	1971 .. 1982     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995  : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2005 .. 4096 : sw_br87_privatised_colours_dbso ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_manual_dbso, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_manual_check_dbso, livery_choice){
	1 : sw_br87_colours_manual_dbso ;
	sw_br87_colours_auto_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_br87_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/class_92.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_abb92_auto_dbso, current_year){
	1995..2007 : sw_abb92_ews_rev_check ;
	2008..2012 : sw_abb92_dbcargo_rev_check ;
	2013..4096 : sw_abb92_private_2_decider ;
	sw_abb92_railfreight_rev_check ;
}


switch(FEAT_TRAINS, PARENT, sw_abb92_manual_dbso, cargo_subtype){
	1 : sw_abb92_ews_rev_check ;
	2 : sw_abb92_dbcargo_rev_check ;
	3 : sw_abb92_gbrf_rev_check ;
	4 : sw_abb92_calsleeper_rev_check ;
	sw_abb92_railfreight_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_abb92_manual_check_dbso, livery_choice){
	1 : sw_abb92_manual_dbso ;
	sw_abb92_auto_dbso ;
}

//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_abb92_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_abb92_manual_check_dbso ;
	1 : sw_abb92_headlight_check ;
	//2 : sw_abb92_taillight_check ;
	2 : sw_abb92_panto_check ;
}



switch(FEAT_TRAINS, PARENT, sw_abb92_colours_auto_dbso, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : sw_abb92_colours_private_2_decider ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, PARENT, sw_abb92_colours_manual_dbso, cargo_subtype){
	1..2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	3    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual_check_dbso, livery_choice){
	1 : sw_abb92_colours_manual_dbso ;
	sw_abb92_colours_auto_dbso ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_abb92_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/al6.pnml" 1
//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_al6_gfx_manual_dbso, cargo_subtype){
	0 : sw_al6_gfx_acblue_reverse_check ;
	1 : sw_al6_gfx_brblue_reverse_check ;
	2 : sw_al6_gfx_intercity_reverse_check ;
	3 : sw_al6_gfx_railfreight_reverse_check ;
	4 : sw_al6_gfx_railexpress_reverse_check ;
	5 : sw_al6_gfx_virgin_reverse_check ;
	6 : sw_al6_gfx_freightliner_reverse_check ;
	7 : sw_al6_gfx_colasrail_reverse_check ;
	8 : sw_al6_gfx_ews_reverse_check ;
	sw_al6_gfx_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual_check_dbso, livery_choice){
	1 : sw_al6_gfx_manual_dbso ;
	sw_al6_gfx_auto ;
}

//Lights sprite stacking

switch(FEAT_TRAINS, SELF, sw_al6_sprite_stack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_al6_gfx_manual_check_dbso ;
	1 : sw_al6_taillights ;
	2 : sw_al6_headlights ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_al6_colours_manual_dbso, cargo_subtype){
	0 : palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	5 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	7 : palette_2cc(COLOUR_YELLOW, company_colour2) ;
	8 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual_check_dbso, livery_choice){
	1 : sw_al6_colours_manual_dbso ;
	sw_al6_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_al6_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/class_90.pnml" 1

//Manual

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_manual_dvt, cargo_subtype){
	0 : sw_cl90_gfx_rev_check_intercity ;
	1 : sw_cl90_gfx_rev_check_railfreight ;
	2 : sw_cl90_gfx_rev_check_railexpress ;
	4 : sw_cl90_gfx_rev_check_one ;
	5 : sw_cl90_gfx_rev_check_greateranglia ;
	6 : sw_cl90_gfx_rev_check_firstscotrail ;
	7 : sw_cl90_gfx_rev_check_freightliner ;
	8 : sw_cl90_gfx_rev_check_ews ;
	9 : sw_cl90_gfx_rev_check_dbcargo ;
	10: sw_cl90_gfx_rev_check_virgin_p ;
	11: sw_cl90_gfx_rev_check_gc ;
	12: sw_cl90_gfx_rev_check_fl_orange ;
	sw_cl90_gfx_rev_check_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_manual_check_dvt, livery_choice){
	1 : sw_cl90_gfx_manual_dvt ;
	sw_cl90_gfx_auto ;
}



//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_sprite_stack_dvt, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl90_gfx_manual_check_dvt ;
	1 : sw_cl90_gfx_panto_check ;
	2 : sw_cl90_gfx_headlights_check ;
}



//Colours


//Manual

switch(FEAT_TRAINS, PARENT, sw_cl90_colours_manual_dvt, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	5 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	7 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	8 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	9 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	10: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	11: palette_2cc(COLOUR_GREY, COLOUR_ORANGE) ;
	12: palette_2cc(COLOUR_ORANGE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_manual_check_dvt, livery_choice){
	1 : sw_cl90_colours_manual_dvt ;
	sw_cl90_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_2cc_check_dvt, colour_scheme_1){
	1 : sw_cl90_colours_manual_check_dvt ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/class_91.pnml" 1

//Manual

switch(FEAT_TRAINS, PARENT, sw_cl91_gfx_manual_dvt, cargo_subtype){
	0 : sw_cl91_gfx_intercity_pos_check_front ; // IC
	2 : sw_cl91_gfx_nxec_pos_check_front ; // NXEC
	3 : sw_cl91_gfx_east_coast_pos_check_front ; // EAST COAST
	4 : sw_cl91_gfx_vtec_pos_check_front ; // VTEC/LNER
	5 : sw_cl91_gfx_europheonix_pos_check_front ; // EUROPHEONIX
	6 : sw_cl91_gfx_intercity_pos_check_front ; // IC + VTEC
	sw_cl91_gfx_gner_pos_check_front ; //GNER
}

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_manual_check_dvt, livery_choice){
	1 : sw_cl91_gfx_manual_dvt ;
	sw_cl91_gfx_auto ;
}



//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_cl91_gfx_sprite_stack_dvt, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl91_gfx_manual_check_dvt ;
	1 : sw_cl91_gfx_panto_power_check ;
	2 : sw_cl91_gfx_lights_pos_check_front ;
}



//Colours


//Manual

switch(FEAT_TRAINS, PARENT, sw_cl91_colours_manual_dvt, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC
	2	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ; // NXEC
	3	: palette_2cc(COLOUR_WHITE, COLOUR_PINK) ; // EAST COAST
	4	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ; // VTEC/LNER
	5	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // EUROPHEONIX
	6	: palette_2cc(COLOUR_GREY, COLOUR_RED) ; // IC + VTEC
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_colours_manual_check_dvt, livery_choice){
	1 : sw_cl91_colours_manual_dvt ;
	sw_cl91_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl91_colours_2cc_check_dvt, colour_scheme_1){
	1 : sw_cl91_colours_manual_check_dvt ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/brush4.pnml" 1
//Manual

switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_gfx_manual, cargo_subtype){
	0		: sw_brush4_gfx_brgreen_revcheck ;
	1		: sw_brush4_gfx_brblue_revcheck ;
	4..5	: sw_brush4_gfx_intercity_revcheck ;
	6		: sw_brush4_gfx_nse_revcheck ;
	7..8	: sw_brush4_gfx_railfreight_revcheck ;
	9		: sw_brush4_gfx_railexpress_revcheck ;
	10		: sw_brush4_gfx_ews_revcheck ;
	11		: sw_brush4_gfx_virgin_revcheck ;
	12		: sw_brush4_gfx_first_fag_revcheck ;
	13		: sw_brush4_gfx_drs_revcheck ;
	14		: sw_brush4_gfx_colas_revcheck ;
	sw_brush4_gfx_brlargelogo_revcheck ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_gfx_manual_check, livery_choice){
	1 : sw_dbso_brush4_gfx_manual ;
	sw_brush4_gfx_auto ;
}



random_switch(FEAT_TRAINS, PARENT, sw_brush4_random_headcode_dbso){ 1 : gfx_brush4_alternate_headcode ; 1 : return 0 ; }

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_auto_dbso, current_year){
	0..1986 : return 0 ;
	sw_brush4_random_headcode_dbso ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_manual_dbso, cargo_subtype){
	4..14 : sw_brush4_random_headcode_dbso ;
}

switch(FEAT_TRAINS, SELF, sw_brush4_gfx_headcode_manual_check_dbso, livery_choice){
	1 : sw_brush4_gfx_headcode_manual_dbso ;
	sw_brush4_gfx_headcode_auto_dbso ;
}




switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_gfx_sprstack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dbso_brush4_gfx_manual_check ;
	1 : sw_brush4_gfx_headcode_manual_check_dbso ;
	2 : sw_brush4_headlight_check ;
}




//Manual

switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1..2: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	5	: palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8	: palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	9	: palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	10	: palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	11	: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	12	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	14	: palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_col_manual_check, livery_choice){
	1 : sw_dbso_brush4_col_manual ;
	sw_brush4_col_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_brush4_col_2cc_check, colour_scheme_1){
	1 : sw_dbso_brush4_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6
# 1 "src/WAGON/DBSO/shed.pnml" 1

//Auto

switch(FEAT_TRAINS, PARENT, sw_67_gfx_auto_dbso, current_year){
	2008..4096 : sw_67_rev_check_db ;
	sw_67_rev_check_ews ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_67_gfx_manual_dbso, cargo_subtype){
	1	: sw_67_rev_check_db ;
	2	: sw_67_rev_check_arriva;
	/*3	: string(Pullman);
	4	: string(Colas);
	5	: string(Chiltern);
	6	: sw_67_rev_check_arriva;
	7	: string(TfW);*/
	sw_67_rev_check_ews ;
}


switch(FEAT_TRAINS, PARENT, sw_67_gfx_manual_check_dbso, livery_choice){
	1 : sw_67_gfx_manual_dbso ;
	sw_67_gfx_auto_dbso ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_67_gfx_spr_stack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_67_gfx_manual_check_dbso ;
	1 : sw_67_gfx_check_headlight ;
	2 : sw_67_gfx_check_taillight ;
}



//Colour mapping


switch(FEAT_TRAINS, PARENT, sw_67_col_manual_dbso, cargo_subtype){
	1 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	/*3	: string(Pullman);
	4	: string(Colas);
	5	: string(Chiltern);
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	7	: string(TfW);*/
	palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_67_col_manual_check_dbso, livery_choice){
	1 : sw_67_col_manual_dbso ;
	sw_67_col_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_67_col_2cc_check_dbso, colour_scheme_1){
	1 : sw_67_col_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 6



//Purchase menu graphics

spriteset(gfx_dbso_purchase_scotrail  , "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178, 50) }
spriteset(gfx_dbso_purchase_intercity , "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178, 75) }
spriteset(gfx_dbso_purchase_directrail, "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178,100) }
spriteset(gfx_dbso_purchase_brblue, "gfx/WAGON/mark_2_dbso.png"){ template_purchase (267,50) }

switch(FEAT_TRAINS, SELF, sw_dbso_purchase_sprite, current_year){
	1971 .. 1982        : gfx_dbso_purchase_brblue ;
	1983 .. 1995 : gfx_dbso_purchase_intercity ;
	gfx_dbso_purchase_directrail ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_dbso_colours_auto ;
	palette_2cc(company_colour1, company_colour1) ;
}




//Graphics checks

switch(FEAT_TRAINS, PARENT, sw_dbso_gfx_parent_id_check, vehicle_type_id){
	37 : sw_37_gfx_spr_stack  ;
	40 : sw_ee40_spritestack_dbso ;
	47 : sw_dbso_brush4_gfx_sprstack ;
	57 : sw_57_gfx_spr_stack ;
	68 : sw_uklight_spritestack_dbso ;
	86 : sw_al6_sprite_stack_dbso ;
	87 : sw_br87_sprite_stack_dbso ;
	88 : sw_eurodual_spritestack ;
	92 : sw_abb92_spritestack_dbso ;
	sw_dbso_sprite_stack ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_gfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_gfx_parent_id_check ;
	sw_dbso_sprite_stack ;
}




//Colours checks

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_parent_id_check, vehicle_type_id){
	37 : sw_37_col_2cc_check ;
	40 : sw_ee40_colours_2cc_check_dbso ;
	47 : sw_dbso_brush4_col_2cc_check ;
	57 : sw_57_col_2cc_check ;
	68 : sw_uklight_colours_2cc_check_dbso ;
	86 : sw_al6_colours_2cc_check_dbso ;
	87 : sw_br87_colours_2cc_check_dbso ;
	88 : sw_eurodual_colours ;
	92 : sw_abb92_colours_2cc_check_dbso ;
	sw_dbso_colours_2cc_check ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_colours_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_colours_parent_id_check ;
	sw_dbso_colours_2cc_check ;
}



/*

//SFX checks

switch(FEAT_TRAINS, PARENT, sw_dbso_sfx_parent_id_check, vehicle_type_id){
	37 : sw_sfx_diesel_loco_ee_2 ;
	68 : sw_sfx_diesel_loco_modern ;
	88 : sw_eurodual_sfx_decider ;
	CB_RESULT_NO_SOUND ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_sfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_sfx_parent_id_check ;
	CB_RESULT_NO_SOUND ;
}

*/



//VFX checks

switch(FEAT_TRAINS, PARENT, sw_dbso_vfx_parent_id_check, vehicle_type_id){
	37 : vfx_diesel_default ;
	40 : vfx_diesel_default ;
	47 : vfx_diesel_default ;
	57 : vfx_diesel_default ;
	68 : vfx_diesel_default ;
	86 : vfx_ohle ;
	87 : vfx_ohle ;
	88 : sw_eurodual_effect_decider ;
	92 : sw_abb92_vfx_dbso_dvt_check ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_vfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_vfx_parent_id_check ;
}



//Effect spawn model check

switch(FEAT_TRAINS, PARENT, sw_dbso_effect_parent_id_check, vehicle_type_id){
	37 : EFFECT_SPAWN_MODEL_DIESEL ;
	40 : EFFECT_SPAWN_MODEL_DIESEL ;
	47 : EFFECT_SPAWN_MODEL_DIESEL ;
	57 : EFFECT_SPAWN_MODEL_DIESEL ;
	68 : EFFECT_SPAWN_MODEL_DIESEL ;
	86 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	87 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	88 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	92 : EFFECT_SPAWN_MODEL_ELECTRIC ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_effect_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_effect_parent_id_check ;
	EFFECT_SPAWN_MODEL_NONE ;
}



//Attach checks

switch(FEAT_TRAINS, SELF, sw_dbso_attach_pos_check, vehicle_type_id){
	37 : return CB_RESULT_ATTACH_ALLOW  ;
	40 : return CB_RESULT_ATTACH_ALLOW  ;
	47 : return CB_RESULT_ATTACH_ALLOW  ;
	57 : return CB_RESULT_ATTACH_ALLOW  ;
	68 : return CB_RESULT_ATTACH_ALLOW  ;
	86 : return CB_RESULT_ATTACH_ALLOW  ;
	87 : return CB_RESULT_ATTACH_ALLOW  ;
	88 : return CB_RESULT_ATTACH_ALLOW  ;
	9020 : return CB_RESULT_ATTACH_ALLOW  ;
	9025 : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_DBSO_NO_COUPLE)  ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_attach_parent_id_check, vehicle_type_id){
	37 : sw_dbso_attach_pos_check ;
	40 : sw_dbso_attach_pos_check ;
	47 : sw_dbso_attach_pos_check ;
	57 : sw_dbso_attach_pos_check ;
	68 : sw_dbso_attach_pos_check ;
	86 : sw_dbso_attach_pos_check ;
	87 : sw_dbso_attach_pos_check ;
	88 : sw_dbso_attach_pos_check ;
	9025 : sw_dbso_attach_pos_check ;
	9030 : sw_dbso_attach_pos_check ;
	return string(STR_DBSO_NO_COUPLE) ;
}



//The item itself

item(FEAT_TRAINS, item_dbso, 9025){
	property{
		name						   : string(STR_NAME_DBSO) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1979, 1, 1) ;
		model_life                     : 35 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 95 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 58 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 30 ;
		loading_speed                  : 8 ;
		track_type                     : RAIL ;
		speed                          : 100 mph ;
		power                          : 0 hp ;
		weight                         : 38 ton ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		
        variant_group: 9020;
	}
	graphics{
		default                        : sw_dbso_gfx_reverse_check ;
		colour_mapping                 : sw_dbso_colours_reverse_check ;
		purchase                       : sw_dbso_purchase_sprite ;
		purchase_colour_mapping        : sw_dbso_purchase_colours_2cc_check ;
		//cargo_subtype_text             : sw_dbso_refit_text_check ;
		can_attach_wagon               : sw_dbso_attach_parent_id_check ;
		create_effect                  : sw_dbso_vfx_reverse_check ;
		effect_spawn_model_and_powered : sw_dbso_effect_reverse_check ;
		//sound_effect                   : sw_dbso_sfx_reverse_check ;
		additional_text: string(STR_ADD_INFO_PUSHPULL) ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_dbso, 9025){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_dbso, 9025){
	property{
		name                           : string(STR_NAME_DBSO_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/DVT.pnml" 1
//DVT Item

//Over ride headers



//Purchase menu graphics

spriteset(gfx_dvt_purchase_generic     , "gfx/WAGON/dvt.png"){ template_purchase(178,  0) }
spriteset(gfx_dvt_purchase_intercity   , "gfx/WAGON/dvt.png"){ template_purchase(178, 25) }
spriteset(gfx_dvt_purchase_virgin      , "gfx/WAGON/dvt.png"){ template_purchase(178, 50) }


switch(FEAT_TRAINS, SELF, sw_dvt_purchase_sprite, current_year){
	1983 .. 1995 : gfx_dvt_purchase_intercity ;
	gfx_dvt_purchase_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_dvt_colours_auto ;
	palette_2cc(company_colour1, company_colour1) ;
}


//Graphics checks

switch(FEAT_TRAINS, PARENT, sw_dvt_gfx_parent_id_check, vehicle_type_id){
	37 : sw_37_gfx_spr_stack  ;
	57 : sw_57_gfx_spr_stack ;
	67 : sw_67_gfx_spr_stack_dbso ;
	68 : sw_uklight_spritestack_dbso ;
	86 : sw_al6_sprite_stack_dbso ;
	87 : sw_br87_sprite_stack_dbso ;
	88 : sw_eurodual_spritestack_dvt ;
	90 : sw_cl90_gfx_sprite_stack_dvt ;
	91 : sw_cl91_gfx_sprite_stack_dvt ;
	92 : sw_abb92_spritestack_dbso ;
	sw_dvt_sprite_stack ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_gfx_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_gfx_parent_id_check ;
	sw_dvt_sprite_stack ;
}


//Colours checks

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_parent_id_check, vehicle_type_id){
	37 : sw_37_col_2cc_check ;
	57 : sw_57_col_2cc_check ;
	67 : sw_67_col_2cc_check_dbso ;
	68 : sw_uklight_colours_2cc_check_dbso ;
	86 : sw_al6_colours_2cc_check_dbso ;
	87 : sw_br87_colours_2cc_check_dbso ;
	88 : sw_eurodual_colours_dvt ;
	90 : sw_cl90_colours_2cc_check_dvt ;
	91 : sw_cl91_colours_2cc_check_dvt ;
	92 : sw_abb92_colours_2cc_check_dbso ;
	sw_dvt_colours_2cc_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_colours_parent_id_check ;
	sw_dvt_colours_2cc_check ;
}



//VFX checks

switch(FEAT_TRAINS, PARENT, sw_dvt_vfx_parent_id_check, vehicle_type_id){
	37 : vfx_diesel_default ;
	57 : vfx_diesel_default ;
	67 : vfx_diesel_default ;
	68 : vfx_diesel_default ;
	86 : vfx_ohle ;
	87 : vfx_ohle ;
	88 : sw_eurodual_effect_decider ;
	90 : vfx_ohle ;
	91 : vfx_ohle ;
	92 : sw_abb92_vfx_dbso_dvt_check  ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_vfx_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_vfx_parent_id_check ;
}


//Effect spawn model checks

switch(FEAT_TRAINS, PARENT, sw_dvt_effect_parent_id_check, vehicle_type_id){
	37 : EFFECT_SPAWN_MODEL_DIESEL ;
	57 : EFFECT_SPAWN_MODEL_DIESEL ;
	67 : EFFECT_SPAWN_MODEL_DIESEL ;
	68 : EFFECT_SPAWN_MODEL_DIESEL ;
	86 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	87 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	88 : sw_eurodual_effect_model ;
	90 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	91 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	92 : EFFECT_SPAWN_MODEL_ELECTRIC ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_effect_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_effect_parent_id_check ;
}



//Attach checks




/*

switch(FEAT_TRAINS, PARENT, sw_dvt_90_check, vehicle_type_id ){
	90 : return 7 ;
	return 8 ;
}
*/

//DVT Item

switch(FEAT_TRAINS, PARENT, sw_dvt_speed_check, vehicle_type_id){
	91 : return 225 ;
	176 ;
}

item(FEAT_TRAINS, item_dvt, 9035){
	property{
		name						   : string(STR_NAME_DVT) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1989, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 45 ;
		cost_factor                    : 115 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 64 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 9 ;
		track_type                     : RAIL ;
		speed                          : 110 mph ;
		power                          : 0 hp ;
		weight                         : 38 ton ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
	}
	graphics{
		default                        : sw_dvt_gfx_reverse_check ;
		colour_mapping                 : sw_dvt_colours_reverse_check ;
		purchase                       : sw_dvt_purchase_sprite ;
		purchase_colour_mapping        : sw_dvt_purchase_colours_2cc_check ;
		//cargo_subtype_text             : sw_dbso_refit_text_check ;
		can_attach_wagon               : sw_dbso_attach_parent_id_check ;
		create_effect                  : sw_dvt_vfx_reverse_check ;
		effect_spawn_model_and_powered : sw_dvt_effect_reverse_check ;
		//length						   : sw_dvt_90_check ;
		//sound_effect                   : sw_dbso_sfx_reverse_check ;
		additional_text: string(STR_ADD_INFO_PUSHPULL) ;
		speed							: sw_dvt_speed_check ;
	}
}

/*if (vehicle_selection < 2){
item (FEAT_TRAINS, item_dvt, 9035){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}*/
# 1 "rukts.pnml" 3

# 1 "src/DMU/dmmu.pnml" 1
//NOTE: CLASS 115 DRIVING CAR SPRITES ARE DEFINED IN SRC\WAGON\MK1.PNML
spriteset(spriteset_101_green_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_101_green_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 100)}
spriteset(spriteset_115_green_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_123_green, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_121_green, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 75)}

spriteset(spriteset_101_brb_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_101_brb_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 100)}
spriteset(spriteset_115_brb_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 125)}
spriteset(spriteset_121_brb, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 75)}

spriteset(spriteset_101_ref_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_101_ref_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 250)}
spriteset(spriteset_115_ref_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 275)}
spriteset(spriteset_121_ref, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 225)}

spriteset(spriteset_101_brg_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_101_brg_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 250)}
spriteset(spriteset_115_brg_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 275)}
spriteset(spriteset_123_brg, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_121_brg, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 225)}

spriteset(spriteset_101_rr_d, "gfx/DMU/dmmu.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_101_rr_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 375)}
spriteset(spriteset_115_rr_t, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 400)}
spriteset(spriteset_121_rr, "gfx/DMU/dmmu.png") {template_8_4_networker(0, 350)}

spriteset(spriteset_101_nse_d, "gfx/DMU/dmmu.png") {template_8_8_networker(179, 300)}
spriteset(spriteset_101_nse_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 375)}
spriteset(spriteset_115_nse_t, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 400)}
spriteset(spriteset_121_nse, "gfx/DMU/dmmu.png") {template_8_4_networker(179, 350)}

spriteset(spriteset_128_green, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_128_brb, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 25)}
spriteset(spriteset_128_mail, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 50)}
spriteset(spriteset_121_silverlink, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_121_atw, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 100)}
spriteset(spriteset_121_cr, "gfx/DMU/dmmu.png") {template_8_8_networker(358, 125)}

spriteset(spriteset_dmmu_early_hl, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_dmmu_late_hl, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_dmmu_early_tl, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_121_early_l, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_123_late_hl, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_dmmu_late_tl, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_121_late_l, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_115_mail_overlay, "gfx/FIXTURES/dmmu.png") {template_8_8_networker(0, 175)}

spriteset(spriteset_101_purchase_green, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 99)}
spriteset(spriteset_115_purchase_green, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 112)}
spriteset(spriteset_123_purchase_green, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_121_purchase_green, "gfx/DMU/dmmu.png") {template_purchase(90, 138)}
spriteset(spriteset_101_purchase_brb, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 99)}
spriteset(spriteset_115_purchase_brb, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 112)}
spriteset(spriteset_121_purchase_brb, "gfx/DMU/dmmu.png") {template_purchase(269, 125)}
spriteset(spriteset_121_purchase_atw, "gfx/DMU/dmmu.png") {template_purchase(269, 138)}
spriteset(spriteset_101_purchase_ref, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 249)}
spriteset(spriteset_115_purchase_ref, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 262)}
spriteset(spriteset_121_purchase_ref, "gfx/DMU/dmmu.png") {template_purchase(90, 275)}
spriteset(spriteset_101_purchase_brg, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 249)}
spriteset(spriteset_115_purchase_brg, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 262)}
spriteset(spriteset_123_purchase_brg, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 275)}
spriteset(spriteset_121_purchase_brg, "gfx/DMU/dmmu.png") {template_purchase(269, 288)}
spriteset(spriteset_101_purchase_rr, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 374)}
spriteset(spriteset_115_purchase_rr, "gfx/DMU/dmmu.png") {template_dualhead_purchase(90, 387)}
spriteset(spriteset_121_purchase_rr, "gfx/DMU/dmmu.png") {template_purchase(90, 400)}
spriteset(spriteset_101_purchase_nse, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 374)}
spriteset(spriteset_115_purchase_nse, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 387)}
spriteset(spriteset_121_purchase_nse, "gfx/DMU/dmmu.png") {template_dualhead_purchase(269, 400)}

			//Shared code for class 101 & 115/Metro Cammell Regional DMU & BR (Derby) Suburban DMU

switch(FEAT_TRAINS, SELF, sw_dmmu_early_lights_1, position_in_consist){
	0: spriteset_dmmu_early_hl;
}
	
switch(FEAT_TRAINS, SELF, sw_dmmu_early_lights, position_in_consist_from_end){
	0: spriteset_dmmu_early_tl;
	sw_dmmu_early_lights_1;
}
	
switch(FEAT_TRAINS, SELF, sw_dmmu_early_lights121, position_in_consist_from_end){
	0: spriteset_dmmu_early_tlr;
	sw_dmmu_early_lights_1;
}
	
switch(FEAT_TRAINS, SELF, sw_121_early_lights, num_vehs_in_consist){
	1: spriteset_121_early_l;
	sw_dmmu_early_lights121;
}

switch(FEAT_TRAINS, SELF, sw_dmmu_late_lights_1, position_in_consist){
	0: spriteset_dmmu_late_hl;
}
	
switch(FEAT_TRAINS, SELF, sw_dmmu_late_lights, position_in_consist_from_end){
	0: spriteset_dmmu_late_tl;
	sw_dmmu_late_lights_1;
}
	
switch(FEAT_TRAINS, SELF, sw_dmmu_late_lights121, position_in_consist_from_end){
	0: spriteset_dmmu_late_tlr;
	sw_dmmu_late_lights_1;
}
	
switch(FEAT_TRAINS, SELF, sw_121_late_lights, num_vehs_in_consist){
	1: spriteset_121_late_l;
	sw_dmmu_late_lights121;
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_green_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_dmmu_blue_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_dmmu_mail_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_bg_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_rr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE);
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_silverlink_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN);
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_atw_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE);
}

random_switch(FEAT_TRAINS, SELF, sw_dmmu_cr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_LIGHT_BLUE);
}

switch(FEAT_TRAINS, SELF, sw_dmmu_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	101: return CB_RESULT_ATTACH_ALLOW;
	115: return CB_RESULT_ATTACH_ALLOW;
	121: return CB_RESULT_ATTACH_ALLOW;
	123: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_DMMU_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_mail_dmmu_coupling_restrictions, vehicle_type_id) {
    9001: return CB_RESULT_ATTACH_ALLOW;
	115: return CB_RESULT_ATTACH_ALLOW;
	121: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_DMMU_MAIL_NO_COUPLE);
}

			//Code for class 101/Metro Cammell Regional DMU

switch(FEAT_TRAINS, SELF, sw_101_purchase, current_year){
	1948 .. 1966: spriteset_101_purchase_green;
	1967 .. 1973: spriteset_101_purchase_brb;
	1974 .. 1978: spriteset_101_purchase_ref;
	1979 .. 1983: spriteset_101_purchase_brg;
	spriteset_101_purchase_rr;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_d, cargo_subtype){
	0: spriteset_101_green_d;
	1: spriteset_101_brb_d;
	2: spriteset_101_ref_d;
	3: spriteset_101_brg_d;
	4: spriteset_101_rr_d;
	5: spriteset_101_nse_d;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_selector_d, current_year){
	1948 .. 1966: spriteset_101_green_d;
	1967 .. 1973: spriteset_101_brb_d;
	1974 .. 1978: spriteset_101_ref_d;
	1979 .. 1983: spriteset_101_brg_d;
	spriteset_101_rr_d;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_t, cargo_subtype){
	0: spriteset_101_green_t;
	1: spriteset_101_brb_t;
	2: spriteset_101_ref_t;
	3: spriteset_101_brg_t;
	4: spriteset_101_rr_t;
	5: spriteset_101_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_selector_t, current_year){
	1948 .. 1966: spriteset_101_green_t;
	1967 .. 1973: spriteset_101_brb_t;
	1974 .. 1978: spriteset_101_ref_t;
	1979 .. 1983: spriteset_101_brg_t;
	spriteset_101_rr_t;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_auto_decider_d, livery_choice){
	1: sw_101_livery_d;
	sw_101_livery_selector_d;
}

switch(FEAT_TRAINS, SELF, sw_101_livery_auto_decider_t, livery_choice){
	1: sw_101_livery_t;
	sw_101_livery_selector_t;
}

switch(FEAT_TRAINS, SELF, sw_101_lights, cargo_subtype){
	0: sw_dmmu_early_lights;
	sw_dmmu_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_101_lights_selector, current_year){
	1948 .. 1966: sw_dmmu_early_lights;
	sw_dmmu_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_101_lights_auto_decider, livery_choice){
	1: sw_101_lights;
	sw_101_lights_selector;
}

switch(FEAT_TRAINS, SELF, sw_101_default_d, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_101_livery_auto_decider_d;
	1 : sw_101_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_101_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_101_livery_auto_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_101_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	2: return string(STR_LIVERY_BRBLUE_REFURB_DMU);
	3: return string(STR_LIVERY_BRBLUEGREY);
	4: return string(STR_LIVERY_REG_RAILWAYS);
	5: return string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_101_refit_text_auto_decider, livery_choice){
	1: sw_101_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_101_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	1967 .. 1973: sw_dmmu_blue_colour_mapping;
	1974 .. 1978: sw_dmmu_bg_colour_mapping;
	1979 .. 1983: sw_dmmu_bg_colour_mapping;
	sw_dmmu_rr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_101_manual_recolour, cargo_subtype){
	0: sw_dmmu_green_colour_mapping;
	1: sw_dmmu_blue_colour_mapping;
	2: sw_dmmu_bg_colour_mapping;
	3: sw_dmmu_bg_colour_mapping;
	4: sw_dmmu_rr_colour_mapping;
	5: sw_dmmu_nse_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_101_recolour_auto_decider, livery_choice){
	1: sw_101_manual_recolour;
	sw_101_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_101_recolour_decider, colour_scheme_1){
	1: sw_101_recolour_auto_decider;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_101, 101) {
	property {
		name: 							string(STR_NAME_101);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					15;
		cost_factor:					30;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							224 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							33 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.05;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				190;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_dmmu_coupling_restrictions;
		default: 							sw_101_default_d;
		purchase:							sw_101_purchase;
		cargo_subtype_text:					sw_101_refit_text_auto_decider ;
		colour_mapping:						sw_101_recolour_decider ;
		purchase_colour_mapping:			sw_101_auto_recolour ;
		sound_effect:						sw_sfx_extension_25_check ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
		additional_text:					return string(STR_BLUE_SQUARE);
		create_effect           		: vfx_diesel_default ;
}
		livery_override (item_Mk1) {
		cargo_capacity: 60;
		default: sw_101_default_t;
		colour_mapping:	sw_101_recolour_decider;
		cargo_subtype_text: sw_101_refit_text_auto_decider ;
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_101, 101){
	property{
		name                           : string(STR_NAME_101_ALT) ;
	}
}
}

			//Code for class 115/BR (Derby) Suburban DMU//

switch(FEAT_TRAINS, SELF, sw_115_purchase, current_year){
	1948 .. 1966: spriteset_115_purchase_green;
	1967 .. 1973: spriteset_115_purchase_brb;
	1974 .. 1978: spriteset_115_purchase_ref;
	1979 .. 1983: spriteset_115_purchase_brg;
	spriteset_115_purchase_rr;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_livery_d, cargo_subtype){
	0: spriteset_115_green_d;
	1: spriteset_115_brb_d;
	2: spriteset_115_ref_d;
	3: spriteset_115_brg_d;
	4: spriteset_115_rr_d;
	5: spriteset_115_nse_d;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_livery_selector_d, current_year){
	1948 .. 1966: spriteset_115_green_d;
	1967 .. 1973: spriteset_115_brb_d;
	1974 .. 1978: spriteset_115_ref_d;
	1979 .. 1983: spriteset_115_brg_d;
	spriteset_115_rr_d;
}

switch(FEAT_TRAINS, SELF, sw_115_livery_t, cargo_subtype){
	0: spriteset_115_green_t;
	1: spriteset_115_brb_t;
	2: spriteset_115_ref_t;
	3: spriteset_115_brg_t;
	4: spriteset_115_rr_t;
	5: spriteset_115_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_115_livery_selector_t, current_year){
	1948 .. 1966: spriteset_115_green_t;
	1967 .. 1973: spriteset_115_brb_t;
	1974 .. 1978: spriteset_115_ref_t;
	1979 .. 1983: spriteset_115_brg_t;
	spriteset_115_rr_t;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_livery_auto_decider_d, livery_choice){
	1: sw_pass_115_livery_d;
	sw_pass_115_livery_selector_d;
}

switch(FEAT_TRAINS, SELF, sw_115_livery_auto_decider_t, livery_choice){
	1: sw_115_livery_t;
	sw_115_livery_selector_t;
}

switch(FEAT_TRAINS, SELF, sw_115_lights, cargo_subtype){
	0: sw_dmmu_early_lights;
	sw_dmmu_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_115_lights_selector, current_year){
	1948 .. 1966: sw_dmmu_early_lights;
	sw_dmmu_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_115_lights_auto_decider, livery_choice){
	1: sw_115_lights;
	sw_115_lights_selector;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_livery_d, cargo_subtype){
	0: spriteset_115_green_d;
	1: spriteset_115_brb_d;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_livery_selector_d, current_year){
	1948 .. 1966: spriteset_115_green_d;
	spriteset_115_brb_d;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_livery_auto_decider_d, livery_choice){
	1: sw_mail_115_livery_d;
	sw_mail_115_livery_selector_d;
}


switch(FEAT_TRAINS, SELF, sw_115_pass_default_d, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_pass_115_livery_auto_decider_d;
	1 : sw_115_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_default_d, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mail_115_livery_auto_decider_d;
	1 : sw_115_lights_auto_decider;
	2 : spriteset_115_mail_overlay;
}

switch(FEAT_TRAINS, SELF, sw_115_default_d, cargo_type_in_veh){
	MAIL: sw_mail_115_default_d;
	sw_115_pass_default_d;
}

switch(FEAT_TRAINS, SELF, sw_115_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_115_livery_auto_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	2: return string(STR_LIVERY_BRBLUE_REFURB_DMU);
	3: return string(STR_LIVERY_BRBLUEGREY);
	4: return string(STR_LIVERY_REG_RAILWAYS);
	5: return string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT ;
}
switch(FEAT_TRAINS, SELF, sw_mail_115_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_115_refit_text, cargo_type_in_veh){
	MAIL: sw_mail_115_refit_text;
	sw_pass_115_refit_text;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_refit_text_auto_decider, livery_choice){
	1: sw_115_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_refit_text_auto_decider, livery_choice){
	1: sw_115_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_115_refit_text_auto_decider, cargo_type_in_veh){
	MAIL: sw_mail_115_refit_text_auto_decider;
	sw_pass_115_refit_text_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_pass_115_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	1967 .. 1973: sw_dmmu_blue_colour_mapping;
	1974 .. 1978: sw_dmmu_bg_colour_mapping;
	1979 .. 1983: sw_dmmu_bg_colour_mapping;
	sw_dmmu_rr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_mail_115_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	sw_dmmu_blue_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_115_auto_recolour, cargo_type_in_veh){
	MAIL: sw_mail_115_auto_recolour;
	sw_pass_115_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_115_manual_recolour, cargo_subtype){
	0: sw_dmmu_green_colour_mapping;
	1: sw_dmmu_blue_colour_mapping;
	2: sw_dmmu_bg_colour_mapping;
	3: sw_dmmu_bg_colour_mapping;
	4: sw_dmmu_rr_colour_mapping;
	5: sw_dmmu_nse_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_115_recolour_auto_decider, livery_choice){
	1: sw_115_manual_recolour;
	sw_115_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_115_recolour_decider, colour_scheme_1){
	1: sw_115_recolour_auto_decider;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_115_coupling_restrictions, cargo_type_in_veh){
	MAIL: sw_mail_dmmu_coupling_restrictions;
	sw_dmmu_coupling_restrictions;
}

item (FEAT_TRAINS, item_115, 115) {
	property {
		name: 							string(STR_NAME_115);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1960, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR, MAIL];
		loading_speed:					20;
		cost_factor:					33;
		running_cost_factor:			18;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							460 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							38 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.05;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				150;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_115_coupling_restrictions;
		default: 							sw_115_default_d;
		purchase:							sw_115_purchase;
		cargo_subtype_text:					sw_115_refit_text_auto_decider ;
		colour_mapping:						sw_115_recolour_decider ;
		purchase_colour_mapping:			sw_115_auto_recolour ;
		sound_effect:						sw_sfx_extension_25_check ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 33) ;
		purchase_running_cost_factor : 30;
		additional_text:					return string(STR_BLUE_SQUARE);
		create_effect           		: vfx_diesel_default ;
}
		livery_override (item_Mk1) {
		cargo_capacity: 100;
		default: sw_115_default_t;
		colour_mapping:	sw_115_recolour_decider;
		cargo_subtype_text: sw_115_refit_text_auto_decider ;
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_115, 115){
	property{
		name                           : string(STR_NAME_115_ALT) ;
	}
}
}

			//Code for class 121/Pressed Steel Co. "Bubble Car"
switch(FEAT_TRAINS, SELF, sw_121_purchase, current_year){
	1948 .. 1966: spriteset_121_purchase_green;
	1967 .. 1973: spriteset_121_purchase_brb;
	1974 .. 1978: spriteset_121_purchase_ref;
	1979 .. 1983: spriteset_121_purchase_brg;
	spriteset_121_purchase_rr;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_livery, cargo_subtype){
	0: spriteset_121_green;
	1: spriteset_121_brb;
	2: spriteset_121_ref;
	3: spriteset_121_brg;
	4: spriteset_121_rr;
	5: spriteset_121_nse;
	6: spriteset_121_silverlink;
	7: spriteset_121_atw;
	8: spriteset_121_cr;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_livery_selector, current_year){
	1948 .. 1966: spriteset_121_green;
	1967 .. 1973: spriteset_121_brb;
	1974 .. 1978: spriteset_121_ref;
	1979 .. 1983: spriteset_121_brg;
	1983 .. 1995: spriteset_121_rr;
	spriteset_121_atw;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_livery_auto_decider, livery_choice){
	1: sw_pass_121_livery;
	sw_pass_121_livery_selector;
}

switch(FEAT_TRAINS, SELF, sw_121_lights, cargo_subtype){
	0: sw_121_early_lights;
	sw_121_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_121_lights_selector, current_year){
	1948 .. 1966: sw_121_early_lights;
	sw_121_late_lights;
}

switch(FEAT_TRAINS, SELF, sw_121_lights_auto_decider, livery_choice){
	1: sw_121_lights;
	sw_121_lights_selector;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_livery, cargo_subtype){
	0: spriteset_128_green;
	1: spriteset_128_brb;
	2: spriteset_128_mail;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_livery_selector, current_year){
	1948 .. 1966: spriteset_128_green;
	1967 .. 1973: spriteset_128_brb;
	spriteset_128_mail;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_livery_auto_decider, livery_choice){
	1: sw_mail_121_livery;
	sw_mail_121_livery_selector;
}


switch(FEAT_TRAINS, SELF, sw_121_pass_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_pass_121_livery_auto_decider;
	1 : sw_121_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_mail_121_livery_auto_decider;
	1 : sw_121_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_121_default, cargo_type_in_veh){
	MAIL: sw_mail_121_default;
	sw_121_pass_default;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	2: return string(STR_LIVERY_BRBLUE_REFURB_DMU);
	3: return string(STR_LIVERY_BRBLUEGREY);
	4: return string(STR_LIVERY_REG_RAILWAYS);
	5: return string(STR_LIVERY_NSE);
	6: return string(STR_LIVERY_SILVERLINK);
	7: return string(STR_LIVERY_ATW);
	8: return string(STR_LIVERY_CHILTERN);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUE);
	2: return string(STR_LIVERY_ROYAL_MAIL);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_121_refit_text, cargo_type_in_veh){
	MAIL: sw_mail_121_refit_text;
	sw_pass_121_refit_text;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_refit_text_auto_decider, livery_choice){
	1: sw_121_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_refit_text_auto_decider, livery_choice){
	1: sw_121_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_121_refit_text_auto_decider, cargo_type_in_veh){
	MAIL: sw_mail_121_refit_text_auto_decider;
	sw_pass_121_refit_text_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	1967 .. 1973: sw_dmmu_blue_colour_mapping;
	1974 .. 1978: sw_dmmu_bg_colour_mapping;
	1979 .. 1983: sw_dmmu_bg_colour_mapping;
	1983 .. 1995: sw_dmmu_rr_colour_mapping;
	sw_dmmu_atw_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	sw_dmmu_blue_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_121_auto_recolour, cargo_type_in_veh){
	MAIL: sw_mail_121_auto_recolour;
	sw_pass_121_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_pass_121_manual_recolour, cargo_subtype){
	0: sw_dmmu_green_colour_mapping;
	1: sw_dmmu_blue_colour_mapping;
	2: sw_dmmu_bg_colour_mapping;
	3: sw_dmmu_bg_colour_mapping;
	4: sw_dmmu_rr_colour_mapping;
	5: sw_dmmu_nse_colour_mapping;
	6: sw_dmmu_silverlink_colour_mapping;
	7: sw_dmmu_atw_colour_mapping;
	8: sw_dmmu_cr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_mail_121_manual_recolour, cargo_subtype){
	0: sw_dmmu_green_colour_mapping;
	1: sw_dmmu_blue_colour_mapping;
	2: sw_dmmu_mail_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_121_manual_recolour, cargo_type_in_veh){
	MAIL: sw_mail_121_manual_recolour;
	sw_pass_121_manual_recolour;
}

switch(FEAT_TRAINS, SELF, sw_121_recolour_auto_decider, livery_choice){
	1: sw_121_manual_recolour;
	sw_121_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_121_recolour_decider, colour_scheme_1){
	1: sw_121_recolour_auto_decider;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_121_coupling_restrictions, cargo_type_in_veh){
	MAIL: sw_mail_dmmu_coupling_restrictions;
	sw_dmmu_coupling_restrictions;
}

item (FEAT_TRAINS, item_121, 121) {
	property {
		name: 							string(STR_NAME_121);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1960, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR, MAIL];
		loading_speed:					20;
		cost_factor:					33;
		running_cost_factor:			18;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							300 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		default_cargo_type:				PASS;
		cargo_capacity:					65;
		weight:							38 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.05;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				150;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_121_coupling_restrictions;
		default: 							sw_121_default;
		purchase:							sw_121_purchase;
		cargo_subtype_text:					sw_121_refit_text_auto_decider ;
		colour_mapping:						sw_121_recolour_decider ;
		purchase_colour_mapping:			sw_pass_121_auto_recolour ;
		sound_effect:						sw_sfx_extension_25_check ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 33) ;
		purchase_running_cost_factor : 33;
		additional_text:					return string(STR_BLUE_SQUARE);
		create_effect           		: vfx_diesel_default ;
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_121, 121){
	property{
		name                           : string(STR_NAME_121_ALT) ;
	}
}
}
			//Code for class 123/BR (Swindon) Cross Country Express DMU
switch(FEAT_TRAINS, SELF, sw_123_purchase, current_year){
	1948 .. 1966: spriteset_123_purchase_green;
	spriteset_123_purchase_brg;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_d, cargo_subtype){
	0: spriteset_123_green;
	1: spriteset_123_brg;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_selector_d, current_year){
	1948 .. 1966: spriteset_123_green;
	spriteset_123_brg;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_t, cargo_subtype){
	0: spriteset_101_green_t;
	1: spriteset_101_brg_t;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_selector_t, current_year){
	1948 .. 1966: spriteset_101_green_t;
	spriteset_101_brg_t;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_auto_decider_d, livery_choice){
	1: sw_123_livery_d;
	sw_123_livery_selector_d;
}

switch(FEAT_TRAINS, SELF, sw_123_livery_auto_decider_t, livery_choice){
	1: sw_123_livery_t;
	sw_123_livery_selector_t;
}

switch(FEAT_TRAINS, SELF, sw_123_lights_1, position_in_consist){
	0: spriteset_123_late_hl;
}
	
switch(FEAT_TRAINS, SELF, sw_123_lights, position_in_consist_from_end){
	0: spriteset_dmmu_late_tl;
	sw_123_lights_1;
}

switch(FEAT_TRAINS, SELF, sw_123_manual_lights, cargo_subtype){
	0: sw_dmmu_early_lights;
	sw_123_lights;
}

switch(FEAT_TRAINS, SELF, sw_123_lights_selector, current_year){
	1948 .. 1966: sw_dmmu_early_lights;
	sw_123_lights;
}

switch(FEAT_TRAINS, SELF, sw_123_lights_auto_decider, livery_choice){
	1: sw_123_manual_lights;
	sw_123_lights_selector;
}

switch(FEAT_TRAINS, SELF, sw_123_default_d, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_123_livery_auto_decider_d;
	1 : sw_123_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_123_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_123_livery_auto_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_123_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRGREEN);
	1: return string(STR_LIVERY_BRBLUEGREY);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_123_refit_text_auto_decider, livery_choice){
	1: sw_123_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_123_auto_recolour, current_year){
	1948 .. 1966: sw_dmmu_green_colour_mapping;
	sw_dmmu_bg_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_123_manual_recolour, cargo_subtype){
	0: sw_dmmu_green_colour_mapping;
	1: sw_dmmu_bg_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_123_recolour_auto_decider, livery_choice){
	1: sw_123_manual_recolour;
	sw_123_auto_recolour;
}

switch(FEAT_TRAINS, SELF, sw_123_recolour_decider, colour_scheme_1){
	1: sw_123_recolour_auto_decider;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_123, 123) {
	property {
		name: 							string(STR_NAME_123);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1963, 1, 1);
		model_life:						50;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					15;
		cost_factor:					35;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							460 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					32;
		weight:							41 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.05;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				250;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_dmmu_coupling_restrictions;
		default: 							sw_123_default_d;
		purchase:							sw_123_purchase;
		cargo_subtype_text:					sw_123_refit_text_auto_decider ;
		colour_mapping:						sw_123_recolour_decider ;
		purchase_colour_mapping:			sw_123_auto_recolour ;
		sound_effect:						sw_sfx_extension_25_check ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 35) ;
		purchase_running_cost_factor : 35;
		additional_text:					return string(STR_BLUE_SQUARE);
		create_effect           		: vfx_diesel_default ;
}
		livery_override (item_Mk1) {
		cargo_capacity: 60;
		default: sw_123_default_t;
		colour_mapping:	sw_123_recolour_decider;
		cargo_subtype_text: sw_123_refit_text_auto_decider ;
		power:				172; //Note unit of kW
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_123, 123){
	property{
		name                           : string(STR_NAME_123_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/class_142_2.pnml" 1

//dd - 142 - Regional Railways
//01 - 142 - BR Provincial
//02 - 142 - Merseyrail
//03 - 142 - Valley Lines
//04 - 142 - Arriva Trains Northern
//05 - 142 - Northern Spirit
//06 - 142 - Northern Rail
//07 - 143 - Regional Railways
//08 - 143 - BR Provincial
//09 - 143 - Merseyrail
//10 - 143 - Valley Lines
//11 - 144 - Northern Rail
//12 - 143 - FGW Plain
//13 - 143 - FGW Local Lines
//14 - 143 - Arriva Trains Wales
//15 - 143 - ATW Executive

spriteset(spriteset_142_rr_,			"gfx/DMU/pacer2.png")	{template_7_8(244,	25)}
spriteset(spriteset_142_brp,			"gfx/DMU/pacer2.png")	{template_7_8(244,	50)}
spriteset(spriteset_142_msy,			"gfx/DMU/pacer2.png")	{template_7_8(244,	75)}
spriteset(spriteset_142_val,			"gfx/DMU/pacer2.png")	{template_7_8(244,	100)}
spriteset(spriteset_142_ntr,			"gfx/DMU/pacer2.png")	{template_7_8(244,	125)}
spriteset(spriteset_142_atn,			"gfx/DMU/pacer2.png")	{template_7_8(244,	150)}
spriteset(spriteset_142_atw,			"gfx/DMU/pacer2.png")	{template_7_8(244,	175)}
spriteset(spriteset_142_nts,			"gfx/DMU/pacer2.png")	{template_7_8(244,	250)}

spriteset(spriteset_143_rr_,			"gfx/DMU/pacer2.png")	{template_7_8(0,	25)}
spriteset(spriteset_143_brp,			"gfx/DMU/pacer2.png")	{template_7_8(0,	50)}
spriteset(spriteset_143_msy,			"gfx/DMU/pacer2.png")	{template_7_8(0,	75)}
spriteset(spriteset_143_val,			"gfx/DMU/pacer2.png")	{template_7_8(0,	100)}
spriteset(spriteset_144_ntr,			"gfx/DMU/pacer2.png")	{template_7_8(0,	125)}
spriteset(spriteset_143_atw,			"gfx/DMU/pacer2.png")	{template_7_8(0,	150)}
spriteset(spriteset_143_fgw,			"gfx/DMU/pacer2.png")	{template_7_8(0,	175)}
spriteset(spriteset_143_fll,			"gfx/DMU/pacer2.png")	{template_7_8(0,	200)}
spriteset(spriteset_143_atx,			"gfx/DMU/pacer2.png")	{template_7_8(0,	225)}

spriteset(spriteset_142_rr__trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	25)}
spriteset(spriteset_142_brp_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	50)}
spriteset(spriteset_142_msy_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	75)}
spriteset(spriteset_142_val_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	100)}
spriteset(spriteset_142_ntr_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	125)}
spriteset(spriteset_142_atn_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	150)}
spriteset(spriteset_143_fgw_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	175)}
spriteset(spriteset_143_fll_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	200)}
spriteset(spriteset_143_atx_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	225)}
spriteset(spriteset_142_nts_trailer,	"gfx/DMU/pacer2.png")	{template_7_4(163,	250)}

spriteset(spriteset_142_headlight,		"gfx/DMU/pacer2.png")	{template_7_8(407,	0)}
spriteset(spriteset_142_taillight,		"gfx/DMU/pacer2.png")	{template_7_8(407,	25)}
spriteset(spriteset_143_headlight,		"gfx/DMU/pacer2.png")	{template_7_8(407,	50)}
spriteset(spriteset_143_taillight,		"gfx/DMU/pacer2.png")	{template_7_8(407,	75)}

spriteset(spriteset_142_purchase_rr_, "gfx/DMU/pacer2.png") {template_dualhead_purchase(244, 200)}
spriteset(spriteset_142_purchase_nts, "gfx/DMU/pacer2.png") {template_dualhead_purchase(244, 213)}
spriteset(spriteset_142_purchase_ntr, "gfx/DMU/pacer2.png") {template_dualhead_purchase(244, 226)}



//Graphics


switch(FEAT_TRAINS, SELF, sw_142_rr__id_check	, vehicle_type_id ){ 9020 : spriteset_142_rr__trailer ; spriteset_142_rr_ ;}
switch(FEAT_TRAINS, SELF, sw_142_brp_id_check	, vehicle_type_id ){ 9020 : spriteset_142_brp_trailer ; spriteset_142_brp ;}
switch(FEAT_TRAINS, SELF, sw_142_msy_id_check	, vehicle_type_id ){ 9020 : spriteset_142_msy_trailer ; spriteset_142_msy ;}
switch(FEAT_TRAINS, SELF, sw_142_val_id_check	, vehicle_type_id ){ 9020 : spriteset_142_val_trailer ; spriteset_142_val ;}
switch(FEAT_TRAINS, SELF, sw_142_ntr_id_check	, vehicle_type_id ){ 9020 : spriteset_142_ntr_trailer ; spriteset_142_ntr ;}
switch(FEAT_TRAINS, SELF, sw_142_atn_id_check	, vehicle_type_id ){ 9020 : spriteset_142_atn_trailer ; spriteset_142_atn ;}
switch(FEAT_TRAINS, SELF, sw_142_atw_id_check	, vehicle_type_id ){ 9020 : spriteset_142_atn_trailer ; spriteset_142_atw ;}
switch(FEAT_TRAINS, SELF, sw_142_nts_id_check	, vehicle_type_id ){ 9020 : spriteset_142_nts_trailer ; spriteset_142_nts ;}

switch(FEAT_TRAINS, SELF, sw_143_rr__id_check	, vehicle_type_id ){ 9020 : spriteset_142_rr__trailer ; spriteset_143_rr_ ;}
switch(FEAT_TRAINS, SELF, sw_143_brp_id_check	, vehicle_type_id ){ 9020 : spriteset_142_brp_trailer ; spriteset_143_brp ;}
switch(FEAT_TRAINS, SELF, sw_143_msy_id_check	, vehicle_type_id ){ 9020 : spriteset_142_msy_trailer ; spriteset_143_msy ;}
switch(FEAT_TRAINS, SELF, sw_143_val_id_check	, vehicle_type_id ){ 9020 : spriteset_142_val_trailer ; spriteset_143_val ;}
switch(FEAT_TRAINS, SELF, sw_144_ntr_id_check	, vehicle_type_id ){ 9020 : spriteset_142_ntr_trailer ; spriteset_144_ntr ;}
switch(FEAT_TRAINS, SELF, sw_143_atw_id_check	, vehicle_type_id ){ 9020 : spriteset_142_atn_trailer ; spriteset_143_atw ;}
switch(FEAT_TRAINS, SELF, sw_143_fgw_id_check	, vehicle_type_id ){ 9020 : spriteset_143_fgw_trailer ; spriteset_143_fgw ;}
switch(FEAT_TRAINS, SELF, sw_143_fll_id_check	, vehicle_type_id ){ 9020 : spriteset_143_fll_trailer ; spriteset_143_fll ;}
switch(FEAT_TRAINS, SELF, sw_143_atx_id_check	, vehicle_type_id ){ 9020 : spriteset_143_atx_trailer ; spriteset_143_atx ;}



random_switch(FEAT_TRAINS, PARENT, sw_142_gfx_random_br)	{ 2 : sw_142_rr__id_check	; 1 : sw_142_brp_id_check	; }
random_switch(FEAT_TRAINS, PARENT, sw_142_gfx_random_priv)	{ 2 : sw_142_nts_id_check	; 1 : sw_142_atn_id_check	; }

switch(FEAT_TRAINS, SELF, sw_142_auto, current_year){
	1997..2004 : sw_142_gfx_random_priv ;
	2005..4096 : sw_142_ntr_id_check ;
	sw_142_gfx_random_br ;
}


switch(FEAT_TRAINS, SELF, sw_142_gfx_manual, cargo_subtype){
	1:	sw_142_brp_id_check;
	2:	sw_142_msy_id_check;
	3:	sw_142_val_id_check;
	4:	sw_142_atw_id_check;
	5:	sw_142_atn_id_check;
	6:	sw_142_ntr_id_check;
	7:	sw_142_nts_id_check;
	8:	sw_143_rr__id_check;
	9:	sw_143_brp_id_check;
	10:	sw_143_msy_id_check;
	11:	sw_143_val_id_check;
	12:	sw_144_ntr_id_check;
	13:	sw_143_fgw_id_check;
	14:	sw_143_fll_id_check;
	15:	sw_143_atw_id_check;
	16:	sw_143_atx_id_check;
	sw_142_rr__id_check ;
}

/*
	2	: sw_142_xc_id_check ;
	9	: sw_142_lm_id_check ;
	10	: sw_142_wmr_id_check ;
	sw_142_lm_id_check ;
}*/

switch(FEAT_TRAINS, SELF, sw_142_gfx_manual_check, livery_choice){
	1 : sw_142_gfx_manual ;
	sw_142_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_142_headlights, position_in_consist){ 0 : spriteset_142_headlight ;}
switch(FEAT_TRAINS, SELF, sw_142_taillights, position_in_consist_from_end){ 0 : spriteset_142_taillight ;}

switch(FEAT_TRAINS, SELF, sw_143_headlights, position_in_consist){ 0 : spriteset_143_headlight ;}
switch(FEAT_TRAINS, SELF, sw_143_taillights, position_in_consist_from_end){ 0 : spriteset_143_taillight ;}

switch(FEAT_TRAINS, SELF, sw_142_headlights_livery_check, cargo_subtype){
	8..16	: sw_143_headlights ;
	sw_142_headlights ;

}
switch(FEAT_TRAINS, SELF, sw_142_taillights_livery_check, cargo_subtype){
	8..16 : sw_143_taillights ;
	sw_142_taillights ;
}


switch(FEAT_TRAINS, SELF, sw_142_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_142_gfx_manual_check ;
	1 : sw_142_headlights_livery_check ;
	2 : sw_142_taillights_livery_check ;
}



//Colours

random_switch(FEAT_TRAINS, PARENT, sw_142_colours_random_priv)	{ dependent: sw_142_gfx_random_priv ; 2 : palette_2cc(COLOUR_BLUE, COLOUR_GREEN); 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE); }

switch(FEAT_TRAINS, SELF, sw_142_colours_auto, current_year){
	1997..2004 : sw_142_colours_random_priv;
	2005..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE);
}

switch(FEAT_TRAINS, SELF, sw_142_colours_manual, cargo_subtype){
	2:		palette_2cc(COLOUR_YELLOW, COLOUR_WHITE);
	3:		palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN);
	6:		palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	7:		palette_2cc(COLOUR_BLUE, COLOUR_GREEN);
	10:		palette_2cc(COLOUR_YELLOW, COLOUR_WHITE);
	11:		palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN);
	12:		palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	13..14:	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE);
}

switch(FEAT_TRAINS, SELF, sw_142_colours_manual_check, livery_choice){
	1 : sw_142_colours_manual ;
	sw_142_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_142_colours_2cc_check, colour_scheme_1){
	1 : sw_142_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Purchase

switch(FEAT_TRAINS, SELF, sw_142_purchse_colours_auto, current_year){
	2005..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE);
}

switch(FEAT_TRAINS, SELF, sw_142_purchse_colours_2cc_check, colour_scheme_1){
	1 : sw_142_purchse_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_142_purchase, current_year){
	1997..2004 : spriteset_142_purchase_nts;
	2005..4096 :spriteset_142_purchase_ntr;
	spriteset_142_purchase_rr_;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_142_refit_text, cargo_subtype){
	0:	string(STR_LIVERY_142_REG_RAILWAYS);
	1:	string(STR_LIVERY_142_REG_PROVINCIAL);
	2:	string(STR_LIVERY_142_MERSEYRAIL);
	3:	string(STR_LIVERY_142_VALLEY_LINES);
	4:	string(STR_LIVERY_142_ATW);
	5:	string(STR_LIVERY_142_ATN);
	6:	string(STR_LIVERY_142_NORTHERN);
	7:	string(STR_LIVERY_142_N_SPIRIT);
	8:	string(STR_LIVERY_143_REG_RAILWAYS);
	9:	string(STR_LIVERY_143_REG_PROVINCIAL);
	10:	string(STR_LIVERY_143_MERSEYRAIL);
	11:	string(STR_LIVERY_143_VALLEY_LINES);
	12:	string(STR_LIVERY_144_NORTHERN);
	13:	string(STR_LIVERY_143_FGW);
	14:	string(STR_LIVERY_143_FLL);
	15:	string(STR_LIVERY_143_ATW);
	16:	string(STR_LIVERY_143_ATW_EXEC);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_142_refit_text_decider, livery_choice){
	1 : sw_142_refit_text ;
	return CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_142_coupling_restrictions, vehicle_type_id) {
    9020: return CB_RESULT_ATTACH_ALLOW;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
    return string(STR_142_NO_COUPLE);
}


item (FEAT_TRAINS, item_142, 142) {
	property {
		name: 							string(STR_NAME_142);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1985, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					27;
		cost_factor:					20;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							336 kW;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							25 ton;
		tractive_effort_coefficient:	0.25;
		air_drag_coefficient:			0.05;
		length:							7;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				150;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_142_coupling_restrictions;
		default: 							sw_142_sprite_stack;
		purchase:							sw_142_purchase;
		purchase_colour_mapping:			sw_142_purchse_colours_2cc_check;
		create_effect:						vfx_diesel_default;
		cargo_subtype_text:					sw_142_refit_text_decider ;
		colour_mapping:						sw_142_colours_2cc_check;
		sound_effect:						sw_sfx_dmu_one;
		running_cost_factor:                return(current_speed == 0 ? 4 : 15) ;
		purchase_running_cost_factor:		return 15 ;
}
		livery_override (9020) {
		cargo_capacity: 60;
		default: sw_142_sprite_stack;
		colour_mapping:	sw_142_colours_2cc_check;
		cargo_subtype_text: sw_142_refit_text_decider ;
		power: 142;
		length: 7;
		weight: 25;
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_142, 142){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_142, 142){
	property{
		name                           : string(STR_NAME_142_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/DMU/sprinter.pnml" 1
//SPRINTERS

spriteset(gfx_150_rr				, "gfx/DMU/150_2.png"){template_Mk2_double(0,0)}
spriteset(gfx_150_rr_mid			, "gfx/DMU/150_2.png"){template_Mk2_single(0,25)}
spriteset(gfx_150_mersey			, "gfx/DMU/150_2.png"){template_Mk2_double(0,50)}
spriteset(gfx_150_mersey_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,75)}
spriteset(gfx_150_anglia			, "gfx/DMU/150_2.png"){template_Mk2_double(0,100)}
spriteset(gfx_150_anglia_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,125)}
spriteset(gfx_150_central			, "gfx/DMU/150_2.png"){template_Mk2_double(0,150)}
spriteset(gfx_150_central_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,175)}
spriteset(gfx_150_wessex			, "gfx/DMU/150_2.png"){template_Mk2_double(0,200)}
spriteset(gfx_150_wessex_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,225)}
spriteset(gfx_150_base				, "gfx/DMU/150_2.png"){template_Mk2_double(0,250)}
spriteset(gfx_150_base_mid			, "gfx/DMU/150_2.png"){template_Mk2_single(0,275)}
spriteset(gfx_150_gwr				, "gfx/DMU/150_2.png"){template_Mk2_double(0,300)}
spriteset(gfx_150_gwr_mid			, "gfx/DMU/150_2.png"){template_Mk2_single(0,325)}
spriteset(gfx_150_fgw_plain			, "gfx/DMU/150_2.png"){template_Mk2_double(0,350)}
spriteset(gfx_150_fgw_plain_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,375)}
spriteset(gfx_150_fgw				, "gfx/DMU/150_2.png"){template_Mk2_double(0,400)}
spriteset(gfx_150_fgw_mid			, "gfx/DMU/150_2.png"){template_Mk2_single(0,425)}
spriteset(gfx_150_northern_arr		, "gfx/DMU/150_2.png"){template_Mk2_double(0,450)}
spriteset(gfx_150_northern_arr_mid	, "gfx/DMU/150_2.png"){template_Mk2_single(0,475)}
spriteset(gfx_150_northern			, "gfx/DMU/150_2.png"){template_Mk2_double(0,500)}
spriteset(gfx_150_northern_mid		, "gfx/DMU/150_2.png"){template_Mk2_single(0,525)}
spriteset(gfx_150_arriva_exec		, "gfx/DMU/150_2.png"){template_Mk2_double(0,550)}
spriteset(gfx_150_arriva_exec_mid	, "gfx/DMU/150_2.png"){template_Mk2_single(0,575)}
spriteset(gfx_150_tfw				, "gfx/DMU/150_2.png"){template_Mk2_double(0,600)}
spriteset(gfx_150_tfw_mid			, "gfx/DMU/150_2.png"){template_Mk2_single(0,625)}

spriteset(gfx_150_purch_rr			, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,25)}
spriteset(gfx_150_purch_central		, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,175)}
spriteset(gfx_150_purch_wessex		, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,225)}
spriteset(gfx_150_purch_gwr			, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,325)}
spriteset(gfx_150_purch_fgw			, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,425)}
spriteset(gfx_150_purch_fgw_plain	, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,375)}
spriteset(gfx_150_purch_northern	, "gfx/DMU/150_2.png"){template_dualhead_purchase(90,525)}

spriteset(gfx_150_lights_front		, "gfx/DMU/150_2.png"){template_Mk2_double(179,0)}
spriteset(gfx_150_lights_back		, "gfx/DMU/150_2.png"){template_Mk2_double(179,25)}
spriteset(gfx_150_1_front			, "gfx/DMU/150_2.png"){template_Mk2_double(179,50)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_rr, vehicle_type_id){ 9030 : gfx_150_rr_mid ; gfx_150_rr ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_mersey, vehicle_type_id){ 9030 : gfx_150_mersey_mid ; gfx_150_mersey ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_anglia, vehicle_type_id){ 9030 : gfx_150_anglia_mid ; gfx_150_anglia ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_central, vehicle_type_id){ 9030 : gfx_150_central_mid ; gfx_150_central ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_wessex, vehicle_type_id){ 9030 : gfx_150_wessex_mid ; gfx_150_wessex ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_base, vehicle_type_id){ 9030 : gfx_150_base_mid ; gfx_150_base ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_gwr, vehicle_type_id){ 9030 : gfx_150_gwr_mid ; gfx_150_gwr ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_fgw_plain, vehicle_type_id){ 9030 : gfx_150_fgw_plain_mid ; gfx_150_fgw_plain ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_fgw, vehicle_type_id){ 9030 : gfx_150_fgw_mid ; gfx_150_fgw ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_northern_arr, vehicle_type_id){ 9030 : gfx_150_northern_arr_mid ; gfx_150_northern_arr ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_northern, vehicle_type_id){ 9030 : gfx_150_northern_mid ; gfx_150_northern ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_arriva_exec, vehicle_type_id){ 9030 : gfx_150_arriva_exec_mid ; gfx_150_arriva_exec ; }
switch(FEAT_TRAINS, SELF, sw_150_gfx_idcheck_tfw, vehicle_type_id){ 9030 : gfx_150_tfw_mid ; gfx_150_tfw ; }



// 150/2

switch(FEAT_TRAINS, SELF, sw_150_2_gfx_auto, current_year){
	1980..1996	: sw_150_gfx_idcheck_rr ;
	1997..2005	: sw_150_gfx_idcheck_wessex ;
	2006..2016	: sw_150_gfx_idcheck_fgw ;
	sw_150_gfx_idcheck_gwr ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_gfx_manual, cargo_subtype){
	0	: sw_150_gfx_idcheck_rr ;
	1	: sw_150_gfx_idcheck_central ;
	2	: sw_150_gfx_idcheck_northern_arr ;
	4	: sw_150_gfx_idcheck_fgw_plain ;
	5	: sw_150_gfx_idcheck_gwr ;
	6	: sw_150_gfx_idcheck_fgw ;
	7	: sw_150_gfx_idcheck_mersey ;
	8	: sw_150_gfx_idcheck_anglia ;
	9	: sw_150_gfx_idcheck_wessex ;
	11	: sw_150_gfx_idcheck_arriva_exec ;
	12	: sw_150_gfx_idcheck_tfw ;
	sw_150_gfx_idcheck_northern ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_gfx_manual_check, livery_choice){
	1 : sw_150_2_gfx_manual ;
	sw_150_2_gfx_auto ;
}

// 150/1

switch(FEAT_TRAINS, SELF, sw_150_1_gfx_auto, current_year){
	1980..1996	: sw_150_gfx_idcheck_rr ;
	1997..2005	: sw_150_gfx_idcheck_central ;
	2006..2016	: sw_150_gfx_idcheck_fgw_plain ;
	sw_150_gfx_idcheck_northern ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_gfx_manual, cargo_subtype){
	0	: sw_150_gfx_idcheck_rr ;
	1	: sw_150_gfx_idcheck_central ;
	2	: sw_150_gfx_idcheck_northern_arr ;
	4	: sw_150_gfx_idcheck_fgw_plain ;
	5	: sw_150_gfx_idcheck_gwr ;
	6	: sw_150_gfx_idcheck_base ;
	sw_150_gfx_idcheck_northern ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_gfx_manual_check, livery_choice){
	1 : sw_150_1_gfx_manual ;
	sw_150_1_gfx_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_150_lights_check_back, position_in_consist_from_end){ 0 : gfx_150_lights_back ; }
switch(FEAT_TRAINS, SELF, sw_150_lights_check_front, position_in_consist){ 0 : gfx_150_lights_front ;  sw_150_lights_check_back ;}

switch(FEAT_TRAINS, SELF, sw_150_2_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_150_2_gfx_manual_check ;
	1 : sw_150_lights_check_front ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_150_1_gfx_manual_check ;
	1 : gfx_150_1_front ;
	2 : sw_150_lights_check_front ;
}



//Purchase sprites

// 150/2

switch(FEAT_TRAINS, SELF, sw_150_2_purch_gfx, current_year){
	1980..1996	: gfx_150_purch_rr ;
	1997..2005	: gfx_150_purch_wessex ;
	2006..2016	: gfx_150_purch_fgw ;
	gfx_150_purch_gwr ;
}

// 150/1

switch(FEAT_TRAINS, SELF, sw_150_1_purch_gfx, current_year){
	1980..1996	: gfx_150_purch_rr ;
	1997..2005	: gfx_150_purch_central ;
	2006..2016	: gfx_150_purch_fgw_plain ;
	gfx_150_purch_northern ;
}


//Refit text

// 150/2

switch(FEAT_TRAINS, SELF, sw_150_2_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_REG_RAILWAYS) ;
	1	: string(STR_LIVERY_CENTRAL) ;
	2	: string(STR_LIVERY_NORTHERN) ;
	3	: string(STR_LIVERY_NORTHERN_ARRIVA) ;
	4	: string(STR_LIVERY_FIRST_PLAIN) ;
	5	: string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6	: string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	7	: string(STR_LIVERY_MERSEYRAIL) ;
	8	: string(STR_LIVERY_ANGLIA_RAIL) ;
	9	: string(STR_LIVERY_WESSEX_TRAINS) ;
	10	: string(STR_LIVERY_ATW) ;
	11	: string(STR_LIVERY_ATW_EXEC) ;
	12	: string(STR_LIVERY_TFW) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_refit_text_check, livery_choice){
	1 : sw_150_2_refit_text ;
	CB_RESULT_NO_TEXT ;
}

// 150/1

switch(FEAT_TRAINS, SELF, sw_150_1_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_REG_RAILWAYS) ;
	1	: string(STR_LIVERY_CENTRAL) ;
	2	: string(STR_LIVERY_NORTHERN) ;
	3	: string(STR_LIVERY_NORTHERN_ARRIVA) ;
	4	: string(STR_LIVERY_FIRST_PLAIN) ;
	5	: string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6	: string(STR_LIVERY_NETWORK_RAIL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_refit_text_check, livery_choice){
	1 : sw_150_1_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping


// 150/2

switch(FEAT_TRAINS, SELF, sw_150_2_col_auto, current_year){
	1980..1996	: palette_1cc(COLOUR_DARK_BLUE) ;
	1997..2005	: palette_2cc(COLOUR_RED, COLOUR_PALE_GREEN) ;
	2006..2016	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_col_manual, cargo_subtype){
	0	: palette_1cc(COLOUR_DARK_BLUE) ;
	1	: palette_1cc(COLOUR_DARK_BLUE) ;
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	5	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	6	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	7	: palette_2cc(COLOUR_YELLOW, COLOUR_WHITE) ;
	8	: palette_2cc(COLOUR_BLUE, COLOUR_PALE_GREEN) ;
	9	: palette_2cc(COLOUR_RED, COLOUR_PALE_GREEN) ;
	10	: palette_2cc(COLOUR_WHITE, COLOUR_BLUE) ;
	11	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	12	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_col_manual_check, livery_choice){
	1 : sw_150_2_col_manual ;
	sw_150_2_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_150_2_col_2cc_check, colour_scheme_1){
	1 : sw_150_2_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

// 150/1

switch(FEAT_TRAINS, SELF, sw_150_1_col_auto, current_year){
	1980..1996	: palette_1cc(COLOUR_DARK_BLUE) ;
	1997..2005	: palette_1cc(COLOUR_DARK_BLUE) ;
	2006..2016	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_col_manual, cargo_subtype){
	0	: palette_1cc(COLOUR_DARK_BLUE) ;
	1	: palette_1cc(COLOUR_DARK_BLUE) ;
	4	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	5	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	6	: palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_col_manual_check, livery_choice){
	1 : sw_150_1_col_manual ;
	sw_150_1_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_150_1_col_2cc_check, colour_scheme_1){
	1 : sw_150_1_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Items

switch(FEAT_TRAINS, SELF, sw_150_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	168	 : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_150_NO_COUPLE) ;
}


///150 /2

item(FEAT_TRAINS, item_sprinter, 150){
	property{
		name                           : string(STR_NAME_150_2) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1984,1,1) ;
		model_life                     : 40 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 6 ;
		cost_factor                    : 47 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 85 ;
		loading_speed                  : 25 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 416 kW ;
		weight                         : 36 ton ;
		tractive_effort_coefficient    : 0.28 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER ;
	}
	graphics{
		default                 		: sw_150_2_spr_stack ;
		purchase                		: sw_150_2_purch_gfx ;
		sound_effect            		: sw_sfx_dmu_one ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_150_2_col_2cc_check ;
		purchase_colour_mapping 		: sw_150_2_col_auto ;
		cargo_subtype_text      		: sw_150_2_refit_text_check ;
		can_attach_wagon        		: sw_150_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 10 : 30) ;
		purchase_running_cost_factor	: 30 ;
	}
	livery_override (9030){
		default                     : sw_150_2_spr_stack ;
		colour_mapping              : sw_150_2_col_2cc_check ;
		cargo_capacity              : 85 ;
		power                       : 206 ;
		cargo_subtype_text          : sw_150_2_refit_text_check ;
		weight                      : 39 ;
		create_effect           	: vfx_diesel_default ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_sprinter, 150){
	property{
		name                           : string(STR_NAME_150_2_ALT) ;
	}
}
}



//150 /1


item(FEAT_TRAINS, item_sprinter_1, 151){
	property{
		name                           : string(STR_NAME_150_1) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1984,1,1) ;
		model_life                     : 40 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 6 ;
		cost_factor                    : 47 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 85 ;
		loading_speed                  : 25 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 416 kW ;
		weight                         : 36 ton ;
		tractive_effort_coefficient    : 0.23 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER ;
        variant_group:					150;
	}
	graphics{
		default                 		: sw_150_1_spr_stack ;
		purchase                		: sw_150_1_purch_gfx ;
		sound_effect            		: sw_sfx_dmu_one ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_150_1_col_2cc_check ;
		purchase_colour_mapping 		: sw_150_1_col_auto ;
		cargo_subtype_text      		: sw_150_1_refit_text_check ;
		can_attach_wagon        		: sw_150_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 10 : 30) ;
		purchase_running_cost_factor	: 30 ;
	}
	livery_override (9030){
		default                     : sw_150_1_spr_stack ;
		colour_mapping              : sw_150_1_col_2cc_check ;
		cargo_capacity              : 85 ;
		power                       : 100 ;
		cargo_subtype_text          : sw_150_1_refit_text_check ;
		weight                      : 39 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect           : vfx_diesel_default ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_sprinter_1, 151){
	property{
		name                           : string(STR_NAME_150_1_ALT) ;
	}
}
}



if (vehicle_selection < 3){
item (FEAT_TRAINS, item_sprinter_1, 151){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/dogbox.pnml" 1
//Dogbox!


spriteset(gfx_153_base				,"gfx/DMU/class_153.png"){template_Mk2_double(0,0)}
spriteset(gfx_153_base_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,0)}
spriteset(gfx_153_rr				,"gfx/DMU/class_153.png"){template_Mk2_double(0,25)}
spriteset(gfx_153_rr_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_153_emt				,"gfx/DMU/class_153.png"){template_Mk2_double(0,50)}
spriteset(gfx_153_emt_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_153_central			,"gfx/DMU/class_153.png"){template_Mk2_double(0,75)}
spriteset(gfx_153_central_rev		,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_153_anglia			,"gfx/DMU/class_153.png"){template_Mk2_double(0,100)}
spriteset(gfx_153_anglia_rev		,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,100)}
spriteset(gfx_153_one				,"gfx/DMU/class_153.png"){template_Mk2_double(0,125)}
spriteset(gfx_153_one_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_153_north				,"gfx/DMU/class_153.png"){template_Mk2_double(0,150)}
spriteset(gfx_153_north_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,150)}
spriteset(gfx_153_north_arr			,"gfx/DMU/class_153.png"){template_Mk2_double(0,175)}
spriteset(gfx_153_north_arr_rev		,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,175)}
spriteset(gfx_153_gwr				,"gfx/DMU/class_153.png"){template_Mk2_double(0,200)}
spriteset(gfx_153_gwr_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,200)}
spriteset(gfx_153_fgw				,"gfx/DMU/class_153.png"){template_Mk2_double(0,225)}
spriteset(gfx_153_fgw_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,225)}
spriteset(gfx_153_atw				,"gfx/DMU/class_153.png"){template_Mk2_double(0,250)}
spriteset(gfx_153_atw_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,250)}
spriteset(gfx_153_tfw				,"gfx/DMU/class_153.png"){template_Mk2_double(0,275)}
spriteset(gfx_153_tfw_rev			,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(0,275)}


//Graphics switches

/* //Reverse & position checks

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_rr, vehicle_is_reversed){ 1 : gfx_153_rr_rev ; gfx_153_rr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_rr, vehicle_is_reversed){ 1 : gfx_153_rr ; gfx_153_rr_rev ; }

// rr

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_rr, position_in_vehid_chain){ 0 : gfx_153_rr_rev ; sw_153_gfx_rev_b_rr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_rr, position_in_vehid_chain_from_end){ 0 : gfx_153_rr_rev ; sw_153_gfx_pos_check_m_rr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_rr, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_rr ; gfx_153_rr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_rr, position_in_consist){ 0 : sw_153_gfx_pos_check_f_rr ; sw_153_gfx_pos_check_b_rr ;}

// emt

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_emt, vehicle_is_reversed){ 1 : gfx_153_emt_rev ; gfx_153_emt ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_emt, vehicle_is_reversed){ 1 : gfx_153_emt ; gfx_153_emt_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_emt, position_in_vehid_chain){ 0 : gfx_153_emt_rev ; sw_153_gfx_rev_b_emt ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_emt, position_in_vehid_chain_from_end){ 0 : gfx_153_emt_rev ; sw_153_gfx_pos_check_m_emt ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_emt, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_emt ; gfx_153_emt ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_emt, position_in_consist){ 0 : sw_153_gfx_pos_check_f_emt ; sw_153_gfx_pos_check_b_emt ;}

// central

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_central, vehicle_is_reversed){ 1 : gfx_153_central_rev ; gfx_153_central ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_central, vehicle_is_reversed){ 1 : gfx_153_central ; gfx_153_central_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_central, position_in_vehid_chain){ 0 : gfx_153_central_rev ; sw_153_gfx_rev_b_central ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_central, position_in_vehid_chain_from_end){ 0 : gfx_153_central_rev ; sw_153_gfx_pos_check_m_central ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_central, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_central ; gfx_153_central ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_central, position_in_consist){ 0 : sw_153_gfx_pos_check_f_central ; sw_153_gfx_pos_check_b_central ;}

// anglia

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_anglia, vehicle_is_reversed){ 1 : gfx_153_anglia_rev ; gfx_153_anglia ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_anglia, vehicle_is_reversed){ 1 : gfx_153_anglia ; gfx_153_anglia_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_anglia, position_in_vehid_chain){ 0 : gfx_153_anglia_rev ; sw_153_gfx_rev_b_anglia ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_anglia, position_in_vehid_chain_from_end){ 0 : gfx_153_anglia_rev ; sw_153_gfx_pos_check_m_anglia ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_anglia, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_anglia ; gfx_153_anglia ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_anglia, position_in_consist){ 0 : sw_153_gfx_pos_check_f_anglia ; sw_153_gfx_pos_check_b_anglia ;}

// one

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_one, vehicle_is_reversed){ 1 : gfx_153_one_rev ; gfx_153_one ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_one, vehicle_is_reversed){ 1 : gfx_153_one ; gfx_153_one_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_one, position_in_vehid_chain){ 0 : gfx_153_one_rev ; sw_153_gfx_rev_b_one ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_one, position_in_vehid_chain_from_end){ 0 : gfx_153_one_rev ; sw_153_gfx_pos_check_m_one ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_one, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_one ; gfx_153_one ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_one, position_in_consist){ 0 : sw_153_gfx_pos_check_f_one ; sw_153_gfx_pos_check_b_one ;}

// north

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_north, vehicle_is_reversed){ 1 : gfx_153_north_rev ; gfx_153_north ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_north, vehicle_is_reversed){ 1 : gfx_153_north ; gfx_153_north_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_north, position_in_vehid_chain){ 0 : gfx_153_north_rev ; sw_153_gfx_rev_b_north ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_north, position_in_vehid_chain_from_end){ 0 : gfx_153_north_rev ; sw_153_gfx_pos_check_m_north ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_north, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_north ; gfx_153_north ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_north, position_in_consist){ 0 : sw_153_gfx_pos_check_f_north ; sw_153_gfx_pos_check_b_north ;}

// north_arr

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_north_arr, vehicle_is_reversed){ 1 : gfx_153_north_arr_rev ; gfx_153_north_arr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_north_arr, vehicle_is_reversed){ 1 : gfx_153_north_arr ; gfx_153_north_arr_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_north_arr, position_in_vehid_chain){ 0 : gfx_153_north_arr_rev ; sw_153_gfx_rev_b_north_arr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_north_arr, position_in_vehid_chain_from_end){ 0 : gfx_153_north_arr_rev ; sw_153_gfx_pos_check_m_north_arr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_north_arr, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_north_arr ; gfx_153_north_arr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_north_arr, position_in_consist){ 0 : sw_153_gfx_pos_check_f_north_arr ; sw_153_gfx_pos_check_b_north_arr ;}

// gwr

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_gwr, vehicle_is_reversed){ 1 : gfx_153_gwr_rev ; gfx_153_gwr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_gwr, vehicle_is_reversed){ 1 : gfx_153_gwr ; gfx_153_gwr_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_gwr, position_in_vehid_chain){ 0 : gfx_153_gwr_rev ; sw_153_gfx_rev_b_gwr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_gwr, position_in_vehid_chain_from_end){ 0 : gfx_153_gwr_rev ; sw_153_gfx_pos_check_m_gwr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_gwr, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_gwr ; gfx_153_gwr ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_gwr, position_in_consist){ 0 : sw_153_gfx_pos_check_f_gwr ; sw_153_gfx_pos_check_b_gwr ;}

// fgw

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_fgw, vehicle_is_reversed){ 1 : gfx_153_fgw_rev ; gfx_153_fgw ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_fgw, vehicle_is_reversed){ 1 : gfx_153_fgw ; gfx_153_fgw_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_fgw, position_in_vehid_chain){ 0 : gfx_153_fgw_rev ; sw_153_gfx_rev_b_fgw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_fgw, position_in_vehid_chain_from_end){ 0 : gfx_153_fgw_rev ; sw_153_gfx_pos_check_m_fgw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_fgw, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_fgw ; gfx_153_fgw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_fgw, position_in_consist){ 0 : sw_153_gfx_pos_check_f_fgw ; sw_153_gfx_pos_check_b_fgw ;}

// atw

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_atw, vehicle_is_reversed){ 1 : gfx_153_atw_rev ; gfx_153_atw ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_atw, vehicle_is_reversed){ 1 : gfx_153_atw ; gfx_153_atw_rev ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_atw, position_in_vehid_chain){ 0 : gfx_153_atw_rev ; sw_153_gfx_rev_b_atw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_atw, position_in_vehid_chain_from_end){ 0 : gfx_153_atw_rev ; sw_153_gfx_pos_check_m_atw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_atw, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_atw ; gfx_153_atw ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_atw, position_in_consist){ 0 : sw_153_gfx_pos_check_f_atw ; sw_153_gfx_pos_check_b_atw ;} */



switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_rr, vehicle_is_reversed){ 1 : gfx_153_rr_rev ; gfx_153_rr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_emt, vehicle_is_reversed){ 1 : gfx_153_emt_rev ; gfx_153_emt ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_central, vehicle_is_reversed){ 1 : gfx_153_central_rev ; gfx_153_central ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_anglia, vehicle_is_reversed){ 1 : gfx_153_anglia_rev ; gfx_153_anglia ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_one, vehicle_is_reversed){ 1 : gfx_153_one_rev ; gfx_153_one ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_north, vehicle_is_reversed){ 1 : gfx_153_north_rev ; gfx_153_north ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_north_arr, vehicle_is_reversed){ 1 : gfx_153_north_arr_rev ; gfx_153_north_arr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_gwr, vehicle_is_reversed){ 1 : gfx_153_gwr_rev ; gfx_153_gwr ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_fgw, vehicle_is_reversed){ 1 : gfx_153_fgw_rev ; gfx_153_fgw ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_atw, vehicle_is_reversed){ 1 : gfx_153_atw_rev ; gfx_153_atw ; }
switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_tfw, vehicle_is_reversed){ 1 : gfx_153_tfw_rev ; gfx_153_tfw ; }

 
//Livery selection

switch(FEAT_TRAINS, SELF, sw_153_gfx_auto, current_year){
	1980..1996	: sw_153_gfx_rev_a_rr ;
	1997..2005	: sw_153_gfx_rev_a_central ;
	2006..2016	: sw_153_gfx_rev_a_fgw ;
	sw_153_gfx_rev_a_gwr ;
}


switch(FEAT_TRAINS, SELF, sw_153_gfx_manual, cargo_subtype){
	0	: sw_153_gfx_rev_a_rr ;
	1	: sw_153_gfx_rev_a_central ;
	2	: sw_153_gfx_rev_a_north ;
	3	: sw_153_gfx_rev_a_north_arr ;
	5	: sw_153_gfx_rev_a_gwr ;
	6	: sw_153_gfx_rev_a_fgw ;
	8	: sw_153_gfx_rev_a_one ;
	10	: sw_153_gfx_rev_a_atw ;
	11	: sw_153_gfx_rev_a_north_arr ;
	12	: sw_153_gfx_rev_a_emt ;
	13	: sw_153_gfx_rev_a_tfw ;
	sw_153_gfx_rev_a_anglia ;
}

switch(FEAT_TRAINS, SELF, sw_153_gfx_manual_check, livery_choice){
	1 : sw_153_gfx_manual ;
	sw_153_gfx_auto ;
}


//Lights

//Back

spriteset(gfx_153_lights_a_front	,"gfx/DMU/class_153.png"){template_Mk2_double(350,0)}
spriteset(gfx_153_lights_a_back		,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(350,25)}
spriteset(gfx_153_lights_b_front	,"gfx/DMU/class_153.png"){template_Mk2_double(350,50)}
spriteset(gfx_153_lights_b_back		,"gfx/DMU/class_153.png"){template_Mk2_double_reverse(350,75)}


switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_lights_back, vehicle_is_reversed){ 1 : gfx_153_lights_a_back ; gfx_153_lights_b_back ; }
switch(FEAT_TRAINS, SELF, sw_153_gfx_lights_back_check, position_in_consist_from_end){0 : sw_153_gfx_rev_a_lights_back ; }

/* switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_b_lights_back, vehicle_is_reversed){ 1 : gfx_153_lights_b_back ; gfx_153_lights_a_back ; }

switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_m_lights_back, position_in_vehid_chain){ 0 : gfx_153_lights_a_back ; sw_153_gfx_rev_b_lights_back ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_b_lights_back, position_in_vehid_chain_from_end){ 0 : gfx_153_lights_a_back ; sw_153_gfx_pos_check_m_lights_back ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_lights_back, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_lights_back ; gfx_153_lights_b_back ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_lights_back, position_in_consist){ 0 : sw_153_gfx_pos_check_f_lights_back ; sw_153_gfx_pos_check_b_lights_back ;}

switch(FEAT_TRAINS, SELF, sw_153_gfx_lights_back_check, position_in_consist_from_end){ 0 : sw_153_gfx_pos_check_a_lights_back ; }
 */

//Front

switch(FEAT_TRAINS, PARENT, sw_153_gfx_rev_a_lights_front, vehicle_is_reversed){ 1 : gfx_153_lights_b_front ; gfx_153_lights_a_front ; }
switch(FEAT_TRAINS, SELF, sw_153_gfx_lights_front_check, position_in_consist){0 : sw_153_gfx_rev_a_lights_front ; }

/* switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_f_lights_front, num_vehs_in_vehid_chain ){ 0 : sw_153_gfx_rev_a_lights_front ; gfx_153_lights_a_front ;}
switch(FEAT_TRAINS, SELF, sw_153_gfx_pos_check_a_lights_front, position_in_consist){ 0 : sw_153_gfx_pos_check_f_lights_front ; } */


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_153_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_153_gfx_manual_check ;
	1 : sw_153_gfx_lights_back_check ;
	2 : sw_153_gfx_lights_front_check ;
}



//Purchase sprites

spriteset(gfx_153_purch_rr			,"gfx/DMU/class_153.png"){template_purchase(178,25)}
spriteset(gfx_153_purch_central		,"gfx/DMU/class_153.png"){template_purchase(178,75)}
spriteset(gfx_153_purch_fgw			,"gfx/DMU/class_153.png"){template_purchase(178,225)}
spriteset(gfx_153_purch_gwr			,"gfx/DMU/class_153.png"){template_purchase(178,200)}

switch(FEAT_TRAINS, SELF, sw_153_purch_gfx, current_year){
	1980..1996	: gfx_153_purch_rr ;
	1997..2005	: gfx_153_purch_central ;
	2006..2016	: gfx_153_purch_fgw ;
	gfx_153_purch_gwr ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_153_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_REG_RAILWAYS) ;
	1	: string(STR_LIVERY_CENTRAL) ;
	2	: string(STR_LIVERY_NORTHERN) ;
	3	: string(STR_LIVERY_NORTHERN_ARRIVA) ;
	4	: string(STR_LIVERY_FIRST_PLAIN) ;
	5	: string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6	: string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	7	: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	8	: string(STR_LIVERY_ONE_ANGLIA) ;
	9	: string(STR_LIVERY_WESSEX_TRAINS) ;
	10	: string(STR_LIVERY_ATW) ;
	11	: string(STR_LIVERY_ATW_EXEC) ;
	12	: string(STR_LIVERY_EMT) ;
	13	: string(STR_LIVERY_TFW) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_153_refit_text_check, livery_choice){
	1 : sw_153_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_153_col_auto, current_year){
	1980..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1997..2005	: palette_1cc(COLOUR_DARK_BLUE) ;
	2006..2016	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_153_col_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1	: palette_1cc(COLOUR_DARK_BLUE) ;
	2	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	5	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	8	: palette_2cc(COLOUR_BLUE, company_colour2) ;
	9	: palette_2cc(COLOUR_PINK, COLOUR_PINK) ;
	10	: palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	11	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	12	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	13	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_153_col_manual_check, livery_choice){
	1 : sw_153_col_manual ;
	sw_153_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_153_col_2cc_check, colour_scheme_1){
	1 : sw_153_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

switch(FEAT_TRAINS, SELF, sw_153_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	168	 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_153_NO_COUPLE) ;
}

item(FEAT_TRAINS, item_dogbox, 153){
	property{
		name                           : string(STR_NAME_153) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1991,1,1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 50 ;
		reliability_decay              : 6 ;
		cost_factor                    : 25 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 15 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 75 ;
		loading_speed                  : 21 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 240 kW ;
		weight                         : 41 ton ;
		tractive_effort_coefficient    : 0.25 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_153_spr_stack ;
		purchase                		: sw_153_purch_gfx ;
		sound_effect            		: sw_sfx_dmu_one ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_153_col_2cc_check ;
		purchase_colour_mapping 		: sw_153_col_auto ;
		cargo_subtype_text      		: sw_153_refit_text_check ;
		can_attach_wagon        		: sw_153_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 6 : 15) ;
		purchase_running_cost_factor	: 15 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_dogbox, 153){
	property{
		name                           : string(STR_NAME_153_ALT) ;
	}
}
}



if (vehicle_selection < 3){
item (FEAT_TRAINS, item_dogbox, 153){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/super_sprinter.pnml" 1
//Super Sprinter

//156

//Sprite sets

spriteset(gfx_cl156_base				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,   0 ) }
spriteset(gfx_cl156_base_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 259,   0 ) }
spriteset(gfx_cl156_rr					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  25 ) }
spriteset(gfx_cl156_rr_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  25 ) }
spriteset(gfx_cl156_emt					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  50 ) }
spriteset(gfx_cl156_emt_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  50 ) }
spriteset(gfx_cl156_spt					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  75 ) }
spriteset(gfx_cl156_spt_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  75 ) }
spriteset(gfx_cl156_central				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 100 ) }
spriteset(gfx_cl156_central_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 100 ) }
spriteset(gfx_cl156_anglia				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 125 ) }
spriteset(gfx_cl156_anglia_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 125 ) }
spriteset(gfx_cl156_one					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 150 ) }
spriteset(gfx_cl156_one_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 150 ) }
spriteset(gfx_cl156_first_scot			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 175 ) }
spriteset(gfx_cl156_first_scot_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 175 ) }
spriteset(gfx_cl156_scot_salt			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 200 ) }
spriteset(gfx_cl156_scot_salt_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 200 ) }
spriteset(gfx_cl156_northern			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 225 ) }
spriteset(gfx_cl156_northern_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 225 ) }
spriteset(gfx_cl156_northern_new		, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 250 ) }
spriteset(gfx_cl156_northern_new_mid	, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 250 ) }

spriteset(gfx_cl156_purchase_rr			, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178,  25 ) }
spriteset(gfx_cl156_purchase_spt		, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178,  75 ) }
spriteset(gfx_cl156_purchase_first_scot	, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178, 175 ) }
spriteset(gfx_cl156_purchase_scot_salt	, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178, 200 ) }

spriteset(gfx_cl156_headlights			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 350,   0 ) }
spriteset(gfx_cl156_taillights			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 350,  25 ) }



//Graphic switches

//switch(FEAT_TRAINS, SELF, sw_cl156_base_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_base_mid			; gfx_cl156_base		; }
switch(FEAT_TRAINS, SELF, sw_cl156_rr_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_rr_mid			; gfx_cl156_rr			; }
switch(FEAT_TRAINS, SELF, sw_cl156_emt_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_emt_mid			; gfx_cl156_emt			; }
switch(FEAT_TRAINS, SELF, sw_cl156_spt_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_spt_mid			; gfx_cl156_spt			; }
switch(FEAT_TRAINS, SELF, sw_cl156_central_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_central_mid		; gfx_cl156_central		; }
switch(FEAT_TRAINS, SELF, sw_cl156_anglia_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_anglia_mid		; gfx_cl156_anglia		; }
switch(FEAT_TRAINS, SELF, sw_cl156_one_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_one_mid			; gfx_cl156_one			; }
switch(FEAT_TRAINS, SELF, sw_cl156_first_scot_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_first_scot_mid	; gfx_cl156_first_scot	; }
switch(FEAT_TRAINS, SELF, sw_cl156_scot_salt_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_scot_salt_mid		; gfx_cl156_scot_salt	; }
switch(FEAT_TRAINS, SELF, sw_cl156_northern_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_northern_mid		; gfx_cl156_northern	; }
switch(FEAT_TRAINS, SELF, sw_cl156_northern_new_id_check, vehicle_type_id ){ 9030 : gfx_cl156_northern_new_mid	; gfx_cl156_northern_new; }



//Automatic

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_auto, current_year){
	1997..2004 : sw_cl156_spt_id_check ;
	2005..2015 : sw_cl156_first_scot_id_check ;
	2016..4096 : sw_cl156_scot_salt_id_check ;
	sw_cl156_rr_id_check ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_manual, cargo_subtype){
	1	: sw_cl156_spt_id_check ;
	2	: sw_cl156_first_scot_id_check ;
	3	: sw_cl156_scot_salt_id_check ;
	4	: sw_cl156_central_id_check ;
	5	: sw_cl156_emt_id_check ;
	6	: sw_cl156_one_id_check ;
	7	: sw_cl156_anglia_id_check ;
	8	: sw_cl156_northern_id_check ;
	9	: sw_cl156_northern_new_id_check ;
	sw_cl156_rr_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_manual_check, livery_choice){
	1 : sw_cl156_gfx_manual ;
	sw_cl156_gfx_auto ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_headlights, position_in_consist){ 0 : gfx_cl156_headlights ; }
switch(FEAT_TRAINS, SELF, sw_cl156_gfx_taillights, position_in_consist_from_end){ 0 : gfx_cl156_taillights ; }

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl156_gfx_manual_check ;
	1 : sw_cl156_gfx_headlights ;
	2 : sw_cl156_gfx_taillights ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_cl156_colours_auto, current_year){
	1997..2004 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2005..2015 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2016..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_GREEN, COLOUR_DARK_BLUE) ;
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6	: palette_2cc(COLOUR_BLUE, company_colour2) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_manual_check, livery_choice){
	1 : sw_cl156_colours_manual ;
	sw_cl156_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_2cc_check, colour_scheme_1){
	1 : sw_cl156_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_cl156_refit_text, cargo_subtype){
	0  : string(STR_LIVERY_REG_RAILWAYS) ;
	1  : string(STR_LIVERY_SPT_CARMINE_CREAM) ;
	2  : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	3  : string(STR_LIVERY_SCOTRAIL) ;
	4  : string(STR_LIVERY_CENTRAL) ;
	5  : string(STR_LIVERY_EMT) ;
	6  : string(STR_LIVERY_ONE_ANGLIA) ;
	7  : string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	8  : string(STR_LIVERY_NORTHERN) ;
	9  : string(STR_LIVERY_NORTHERN_ARRIVA) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_refit_text_check, livery_choice){
	1 : sw_cl156_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Item

//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_sprite, current_year){
	1997..2004 : gfx_cl156_purchase_spt ;
	2005..2015 : gfx_cl156_purchase_first_scot ;
	2016..4096 : gfx_cl156_purchase_scot_salt ;
	gfx_cl156_purchase_rr ;
}

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_colours, current_year){
	1997..2004 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2005..2015 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2016..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_supsprint_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


switch(FEAT_TRAINS, SELF, sw_supsprint_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	168	 : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_155_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_supsprint, 155){
	property{
		name                           : string(STR_NAME_SUPER_SPRINTER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1986,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 8 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 35 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 75 ;
		loading_speed                  : 21 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 416 kW ;
		weight                         : 39 ton ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_cl156_gfx_sprite_stack ;
		purchase                		: sw_supsprint_purchase_sprite ;
		sound_effect            		: sw_sfx_dmu_one ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_cl156_colours_2cc_check ;
		purchase_colour_mapping 		: sw_supsprint_purchase_colours_2cc_check ;
		cargo_subtype_text      		: sw_cl156_refit_text_check ;
		can_attach_wagon        		: sw_supsprint_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 10 : 35) ;
		purchase_running_cost_factor	: 35 ;
	}
	livery_override (9030){
		default                     : sw_cl156_gfx_sprite_stack ;
		colour_mapping              : sw_cl156_colours_2cc_check ;
		cargo_capacity              : 85 ;
		power                       : 206 ;
		cargo_subtype_text          : sw_cl156_refit_text_check ;
		weight                      : 39 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect           : vfx_diesel_default ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_supsprint, 155){
	property{
		name                           : string(STR_NAME_SUPER_SPRINTER_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_supsprint, 155){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/expr_sprint.pnml" 1
//Express Sprinter

/*

Liveries

Regional Railways --
Trans Pennine Express --
WYPTE Metro --
Northern Rail --
New Northern --

Alphaline --
!Arriva Trains Wales
!Arrive Trains Wales (Executive)
!First Great Western
Great Western Railway --
!East Midlands Trains

Network South East --
!South West Trains
!South Western Railway

*/



//Sprite sets

spriteset(gfx_expsprint_base            , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,  0) }
spriteset(gfx_expsprint_base_rev        , "gfx/DMU/class_158.png") { template_Mk2_double_reverse (  0,  0) }
spriteset(gfx_expsprint_base_mid        , "gfx/DMU/class_158.png") { template_Mk2_single         (259,  0) }
spriteset(gfx_expsprint_rr            	, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,175) }
spriteset(gfx_expsprint_rr_mid        	, "gfx/DMU/class_158.png") { template_Mk2_single 		 (259,175) }
spriteset(gfx_expsprint_fgw             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 25) }
spriteset(gfx_expsprint_fgw_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 25) }
spriteset(gfx_expsprint_swt             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 50) }
spriteset(gfx_expsprint_swt_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 50) }
spriteset(gfx_expsprint_atw_refurb      , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 75) }
spriteset(gfx_expsprint_atw_refurb_mid  , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 75) }
spriteset(gfx_expsprint_atw             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,100) }
spriteset(gfx_expsprint_atw_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259,100) }
spriteset(gfx_expsprint_atw_exec        , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,125) }
spriteset(gfx_expsprint_atw_exec_mid    , "gfx/DMU/class_158.png") { template_Mk2_single         (259,125) }
spriteset(gfx_expsprint_swr        		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,150) }
spriteset(gfx_expsprint_swr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,150) }
spriteset(gfx_expsprint_fsr       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,200) }
spriteset(gfx_expsprint_fsr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,200) }
spriteset(gfx_expsprint_gwr       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,225) }
spriteset(gfx_expsprint_gwr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,225) }
spriteset(gfx_expsprint_nrt       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,250) }
spriteset(gfx_expsprint_nrt_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,250) }
spriteset(gfx_expsprint_nra       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,275) }
spriteset(gfx_expsprint_nra_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,275) }
spriteset(gfx_expsprint_srs       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,300) }
spriteset(gfx_expsprint_srs_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,300) }
spriteset(gfx_expsprint_nse       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,325) }
spriteset(gfx_expsprint_nse_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,325) }
spriteset(gfx_expsprint_tfw       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,350) }
spriteset(gfx_expsprint_tfw_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,350) }

spriteset(gfx_expsprint_purchase_rr    	, "gfx/DMU/class_158.png") { template_dualhead_purchase (178,175) }
spriteset(gfx_expsprint_purchase_fsr    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178,200) }
spriteset(gfx_expsprint_purchase_atw_r  , "gfx/DMU/class_158.png") { template_dualhead_purchase (178, 75) }
spriteset(gfx_expsprint_purchase_swr    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178,150) }
spriteset(gfx_expsprint_purchase_fgw    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178, 25) }


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_expsprint_base_id_check,        vehicle_type_id){ 9030 : gfx_expsprint_base_mid ; gfx_expsprint_base ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_rr_id_check,        vehicle_type_id){ 9030 : gfx_expsprint_rr_mid ; gfx_expsprint_rr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_fgw_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_fgw_mid ; gfx_expsprint_fgw ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_swt_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_swt_mid ; gfx_expsprint_swt ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_atw_mid ; gfx_expsprint_atw ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_refurb_id_check , vehicle_type_id){ 9030 : gfx_expsprint_atw_refurb_mid ; gfx_expsprint_atw_refurb ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_exec_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_atw_exec_mid ; gfx_expsprint_atw_exec ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_swr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_swr_mid ; gfx_expsprint_swr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_fsr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_fsr_mid ; gfx_expsprint_fsr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_gwr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_gwr_mid ; gfx_expsprint_gwr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_nrt_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_nrt_mid ; gfx_expsprint_nrt ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_nra_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_nra_mid ; gfx_expsprint_nra ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_srs_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_srs_mid ; gfx_expsprint_srs ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_nse_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_nse_mid ; gfx_expsprint_nse ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_tfw_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_tfw_mid ; gfx_expsprint_tfw ; }



switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_auto, current_year){
	1987..1995 : sw_expsprint_rr_id_check ;
	1996..2003 : sw_expsprint_fsr_id_check ;
	2004..2011 : sw_expsprint_fsr_id_check ;
	2012..2017 : sw_expsprint_atw_refurb_id_check ;
	2018..4096 : sw_expsprint_swr_id_check ;
	sw_expsprint_fgw_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_manual, cargo_subtype){
	1 : sw_expsprint_atw_refurb_id_check ;
	2 : sw_expsprint_nrt_id_check ;
	3 : sw_expsprint_nra_id_check ;
	4 : sw_expsprint_swt_id_check ;
	5 : sw_expsprint_gwr_id_check ;
	6 : sw_expsprint_fgw_id_check ;
	7 : sw_expsprint_swr_id_check ;
	8 : sw_expsprint_fsr_id_check ;
	9 : sw_expsprint_srs_id_check ;
	10: sw_expsprint_atw_id_check ;
	11: sw_expsprint_atw_exec_id_check ;
	12: sw_expsprint_nse_id_check ;
	13: sw_expsprint_tfw_id_check ;
	sw_expsprint_rr_id_check ;
}


switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_manual_check, livery_choice){
	1 : sw_expsprint_gfx_manual ;
	sw_expsprint_gfx_auto ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_auto, current_year){
	1987..1995 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	1996..2003 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2004..2011 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2012..2017 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2018..4096 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	5 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	7 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	9 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	10: palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	11: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	12: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	13: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}

/* switch(FEAT_TRAINS, SELF, sw_expsprint_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	5 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	7 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	9 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	10: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	11: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}
 */

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_manual_check, livery_choice){
	1 : sw_expsprint_colours_manual ;
	sw_expsprint_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_2cc_check, colour_scheme_1){
	1 : sw_expsprint_colours_manual_check ;
	palette_2cc(company_colour1, company_colour1) ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite, current_year){
	1987..1995 : gfx_expsprint_purchase_rr ;
	1996..2003 : gfx_expsprint_purchase_fsr ;
	2004..2011 : gfx_expsprint_purchase_fsr ;
	2012..2017 : gfx_expsprint_purchase_atw_r ;
	2018..4096 : gfx_expsprint_purchase_swr ;
	gfx_expsprint_purchase_fgw ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite_colours, current_year){
	1987..1995 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	1996..2003 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2004..2011 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2012..2017 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2018..4096 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite_colours_2cc_check, colour_scheme_1){
	1 : sw_expsprint_purchase_sprite_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_expsprint_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_REG_RAILWAYS) ;
	1 : string(STR_LIVERY_ATW_REFURB) ;
	2 : string(STR_LIVERY_NORTHERN) ;
	3 : string(STR_LIVERY_NORTHERN_ARRIVA) ;
	4 : string(STR_LIVERY_SWT) ;
	5 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	7 : string(STR_LIVERY_SWR) ;
	8 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	9 : string(STR_LIVERY_SCOTRAIL) ;
	10: string(STR_LIVERY_ATW) ;
	11: string(STR_LIVERY_ATW_EXEC) ;
	12: string(STR_LIVERY_NSE) ;
	13: string(STR_LIVERY_TFW) ;
	CB_RESULT_NO_TEXT ;
}

/*
switch(FEAT_TRAINS, SELF, sw_expsprint_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_REG_RAILWAYS) ;
	1 : string(STR_LIVERY_ATW) ;
	2 : string(STR_LIVERY_ATW_REFURB) ;
	3 : string(STR_LIVERY_ATW_EXEC) ;
	4 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	5 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6 : string(STR_LIVERY_SWT) ;
	7 : string(STR_LIVERY_SWR) ;
	8 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	CB_RESULT_NO_TEXT ;
}*/

switch(FEAT_TRAINS, SELF, sw_expsprint_refit_text_check, livery_choice){
	1 : sw_expsprint_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Item

switch(FEAT_TRAINS, SELF, sw_expsprint_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	168	 : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_158_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_expsprint, 158){
	property{
		name                           : string(STR_NAME_EXPRESS_SPRINTER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1988,1,1) ;
		model_life                     : 25 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 7 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 44 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 70 ;
		loading_speed                  : 19 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 90 mph ;
		power                          : 522 kW ;
		weight                         : 38.5 ton ;
		tractive_effort_coefficient    : 0.175 ;
		air_drag_coefficient           : 0.09 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
	}
	graphics{
		default                 : sw_expsprint_gfx_manual_check ;
		purchase                : sw_expsprint_purchase_sprite ;
		sound_effect            : sw_sfx_dmu_one ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_expsprint_colours_2cc_check ;
		purchase_colour_mapping : sw_expsprint_purchase_sprite_colours_2cc_check ;
		cargo_subtype_text      : sw_expsprint_refit_text_check ;
		can_attach_wagon        : sw_expsprint_attach ;
		running_cost_factor     : return(current_speed == 0 ? 11 : 44) ;
		purchase_running_cost_factor : 44 ;
	}
	livery_override (9030){
		default                     : sw_expsprint_gfx_manual_check ;
		colour_mapping              : sw_expsprint_colours_2cc_check ;
		cargo_capacity              : 75 ;
		power                       : 261 ;
		cargo_subtype_text          : sw_expsprint_refit_text_check ;
		weight                      : 38 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect           : vfx_diesel_default ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_expsprint, 158){
	property{
		name                           : string(STR_NAME_EXPRESS_SPRINTER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/turbostar.pnml" 1
//TURBOSTAR


//00 - Chiltern Railways - a
//01 - Central Trains
//02 - Cross Country - a
//03 - SPT
//04 - First Scot RAIL
//05 - ScotRail Saltaire
//06 - Southern
//dd - London Midland (170) - a
//08 - West Midlands Railway (170) - a
//09 - London Midland (172) - a
//10 - West Midlands Railway (172) - a
//11 - TransPennine Express
//12 - Northern
//13 - EMR
//14 - TfW/Greater Anglia
//15 - NXEA
//16 - Hull Trains
//17 - Midland Mainline
//18 - SWT


spriteset (turbostar_ch_168_1			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 150)}
spriteset (turbostar_ch_168_0			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 200)}
spriteset (turbostar_ch_168_mid			, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 175)}
spriteset (turbostar_lm_170				, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 050)}
spriteset (turbostar_lm_170_mid			, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 075)}
spriteset (turbostar_xc_170				, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 100)}
spriteset (turbostar_xc_170_mid			, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 125)}
spriteset (turbostar_lm_172				, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 000)}
spriteset (turbostar_lm_172_mid			, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 025)}
spriteset (turbostar_wmr_172			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 050)}
spriteset (turbostar_wmr_172_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 075)}
spriteset (turbostar_cen_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 150)}
spriteset (turbostar_cen_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 175)}
spriteset (turbostar_anr_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 200)}
spriteset (turbostar_anr_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 225)}
spriteset (turbostar_nxs_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 250)}
spriteset (turbostar_nxs_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 275)}
spriteset (turbostar_fsc_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 325)}
spriteset (turbostar_fsc_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 350)}
spriteset (turbostar_stn_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 300)}
spriteset (turbostar_stn_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 325)}
spriteset (turbostar_mml_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 375)}
spriteset (turbostar_mml_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 400)}
spriteset (turbostar_spt_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 350)}
spriteset (turbostar_spt_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 375)}
spriteset (turbostar_tpe_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 425)}
spriteset (turbostar_tpe_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 450)}
spriteset (turbostar_cnm_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 400)}
spriteset (turbostar_cnm_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 425)}
spriteset (turbostar_sct_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 475)}
spriteset (turbostar_sct_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 500)}
spriteset (turbostar_swt_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 450)}
spriteset (turbostar_swt_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 475)}
spriteset (turbostar_chi_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 525)}
spriteset (turbostar_chi_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 550)}
spriteset (turbostar_one_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 500)}
spriteset (turbostar_one_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 525)}
spriteset (turbostar_ovg_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 575)}
spriteset (turbostar_ovg_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 600)}
spriteset (turbostar_wmr_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 550)}
spriteset (turbostar_wmr_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 575)}
spriteset (turbostar_emr_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 625)}
spriteset (turbostar_emr_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 650)}
spriteset (turbostar_ga__170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 600)}
spriteset (turbostar_ga__170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 625)}
spriteset (turbostar_ntn_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 675)}
spriteset (turbostar_ntn_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 000, 700)}
spriteset (turbostar_tfw_170			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 179, 650)}
spriteset (turbostar_tfw_170_mid		, "gfx/DMU/turbostar.png"){template_8_4_networker		( 179, 675)}

spriteset (turbostar_headlight			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 100)}
spriteset (turbostar_taillight			, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 125)}
spriteset (turbostar_headlight_0		, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 225)}
spriteset (turbostar_taillight_0		, "gfx/DMU/turbostar.png"){template_8_8_networker		( 000, 250)}

spriteset (turbostar_purchase_ch_168	, "gfx/DMU/turbostar.png"){template_dualhead_purchase	( 090, 175)}
spriteset (turbostar_purchase_lm_170	, "gfx/DMU/turbostar.png"){template_dualhead_purchase	( 269, 075)}
spriteset (turbostar_purchase_lm_172	, "gfx/DMU/turbostar.png"){template_dualhead_purchase	( 090, 025)}
spriteset (turbostar_purchase_wmr_172	, "gfx/DMU/turbostar.png"){template_dualhead_purchase	( 090, 075)}


//Graphics

switch(FEAT_TRAINS, SELF, sw_168_1_ch_id_check	, vehicle_type_id ){ 9090 : turbostar_ch_168_mid ; turbostar_ch_168_1 ;}
switch(FEAT_TRAINS, SELF, sw_168_0_ch_id_check	, vehicle_type_id ){ 9090 : turbostar_ch_168_mid ; turbostar_ch_168_0 ;}
switch(FEAT_TRAINS, SELF, sw_170_xc_id_check	, vehicle_type_id ){ 9090 : turbostar_xc_170_mid ; turbostar_xc_170 ;}
switch(FEAT_TRAINS, SELF, sw_170_lm_id_check	, vehicle_type_id ){ 9090 : turbostar_lm_170_mid ; turbostar_lm_170 ;}
switch(FEAT_TRAINS, SELF, sw_172_lm_id_check	, vehicle_type_id ){ 9090 : turbostar_lm_172_mid ; turbostar_lm_172 ;}
switch(FEAT_TRAINS, SELF, sw_172_wmr_id_check	, vehicle_type_id ){ 9090 : turbostar_wmr_172_mid ; turbostar_wmr_172 ;}



switch(FEAT_TRAINS, SELF, sw_168_auto, current_year){
	0000..2006 : sw_168_0_ch_id_check ;
	2018..4096 : sw_170_lm_id_check ;
	sw_170_lm_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_172_auto, current_year){
	2018..4096 : sw_172_wmr_id_check ;
	sw_172_lm_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_auto_year_check, build_year){
	0000..2009 : sw_168_auto ;
	sw_172_auto ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_d_manual, cargo_subtype){
	0: turbostar_ch_168_1;			 
	1: turbostar_xc_170;				 
	2: turbostar_lm_170;					 
	3: turbostar_lm_172;			 
	4: turbostar_wmr_172;
	5: turbostar_ch_168_0;
	6: turbostar_cen_170;			 	 
	7: turbostar_anr_170;			 
	8: turbostar_nxs_170;			 
	9: turbostar_fsc_170;				 
	10: turbostar_stn_170;			 
	11: turbostar_mml_170;			 
	12: turbostar_spt_170;					 
	13: turbostar_cnm_170;			 
	14: turbostar_tpe_170;			 
	15: turbostar_swt_170;			 
	16: turbostar_sct_170;		 
	17: turbostar_one_170;			 
	18: turbostar_chi_170;		
	19: turbostar_wmr_170;	 
	20: turbostar_ovg_170;
	21: turbostar_ga__170;		 
	22: turbostar_emr_170;
	23: turbostar_tfw_170;
	24: turbostar_tfw_170;
	25: turbostar_ntn_170;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_t_manual, cargo_subtype){
	0: turbostar_ch_168_mid;			 
	1: turbostar_xc_170_mid;				 
	2: turbostar_lm_170_mid;					 
	3: turbostar_lm_172_mid;				 
	4: turbostar_wmr_172_mid;
	5: turbostar_ch_168_mid;			 	
	6: turbostar_cen_170_mid;		 
	7: turbostar_anr_170_mid;		 
	8: turbostar_nxs_170_mid;	 
	9: turbostar_fsc_170_mid;		 
	10: turbostar_stn_170_mid;	 
	11: turbostar_mml_170_mid;		 
	12: turbostar_spt_170_mid;	  
	13: turbostar_cnm_170_mid;			 
	14: turbostar_tpe_170_mid;	 
	15: turbostar_swt_170_mid;			 
	16: turbostar_sct_170_mid;
	17: turbostar_one_170_mid;		 
	18: turbostar_chi_170_mid;			 
	19: turbostar_wmr_170_mid;				 
	20: turbostar_ovg_170_mid;			 
	21: turbostar_ga__170_mid;			 
	22: turbostar_emr_170_mid;			 
	23: turbostar_tfw_170_mid;			 
	24: turbostar_tfw_170_mid;			 
	25: turbostar_ntn_170_mid;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_d_manual_check, livery_choice){
	1 : sw_168_gfx_d_manual ;
	sw_168_gfx_auto_year_check ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_t_manual_check, livery_choice){
	1 : sw_168_gfx_t_manual ;
	sw_168_gfx_auto_year_check ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_168_headlights, position_in_consist){ 0 : turbostar_headlight ;}
switch(FEAT_TRAINS, SELF, sw_168_taillights, position_in_consist_from_end){ 0 : turbostar_taillight ;}

switch(FEAT_TRAINS, SELF, sw_168_0_headlights, position_in_consist){ 0 : turbostar_headlight_0 ;}
switch(FEAT_TRAINS, SELF, sw_168_0_taillights, position_in_consist_from_end){ 0 : turbostar_taillight_0 ;}

switch(FEAT_TRAINS, SELF, sw_168_headlights_livery_check, cargo_subtype){ 5 : sw_168_0_headlights ; sw_168_headlights ; }
switch(FEAT_TRAINS, SELF, sw_168_taillights_livery_check, cargo_subtype){ 5 : sw_168_0_taillights ; sw_168_taillights ; }

switch(FEAT_TRAINS, SELF, sw_168_d_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_168_gfx_d_manual_check ;
	1 : sw_168_headlights_livery_check ;
	2 : sw_168_taillights_livery_check ;
}


//Purchase

switch(FEAT_TRAINS, SELF, sw_168_purchase, current_year){
	0000..2006 : turbostar_purchase_ch_168 ;
	2007..2009 : turbostar_purchase_lm_170 ;
	2010..2017 : turbostar_purchase_lm_172 ;
	turbostar_purchase_wmr_172 ;
}

switch(FEAT_TRAINS, SELF, sw_168_purchase_colours, current_year){
	1996..2006 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	2007..2017 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
	palette_2cc(COLOUR_ORANGE, COLOUR_MAUVE) ;
}

switch(FEAT_TRAINS, SELF, sw_168_purchase_2cc_check, colour_scheme_1){
	1 : sw_168_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_168_refit_text, cargo_subtype){
	0	: string(STR_LIVERY_CHILTERN) ;
	1	: string(STR_LIVERY_ARRIVA_XC) ;
	2	: string(STR_LIVERY_LONDON_MIDLAND_STRING, string(STR_170)) ;
	3	: string(STR_LIVERY_LONDON_MIDLAND_STRING, string(STR_172)) ;
	4	: string(STR_LIVERY_WEST_MIDLANDS_RAILWAY_STRING, string(STR_172)) ;
	5	: string(STR_LIVERY_CHILTERN_0) ;
	6	: string(STR_LIVERY_CENTRAL) ;
	7	: string(STR_LIVERY_ANGLIA_RAIL) ;
	8	: string(STR_LIVERY_NX_SCOTRAIL) ;
	9	: string(STR_LIVERY_FIRST_SCOTRAIL) ;
	10	: string(STR_LIVERY_SOUTHERN) ;
	11	: string(STR_LIVERY_MML) ;
	12	: string(STR_LIVERY_SPT_CARMINE_CREAM) ;
	13	: string(STR_LIVERY_CENTRAL_EX_M) ;
	14	: string(STR_LIVERY_FIRST_TPE) ;
	15	: string(STR_LIVERY_SWT) ;
	16	: string(STR_LIVERY_SCOTRAIL) ;
	17	: string(STR_LIVERY_ONE_ANGLIA) ;
	18	: string(STR_LIVERY_CHILTERN_G) ;
	19	: string(STR_LIVERY_WEST_MIDLANDS_RAILWAY_STRING, string(STR_170)) ;
	20	: string(STR_LIVERY_OVERGROUND) ;
	21	: string(STR_LIVERY_GREATER_ANGLIA) ;
	22	: string(STR_LIVERY_EMR) ;
	23	: string(STR_LIVERY_TFW) ;
	24	: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	25	: string(STR_LIVERY_NORTHERN) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_168_refit_text_check, livery_choice){
	1 : sw_168_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_168_colours_auto, current_year){
	1996..2006 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	2018..4096 : palette_2cc(COLOUR_ORANGE, COLOUR_MAUVE) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_168_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1	: palette_2cc(COLOUR_GREY, COLOUR_PINK) ;
	4	: palette_2cc(COLOUR_ORANGE, COLOUR_MAUVE) ;
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6	: palette_2cc(COLOUR_GREEN, COLOUR_DARK_BLUE) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_PALE_GREEN) ;
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	10	: palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
	11	: palette_2cc(COLOUR_PALE_GREEN, COLOUR_WHITE) ;
	12	: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	13	: palette_2cc(COLOUR_PALE_GREEN, COLOUR_DARK_BLUE) ;
	14	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	15	: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
	16	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	17	: palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	18	: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	19	: palette_2cc(COLOUR_MAUVE, COLOUR_ORANGE) ;
	20	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	21	: palette_2cc(COLOUR_BLUE, COLOUR_BLUE) ;
	22	: palette_2cc(COLOUR_MAUVE, COLOUR_WHITE) ;
	23	: palette_2cc(COLOUR_RED, COLOUR_RED) ;
	24	: palette_2cc(COLOUR_RED, COLOUR_RED) ;
	25	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
}
/*
	
	
}*/

switch(FEAT_TRAINS, SELF, sw_168_colours_manual_check, livery_choice){
	1 : sw_168_colours_manual ;
	sw_168_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_168_colours_2cc_check, colour_scheme_1){
	1 : sw_168_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_168_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	142  : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	151  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	168	 : return CB_RESULT_ATTACH_ALLOW  ;
	165: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_168_NO_COUPLE);
}


//Item 


item (FEAT_TRAINS, item_cl168, 168){
	property{
		name                           : string(STR_NAME_TURBOSTAR) ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1997, 1, 1);
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 80 ;
		model_life                     : 18 ;
		vehicle_life                   : 25 ;
		reliability_decay              : 10 ;
		cost_factor                    : 56 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 56 ;
		speed                          : 100 mph ;
		track_type                     : RAIL ;
		power                          : 700 kW ;
		weight                         : 45 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.1 ;
		air_drag_coefficient           : 0.08 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 1 ;
		loading_speed                  : 23 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		can_attach_wagon:		sw_168_coupling_restrictions;
		default                 : sw_168_d_sprite_stack ;
		colour_mapping          : sw_168_colours_2cc_check ;
		purchase                : sw_168_purchase ;
		purchase_colour_mapping : sw_168_purchase_2cc_check ;
		sound_effect            : sw_sfx_dmu_one ;
		create_effect           : vfx_diesel_default ;
		cargo_subtype_text      : sw_168_refit_text_check ;
		running_cost_factor     : return(current_speed == 0 ? 12 : 46) ;
		purchase_running_cost_factor : 46 ;
	}
	livery_override (item_MU90){
		default                     : sw_168_gfx_t_manual_check ;
		colour_mapping              : sw_168_colours_2cc_check ;
		power                       : 450;
		cargo_capacity              : 80 ;
		cargo_subtype_text          : sw_168_refit_text_check ;
		weight                      : 45 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect           : vfx_diesel_default ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_cl168, 168){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_cl168, 168){
	property{
		name                           : string(STR_NAME_TURBOSTAR_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DMU/class_195.pnml" 1
//Northern class 195
spriteset(spriteset_195_f_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_195_t_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_4_networker(0, 50)}
//Purchase
spriteset(spriteset_195_purchase, "gfx/UNUSED & MIXED/civity.png") {template_dualhead_purchase(0, 238)}
//Headlights
spriteset(spriteset_195_hl, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_195_rl, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 200)}

switch(FEAT_TRAINS, SELF, sw_195_f_auto, current_year){
spriteset_195_f_nor;
}
switch(FEAT_TRAINS, SELF, sw_195_t_auto, current_year){
spriteset_195_t_nor;
}

switch(FEAT_TRAINS, SELF, sw_195_f_man, cargo_subtype){
0: spriteset_195_f_nor;
}
switch(FEAT_TRAINS, SELF, sw_195_t_man, cargo_subtype){
0: spriteset_195_t_nor;
}

switch(FEAT_TRAINS, SELF, sw_195_f, livery_choice){
1: sw_195_f_man;
sw_195_f_auto;
}
switch(FEAT_TRAINS, SELF, sw_195_t, livery_choice){
1: sw_195_t_man;
sw_195_t_auto;
}
//Headlights
switch(FEAT_TRAINS, SELF, sw_195_hl_1, position_in_consist){
0: spriteset_195_hl;
gfx_blank;
}
switch(FEAT_TRAINS, SELF, sw_195_hl_2, position_in_consist_from_end){
0: spriteset_195_rl;
sw_195_hl_1;
}

switch(FEAT_TRAINS, SELF, sw_195_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_195_f;
	1: return sw_195_hl_2;
}
switch(FEAT_TRAINS, SELF, sw_195_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_195_t;
}

random_switch(FEAT_TRAINS, SELF, sw_195_nor_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE) ;}

switch(FEAT_TRAINS, SELF, sw_195_recolour_auto, current_year){
sw_195_nor_colour_mapping;
}
switch(FEAT_TRAINS, SELF, sw_195_recolour_man, cargo_subtype){
0: sw_195_nor_colour_mapping;
}
switch(FEAT_TRAINS, SELF, sw_195_manual_refit_text, cargo_subtype){
0: string(STR_LIVERY_NORTHERN);
return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_195_livery_text_decider, livery_choice){
	1: sw_195_manual_refit_text;
	CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_195_livery_colour_decider, livery_choice){
	1: sw_195_recolour_man;
	sw_195_recolour_auto;
}
switch(FEAT_TRAINS, SELF, sw_195_colour_mapping, colour_scheme_1){
	1: sw_195_livery_colour_decider;
	palette_2cc(company_colour1, company_colour2);
}

/*
switch(FEAT_TRAINS, SELF, sw_195_start_stop, count_veh_id(9090)){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}
*/

switch(FEAT_TRAINS, SELF, sw_195_coupling_restrictions, vehicle_type_id) {
195: return CB_RESULT_ATTACH_ALLOW;
item_MU90: return CB_RESULT_ATTACH_ALLOW;
37 : return CB_RESULT_ATTACH_ALLOW;
return string(STR_195_NO_COUPLE);
}

item (FEAT_TRAINS, item_195, 195) {
	property {
		name: 							string(STR_NAME_195);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2017, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					28;
		cost_factor:					68;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1046 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					62;
		weight:							44 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.29;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_195_coupling_restrictions;
		default: 							sw_195_default;
		purchase:							spriteset_195_purchase;
		create_effect:						vfx_diesel_default;
		colour_mapping:						sw_195_colour_mapping;
		cargo_subtype_text:					sw_195_livery_text_decider;
		purchase_colour_mapping:			sw_195_recolour_auto;
		sound_effect:						sw_sfx_dmu_one;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
		//start_stop:							sw_195_start_stop;
}
		livery_override (9090) {
		cargo_capacity: 80;
		default: sw_195_t_default;
		weight:	28;
		colour_mapping:	sw_195_colour_mapping;
		cargo_subtype_text: sw_195_livery_text_decider;
		power: 523;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_195, 195){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_195, 195){
	property{
		name                           : string(STR_NAME_195_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3

# 1 "src/DEMU/ner_petrol.pnml" 1



spriteset(gfx_3170			, "gfx/WAGON/coaches.png"	){ template_7_4_2		( 225,	0)}
spriteset(gfx_3170_headlight, "gfx/WAGON/coaches.png"	){ template_7_8_2		( 306,	0)}
spriteset(gfx_3170_taillight, "gfx/WAGON/coaches.png"	){ template_7_8_2		( 306,	25)}

spriteset(gfx_3170_purch	, "gfx/WAGON/coaches.png"	){	template_purchase	( 225,	25)}




switch(FEAT_TRAINS, SELF, sw_3170_gfx_lights_back_check, position_in_consist_from_end){0 : gfx_3170_taillight ; }
switch(FEAT_TRAINS, SELF, sw_3170_gfx_lights_front_check, position_in_consist){0 : gfx_3170_headlight ; }

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_3170_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_3170 ;
	1 : sw_3170_gfx_lights_back_check ;
	2 : sw_3170_gfx_lights_front_check ;
}



switch(FEAT_TRAINS, SELF, sw_3170_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	palette_2cc(company_colour1, company_colour2) ;
}




item(FEAT_TRAINS, item_ner_autocar, 3170 ){
	property{
		name                           : string(STR_NAME_NER_AUTOCAR) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1903,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 34 ;
		reliability_decay              : 13 ;
		cost_factor                    : 11 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 15 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 52 ;
		loading_speed                  : 21 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 40 mph ;
		power                          : 92 hp ;
		weight                         : 36 ton ;
		tractive_effort_coefficient    : 0.068 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_3170_spr_stack ;
		purchase                		: gfx_3170_purch ;
		sound_effect            		: sw_sfx_extension_25_check ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_3170_colours_2cc_check ;
		running_cost_factor    			: return(current_speed == 0 ? 6 : 15) ;
		purchase_running_cost_factor	: 15 ;
	}
}



# 1 "rukts.pnml" 3
# 1 "src/DEMU/class_205.pnml" 1
//205 DMBSO
spriteset(spriteset_205_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_205_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_205_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_205_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_205_m_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 300)}
//205 DTC
spriteset(spriteset_205_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_205_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_205_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_205_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_205_dt_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(0, 325)}
//207 DMBSO
spriteset(spriteset_207_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_207_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_207_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_207_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_207_m_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 325)}
//207 DTC
spriteset(spriteset_207_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_207_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 125)}
spriteset(spriteset_207_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_207_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 275)}
spriteset(spriteset_207_dt_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 350)}
//Trailer
spriteset(spriteset_205_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 50)}
spriteset(spriteset_205_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_205_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_205_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(0, 275)}
spriteset(spriteset_205_t_cnx, "gfx/EMU/class_415.png") {template_8_4_networker(0, 350)}
//Purchase
spriteset(spriteset_205_brg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 50)}
spriteset(spriteset_205_brb_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_205_bbg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 200)}
spriteset(spriteset_205_nse_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 275)}
spriteset(spriteset_205_cnx_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 350)}
//Headcodes
spriteset(spriteset_205_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_205_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_207_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_207_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 75)}


//Switches
switch(FEAT_TRAINS, SELF, sw_205_brg_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_brg; spriteset_205_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_205_brg_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_brg; spriteset_205_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_205_brg, vehicle_is_reversed){0: sw_205_brg_f; sw_205_brg_r;}

switch(FEAT_TRAINS, SELF, sw_207_brg_f, (count_veh_id(207)+1)%2){1: spriteset_207_m_brg; spriteset_207_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_207_brg_r, (count_veh_id(207)+1)%2){1: spriteset_207_dt_brg; spriteset_207_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_207_brg, vehicle_is_reversed){0: sw_207_brg_f; sw_207_brg_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_brg_select, vehicle_type_id){205: sw_205_brg; sw_207_brg;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brg, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_brg_select;}


switch(FEAT_TRAINS, SELF, sw_205_brb_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_brb; spriteset_205_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_205_brb_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_brb; spriteset_205_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_205_brb, vehicle_is_reversed){0: sw_205_brb_f; sw_205_brb_r;}

switch(FEAT_TRAINS, SELF, sw_207_brb_f, (count_veh_id(207)+1)%2){1: spriteset_207_m_brb; spriteset_207_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_207_brb_r, (count_veh_id(207)+1)%2){1: spriteset_207_dt_brb; spriteset_207_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_207_brb, vehicle_is_reversed){0: sw_207_brb_f; sw_207_brb_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_brb_select, vehicle_type_id){205: sw_205_brb; sw_207_brb;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brb, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_brb_select;}


switch(FEAT_TRAINS, SELF, sw_205_bbg_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_bbg; spriteset_205_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_205_bbg_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_bbg; spriteset_205_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_205_bbg, vehicle_is_reversed){0: sw_205_bbg_f; sw_205_bbg_r;}

switch(FEAT_TRAINS, SELF, sw_207_bbg_f, (count_veh_id(207)+1)%2){1: spriteset_207_m_bbg; spriteset_207_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_207_bbg_r, (count_veh_id(207)+1)%2){1: spriteset_207_dt_bbg; spriteset_207_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_207_bbg, vehicle_is_reversed){0: sw_207_bbg_f; sw_207_bbg_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg_select, vehicle_type_id){205: sw_205_bbg; sw_207_bbg;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_bbg_select;}


switch(FEAT_TRAINS, SELF, sw_205_nse_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_nse; spriteset_205_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_205_nse_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_nse; spriteset_205_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_205_nse, vehicle_is_reversed){0: sw_205_nse_f; sw_205_nse_r;}

switch(FEAT_TRAINS, SELF, sw_207_nse_f, (count_veh_id(207)+1)%2){1: spriteset_207_m_nse; spriteset_207_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_207_nse_r, (count_veh_id(207)+1)%2){1: spriteset_207_dt_nse; spriteset_207_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_207_nse, vehicle_is_reversed){0: sw_207_nse_f; sw_207_nse_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_nse_select, vehicle_type_id){205: sw_205_nse; sw_207_nse;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_nse, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_nse_select;}


switch(FEAT_TRAINS, SELF, sw_205_cnx_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_cnx; spriteset_205_dt_cnx;}
switch(FEAT_TRAINS, SELF, sw_205_cnx_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_cnx; spriteset_205_m_cnx;}
switch(FEAT_TRAINS, PARENT, sw_205_cnx, vehicle_is_reversed){0: sw_205_cnx_f; sw_205_cnx_r;}

switch(FEAT_TRAINS, SELF, sw_207_cnx_f, (count_veh_id(207)+1)%2){1: spriteset_207_m_cnx; spriteset_207_dt_cnx;}
switch(FEAT_TRAINS, SELF, sw_207_cnx_r, (count_veh_id(207)+1)%2){1: spriteset_207_dt_cnx; spriteset_207_m_cnx;}
switch(FEAT_TRAINS, PARENT, sw_207_cnx, vehicle_is_reversed){0: sw_207_cnx_f; sw_207_cnx_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx_select, vehicle_type_id){205: sw_205_cnx; sw_207_cnx;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_cnx_select;}
	

//Trailers
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brg_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_brg;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brb_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_brb;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_bbg;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_nse_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_nse;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_cnx;}

//Livery Switches
switch(FEAT_TRAINS, SELF, sw_205_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_thump_brg;
	1964 .. 1975: sw_southern_thump_brb;
	1964 .. 1982: sw_southern_thump_bbg;
	1983 .. 1995: sw_southern_thump_nse;
	1996 .. 4096: sw_southern_thump_cnx;
	sw_southern_thump_cnx;
}

switch(FEAT_TRAINS, SELF, sw_205_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_thump_brg_t;
	1964 .. 1975: sw_southern_thump_brb_t;
	1964 .. 1982: sw_southern_thump_bbg_t;
	1983 .. 1995: sw_southern_thump_nse_t;
	1996 .. 4096: sw_southern_thump_cnx_t;
	sw_southern_thump_cnx_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_205_manual_livery_decider, cargo_subtype){
	0: sw_southern_thump_brg;
	1: sw_southern_thump_brb;
	2: sw_southern_thump_bbg;
	3: sw_southern_thump_nse;
	4: sw_southern_thump_cnx;
}

switch(FEAT_TRAINS, SELF, sw_205_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_thump_brg_t;
	1: sw_southern_thump_brb_t;
	2: sw_southern_thump_bbg_t;
	3: sw_southern_thump_nse_t;
	4: sw_southern_thump_cnx_t;
}

switch(FEAT_TRAINS, SELF, sw_205_livery_choice_decider, livery_choice){1 : sw_205_manual_livery_decider ; sw_205_passenger_livery_decider ;}
switch(FEAT_TRAINS, SELF, sw_205_livery_choice_decider_t, livery_choice){1 : sw_205_manual_livery_decider_t ; sw_205_passenger_livery_decider_t ;}

//Refit text

switch(FEAT_TRAINS, SELF, sw_205_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_BRBLUEGREY);
	3: string(STR_LIVERY_NSE);
	4: string(STR_LIVERY_CONNEX);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_205_refit_text_decider, livery_choice){
	1 : sw_205_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_205_purchase, current_year){
	0 .. 1963: spriteset_205_brg_purchase;
	1964 .. 1975: spriteset_205_brb_purchase;
	1964 .. 1982: spriteset_205_bbg_purchase;
	1983 .. 1995: spriteset_205_nse_purchase;
	1996 .. 4096: spriteset_205_cnx_purchase;
	spriteset_205_cnx_purchase;
}

//Visual Effects switch
switch(FEAT_TRAINS, PARENT, sw_205_visual_effect_f, vehicle_is_reversed){1: vfx_diesel_default; VISUAL_EFFECT_DISABLE;}
switch(FEAT_TRAINS, PARENT, sw_205_visual_effect_r, vehicle_is_reversed){1: VISUAL_EFFECT_DISABLE; vfx_diesel_default;}
switch(FEAT_TRAINS, SELF, sw_205_visual_effect, (count_veh_id(205)+1)%2){1: sw_205_visual_effect_r; sw_205_visual_effect_f;}
switch(FEAT_TRAINS, SELF, sw_207_visual_effect, (count_veh_id(207)+1)%2){1: sw_205_visual_effect_r; sw_205_visual_effect_f;}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_205_headcode, position_in_consist){0: spriteset_205_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_205_headcode_2, position_in_consist_from_end){0: spriteset_205_headcode_r; sw_205_headcode;}
switch(FEAT_TRAINS, SELF, sw_207_headcode, position_in_consist){0: spriteset_207_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_207_headcode_2, position_in_consist_from_end){0: spriteset_207_headcode_r; sw_207_headcode;}
switch(FEAT_TRAINS, SELF, sw_southern_thump_headcode, vehicle_type_id){205: sw_205_headcode_2; sw_207_headcode_2;}


switch(FEAT_TRAINS, SELF, sw_205_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_205_livery_choice_decider;
	1 : return sw_southern_thump_headcode;
}

switch(FEAT_TRAINS, SELF, sw_205_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_205_livery_choice_decider_t;
}
//Recolour
random_switch(FEAT_TRAINS, SELF, sw_205_green_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_blue_grey_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_205_colour_mapping_auto, current_year){
	0 .. 1963: sw_205_green_colour_mapping;
	1964 .. 1975: sw_205_blue_grey_colour_mapping;
	1964 .. 1982: sw_205_blue_grey_colour_mapping;
	1983 .. 1995: sw_205_nse_colour_mapping;
	1996 .. 4096: sw_205_cnx_colour_mapping;
	sw_205_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_205_colour_mapping_manual, cargo_subtype){
	0: sw_205_green_colour_mapping;
	1: sw_205_blue_grey_colour_mapping;
	2: sw_205_blue_grey_colour_mapping;
	3: sw_205_nse_colour_mapping;
	4: sw_205_cnx_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_205_colour_mapping_manual_check, livery_choice){
	1 : sw_205_colour_mapping_manual ;
	sw_205_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_205_colour_mapping_decider, colour_scheme_1){
	1 : sw_205_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_205_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	201: return CB_RESULT_ATTACH_ALLOW;
	207: return CB_RESULT_ATTACH_ALLOW;
	207: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_205_NO_COUPLE);
}



item (FEAT_TRAINS, item_205, 205) {
	property {
		name: 							string(STR_NAME_205);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					18;
		cost_factor:					27;
		running_cost_factor:			16;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							44 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_DIESEL;
	}
	graphics {
		can_attach_wagon:					sw_205_coupling_restrictions;
		default: 							sw_205_default;
		purchase:							sw_205_purchase;
		create_effect:						sw_205_visual_effect;
		cargo_subtype_text:					sw_205_refit_text_decider ;
		colour_mapping:						sw_205_colour_mapping_decider;
		purchase_colour_mapping: 			sw_205_colour_mapping_auto;
		sound_effect:                   	sw_sfx_diesel_loco_small;
		running_cost_factor: 				return(current_speed == 0 ? 7 : 16) ;
		purchase_running_cost_factor:		16;
}
		livery_override (9010) {
		cargo_capacity: 65;
		default: sw_205_default_t;
		colour_mapping:	sw_205_colour_mapping_decider;
		cargo_subtype_text: sw_205_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_205, 205){
	property{
		name                           : string(STR_NAME_205_ALT) ;
	}
}
}

item (FEAT_TRAINS, item_207, 207) {
	property {
		name: 							string(STR_NAME_207);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1961, 1, 1);
		model_life:						25;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				8;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					16;
		cost_factor:					27;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							44 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_DIESEL;
        variant_group:					205;
	}
	graphics {
		can_attach_wagon:					sw_205_coupling_restrictions;
		default: 							sw_205_default;
		purchase:							sw_205_purchase;
		create_effect:						sw_207_visual_effect;
		cargo_subtype_text:					sw_205_refit_text_decider ;
		colour_mapping:						sw_205_colour_mapping_decider;
		purchase_colour_mapping: 			sw_205_colour_mapping_auto;
		sound_effect:                   	sw_sfx_diesel_loco_small;
		running_cost_factor: 				return(current_speed == 0 ? 7 : 15) ;
		purchase_running_cost_factor:		16;
}
		livery_override (9010) {
		cargo_capacity: 65;
		default: sw_205_default_t;
		colour_mapping:	sw_205_colour_mapping_decider;
		cargo_subtype_text: sw_205_refit_text_decider ;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_207, 207){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_207, 207){
	property{
		name                           : string(STR_NAME_207_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DEMU/class_210.pnml" 1
//210 DMBSO
spriteset(spriteset_210_m_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_210_m_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 525)}
//210 DTC
spriteset(spriteset_210_dt_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 425)}
spriteset(spriteset_210_dt_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 500)}
//Trailer
spriteset(spriteset_210_t_brb, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 475)}
spriteset(spriteset_210_t_nse, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 550)}
//Purchase
spriteset(spriteset_210_brb_purchase, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(269, 475)}
spriteset(spriteset_210_nse_purchase, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(269, 550)}
//Headcodes
spriteset(spriteset_210_headcode_f, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 300)}
spriteset(spriteset_210_headcode_r, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 275)}


//Switches
switch(FEAT_TRAINS, SELF, sw_210_brb_f, (count_veh_id(210)+1)%2){1: spriteset_210_m_brb; spriteset_210_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_210_brb_r, (count_veh_id(210)+1)%2){1: spriteset_210_dt_brb; spriteset_210_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_210_brb, vehicle_is_reversed){0: sw_210_brb_f; sw_210_brb_r;}

switch(FEAT_TRAINS, SELF, sw_210_nse_f, (count_veh_id(210)+1)%2){1: spriteset_210_m_nse; spriteset_210_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_210_nse_r, (count_veh_id(210)+1)%2){1: spriteset_210_dt_nse; spriteset_210_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_210_nse, vehicle_is_reversed){0: sw_210_nse_f; sw_210_nse_r;}


//Livery Switches
switch(FEAT_TRAINS, SELF, sw_210_passenger_livery_decider, current_year){
	1983 .. 1995: sw_210_nse;
	sw_210_brb;
}

switch(FEAT_TRAINS, SELF, sw_210_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_210_t_nse;
	spriteset_210_t_brb;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_210_manual_livery_decider, cargo_subtype){
	1: sw_210_nse;
	sw_210_brb;
}

switch(FEAT_TRAINS, SELF, sw_210_manual_livery_decider_t, cargo_subtype){
	1: spriteset_210_t_nse;
	spriteset_210_t_brb;
}

switch(FEAT_TRAINS, SELF, sw_210_livery_choice_decider, livery_choice){1 : sw_210_manual_livery_decider ; sw_210_passenger_livery_decider ;}
switch(FEAT_TRAINS, SELF, sw_210_livery_choice_decider_t, livery_choice){1 : sw_210_manual_livery_decider_t ; sw_210_passenger_livery_decider_t ;}

//Refit text

switch(FEAT_TRAINS, SELF, sw_210_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRBLUE);
	1: string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_210_refit_text_decider, livery_choice){
	1 : sw_210_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_210_purchase, current_year){
	1983 .. 1995: spriteset_210_nse_purchase;
	spriteset_210_brb_purchase;
}

//Visual Effects switch
switch(FEAT_TRAINS, PARENT, sw_210_visual_effect_f, vehicle_is_reversed){1: vfx_diesel_default; VISUAL_EFFECT_DISABLE;}
switch(FEAT_TRAINS, PARENT, sw_210_visual_effect_r, vehicle_is_reversed){1: VISUAL_EFFECT_DISABLE; vfx_diesel_default;}
switch(FEAT_TRAINS, SELF, sw_210_visual_effect, (count_veh_id(210)+1)%2){1: sw_210_visual_effect_r; sw_210_visual_effect_f;}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_210_headcode, position_in_consist){0: spriteset_210_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_210_headcode_2, position_in_consist_from_end){0: spriteset_210_headcode_r; sw_210_headcode;}


switch(FEAT_TRAINS, SELF, sw_210_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_210_livery_choice_decider;
	1 : return sw_210_headcode_2;
}

switch(FEAT_TRAINS, SELF, sw_210_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_210_livery_choice_decider_t;
}


//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_210_colour_mapping_auto, current_year){
	1983 .. 1995: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_210_colour_mapping_manual, cargo_subtype){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, PARENT, sw_210_colour_mapping_manual_check, livery_choice){
	1 : sw_210_colour_mapping_manual ;
	sw_210_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_210_colour_mapping_decider, colour_scheme_1){
	1 : sw_210_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_210_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	210: return CB_RESULT_ATTACH_ALLOW;
	317: return CB_RESULT_ATTACH_ALLOW;
	37: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_210_NO_COUPLE);
}



item (FEAT_TRAINS, item_210, 210) {
	property {
		name: 							string(STR_NAME_210);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1982, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					24;
		cost_factor:					60;
		running_cost_factor:			39;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							90 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1140 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							44 ton;
		tractive_effort_coefficient:	0.19;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_DIESEL;
	}
	graphics {
		can_attach_wagon:					sw_210_coupling_restrictions;
		default: 							sw_210_default;
		purchase:							sw_210_purchase;
		create_effect:						sw_210_visual_effect;
		cargo_subtype_text:					sw_210_refit_text_decider ;
		colour_mapping:						sw_210_colour_mapping_decider;
		purchase_colour_mapping: 			sw_210_colour_mapping_auto;
		sound_effect:                   	sw_sfx_diesel_loco_small;
		running_cost_factor: 				return(current_speed == 0 ? 9 : 39) ;
		purchase_running_cost_factor:		39;
}
		livery_override (9030) {
		cargo_capacity: 95;
		default: sw_210_default_t;
		colour_mapping:	sw_210_colour_mapping_decider;
		cargo_subtype_text: sw_210_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_210, 210){
	property{
		name                           : string(STR_NAME_210_ALT) ;
	}
}
}

if (enable_prototypes < 1){
item (FEAT_TRAINS, item_210, 210){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/DEMU/voyager.pnml" 1
//Voyager


//Sprite sets

spriteset(gfx_voyager_virgin_middle		, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 000, 225)}
spriteset(gfx_voyager_virgin_front		, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 000, 200)}

spriteset(gfx_voyager_arriva_middle		, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 000, 275)}
spriteset(gfx_voyager_arriva_front		, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 000, 250)}

spriteset(gfx_voyager_avanti_middle		, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 358, 325)}
spriteset(gfx_voyager_avanti_front		, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 358, 300)}

spriteset(gfx_meridian_mml_middle		, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 000, 325)}
spriteset(gfx_meridian_mml_front		, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 000, 300)}

spriteset(gfx_meridian_emt_middle		, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 358, 275)}
spriteset(gfx_meridian_emt_front		, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 358, 250)}

spriteset(gfx_voyager_virgin_middle_2cc	, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 179, 225)}
spriteset(gfx_voyager_virgin_front_2cc	, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 179, 200)}

spriteset(gfx_voyager_arriva_middle_2cc	, "gfx/DEMU/voyajah.png"	){	template_8_4_networker		( 179, 275)}
spriteset(gfx_voyager_arriva_front_2cc	, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 179, 250)}

spriteset(gfx_voyager_virgin_purchase	, "gfx/DEMU/voyajah.png"	){	template_dualhead_purchase	( 269, 225)}
spriteset(gfx_voyager_arriva_purchase	, "gfx/DEMU/voyajah.png"	){	template_dualhead_purchase	( 269, 275)}

spriteset(gfx_voyager_headlight			, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 358, 200)}
spriteset(gfx_voyager_taillight			, "gfx/DEMU/voyajah.png"	){	template_8_8_networker		( 358, 225)}


//Switches

switch(FEAT_TRAINS, SELF, sw_voyager_virgin_2cc, colour_scheme_1	){ 1 : gfx_voyager_virgin_front ; gfx_voyager_virgin_front_2cc ; }
switch(FEAT_TRAINS, SELF, sw_voyager_virgin_t_2cc, colour_scheme_1	){ 1 : gfx_voyager_virgin_middle ; gfx_voyager_virgin_middle_2cc ; }

switch(FEAT_TRAINS, SELF, sw_voyager_arriva_2cc, colour_scheme_1	){ 1 : gfx_voyager_arriva_front ; gfx_voyager_arriva_front_2cc ; }
switch(FEAT_TRAINS, SELF, sw_voyager_arriva_t_2cc, colour_scheme_1	){ 1 : gfx_voyager_arriva_middle ; gfx_voyager_arriva_middle_2cc ; }

//Liveries

switch(FEAT_TRAINS, SELF, sw_voyager_auto, current_year < 2009){
	1 : sw_voyager_virgin_2cc ;
	sw_voyager_arriva_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_manual, cargo_subtype){
	1 : sw_voyager_arriva_2cc ;
	2 : gfx_voyager_avanti_front ;
	3 : gfx_meridian_mml_front ;
	4 : gfx_meridian_emt_front ;
	sw_voyager_virgin_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_manual_check, livery_choice){
	1 : sw_voyager_manual ;
	sw_voyager_auto ;
}


switch(FEAT_TRAINS, SELF, sw_voyager_headlights, position_in_consist){ 0 : gfx_voyager_headlight ;}
switch(FEAT_TRAINS, SELF, sw_voyager_taillights, position_in_consist_from_end){ 0 : gfx_voyager_taillight ;}

switch(FEAT_TRAINS, SELF, sw_voyager_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_voyager_manual_check ;
	1 : sw_voyager_taillights ;
	2 : sw_voyager_headlights ;
}


//Intermediate carriages

switch(FEAT_TRAINS, SELF, sw_voyager_middle_auto, current_year < 2009){
	1 : sw_voyager_virgin_t_2cc ;
	sw_voyager_arriva_t_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_middle_manual, cargo_subtype){
	1 : sw_voyager_arriva_t_2cc ;
	2 : gfx_voyager_avanti_middle ;
	3 : gfx_meridian_mml_middle ;
	4 : gfx_meridian_emt_middle ;
	sw_voyager_virgin_t_2cc ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_middle_manual_check, livery_choice){
	1 : sw_voyager_middle_manual ;
	sw_voyager_middle_auto ;
}


//Colour Mapping

switch(FEAT_TRAINS, SELF, sw_voyager_colours_auto, current_year < 2009){
	1 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_PINK, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_PINK, COLOUR_RED) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_manual_check, livery_choice){
	1 : sw_voyager_colours_manual ;
	sw_voyager_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_2cc_check, colour_scheme_1){
	1 : sw_voyager_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_voyager_purchase_sprite, current_year < 2009){
	1 : gfx_voyager_virgin_purchase ;
	gfx_voyager_arriva_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_purchase_2cc_check, colour_scheme_1){
	1 : sw_voyager_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_voyager_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	1 : string(STR_LIVERY_ARRIVA_XC) ;
	2 : string(STR_LIVERY_AVANTI) ;
	3 : string(STR_LIVERY_MIDLAND_MAINLINE_BLUE) ;
	4 : string(STR_LIVERY_EMT) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_refit_text_check, livery_choice){
	1 : sw_voyager_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item


switch(FEAT_TRAINS, SELF, sw_voyager_attach, vehicle_type_id){
	220 : return CB_RESULT_ATTACH_ALLOW  ;
	item_MU90 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_220_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_voyager, 220){
	property{
		name                           : string(STR_NAME_VOYAGER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_TILT, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2001,1,1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 100 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 180 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 65 ;
		loading_speed                  : 17 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 125 mph ;
		power                          : 1120 kW ;
		weight                         : 50 ton ;
		tractive_effort_coefficient    : 0.15 ;
		air_drag_coefficient           : 0.06 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
	}
	graphics{
		default							: sw_voyager_sprite_stack ;
		purchase						: sw_voyager_purchase_sprite ;
		sound_effect					: sw_sfx_dmu_two ;
		create_effect					: vfx_diesel_default ;
		colour_mapping					: sw_voyager_colours_2cc_check ;
		purchase_colour_mapping			: sw_voyager_purchase_2cc_check ;
		cargo_subtype_text				: sw_voyager_refit_text_check ;
		can_attach_wagon				: sw_voyager_attach ;
		running_cost_factor				: return(current_speed == 0 ? 50 : 180) ;
		purchase_running_cost_factor	: 180 ;
	}
	livery_override (item_MU90){
		default							: sw_voyager_middle_manual_check ;
		colour_mapping					: sw_voyager_colours_2cc_check ;
		cargo_capacity					: 70 ;
		power							: 560 ;
		cargo_subtype_text				: sw_voyager_refit_text_check ;
		weight							: 45 ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect					: vfx_diesel_default ;
	}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_voyager, 220){
	property{
		name                           : string(STR_NAME_VOYAGER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/DEMU/class_769.pnml" 1
//Front Cars
spriteset(spriteset_769_f_gwr, "gfx/DEMU/class_769.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_769_f_tfw, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 500)}
spriteset(spriteset_769_f_nra, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 800)}
//Rear Cars
spriteset(spriteset_769_r_gwr, "gfx/DEMU/class_769.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_769_r_tfw, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_769_r_nra, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 825)}
//Med Driving
spriteset(spriteset_769_o_gwr, "gfx/DEMU/class_769.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_769_o_tfw, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_769_o_nra, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 850)}
//PMSO
spriteset(spriteset_769_m_gwr, "gfx/DEMU/class_769.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_769_m_tfw, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_769_m_nra, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 775)}
//Trailer
spriteset(spriteset_769_t_gwr, "gfx/DEMU/class_769.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_769_t_tfw, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_769_t_nra, "gfx/DEMU/class_769.png") {template_8_8_networker(179, 750)}
//Purchase
spriteset(spriteset_769_purchase_gwr, "gfx/DEMU/class_769.png") {template_dualhead_purchase(0, 275)}
spriteset(spriteset_769_purchase_tfw, "gfx/DEMU/class_769.png") {template_dualhead_purchase(179, 575)}
spriteset(spriteset_769_purchase_nra, "gfx/DEMU/class_769.png") {template_dualhead_purchase(179, 875)}
//Panto
spriteset(spriteset_769_panto_up, "gfx/DEMU/class_769.png") {template_8_8_networker(180, 0)}
spriteset(spriteset_769_panto_dn, "gfx/DEMU/class_769.png") {template_8_8_networker(180, 25)}


//Switches

//Power Car
switch(FEAT_TRAINS, SELF, sw_769_gwr_f, position_in_consist){
	0: spriteset_769_f_gwr; spriteset_769_o_gwr;
}
switch(FEAT_TRAINS, SELF, sw_flex_gwr_select, position_in_consist_from_end){
	0: spriteset_769_r_gwr; sw_769_gwr_f;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_gwr, TRIGGER_VEHICLE_SERVICE){1: sw_flex_gwr_select;}
//
switch(FEAT_TRAINS, SELF, sw_769_tfw_f, position_in_consist){
	0: spriteset_769_f_tfw; spriteset_769_o_tfw;
}
switch(FEAT_TRAINS, SELF, sw_flex_tfw_select, position_in_consist_from_end){
	0: spriteset_769_r_tfw; sw_769_tfw_f;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_tfw, TRIGGER_VEHICLE_SERVICE){1: sw_flex_tfw_select;}	
//
switch(FEAT_TRAINS, SELF, sw_769_nra_f, position_in_consist){
	0: spriteset_769_f_nra; spriteset_769_o_nra;
}
switch(FEAT_TRAINS, SELF, sw_flex_nra_select, position_in_consist_from_end){
	0: spriteset_769_r_nra; sw_769_nra_f;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_nra, TRIGGER_VEHICLE_SERVICE){1: sw_flex_nra_select;}
	
	
	
//Trailer/Pan
switch(FEAT_TRAINS, SELF, sw_769_gwr_msb_f, position_in_vehid_chain){
	0: spriteset_769_m_gwr; spriteset_769_t_gwr;
}
switch(FEAT_TRAINS, SELF, sw_769_gwr_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_769_m_gwr; spriteset_769_t_gwr;
}
switch(FEAT_TRAINS, SELF, sw_flex_gwr_select_t, vehicle_is_reversed){
	0: sw_769_gwr_msb_f; 
	sw_769_gwr_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_gwr_t, TRIGGER_VEHICLE_SERVICE){1: sw_flex_gwr_select_t;}

switch(FEAT_TRAINS, SELF, sw_769_tfw_msb_f, position_in_vehid_chain){
	0: spriteset_769_m_tfw; spriteset_769_t_tfw;
}
switch(FEAT_TRAINS, SELF, sw_769_tfw_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_769_m_tfw; spriteset_769_t_tfw;
}
switch(FEAT_TRAINS, SELF, sw_flex_tfw_select_t, vehicle_is_reversed){
	0: sw_769_tfw_msb_f; 
	sw_769_tfw_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_tfw_t, TRIGGER_VEHICLE_SERVICE){1: sw_flex_tfw_select_t;}

switch(FEAT_TRAINS, SELF, sw_769_nra_msb_f, position_in_vehid_chain){
	0: spriteset_769_m_nra; spriteset_769_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_769_nra_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_769_m_nra; spriteset_769_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_flex_nra_select_t, vehicle_is_reversed){
	0: sw_769_nra_msb_f; 
	sw_769_nra_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_flex_nra_t, TRIGGER_VEHICLE_SERVICE){1: sw_flex_nra_select_t;}


//Panto

switch(FEAT_TRAINS, SELF, sw_769_panto_check, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
	1: spriteset_769_panto_up ;
	spriteset_769_panto_dn ;
}
switch(FEAT_TRAINS, SELF, sw_769_pan_msb_f, position_in_vehid_chain){
	0: sw_769_panto_check;
}
switch(FEAT_TRAINS, SELF, sw_769_pan_msb_r, position_in_vehid_chain_from_end){
	0: sw_769_panto_check;
}
switch(FEAT_TRAINS, SELF, sw_flex_pan_select_t, vehicle_is_reversed){
	0: sw_769_pan_msb_f; 
	sw_769_pan_msb_r;
}


//Livery Switches 
 
//Manual liveries

switch(FEAT_TRAINS, SELF, sw_769_manual_livery_decider, cargo_subtype){
	0: sw_flex_gwr;
	1: sw_flex_tfw;
	2: sw_flex_nra;
}

switch(FEAT_TRAINS, SELF, sw_769_manual_livery_decider_t, cargo_subtype){
	0: sw_flex_gwr_t;
	1: sw_flex_tfw_t;
	2: sw_flex_nra_t;
}

switch(FEAT_TRAINS, SELF, sw_769_livery_choice_decider, livery_choice){
	1 : sw_769_manual_livery_decider ; 
	sw_flex_gwr ;
}

switch(FEAT_TRAINS, SELF, sw_769_livery_choice_decider_t, livery_choice){
	1 : sw_769_manual_livery_decider_t ; 
	sw_flex_gwr_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_769_refit_text, cargo_subtype){
	0: string(STR_LIVERY_FIRST_GWR);
	1: string(STR_LIVERY_TFW);
	2: string(STR_LIVERY_NORTHERN_ARRIVA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_769_refit_text_decider, livery_choice){
	1 : sw_769_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_769_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_769_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_769_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_769_livery_choice_decider_t;
	1 : return sw_flex_pan_select_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_769_tfw_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_769_gwr_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_769_nra_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}
//Recolour Switches


switch(FEAT_TRAINS, SELF, sw_769_colour_mapping_manual, cargo_subtype){
	0: sw_769_gwr_colour_mapping;
	1: sw_769_tfw_colour_mapping;
	2: sw_769_nra_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_769_colour_mapping_manual_check, livery_choice){
	1 : sw_769_colour_mapping_manual ;
	sw_769_gwr_colour_mapping ;
}

switch(FEAT_TRAINS, PARENT, sw_769_colour_mapping_decider, colour_scheme_1){
	1 : sw_769_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, PARENT, sw_769_colour_mapping_purchase, colour_scheme_1){
	1 : sw_769_gwr_colour_mapping ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_769_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	769: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_769_NO_COUPLE);
}

switch(FEAT_TRAINS, PARENT, sw_769_power, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")) || tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR")){
	1 : 1438 ;
	1046 ;
}



//Effects

switch(FEAT_TRAINS, SELF, sw_769_sfx_check, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")) || tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR")){
	1 : sw_sfx_emu_gec ;
	sw_sfx_dmu_one ;
}


switch(FEAT_TRAINS, SELF, sw_769_vfx_check_2, tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR")){
	1 : vfx_3rd ;
	vfx_diesel_default ;
}

switch(FEAT_TRAINS, SELF, sw_769_vfx_check_1, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
	1 : vfx_ohle ;
	sw_769_vfx_check_2 ;
}


switch(FEAT_TRAINS, SELF, sw_769_effect_1_check, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")) || tile_powers_railtype("SAA3") || tile_powers_railtype("3RDR") || tile_powers_railtype("SAA4") || tile_powers_railtype("4RDR")){
	1 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	EFFECT_SPAWN_MODEL_DIESEL ;
}





item (FEAT_TRAINS, item_769, 769) {
	property {
		name: 							string(STR_NAME_769);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2019, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					23;
		cost_factor:					45;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1438 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					75;
		weight:							30 ton;
		tractive_effort_coefficient:	0.1;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_DIESEL;
	}
	graphics {
		can_attach_wagon:					sw_769_coupling_restrictions;
		default: 							sw_769_default;
		purchase:							spriteset_769_purchase_gwr;
		create_effect:						sw_769_vfx_check_1;
		cargo_subtype_text:					sw_769_refit_text_decider ;
		colour_mapping:						sw_769_colour_mapping_decider;
		purchase_colour_mapping: 			sw_769_colour_mapping_purchase;
		running_cost_factor: return(current_speed == 0 ? 8 : 34) ;
		purchase_running_cost_factor:		34;
		sound_effect:						sw_769_sfx_check ;
		power:								sw_769_power;
		effect_spawn_model_and_powered:		sw_769_effect_1_check;
}
		livery_override (9030) {
		cargo_capacity: 85;
		default: sw_769_default_t;
		colour_mapping:	sw_769_colour_mapping_decider;
		cargo_subtype_text: sw_769_refit_text_decider ;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_769, 769){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_769, 769){
	property{
		name                           : string(STR_NAME_769_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3

# 1 "src/EMU/class_307.pnml" 1
spriteset(spriteset_307_brg, "gfx/EMU/class_307.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_307_brg_t, "gfx/EMU/class_307.png") {template_8_4_networker(358, 25)}
spriteset(spriteset_307_brg_t_p, "gfx/EMU/class_307.png") {template_8_8_networker(358, 50)}
spriteset(spriteset_307_brg_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(358, 50)}
spriteset(spriteset_307_bry, "gfx/EMU/class_307.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_307_bry_t, "gfx/EMU/class_307.png") {template_8_4_networker(0, 25)}
spriteset(spriteset_307_bry_t_p, "gfx/EMU/class_307.png") {	template_8_8_networker(0, 50)}
spriteset(spriteset_307_bry_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(0, 50)}
spriteset(spriteset_307_brb, "gfx/EMU/class_307.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_307_brb_t, "gfx/EMU/class_307.png") {template_8_4_networker(179, 25)}
spriteset(spriteset_307_brb_t_p, "gfx/EMU/class_307.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_307_brb_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(179, 50)}
spriteset(spriteset_307_bre, "gfx/EMU/class_307.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_307_bre_t, "gfx/EMU/class_307.png") {template_8_4_networker(0, 100)}
spriteset(spriteset_307_bre_t_p, "gfx/EMU/class_307.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_307_bre_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(0, 125)}
spriteset(spriteset_307_nse, "gfx/EMU/class_307.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_307_nse_t, "gfx/EMU/class_307.png") {template_8_4_networker(179, 100)}
spriteset(spriteset_307_nse_t_p, "gfx/EMU/class_307.png") {template_8_8_networker(179, 125)}
spriteset(spriteset_307_nse_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(179, 125)}
spriteset(spriteset_307_wyt, "gfx/EMU/class_307.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_307_wyt_t, "gfx/EMU/class_307.png") {template_8_4_networker(358, 100)}
spriteset(spriteset_307_wyt_t_p, "gfx/EMU/class_307.png") {template_8_8_networker(358, 125)}
spriteset(spriteset_307_wyt_t_p_r, "gfx/EMU/class_307.png") {template_8_8_networker_reverse(358, 125)}
spriteset(spriteset_307_purchase_brb, "gfx/EMU/class_307.png") {template_dualhead_purchase(537, 75)}
spriteset(spriteset_307_purchase_bre, "gfx/EMU/class_307.png") {template_dualhead_purchase(537, 88)}
spriteset(spriteset_307_purchase_nse, "gfx/EMU/class_307.png") {template_dualhead_purchase(537, 101)}
spriteset(spriteset_307_purchase_wyt, "gfx/EMU/class_307.png") {template_dualhead_purchase(537, 114)}
spriteset(spriteset_307_f, "gfx/EMU/class_307.png") {template_8_8_networker(537, 0)}
spriteset(spriteset_307_f_n, "gfx/EMU/class_307.png") {template_8_8_networker(537, 50)}
spriteset(spriteset_307_r, "gfx/EMU/class_307.png") {template_8_8_networker(537, 25)}

//PURCHASE AUTO

switch(FEAT_TRAINS, SELF, sw_307_purchase, current_year){
	0..1970: spriteset_307_purchase_brb;
	1971..1982: spriteset_307_purchase_bre;
	1983 .. 1991: spriteset_307_purchase_nse;
	 spriteset_307_purchase_wyt;
}

//HEADLIGHT SWITCHES

switch(FEAT_TRAINS, SELF, sw_307_hl_classic_f, position_in_consist){
	0:spriteset_307_f;
}

switch(FEAT_TRAINS, SELF, sw_307_hl_classic, position_in_consist_from_end){
	0:spriteset_307_r;
	sw_307_hl_classic_f;
}

switch(FEAT_TRAINS, SELF, sw_307_hl_refurb_f, position_in_consist){
	0:spriteset_307_f_n;
}

switch(FEAT_TRAINS, SELF, sw_307_hl_refurb, position_in_consist_from_end){
	0:spriteset_307_r;
	sw_307_hl_refurb_f;
}

switch(FEAT_TRAINS, SELF, sw_307_manual_select_hl, cargo_subtype){
	0..3:sw_307_hl_classic;
	4..5:sw_307_hl_refurb;
}

switch(FEAT_TRAINS, SELF, sw_307_auto_select_hl, current_year){
	0..1982:sw_307_hl_classic;
	sw_307_hl_refurb;
}

switch(FEAT_TRAINS, SELF, sw_307_hl, livery_choice){
	1: sw_307_manual_select_hl;
	sw_307_auto_select_hl;
}

//MANUAL LIVERIES

switch(FEAT_TRAINS, SELF, sw_307_d_livery, cargo_subtype){
	0:spriteset_307_brg;
	1:spriteset_307_bry;
	2:spriteset_307_brb;
	3:spriteset_307_bre;
	4:spriteset_307_nse;
	5:spriteset_307_wyt;
}

switch(FEAT_TRAINS, SELF, sw_307_t_livery, cargo_subtype){
	0:spriteset_307_brg_t;
	1:spriteset_307_bry_t;
	2:spriteset_307_brb_t;
	3:spriteset_307_bre_t;
	4:spriteset_307_nse_t;
	5:spriteset_307_wyt_t;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p_livery, cargo_subtype){
	0:spriteset_307_brg_t_p;
	1:spriteset_307_bry_t_p;
	2:spriteset_307_brb_t_p;
	3:spriteset_307_bre_t_p;
	4:spriteset_307_nse_t_p;
	5:spriteset_307_wyt_t_p;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p_r_livery, cargo_subtype){
	0:spriteset_307_brg_t_p_r;
	1:spriteset_307_bry_t_p_r;
	2:spriteset_307_brb_t_p_r;
	3:spriteset_307_bre_t_p_r;
	4:spriteset_307_nse_t_p_r;
	5:spriteset_307_wyt_t_p_r;
}

//AUTO LIVERIES

switch(FEAT_TRAINS, SELF, sw_307_d_auto_livery, current_year){
	0..1960:spriteset_307_brg;
	1961..1965:spriteset_307_bry;
	1966..1970:spriteset_307_brb;
	1971..1982:spriteset_307_bre;
	1983..1991:spriteset_307_nse;
	spriteset_307_wyt;
}

switch(FEAT_TRAINS, SELF, sw_307_t_auto_livery, current_year){
	0..1960:spriteset_307_brg_t;
	1961..1965:spriteset_307_bry_t;
	1966..1970:spriteset_307_brb_t;
	1971..1982:spriteset_307_bre_t;
	1983..1991:spriteset_307_nse_t;
	spriteset_307_wyt_t;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p_auto_livery, current_year){
	0..1960:spriteset_307_brg_t_p;
	1961..1965:spriteset_307_bry_t_p;
	1966..1970:spriteset_307_brb_t_p;
	1971..1982:spriteset_307_bre_t_p;
	1983..1991:spriteset_307_nse_t_p;
	spriteset_307_wyt_t_p;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p_r_auto_livery, current_year){
	0..1960:spriteset_307_brg_t_p_r;
	1961..1965:spriteset_307_bry_t_p_r;
	1966..1970:spriteset_307_brb_t_p_r;
	1971..1982:spriteset_307_bre_t_p_r;
	1983..1991:spriteset_307_nse_t_p_r;
	spriteset_307_wyt_t_p_r;
}

switch(FEAT_TRAINS, SELF, sw_307_d, livery_choice){
	1: sw_307_d_livery;
	sw_307_d_auto_livery;
}

switch(FEAT_TRAINS, SELF, sw_307_t, livery_choice){
	1: sw_307_t_livery;
	sw_307_t_auto_livery;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p, livery_choice){
	1: sw_307_t_p_livery;
	sw_307_t_p_auto_livery;
}

switch(FEAT_TRAINS, SELF, sw_307_t_p_r, livery_choice){
	1: sw_307_t_p_r_livery;
	sw_307_t_p_r_auto_livery;
}

switch(FEAT_TRAINS, PARENT, sw_307_trailer_p, vehicle_is_reversed){
	0: sw_307_t_p;
	1: sw_307_t;
} 

switch(FEAT_TRAINS, PARENT, sw_307_trailer_r_p, vehicle_is_reversed){
	0: sw_307_t;
	1: sw_307_t_p_r;
} 

switch(FEAT_TRAINS, SELF, sw_307_livery_selection_t_1, position_in_vehid_chain_from_end){
	0: sw_307_trailer_r_p;
	sw_307_t;
}

switch(FEAT_TRAINS, SELF, sw_307_livery_selection_t, position_in_vehid_chain){
	0: sw_307_trailer_p;
	sw_307_livery_selection_t_1;
}

switch(FEAT_TRAINS, SELF, sw_307_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_307_d;
	1 : return sw_307_hl;
}

switch(FEAT_TRAINS, SELF, sw_307_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_307_livery_selection_t;
}


//CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE////CODER ATTENTION REQUIRED BELOW HERE//



//Refit text

switch(FEAT_TRAINS, SELF, sw_307_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRGREEN_YELLOW);
	2: string(STR_LIVERY_BRBLUE);
	3: string(STR_LIVERY_BRBLUEGREY);
	4: string(STR_LIVERY_NSE);
	5: string(STR_LIVERY_WYPTE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_307_refit_text_decider, livery_choice){
	1 : sw_307_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_307_recolour_selection_auto, current_year){
	0..1960 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	1961..1965:palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW);
	1966..1970:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	1971..1982:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	1983..1991:palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
	palette_2cc(COLOUR_RED, COLOUR_YELLOW);
} 

switch(FEAT_TRAINS, SELF, sw_307_recolour_selection_manual, cargo_subtype){
	0:palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	1:palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW);
	2:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	3:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	4:palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
	5:palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

switch(FEAT_TRAINS, SELF, sw_307_recolour_livery_selection, livery_choice){
	1: sw_307_recolour_selection_manual;
	sw_307_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_307_colour_mapping, colour_scheme_1){
	1 : sw_307_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_307_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	item_307: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_307_NO_COUPLE);
}

//Purchase sprite_id

switch(FEAT_TRAINS, SELF, sw_307_purchase_colours_check, colour_scheme_1){
	1 : sw_307_recolour_selection_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_307, 307) {
	property {
		name: 							string(STR_NAME_307);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					18;
		cost_factor:					25;
		running_cost_factor:			12;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							696 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					65;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.05;
		air_drag_coefficient:			0.10;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_307_coupling_restrictions;
		default: 							sw_307_default;
		purchase:							sw_307_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_307_colour_mapping;
		cargo_subtype_text:					sw_307_refit_text_decider;
		purchase_colour_mapping:			sw_307_recolour_selection_auto;
		running_cost_factor:				return(current_speed == 0 ? 4 : 12) ;
		purchase_running_cost_factor:		12;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 75;
		default: sw_307_trailer;
		weight:	34;
		colour_mapping:	sw_307_colour_mapping;
		cargo_subtype_text: sw_307_refit_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_307, 307){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_307, 307){
	property{
		name                           : string(STR_NAME_307_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_309.pnml" 1
spriteset(spriteset_309_fpf_mar, "gfx/EMU/class_309.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_309_fpo_mar, "gfx/EMU/class_309.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_309_fpr_mar, "gfx/EMU/class_309.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_309_ftf_mar, "gfx/EMU/class_309.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_309_fto_mar, "gfx/EMU/class_309.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_309_ftr_mar, "gfx/EMU/class_309.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_309_t_mar, "gfx/EMU/class_309.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_309_pf_mar, "gfx/EMU/class_309.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_309_pr_mar, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(179, 0)}
spriteset(spriteset_309_fpf_brb, "gfx/EMU/class_309.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_309_fpo_brb, "gfx/EMU/class_309.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_309_fpr_brb, "gfx/EMU/class_309.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_309_ftf_brb, "gfx/EMU/class_309.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_309_fto_brb, "gfx/EMU/class_309.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_309_ftr_brb, "gfx/EMU/class_309.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_309_t_brb, "gfx/EMU/class_309.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_309_pf_brb, "gfx/EMU/class_309.png") {template_8_8_networker(179, 125)}
spriteset(spriteset_309_pr_brb, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(179, 125)}
spriteset(spriteset_309_fpf_nse, "gfx/EMU/class_309.png") {template_8_8_networker(179, 300)}
spriteset(spriteset_309_fpo_nse, "gfx/EMU/class_309.png") {template_8_8_networker(179, 275)}
spriteset(spriteset_309_fpr_nse, "gfx/EMU/class_309.png") {template_8_8_networker(179, 325)}
spriteset(spriteset_309_ftf_nse, "gfx/EMU/class_309.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_309_fto_nse, "gfx/EMU/class_309.png") {template_8_8_networker(0, 275)}
spriteset(spriteset_309_ftr_nse, "gfx/EMU/class_309.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_309_t_nse, "gfx/EMU/class_309.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_309_pf_nse, "gfx/EMU/class_309.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_309_pr_nse, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(179, 250)}
spriteset(spriteset_309_purchase_mar, "gfx/EMU/class_309.png") {template_dualhead_purchase(0, 100)}
spriteset(spriteset_309_purchase_brb, "gfx/EMU/class_309.png") {template_dualhead_purchase(0, 225)}
spriteset(spriteset_309_purchase_nse, "gfx/EMU/class_309.png") {template_dualhead_purchase(0, 350)}

//PURCHASE AUTO
switch(FEAT_TRAINS, PARENT, sw_309_purchase, current_year){
	0..1970 : spriteset_309_purchase_mar;
	1971..1982: spriteset_309_purchase_brb;
	spriteset_309_purchase_nse;
} 
//MANUAL LIVERIES

switch(FEAT_TRAINS, PARENT, sw_309_pf_livery_auto, current_year){
	0..1970 : spriteset_309_fpf_mar;
	1971..1982: spriteset_309_fpf_brb;
	spriteset_309_fpf_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_pf_livery_manual, cargo_subtype){
	0:spriteset_309_fpf_mar;
	1:spriteset_309_fpf_brb;
	2:spriteset_309_fpf_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_pf_livery, livery_choice){
	1: sw_309_pf_livery_manual;
	sw_309_pf_livery_auto;
}
switch(FEAT_TRAINS, PARENT, sw_309_po_livery_auto, current_year){
	0..1970 : spriteset_309_fpo_mar;
	1971..1982: spriteset_309_fpo_brb;
	spriteset_309_fpo_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_po_livery_manual, cargo_subtype){
	0:spriteset_309_fpo_mar;
	1:spriteset_309_fpo_brb;
	2:spriteset_309_fpo_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_po_livery, livery_choice){
	1: sw_309_po_livery_manual;
	sw_309_po_livery_auto;
}
switch(FEAT_TRAINS, PARENT, sw_309_pr_livery_auto, current_year){
	0..1970 : spriteset_309_fpr_mar;
	1971..1982: spriteset_309_fpr_brb;
	spriteset_309_fpr_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_pr_livery_manual, cargo_subtype){
	0:spriteset_309_fpr_mar;
	1:spriteset_309_fpr_brb;
	2:spriteset_309_fpr_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_pr_livery, livery_choice){
	1: sw_309_pr_livery_manual;
	sw_309_pr_livery_auto;
}


switch(FEAT_TRAINS, PARENT, sw_309_ff_livery_auto, current_year){
	0..1970 : spriteset_309_ftf_mar;
	1971..1982: spriteset_309_ftf_brb;
	spriteset_309_ftf_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_ff_livery_manual, cargo_subtype){
	0:spriteset_309_ftf_mar;
	1:spriteset_309_ftf_brb;
	2:spriteset_309_ftf_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_ff_livery, livery_choice){
	1: sw_309_ff_livery_manual;
	sw_309_ff_livery_auto;
}
switch(FEAT_TRAINS, PARENT, sw_309_fo_livery_auto, current_year){
	0..1970 : spriteset_309_fto_mar;
	1971..1982: spriteset_309_fto_brb;
	spriteset_309_fto_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_fo_livery_manual, cargo_subtype){
	0:spriteset_309_fto_mar;
	1:spriteset_309_fto_brb;
	2:spriteset_309_fto_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_fo_livery, livery_choice){
	1: sw_309_fo_livery_manual;
	sw_309_fo_livery_auto;
}
switch(FEAT_TRAINS, PARENT, sw_309_fr_livery_auto, current_year){
	0..1970 : spriteset_309_ftr_mar;
	1971..1982: spriteset_309_ftr_brb;
	spriteset_309_ftr_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_fr_livery_manual, cargo_subtype){
	0:spriteset_309_ftr_mar;
	1:spriteset_309_ftr_brb;
	2:spriteset_309_ftr_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_fr_livery, livery_choice){
	1: sw_309_fr_livery_manual;
	sw_309_fr_livery_auto;
}


switch(FEAT_TRAINS, PARENT, sw_309_paf_livery_auto, current_year){
	0..1970 : spriteset_309_pf_mar;
	1971..1982: spriteset_309_pf_brb;
	spriteset_309_pf_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_paf_livery_manual, cargo_subtype){
	0:spriteset_309_pf_mar;
	1:spriteset_309_pf_brb;
	2:spriteset_309_pf_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_paf_livery, livery_choice){
	1: sw_309_paf_livery_manual;
	sw_309_paf_livery_auto;
}
switch(FEAT_TRAINS, PARENT, sw_309_par_livery_auto, current_year){
	0..1970 : spriteset_309_pr_mar;
	1971..1982: spriteset_309_pr_brb;
	spriteset_309_pr_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_par_livery_manual, cargo_subtype){
	0:spriteset_309_pr_mar;
	1:spriteset_309_pr_brb;
	2:spriteset_309_pr_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_par_livery, livery_choice){
	1: sw_309_par_livery_manual;
	sw_309_par_livery_auto;
}


switch(FEAT_TRAINS, PARENT, sw_309_t_livery_auto, current_year){
	0..1970 : spriteset_309_t_mar;
	1971..1982: spriteset_309_t_brb;
	spriteset_309_t_nse;
} 
switch(FEAT_TRAINS, SELF, sw_309_t_livery_manual, cargo_subtype){
	0:spriteset_309_t_mar;
	1:spriteset_309_t_brb;
	2:spriteset_309_t_nse;
}
switch(FEAT_TRAINS, SELF, sw_309_t_livery, livery_choice){
	1: sw_309_t_livery_manual;
	sw_309_t_livery_auto;
}


switch(FEAT_TRAINS, SELF, sw_309_driving_mid_f, count_veh_id(309)%2){
	1: sw_309_fo_livery;
	sw_309_po_livery;
}
switch(FEAT_TRAINS, SELF, sw_309_driving_mid_r, count_veh_id(309)%2){
	1: sw_309_po_livery;
	sw_309_fo_livery;
}
switch(FEAT_TRAINS, PARENT, sw_309_driving_mid, vehicle_is_reversed){
	0: sw_309_driving_mid_f;
	sw_309_driving_mid_r;
}
switch(FEAT_TRAINS, SELF, sw_309_pan_leading_front_f, position_in_consist){
	0: sw_309_pf_livery;
	sw_309_driving_mid;
}
switch(FEAT_TRAINS, SELF, sw_309_pan_leading_back_f, position_in_consist_from_end){
	0: sw_309_fr_livery;
	sw_309_pan_leading_front_f;
}
switch(FEAT_TRAINS, SELF, sw_309_pan_leading_front_r, position_in_consist){
	0: sw_309_ff_livery;
	sw_309_driving_mid;
}
switch(FEAT_TRAINS, SELF, sw_309_pan_leading_back_r, position_in_consist_from_end){
	0: sw_309_pr_livery;
	sw_309_pan_leading_front_r;
}
switch(FEAT_TRAINS, PARENT, sw_309_pan_leading, vehicle_is_reversed){
	0: sw_309_pan_leading_back_f;
	sw_309_pan_leading_back_r;
}


switch(FEAT_TRAINS, SELF, sw_309_trailer_leading_front_f, position_in_consist){
	0: sw_309_ff_livery;
	sw_309_fo_livery;
}
switch(FEAT_TRAINS, SELF, sw_309_trailer_leading, position_in_consist_from_end){
	0: sw_309_fr_livery;
	sw_309_trailer_leading_front_f;
}


switch(FEAT_TRAINS, SELF, sw_309_trailer_pan_f, position_in_consist){
	0: sw_309_paf_livery;
	sw_309_t_livery;
}
switch(FEAT_TRAINS, SELF, sw_309_trailer_pan_r, position_in_consist_from_end){
	0: sw_309_par_livery;
	sw_309_t_livery;
}
switch(FEAT_TRAINS, PARENT, sw_309_trailer_pan, vehicle_is_reversed){
	0: sw_309_trailer_pan_f;
	sw_309_trailer_pan_r;
}


switch(FEAT_TRAINS, PARENT, sw_309_livery_selection_t, random_bits){
	0..127: sw_309_trailer_pan;
	sw_309_t_livery;
}

switch(FEAT_TRAINS, PARENT, sw_309_d, random_bits){
	0..127: sw_309_trailer_leading;
	sw_309_pan_leading;
}


switch(FEAT_TRAINS, SELF, sw_309_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_309_d;
}

switch(FEAT_TRAINS, SELF, sw_309_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_309_livery_selection_t;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_309_refit_text, cargo_subtype){
	0: string(STR_LIVERY_MAROON);
	1: string(STR_LIVERY_BRBLUEGREY);
	2: string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_309_refit_text_decider, livery_choice){
	1 : sw_309_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_309_recolour_selection_auto, current_year){
	0..1970 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1971..1982:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
} 

switch(FEAT_TRAINS, SELF, sw_309_recolour_selection_manual, cargo_subtype){
	0:palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1:palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
	2:palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
}

switch(FEAT_TRAINS, SELF, sw_309_recolour_livery_selection, livery_choice){
	1: sw_309_recolour_selection_manual;
	sw_309_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_309_colour_mapping, colour_scheme_1){
	1 : sw_309_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_309_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	309: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_309_NO_COUPLE);
}

//Purchase sprite_id

switch(FEAT_TRAINS, SELF, sw_309_purchase_colours_check, colour_scheme_1){
	1 : sw_309_recolour_selection_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_309, 309) {
	property {
		name: 							string(STR_NAME_309);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1962, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					18;
		cost_factor:					25;
		running_cost_factor:			12;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							1100 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							30 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.06;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_309_coupling_restrictions;
		default: 							sw_309_default;
		purchase:							sw_309_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_309_colour_mapping;
		cargo_subtype_text:					sw_309_refit_text_decider;
		purchase_colour_mapping:			sw_309_recolour_selection_auto;
		running_cost_factor:				return(current_speed == 0 ? 4 : 12) ;
		purchase_running_cost_factor:		12;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 75;
		default: sw_309_trailer;
		weight:	34;
		colour_mapping:	sw_309_colour_mapping;
		cargo_subtype_text: sw_309_refit_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_309, 309){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_309, 309){
	property{
		name                           : string(STR_NAME_309_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_313.pnml" 1
//BR Blue/grey
spriteset(spriteset_313_brb_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_313_brb_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_313_brb_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_313_brb_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_313_brb_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_313_brb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 125)}

//NSE
spriteset(spriteset_313_nse_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_313_nse_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_313_nse_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_313_nse_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_313_nse_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_313_nse_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 275)}

//MerseyRail Old
spriteset(spriteset_313_mro_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_313_mro_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_313_mro_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_313_mro_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_313_mro_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_313_mro_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 275)}

//SilverLinK
spriteset(spriteset_313_slk_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 300)}
spriteset(spriteset_313_slk_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 325)}
spriteset(spriteset_313_slk_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 350)}
spriteset(spriteset_313_slk_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 375)}
spriteset(spriteset_313_slk_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 400)}
spriteset(spriteset_313_slk_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 425)}

//SouthEastern Blue
spriteset(spriteset_313_seb_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 450)}
spriteset(spriteset_313_seb_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_313_seb_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_313_seb_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 525)}
spriteset(spriteset_313_seb_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_313_seb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 575)}

//SouthEastern Yellow
spriteset(spriteset_313_sey_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_313_sey_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_313_sey_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 500)}
spriteset(spriteset_313_sey_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_313_sey_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_313_sey_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 575)}

//CoNneX
spriteset(spriteset_313_cnx_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 600)}
spriteset(spriteset_313_cnx_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_313_cnx_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_313_cnx_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 675)}
spriteset(spriteset_313_cnx_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_313_cnx_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 725)}

//MerseyRail New
spriteset(spriteset_313_mrn_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 600)}
spriteset(spriteset_313_mrn_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 625)}
spriteset(spriteset_313_mrn_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 650)}
spriteset(spriteset_313_mrn_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 675)}
spriteset(spriteset_313_mrn_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 700)}
spriteset(spriteset_313_mrn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 725)}

//WaGn White
spriteset(spriteset_313_wgw_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 750)}
spriteset(spriteset_313_wgw_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 775)}
spriteset(spriteset_313_wgw_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 800)}
spriteset(spriteset_313_wgw_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 825)}
spriteset(spriteset_313_wgw_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 850)}
spriteset(spriteset_313_wgw_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 875)}

//WaGn Purple
spriteset(spriteset_313_wgp_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 750)}
spriteset(spriteset_313_wgp_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 775)}
spriteset(spriteset_313_wgp_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 800)}
spriteset(spriteset_313_wgp_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 825)}
spriteset(spriteset_313_wgp_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 850)}
spriteset(spriteset_313_wgp_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 875)}

//First Capital Connect
spriteset(spriteset_313_fcc_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 900)}
spriteset(spriteset_313_fcc_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 925)}
spriteset(spriteset_313_fcc_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 950)}
spriteset(spriteset_313_fcc_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 975)}
spriteset(spriteset_313_fcc_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1000)}
spriteset(spriteset_313_fcc_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1025)}

//SouTherN
spriteset(spriteset_313_stn_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 900)}
spriteset(spriteset_313_stn_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 925)}
spriteset(spriteset_313_stn_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 950)}
spriteset(spriteset_313_stn_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 975)}
spriteset(spriteset_313_stn_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1000)}
spriteset(spriteset_313_stn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1025)}

//First Great Eastern
spriteset(spriteset_313_fge_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1050)}
spriteset(spriteset_313_fge_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1075)}
spriteset(spriteset_313_fge_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1100)}
spriteset(spriteset_313_fge_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1125)}
spriteset(spriteset_313_fge_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1150)}
spriteset(spriteset_313_fge_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1175)}

//ONE anglia
spriteset(spriteset_313_one_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1050)}
spriteset(spriteset_313_one_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1075)}
spriteset(spriteset_313_one_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1100)}
spriteset(spriteset_313_one_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1125)}
spriteset(spriteset_313_one_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1150)}
spriteset(spriteset_313_one_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1175)}

//Abellio Greater Anglia
spriteset(spriteset_313_aga_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1200)}
spriteset(spriteset_313_aga_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1225)}
spriteset(spriteset_313_aga_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1250)}
spriteset(spriteset_313_aga_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1275)}
spriteset(spriteset_313_aga_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1300)}
spriteset(spriteset_313_aga_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1325)}

//Transport For London
spriteset(spriteset_313_tfl_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1200)}
spriteset(spriteset_313_tfl_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1225)}
spriteset(spriteset_313_tfl_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1250)}
spriteset(spriteset_313_tfl_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1275)}
spriteset(spriteset_313_tfl_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1300)}
spriteset(spriteset_313_tfl_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1325)}

//SPt Classic
spriteset(spriteset_313_spc_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1350)}
spriteset(spriteset_313_spc_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1375)}
spriteset(spriteset_313_spc_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1400)}
spriteset(spriteset_313_spc_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1425)}
spriteset(spriteset_313_spc_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1450)}
spriteset(spriteset_313_spc_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1475)}

//SCot Rail
spriteset(spriteset_313_scr_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1350)}
spriteset(spriteset_313_scr_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1375)}
spriteset(spriteset_313_scr_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1400)}
spriteset(spriteset_313_scr_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1425)}
spriteset(spriteset_313_scr_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1450)}
spriteset(spriteset_313_scr_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1475)}

//SPt New
spriteset(spriteset_313_spn_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1500)}
spriteset(spriteset_313_spn_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1525)}
spriteset(spriteset_313_spn_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1550)}
spriteset(spriteset_313_spn_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1575)}
spriteset(spriteset_313_spn_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1600)}
spriteset(spriteset_313_spn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1625)}

//Switches

//Coupling

switch(FEAT_TRAINS, SELF, sw_313_coupling_restrictions, vehicle_type_id) {
    item_Mk2: return CB_RESULT_ATTACH_ALLOW;
	item_313: return CB_RESULT_ATTACH_ALLOW;
	item_314: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_313_NO_COUPLE);
}

//Power Car
switch(FEAT_TRAINS, SELF, sw_313_brb_f, position_in_consist){
	0: spriteset_313_brb_f; 
	spriteset_313_brb_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_brb, position_in_consist_from_end){
	0: spriteset_313_brb_r; 
	sw_313_brb_f;
}

switch(FEAT_TRAINS, SELF, sw_313_nse_f, position_in_consist){
	0: spriteset_313_nse_f; 
	spriteset_313_nse_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_nse, position_in_consist_from_end){
	0: spriteset_313_nse_r; 
	sw_313_nse_f;
}

switch(FEAT_TRAINS, SELF, sw_313_mro_f, position_in_consist){
	0: spriteset_313_mro_f; 
	spriteset_313_mro_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_mro, position_in_consist_from_end){
	0: spriteset_313_mro_r; 
	sw_313_mro_f;
}

switch(FEAT_TRAINS, SELF, sw_313_slk_f, position_in_consist){
	0: spriteset_313_slk_f; 
	spriteset_313_slk_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_slk, position_in_consist_from_end){
	0: spriteset_313_slk_r; 
	sw_313_slk_f;
}

switch(FEAT_TRAINS, SELF, sw_313_seb_f, position_in_consist){
	0: spriteset_313_seb_f; 
	spriteset_313_seb_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_seb, position_in_consist_from_end){
	0: spriteset_313_seb_r; 
	sw_313_seb_f;
}

switch(FEAT_TRAINS, SELF, sw_313_sey_f, position_in_consist){
	0: spriteset_313_sey_f; 
	spriteset_313_sey_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_sey, position_in_consist_from_end){
	0: spriteset_313_sey_r; 
	sw_313_sey_f;
}

switch(FEAT_TRAINS, SELF, sw_313_cnx_f, position_in_consist){
	0: spriteset_313_cnx_f; 
	spriteset_313_cnx_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_cnx, position_in_consist_from_end){
	0: spriteset_313_cnx_r; 
	sw_313_cnx_f;
}

switch(FEAT_TRAINS, SELF, sw_313_mrn_f, position_in_consist){
	0: spriteset_313_mrn_f; 
	spriteset_313_mrn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_mrn, position_in_consist_from_end){
	0: spriteset_313_mrn_r; 
	sw_313_mrn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_wgw_f, position_in_consist){
	0: spriteset_313_wgw_f; 
	spriteset_313_wgw_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_wgw, position_in_consist_from_end){
	0: spriteset_313_wgw_r; 
	sw_313_wgw_f;
}

switch(FEAT_TRAINS, SELF, sw_313_wgp_f, position_in_consist){
	0: spriteset_313_wgp_f; 
	spriteset_313_wgp_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_wgp, position_in_consist_from_end){
	0: spriteset_313_wgp_r; 
	sw_313_wgp_f;
}

switch(FEAT_TRAINS, SELF, sw_313_fcc_f, position_in_consist){
	0: spriteset_313_fcc_f; 
	spriteset_313_fcc_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_fcc, position_in_consist_from_end){
	0: spriteset_313_fcc_r; 
	sw_313_fcc_f;
}

switch(FEAT_TRAINS, SELF, sw_313_stn_f, position_in_consist){
	0: spriteset_313_stn_f; 
	spriteset_313_stn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_stn, position_in_consist_from_end){
	0: spriteset_313_stn_r; 
	sw_313_stn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_fge_f, position_in_consist){
	0: spriteset_313_fge_f; 
	spriteset_313_fge_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_fge, position_in_consist_from_end){
	0: spriteset_313_fge_r; 
	sw_313_fge_f;
}

switch(FEAT_TRAINS, SELF, sw_313_one_f, position_in_consist){
	0: spriteset_313_one_f; 
	spriteset_313_one_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_one, position_in_consist_from_end){
	0: spriteset_313_one_r; 
	sw_313_one_f;
}

switch(FEAT_TRAINS, SELF, sw_313_aga_f, position_in_consist){
	0: spriteset_313_aga_f; 
	spriteset_313_aga_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_aga, position_in_consist_from_end){
	0: spriteset_313_aga_r; 
	sw_313_aga_f;
}

switch(FEAT_TRAINS, SELF, sw_313_tfl_f, position_in_consist){
	0: spriteset_313_tfl_f; 
	spriteset_313_tfl_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_tfl, position_in_consist_from_end){
	0: spriteset_313_tfl_r; 
	sw_313_tfl_f;
}

switch(FEAT_TRAINS, SELF, sw_313_spc_f, position_in_consist){
	0: spriteset_313_spc_f; 
	spriteset_313_spc_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_spc, position_in_consist_from_end){
	0: spriteset_313_spc_r; 
	sw_313_spc_f;
}

switch(FEAT_TRAINS, SELF, sw_313_spn_f, position_in_consist){
	0: spriteset_313_spn_f; 
	spriteset_313_spn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_spn, position_in_consist_from_end){
	0: spriteset_313_spn_r; 
	sw_313_spn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_scr_f, position_in_consist){
	0: spriteset_313_scr_f; 
	spriteset_313_scr_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_scr, position_in_consist_from_end){
	0: spriteset_313_scr_r; 
	sw_313_scr_f;
}

//Trailer/Pan

switch(FEAT_TRAINS, SELF, sw_313_brb_p, position_in_vehid_chain){
	0: spriteset_313_brb_p; 
	spriteset_313_brb_t;
}

switch(FEAT_TRAINS, SELF, sw_313_nse_p, position_in_vehid_chain){
	0: spriteset_313_nse_p; 
	spriteset_313_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_313_mro_p, position_in_vehid_chain){
	0: spriteset_313_mro_p; 
	spriteset_313_mro_t;
}

switch(FEAT_TRAINS, SELF, sw_313_slk_p, position_in_vehid_chain){
	0: spriteset_313_slk_p; 
	spriteset_313_slk_t;
}

switch(FEAT_TRAINS, SELF, sw_313_seb_p, position_in_vehid_chain){
	0: spriteset_313_seb_p; 
	spriteset_313_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_313_sey_p, position_in_vehid_chain){
	0: spriteset_313_sey_p; 
	spriteset_313_sey_t;
}

switch(FEAT_TRAINS, SELF, sw_313_cnx_p, position_in_vehid_chain){
	0: spriteset_313_cnx_p; 
	spriteset_313_cnx_t;
}

switch(FEAT_TRAINS, SELF, sw_313_mrn_p, position_in_vehid_chain){
	0: spriteset_313_mrn_p; 
	spriteset_313_mrn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_wgw_p, position_in_vehid_chain){
	0: spriteset_313_wgw_p; 
	spriteset_313_wgw_t;
}

switch(FEAT_TRAINS, SELF, sw_313_wgp_p, position_in_vehid_chain){
	0: spriteset_313_wgp_p; 
	spriteset_313_wgp_t;
}

switch(FEAT_TRAINS, SELF, sw_313_fcc_p, position_in_vehid_chain){
	0: spriteset_313_fcc_p; 
	spriteset_313_fcc_t;
}

switch(FEAT_TRAINS, SELF, sw_313_stn_p, position_in_vehid_chain){
	0: spriteset_313_stn_p; 
	spriteset_313_stn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_fge_p, position_in_vehid_chain){
	0: spriteset_313_fge_p; 
	spriteset_313_fge_t;
}

switch(FEAT_TRAINS, SELF, sw_313_one_p, position_in_vehid_chain){
	0: spriteset_313_one_p; 
	spriteset_313_one_t;
}

switch(FEAT_TRAINS, SELF, sw_313_aga_p, position_in_vehid_chain){
	0: spriteset_313_aga_p; 
	spriteset_313_aga_t;
}

switch(FEAT_TRAINS, SELF, sw_313_tfl_p, position_in_vehid_chain){
	0: spriteset_313_tfl_p; 
	spriteset_313_tfl_t;
}

switch(FEAT_TRAINS, SELF, sw_313_spc_p, position_in_vehid_chain){
	0: spriteset_313_spc_p; 
	spriteset_313_spc_t;
}

switch(FEAT_TRAINS, SELF, sw_313_spn_p, position_in_vehid_chain){
	0: spriteset_313_spn_p; 
	spriteset_313_spn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_scr_p, position_in_vehid_chain){
	0: spriteset_313_scr_p; 
	spriteset_313_scr_t;
}
 
//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_313_brb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_brb ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_nse ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mro_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mro ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_slk_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_slk ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_seb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_seb ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_sey_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_sey ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_cnx ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mrn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mrn ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_select){
	1: return sw_313_wgw ;
	1: return sw_313_wgp;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fcc ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_stn ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fge ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_one ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_aga ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_tfl ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spc_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spc ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spn ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_scr ;
}

//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_313_brb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_brb_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_nse_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mro_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mro_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_slk_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_slk_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_seb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_seb_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_sey_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_sey_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_cnx_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mrn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mrn_p ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_t_select){
	1: return sw_313_wgw_p ;
	1: return sw_313_wgp_p;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fcc_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_stn_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fge_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_one_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_aga_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_tfl_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spc_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spc_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spn_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_scr_p ;
}
 
//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_313_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_nse_select;
	1996 .. 2005: sw_313_slk_select;
	2006 .. 2010: sw_313_fcc_select;
	sw_313_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_314_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_spc_select;
	1996 .. 2005: sw_313_spn_select;
	2006 .. 2010: sw_313_scr_select;
	sw_313_scr_select;
}

switch(FEAT_TRAINS, SELF, sw_315_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_nse_select;
	1996 .. 2000: sw_313_wgn_select;
	2001 .. 2005: sw_313_one_select;
	2006 .. 2010: sw_313_aga_select;
	sw_313_tfl_select;
}

switch(FEAT_TRAINS, SELF, sw_508_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_mro_select;
	1996 .. 2005: sw_313_mro_select;
	sw_313_mrn_select;
}

switch(FEAT_TRAINS, SELF, sw_313_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_nse_t_select;
	1996 .. 2005: sw_313_slk_t_select;
	2006 .. 2010: sw_313_fcc_t_select;
	sw_313_stn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_314_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_spc_t_select;
	1996 .. 2005: sw_313_spn_t_select;
	2006 .. 2010: sw_313_scr_t_select;
	sw_313_scr_t_select;
}

switch(FEAT_TRAINS, SELF, sw_315_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_nse_t_select;
	1996 .. 2000: sw_313_wgn_t_select;
	2001 .. 2005: sw_313_one_t_select;
	2006 .. 2010: sw_313_aga_t_select;
	sw_313_tfl_t_select;
}

switch(FEAT_TRAINS, SELF, sw_508_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_mro_t_select;
	1996 .. 2005: sw_313_mro_t_select;
	sw_313_mrn_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_313_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_slk_select;
	3: sw_313_wgn_select;
	4: sw_313_fcc_select;
	5: sw_313_stn_select;
	6: sw_313_brb_select;
	7: sw_313_mro_select;
	8: sw_313_cnx_select;
	9: sw_313_sey_select;
	10: sw_313_seb_select;
	11: sw_313_slk_select;
	12: sw_313_mrn_select;
}

switch(FEAT_TRAINS, SELF, sw_314_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_wgn_select;
	3: sw_313_fge_select;
	4: sw_313_one_select;
	5: sw_313_aga_select;
	6: sw_313_tfl_select;
	7: sw_313_brb_select;
	8: sw_313_spc_select;
	9: sw_313_spn_select;
	10: sw_313_scr_select;
	11: sw_313_tfl_select;
}

switch(FEAT_TRAINS, SELF, sw_315_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_wgn_select;
	3: sw_313_fge_select;
	4: sw_313_one_select;
	5: sw_313_aga_select;
	6: sw_313_tfl_select;
	7: sw_313_brb_select;
	8: sw_313_spc_select;
	9: sw_313_spn_select;
	10: sw_313_scr_select;
	11: sw_313_tfl_select;
}

switch(FEAT_TRAINS, SELF, sw_508_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_slk_select;
	3: sw_313_wgn_select;
	4: sw_313_fcc_select;
	5: sw_313_stn_select;
	6: sw_313_brb_select;
	7: sw_313_mro_select;
	8: sw_313_cnx_select;
	9: sw_313_sey_select;
	10: sw_313_seb_select;
	11: sw_313_slk_select;
	12: sw_313_mrn_select;
}

switch(FEAT_TRAINS, SELF, sw_313_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_slk_t_select;
	3: sw_313_wgn_t_select;
	4: sw_313_fcc_t_select;
	5: sw_313_stn_t_select;
	6: sw_313_brb_t_select;
	7: sw_313_mro_t_select;
	8: sw_313_cnx_t_select;
	9: sw_313_sey_t_select;
	10: sw_313_seb_t_select;
	11: sw_313_slk_t_select;
	12: sw_313_mrn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_314_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_wgn_t_select;
	3: sw_313_fge_t_select;
	4: sw_313_one_t_select;
	5: sw_313_aga_t_select;
	6: sw_313_tfl_t_select;
	7: sw_313_brb_t_select;
	8: sw_313_spc_t_select;
	9: sw_313_spn_t_select;
	10: sw_313_scr_t_select;
	11: sw_313_tfl_t_select;
}


switch(FEAT_TRAINS, SELF, sw_315_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_wgn_t_select;
	3: sw_313_fge_t_select;
	4: sw_313_one_t_select;
	5: sw_313_aga_t_select;
	6: sw_313_tfl_t_select;
	7: sw_313_brb_t_select;
	8: sw_313_spc_t_select;
	9: sw_313_spn_t_select;
	10: sw_313_scr_t_select;
	11: sw_313_tfl_t_select;
}

switch(FEAT_TRAINS, SELF, sw_508_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_slk_t_select;
	3: sw_313_wgn_t_select;
	4: sw_313_fcc_t_select;
	5: sw_313_stn_t_select;
	6: sw_313_brb_t_select;
	7: sw_313_mro_t_select;
	8: sw_313_cnx_t_select;
	9: sw_313_sey_t_select;
	10: sw_313_seb_t_select;
	11: sw_313_slk_t_select;
	12: sw_313_mrn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_313_livery_choice_decider, livery_choice){
	1 : sw_313_manual_livery_decider ; 
	sw_313_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_313_t_livery_choice_decider, livery_choice){
	1 : sw_313_t_manual_livery_decider ; 
	sw_313_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_314_livery_choice_decider, livery_choice){
	1 : sw_314_manual_livery_decider ; 
	sw_314_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_314_t_livery_choice_decider, livery_choice){
	1 : sw_314_t_manual_livery_decider ; 
	sw_314_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_315_livery_choice_decider, livery_choice){
	1 : sw_315_manual_livery_decider ; 
	sw_315_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_315_t_livery_choice_decider, livery_choice){
	1 : sw_315_t_manual_livery_decider ; 
	sw_315_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_508_livery_choice_decider, livery_choice){
	1 : sw_508_manual_livery_decider ; 
	sw_508_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_508_t_livery_choice_decider, livery_choice){
	1 : sw_508_t_manual_livery_decider ; 
	sw_508_t_livery_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_livery_choice_decider ; 
	0..256: sw_508_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_t_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_t_livery_choice_decider ; 
	0..256: sw_508_t_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_314_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_livery_choice_decider ; 
	0..256: sw_315_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_314_t_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_t_livery_choice_decider ; 
	0..256: sw_315_t_livery_choice_decider ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_313_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_SILVERLINK);
	3: return string(STR_LIVERY_WAGN);
	4: return string(STR_LIVERY_FCC);
	5: return string(STR_LIVERY_SOUTHERN);
	6: return string(STR_LIVERY_BRBLUE);
	7: return string(STR_LIVERY_MERSEYRAIL);
	8: return string(STR_LIVERY_CONNEX);
	9: return string(STR_LIVERY_SE_YELLOW);
	10: return string(STR_LIVERY_SE_BLUE);
	11: return string(STR_LIVERY_SILVERLINK);
	12: return string(STR_LIVERY_MERSEYRAIL_REFERB);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_314_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_WAGN);
	3: return string(STR_LIVERY_FGE);
	4: return string(STR_LIVERY_ONE_ANGLIA);
	5: return string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	6: return string(STR_LIVERY_LO);
	7: return string(STR_LIVERY_BRBLUE_SPT);
	8: return string(STR_LIVERY_SPT_ORANGE);
	9: return string(STR_LIVERY_SPT_CARMINE_CREAM);
	10: return string(STR_LIVERY_SCOTRAIL);
	11: return string(STR_LIVERY_TFL);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_315_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_WAGN);
	3: return string(STR_LIVERY_FGE);
	4: return string(STR_LIVERY_ONE_ANGLIA);
	5: return string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	6: return string(STR_LIVERY_LO);
	7: return string(STR_LIVERY_BRBLUE_SPT);
	8: return string(STR_LIVERY_SPT_ORANGE);
	9: return string(STR_LIVERY_SPT_CARMINE_CREAM);
	10: return string(STR_LIVERY_SCOTRAIL);
	11: return string(STR_LIVERY_TFL);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_508_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_SILVERLINK);
	3: return string(STR_LIVERY_WAGN);
	4: return string(STR_LIVERY_FCC);
	5: return string(STR_LIVERY_SOUTHERN);
	6: return string(STR_LIVERY_BRBLUE);
	7: return string(STR_LIVERY_MERSEYRAIL);
	8: return string(STR_LIVERY_CONNEX);
	9: return string(STR_LIVERY_SE_YELLOW);
	10: return string(STR_LIVERY_SE_BLUE);
	11: return string(STR_LIVERY_SILVERLINK);
	12: return string(STR_LIVERY_MERSEYRAIL_REFERB);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, PARENT, sw_313_refit_text_class_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_refit_text ; 
	0..256: sw_508_refit_text ;
}

switch(FEAT_TRAINS, PARENT, sw_314_refit_text_class_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_refit_text ; 
	0..256: sw_315_refit_text ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_313_refit_text_decider, livery_choice){
	1 : sw_313_refit_text_class_decider ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_314_refit_text_decider, livery_choice){
	1 : sw_314_refit_text_class_decider ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_313_purchase, current_year){
	1971 .. 1982: spriteset_313_brb_purchase;
	1983 .. 1995: spriteset_313_nse_purchase;
	1996 .. 2005: spriteset_313_slk_purchase;
	2006 .. 2010: spriteset_313_fcc_purchase;
	spriteset_313_stn_purchase;
}

switch(FEAT_TRAINS, SELF, sw_314_purchase, current_year){
	1971 .. 1982: spriteset_313_brb_purchase;
	1983 .. 1995: spriteset_313_spc_purchase;
	1996 .. 2005: spriteset_313_spn_purchase;
	2006 .. 2010: spriteset_313_scr_purchase;
	spriteset_313_scr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_313_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_313_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_313_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_313_t_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_314_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_314_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_314_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_314_t_final_livery_choice_decider;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_313_brb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
 }

random_switch(FEAT_TRAINS, SELF, sw_313_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_313_slk_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_se_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_313_mr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_GREY);
}

random_switch(FEAT_TRAINS, SELF, sw_313_wgw_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_WHITE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_wgp_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_PURPLE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN)  ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_BLUE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_colour_mapping){
	1: return sw_313_wgw_colour_mapping ;
	1: return sw_313_wgp_colour_mapping;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_313_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_nse_colour_mapping;
	1996 .. 2005: sw_313_slk_colour_mapping;
	2006 .. 2010: sw_313_fcc_colour_mapping;
	sw_313_stn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_314_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_spn_colour_mapping;
	1996 .. 2005: sw_313_spn_colour_mapping;
	2006 .. 2010: sw_313_scr_colour_mapping;
	sw_313_scr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_315_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_nse_colour_mapping;
	1996 .. 2000: sw_313_wgn_colour_mapping;
	2001 .. 2005: sw_313_one_colour_mapping;
	2006 .. 2010: sw_313_aga_colour_mapping;
	sw_313_tfl_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_508_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_mr_colour_mapping;
	1996 .. 2005: sw_313_mr_colour_mapping;
	sw_313_mr_colour_mapping;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_313_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_slk_colour_mapping;
	3: sw_313_wgn_colour_mapping;
	4: sw_313_fcc_colour_mapping;
	5: sw_313_stn_colour_mapping;
	6: sw_313_brb_colour_mapping;
	7: sw_313_mr_colour_mapping;
	8: sw_313_se_colour_mapping;
	9: sw_313_se_colour_mapping;
	10: sw_313_se_colour_mapping;
	11: sw_313_slk_colour_mapping;
	12: sw_313_mr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_314_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_wgn_colour_mapping;
	3: sw_313_fge_colour_mapping;
	4: sw_313_one_colour_mapping;
	5: sw_313_aga_colour_mapping;
	6: sw_313_tfl_colour_mapping;
	7: sw_313_brb_colour_mapping;
	8: sw_313_spn_colour_mapping;
	9: sw_313_spn_colour_mapping;
	10: sw_313_scr_colour_mapping;
	11: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_315_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_wgn_colour_mapping;
	3: sw_313_fge_colour_mapping;
	4: sw_313_one_colour_mapping;
	5: sw_313_aga_colour_mapping;
	6: sw_313_tfl_colour_mapping;
	7: sw_313_brb_colour_mapping;
	8: sw_313_spn_colour_mapping;
	9: sw_313_spn_colour_mapping;
	10: sw_313_scr_colour_mapping;
	11: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_508_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_slk_colour_mapping;
	3: sw_313_wgn_colour_mapping;
	4: sw_313_fcc_colour_mapping;
	5: sw_313_stn_colour_mapping;
	6: sw_313_brb_colour_mapping;
	7: sw_313_mr_colour_mapping;
	8: sw_313_se_colour_mapping;
	9: sw_313_se_colour_mapping;
	10: sw_313_se_colour_mapping;
	11: sw_313_slk_colour_mapping;
	12: sw_313_mr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_313_colour_mapping_choice_decider, livery_choice){
	1 : sw_313_manual_colour_mapping_decider ; 
	sw_313_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_314_colour_mapping_choice_decider, livery_choice){
	1 : sw_314_manual_colour_mapping_decider ; 
	sw_314_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_315_colour_mapping_choice_decider, livery_choice){
	1 : sw_315_manual_colour_mapping_decider ; 
	sw_315_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_508_colour_mapping_choice_decider, livery_choice){
	1 : sw_508_manual_colour_mapping_decider ; 
	sw_508_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, PARENT, sw_313_final_colour_mapping_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_colour_mapping_choice_decider ; 
	0..256: sw_508_colour_mapping_choice_decider ;
}


switch(FEAT_TRAINS, PARENT, sw_314_final_colour_mapping_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_colour_mapping_choice_decider ; 
	0..256: sw_315_colour_mapping_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_colour_mapping_decider, colour_scheme_1){
	1 : sw_313_final_colour_mapping_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, PARENT, sw_314_colour_mapping_decider, colour_scheme_1){
	1 : sw_314_final_colour_mapping_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_313, 313) {
	property {
		name: 							string(STR_NAME_313);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1978, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					27;
		cost_factor:					34;
		running_cost_factor:			26;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							880 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					75;
		weight:							35 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.15;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_313_coupling_restrictions;
		default: 							sw_313_default;
		purchase:							sw_313_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_313_refit_text_decider ;
		colour_mapping:						sw_313_colour_mapping_choice_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_313_colour_mapping_year_decider;
		running_cost_factor:				return(current_speed == 0 ? 6 : 26) ;
		purchase_running_cost_factor:		26;
}
		livery_override (item_Mk2) {
		cargo_capacity: 85;
		default: sw_313_default_t;
		colour_mapping:	sw_313_colour_mapping_decider;
		cargo_subtype_text: sw_313_refit_text_decider ;
		weight: 30;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_313, 313){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_313, 313){
	property{
		name                           : string(STR_NAME_313_ALT) ;
	}
}
}


item (FEAT_TRAINS, item_314, 314) {
	property {
		name: 							string(STR_NAME_314);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1978, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					27;
		cost_factor:					32;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							880 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					75;
		weight:							35 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.15;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_313_coupling_restrictions;
		default: 							sw_314_default;
		purchase:							sw_314_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_314_refit_text_decider ;
		colour_mapping:						sw_314_colour_mapping_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_314_colour_mapping_year_decider;
		running_cost_factor:				return(current_speed == 0 ? 5 : 21) ;
		purchase_running_cost_factor:		21;
}
		livery_override (item_Mk2) {
		cargo_capacity: 85;
		default: sw_314_default_t;
		colour_mapping:	sw_314_colour_mapping_decider;
		cargo_subtype_text: sw_314_refit_text_decider ;
		weight: 30;
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_314, 314){
	property{
		name                           : string(STR_NAME_314_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_317.pnml" 1
//Power car
spriteset(spriteset_317a_f_blank, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_317a_f_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_317b_f_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_317a_f_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_317b_f_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 375)}
spriteset(spriteset_317a_f_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 450)}
spriteset(spriteset_317b_f_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 525)}
spriteset(spriteset_317a_f_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 600)}
spriteset(spriteset_317b_f_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 675)}
spriteset(spriteset_317a_f_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 750)}
spriteset(spriteset_317b_f_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 825)}
spriteset(spriteset_317a_f_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 900)}
spriteset(spriteset_317b_f_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 975)}
spriteset(spriteset_317a_f_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 1050)}
spriteset(spriteset_317b_f_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 1125)}
spriteset(spriteset_317a_f_one, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 900)}
spriteset(spriteset_317b_f_one, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 975)}
spriteset(spriteset_317a_f_fcc, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 1050)}
spriteset(spriteset_317a_f_spt, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_317a_f_cac, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_317a_f_car, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_317a_f_sct, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 150)}
//Trailer
spriteset(spriteset_317a_t_brb, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 175)}
spriteset(spriteset_317b_t_brb, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 250)}
spriteset(spriteset_317a_t_nse, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 325)}
spriteset(spriteset_317b_t_nse, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 400)}
spriteset(spriteset_317a_t_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 475)}
spriteset(spriteset_317b_t_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 550)}
spriteset(spriteset_317a_t_gablack, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 625)}
spriteset(spriteset_317b_t_gablack, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 700)}
spriteset(spriteset_317a_t_lorol, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 775)}
spriteset(spriteset_317b_t_lorol, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 850)}
spriteset(spriteset_317a_t_ga, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 925)}
spriteset(spriteset_317b_t_ga, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 1000)}
spriteset(spriteset_317a_t_nxea, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 1075)}
spriteset(spriteset_317b_t_nxea, "gfx/EMU/class_317_2.png") {template_8_4_networker(0, 1150)}
spriteset(spriteset_317a_t_one, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 925)}
spriteset(spriteset_317b_t_one, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 1000)}
spriteset(spriteset_317a_t_fcc, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 1075)}
spriteset(spriteset_317a_t_spt, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 325)}
spriteset(spriteset_317a_t_cac, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 350)}
spriteset(spriteset_317a_t_car, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 375)}
spriteset(spriteset_317a_t_sct, "gfx/EMU/class_317_2.png") {template_8_4_networker(179, 400)}
//Pantograph car
spriteset(spriteset_317a_p_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_317b_p_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 275)}
spriteset(spriteset_317a_p_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_317b_p_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 425)}
spriteset(spriteset_317a_p_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_317b_p_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 575)}
spriteset(spriteset_317a_p_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_317b_p_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 725)}
spriteset(spriteset_317a_p_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 800)}
spriteset(spriteset_317b_p_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 875)}
spriteset(spriteset_317a_p_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 950)}
spriteset(spriteset_317b_p_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 1025)}
spriteset(spriteset_317a_p_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 1100)}
spriteset(spriteset_317b_p_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker(0, 1175)}
spriteset(spriteset_317a_p_one, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 950)}
spriteset(spriteset_317b_p_one, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 1025)}
spriteset(spriteset_317a_p_fcc, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 1100)}
spriteset(spriteset_317a_p_spt, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_317a_p_cac, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_317a_p_car, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 125)}
spriteset(spriteset_317a_p_sct, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 175)}
//Pantograph car but backwards
spriteset(spriteset_317a_pr_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 200)}
spriteset(spriteset_317b_pr_brb, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 275)}
spriteset(spriteset_317a_pr_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 350)}
spriteset(spriteset_317b_pr_nse, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 425)}
spriteset(spriteset_317a_pr_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 500)}
spriteset(spriteset_317b_pr_wagn_aga, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 575)}
spriteset(spriteset_317a_pr_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 650)}
spriteset(spriteset_317b_pr_gablack, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 725)}
spriteset(spriteset_317a_pr_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 800)}
spriteset(spriteset_317b_pr_lorol, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 875)}
spriteset(spriteset_317a_pr_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 950)}
spriteset(spriteset_317b_pr_ga, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 1025)}
spriteset(spriteset_317a_pr_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 1100)}
spriteset(spriteset_317b_pr_nxea, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(0, 1175)}
spriteset(spriteset_317a_pr_one, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 950)}
spriteset(spriteset_317b_pr_one, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 1025)}
spriteset(spriteset_317a_pr_fcc, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 1100)}
spriteset(spriteset_317a_pr_spt, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 25)}
spriteset(spriteset_317a_pr_cac, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 75)}
spriteset(spriteset_317a_pr_car, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 125)}
spriteset(spriteset_317a_pr_sct, "gfx/EMU/class_317_2.png") {template_8_8_networker_reverse(179, 175)}
//Headlights
spriteset(spriteset_317_rl, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 275)}
spriteset(spriteset_317_hl, "gfx/EMU/class_317_2.png") {template_8_8_networker(179, 300)}
//Purchase Sprite
spriteset(spriteset_317a_purchase_brb, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(90, 175)}
spriteset(spriteset_317a_purchase_nse, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(90, 325)}
spriteset(spriteset_317a_purchase_wagn_aga, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(90, 475)}
spriteset(spriteset_317a_purchase_nxea, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(90, 1075)}
spriteset(spriteset_317a_purchase_ga, "gfx/EMU/class_317_2.png") {template_dualhead_purchase(90, 925)}

random_switch(FEAT_TRAINS, PARENT, sw_317_f_brb){1: spriteset_317a_f_brb; 1: spriteset_317b_f_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_nse){1: spriteset_317a_f_nse; 1: spriteset_317b_f_nse;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_wagn_aga){1: spriteset_317a_f_wagn_aga; 1: spriteset_317b_f_wagn_aga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_gablack){1: spriteset_317a_f_gablack; 1: spriteset_317b_f_gablack;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_lorol){1: spriteset_317a_f_lorol; 1: spriteset_317b_f_lorol;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_ga){1: spriteset_317a_f_ga; 1: spriteset_317b_f_ga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_nxea){1: spriteset_317a_f_nxea; 1: spriteset_317b_f_nxea;}
random_switch(FEAT_TRAINS, PARENT, sw_317_f_one){1: spriteset_317a_f_one; 1: spriteset_317b_f_one;}

random_switch(FEAT_TRAINS, PARENT, sw_317_p_brb){1: spriteset_317a_p_brb; 1: spriteset_317b_p_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_nse){1: spriteset_317a_p_nse; 1: spriteset_317b_p_nse;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_wagn_aga){1: spriteset_317a_p_wagn_aga; 1: spriteset_317b_p_wagn_aga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_gablack){1: spriteset_317a_p_gablack; 1: spriteset_317b_p_gablack;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_lorol){1: spriteset_317a_p_lorol; 1: spriteset_317b_p_lorol;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_ga){1: spriteset_317a_p_ga; 1: spriteset_317b_p_ga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_nxea){1: spriteset_317a_p_nxea; 1: spriteset_317b_p_nxea;}
random_switch(FEAT_TRAINS, PARENT, sw_317_p_one){1: spriteset_317a_p_one; 1: spriteset_317b_p_one;}

random_switch(FEAT_TRAINS, PARENT, sw_317_pr_brb){1: spriteset_317a_pr_brb; 1: spriteset_317b_pr_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_nse){1: spriteset_317a_pr_nse; 1: spriteset_317b_pr_nse;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_wagn_aga){1: spriteset_317a_pr_wagn_aga; 1: spriteset_317b_pr_wagn_aga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_gablack){1: spriteset_317a_pr_gablack; 1: spriteset_317b_pr_gablack;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_lorol){1: spriteset_317a_pr_lorol; 1: spriteset_317b_pr_lorol;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_ga){1: spriteset_317a_pr_ga; 1: spriteset_317b_pr_ga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_nxea){1: spriteset_317a_pr_nxea; 1: spriteset_317b_pr_nxea;}
random_switch(FEAT_TRAINS, PARENT, sw_317_pr_one){1: spriteset_317a_pr_one; 1: spriteset_317b_pr_one;}

random_switch(FEAT_TRAINS, PARENT, sw_317_t_brb){1: spriteset_317a_t_brb; 1: spriteset_317b_t_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_nse){1: spriteset_317a_t_nse; 1: spriteset_317b_t_nse;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_wagn_aga){1: spriteset_317a_t_wagn_aga; 1: spriteset_317b_t_wagn_aga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_gablack){1: spriteset_317a_t_gablack; 1: spriteset_317b_t_gablack;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_lorol){1: spriteset_317a_t_lorol; 1: spriteset_317b_t_lorol;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_ga){1: spriteset_317a_t_ga; 1: spriteset_317b_t_ga;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_nxea){1: spriteset_317a_t_nxea; 1: spriteset_317b_t_nxea;}
random_switch(FEAT_TRAINS, PARENT, sw_317_t_one){1: spriteset_317a_t_one; 1: spriteset_317b_t_one;}

switch(FEAT_TRAINS, SELF, sw_317_f_auto, current_year){
1971 .. 1982: sw_317_f_brb;
1983 .. 1995: sw_317_f_nse;
1996 .. 2004: sw_317_f_wagn_aga;
2005 .. 2008: sw_317_f_nxea;
sw_317_f_wagn_aga;
}

switch(FEAT_TRAINS, SELF, sw_317_pf_auto, current_year){
1971 .. 1982: sw_317_p_brb;
1983 .. 1995: sw_317_p_nse;
1996 .. 2004: sw_317_p_wagn_aga;
2005 .. 2008: sw_317_p_nxea;
sw_317_p_wagn_aga;
}

switch(FEAT_TRAINS, SELF, sw_317_pr_auto, current_year){
1971 .. 1982: sw_317_pr_brb;
1983 .. 1995: sw_317_pr_nse;
1996 .. 2004: sw_317_pr_wagn_aga;
2005 .. 2008: sw_317_pr_nxea;
sw_317_pr_wagn_aga;
}

switch(FEAT_TRAINS, SELF, sw_317_t_auto, current_year){
1971 .. 1982: sw_317_t_brb;
1983 .. 1995: sw_317_t_nse;
1996 .. 2004: sw_317_t_wagn_aga;
2005 .. 2008: sw_317_t_nxea;
sw_317_t_wagn_aga;
}

switch(FEAT_TRAINS, SELF, sw_318_f_auto, current_year){
1971 .. 1982: spriteset_317a_f_spt;
1983 .. 1995: spriteset_317a_f_spt;
1996 .. 2004: spriteset_317a_f_cac;
2005 .. 2008: spriteset_317a_f_car;
spriteset_317a_f_sct;
}

switch(FEAT_TRAINS, SELF, sw_318_pf_auto, current_year){
1971 .. 1982: spriteset_317a_p_spt;
1983 .. 1995: spriteset_317a_p_spt;
1996 .. 2004: spriteset_317a_p_cac;
2005 .. 2008: spriteset_317a_p_car;
spriteset_317a_p_sct;
}

switch(FEAT_TRAINS, SELF, sw_318_pr_auto, current_year){
1971 .. 1982: spriteset_317a_pr_spt;
1983 .. 1995: spriteset_317a_pr_spt;
1996 .. 2004: spriteset_317a_pr_cac;
2005 .. 2008: spriteset_317a_pr_car;
spriteset_317a_pr_sct;
}

switch(FEAT_TRAINS, SELF, sw_318_t_auto, current_year){
1971 .. 1982: spriteset_317a_t_spt;
1983 .. 1995: spriteset_317a_t_spt;
1996 .. 2004: spriteset_317a_t_cac;
2005 .. 2008: spriteset_317a_t_car;
spriteset_317a_t_sct;
}

switch(FEAT_TRAINS, SELF, sw_317_purchase_auto, current_year){
1971 .. 1982: sw_317_f_brb;
1983 .. 1995: spriteset_317a_purchase_nse;
1996 .. 2004: spriteset_317a_purchase_wagn_aga;
2005 .. 2008: spriteset_317a_purchase_nxea;
spriteset_317a_purchase_ga;
}

switch(FEAT_TRAINS, SELF, sw_317_f_man, cargo_subtype){
0: sw_317_f_brb;
1: sw_317_f_nse;
2: sw_317_f_wagn_aga;
3: sw_317_f_one;
4: sw_317_f_ga;
5: sw_317_f_nxea;
6: sw_317_f_wagn_aga;
7: sw_317_f_lorol;
8: spriteset_317a_f_fcc;
9: spriteset_317a_f_spt;
10: spriteset_317a_f_cac;
11: spriteset_317a_f_car;
spriteset_317a_f_sct;
}

switch(FEAT_TRAINS, SELF, sw_317_t_man, cargo_subtype){
0: sw_317_t_brb;
1: sw_317_t_nse;
2: sw_317_t_wagn_aga;
3: sw_317_t_one;
4: sw_317_t_ga;
5: sw_317_t_nxea;
6: sw_317_t_wagn_aga;
7: sw_317_t_lorol;
8: spriteset_317a_t_fcc;
9: spriteset_317a_t_spt;
10: spriteset_317a_t_cac;
11: spriteset_317a_t_car;
spriteset_317a_t_sct;
}

switch(FEAT_TRAINS, SELF, sw_317_pf_man, cargo_subtype){
0: sw_317_p_brb;
1: sw_317_p_nse;
2: sw_317_p_wagn_aga;
3: sw_317_p_one;
4: sw_317_p_ga;
5: sw_317_p_nxea;
6: sw_317_p_wagn_aga;
7: sw_317_p_lorol;
8: spriteset_317a_p_fcc;
9: spriteset_317a_p_spt;
10: spriteset_317a_p_cac;
11: spriteset_317a_p_car;
spriteset_317a_p_sct;
}

switch(FEAT_TRAINS, SELF, sw_317_pr_man, cargo_subtype){
0: sw_317_pr_brb;
1: sw_317_pr_nse;
2: sw_317_pr_wagn_aga;
3: sw_317_pr_one;
4: sw_317_pr_ga;
5: sw_317_pr_nxea;
6: sw_317_pr_wagn_aga;
7: sw_317_pr_lorol;
8: spriteset_317a_pr_fcc;
9: spriteset_317a_pr_spt;
10: spriteset_317a_pr_cac;
11: spriteset_317a_pr_car;
spriteset_317a_pr_sct;
}


switch(FEAT_TRAINS, PARENT, sw_317_p_man, vehicle_is_reversed){
0: sw_317_pf_man;
sw_317_pr_man;
}

switch(FEAT_TRAINS, PARENT, sw_317_p_auto, vehicle_is_reversed){
0: sw_317_pf_auto;
sw_317_pr_auto;
}

switch(FEAT_TRAINS, PARENT, sw_318_p_auto, vehicle_is_reversed){
0: sw_318_pf_auto;
sw_318_pr_auto;
}

switch(FEAT_TRAINS, PARENT, sw_317_class_f_auto, count_veh_id(317)-count_veh_id(9030)){1 : sw_318_f_auto ; sw_317_f_auto ;}
switch(FEAT_TRAINS, PARENT, sw_317_class_t_auto, count_veh_id(317)-count_veh_id(9030)){1 : sw_318_t_auto ; sw_317_t_auto ;}
switch(FEAT_TRAINS, PARENT, sw_317_class_p_auto, count_veh_id(317)-count_veh_id(9030)){1 : sw_318_p_auto ; sw_317_p_auto ;}

switch(FEAT_TRAINS, SELF, sw_317_f_part_2, livery_choice){1 : sw_317_f_man ; sw_317_class_f_auto ;}
switch(FEAT_TRAINS, SELF, sw_317_p_livery_param, livery_choice){1 : sw_317_p_man ; sw_317_class_t_auto ;}
switch(FEAT_TRAINS, SELF, sw_317_t_livery_param, livery_choice){1 : sw_317_t_man ; sw_317_class_p_auto ;}

switch(FEAT_TRAINS, SELF, sw_317_f_livery_param, num_vehs_in_consist){
0..2: spriteset_317a_f_blank;
sw_317_f_part_2;
}

switch(FEAT_TRAINS, SELF, sw_317_headlights_1, position_in_consist){
0: spriteset_317_hl;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_317_headlights, position_in_consist_from_end){
0: spriteset_317_rl;
sw_317_headlights_1;
}

switch(FEAT_TRAINS, PARENT, sw_317_pan_f, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_375_pan_up;
spriteset_375_pan_down;
}

switch(FEAT_TRAINS, PARENT, sw_317_pan_r, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_375_pan_up_r;
spriteset_375_pan_down_r;
}

switch(FEAT_TRAINS, PARENT, sw_317_pan, vehicle_is_reversed){
0: sw_317_pan_f;
sw_317_pan_r;
}

switch(FEAT_TRAINS, SELF, sw_317_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_317_f_livery_param;
	1: return sw_317_headlights;
}

switch(FEAT_TRAINS, SELF, sw_317_nd_livery_param_1, position_in_vehid_chain){
0: sw_317_p_livery_param;
sw_317_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_317_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_317_p_livery_param;
sw_317_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_317_nd_livery_param, vehicle_is_reversed){
0: sw_317_nd_livery_param_1;
sw_317_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_317_ndf_pan_switch, position_in_vehid_chain){
0: sw_317_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_317_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_317_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_317_nd_pan_switch, vehicle_is_reversed){
0: sw_317_ndf_pan_switch;
sw_317_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_317_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_317_nd_livery_param;
	1: return sw_317_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_317_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRBLUEGREY);
	1: string(STR_LIVERY_NSE);
	2: string(STR_LIVERY_WAGN);
	3: string(STR_LIVERY_ONE_ANGLIA);
	4: string(STR_LIVERY_GREATER_ANGLIA);
	5: string(STR_LIVERY_NXEA);
	6: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	7: string(STR_LIVERY_LO);
	8: string(STR_LIVERY_FCC);
	9: string(STR_LIVERY_SPT_ORANGE);
	10: string(STR_LIVERY_SPT_CARMINE_CREAM);
	11: string(STR_LIVERY_SPT_CARMINE_CREAM);
	12: string(STR_LIVERY_SCOTRAIL);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_317_livery_decider, livery_choice){
	1: sw_317_refit_text;
	CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_317_brb_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_wgn_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_MAUVE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_one_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_LIGHT_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_gan_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_nxe_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_aga_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_lo__colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_spt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_cac_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_car_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;}
random_switch(FEAT_TRAINS, SELF, sw_317_sct_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;}

switch(FEAT_TRAINS, SELF, sw_317_colour_auto, current_year){
1971 .. 1982: sw_317_brb_colour_mapping;
1983 .. 1995: sw_317_nse_colour_mapping;
1996 .. 2004: sw_317_wgn_colour_mapping;
2005 .. 2008: sw_317_nxe_colour_mapping;
sw_317_aga_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_317_colour_man, cargo_subtype){
	0: sw_317_brb_colour_mapping;
	1: sw_317_nse_colour_mapping;
	2: sw_317_wgn_colour_mapping;
	3: sw_317_one_colour_mapping;
	4: sw_317_gan_colour_mapping;
	5: sw_317_nxe_colour_mapping;
	6: sw_317_aga_colour_mapping;
	7: sw_317_lo__colour_mapping;
	8: sw_317_fcc_colour_mapping;
	9: sw_317_spt_colour_mapping;
	10: sw_317_cac_colour_mapping;
	11: sw_317_car_colour_mapping;
	12: sw_317_sct_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_317_colour_livery_decider, livery_choice){
	1: sw_317_colour_man;
	sw_317_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_317_colour_livery_decider_2, num_vehs_in_consist){
0..2: sw_317_brb_colour_mapping;
sw_317_colour_livery_decider;
}

switch(FEAT_TRAINS, SELF, sw_317_recolour, colour_scheme_1){
	1: sw_317_colour_livery_decider_2;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_317_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	317: return CB_RESULT_ATTACH_ALLOW;
	210: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_317_NO_COUPLE);
}

switch(FEAT_TRAINS, PARENT, sw_317_start_stop, count_veh_id(317)-num_vehs_in_consist){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

item (FEAT_TRAINS, item_317, 317) {
	property {
		name: 							string(STR_NAME_317);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1981, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					55;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1450 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.16;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_317_coupling_restrictions;
		default: 							sw_317_default;
		purchase:							sw_317_purchase_auto;
		cargo_subtype_text:					sw_317_livery_decider ;
		colour_mapping:						sw_317_recolour;
		purchase_colour_mapping: 			sw_317_colour_auto;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_emu_gec ;
		start_stop:							sw_317_start_stop;
		purchase_running_cost_factor : 32;
}
		livery_override (9030) {
		cargo_capacity: 95;
		default: sw_317_t_default;
		colour_mapping:	sw_317_recolour;
		cargo_subtype_text: sw_317_livery_decider ;
}
}


if (vehicle_selection < 3){
item (FEAT_TRAINS, item_317, 317){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_317, 317){
	property{
		name                           : string(STR_NAME_317_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_319.pnml" 1
//Front Cars
spriteset(spriteset_319_f_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_319_f_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_319_f_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_319_f_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_319_f_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_319_f_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_319_f_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 500)}
spriteset(spriteset_319_f_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 650)}
spriteset(spriteset_319_f_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 800)}
spriteset(spriteset_319_f_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 800)}
//Rear Cars
spriteset(spriteset_319_r_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_319_r_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_319_r_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_319_r_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 675)}
spriteset(spriteset_319_r_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 375)}
spriteset(spriteset_319_r_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 525)}
spriteset(spriteset_319_r_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_319_r_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 675)}
spriteset(spriteset_319_r_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 825)}
spriteset(spriteset_319_r_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 825)}
//Med Driving
spriteset(spriteset_319_o_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_319_o_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_319_o_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_319_o_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_319_o_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 400)}
spriteset(spriteset_319_o_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_319_o_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_319_o_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 700)}
spriteset(spriteset_319_o_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 850)}
spriteset(spriteset_319_o_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 850)}
//PMSO
spriteset(spriteset_319_m_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_319_m_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_319_m_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_319_m_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_319_m_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_319_m_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_319_m_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_319_m_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 625)}
spriteset(spriteset_319_m_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 775)}
spriteset(spriteset_319_m_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 775)}
//Trailer
spriteset(spriteset_319_t_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_319_t_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_319_t_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_319_t_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 600)}
spriteset(spriteset_319_t_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_319_t_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 450)}
spriteset(spriteset_319_t_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_319_t_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 600)}
spriteset(spriteset_319_t_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 750)}
spriteset(spriteset_319_t_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 750)}
//Purchase
spriteset(spriteset_319_purchase_ns1, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 125)}
spriteset(spriteset_319_purchase_ns2, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 275)}
spriteset(spriteset_319_purchase_tlb, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 275)}
spriteset(spriteset_319_purchase_cnx, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 725)}
spriteset(spriteset_319_purchase_fcc, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 425)}
spriteset(spriteset_319_purchase_stn, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 575)}
spriteset(spriteset_319_purchase_gtr, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 575)}
spriteset(spriteset_319_purchase_lmi, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 725)}
spriteset(spriteset_319_purchase_nth, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 875)}
spriteset(spriteset_319_purchase_nra, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 875)}

//Switches

//Power Car
switch(FEAT_TRAINS, SELF, sw_319_nsg_f, position_in_consist){
	0: spriteset_319_f_ns1; spriteset_319_o_ns1;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_select, position_in_consist_from_end){
	0: spriteset_319_r_ns1; sw_319_nsg_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsg_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nsw_f, position_in_consist){
	0: spriteset_319_f_ns2; spriteset_319_o_ns2;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_select, position_in_consist_from_end){
	0: spriteset_319_r_ns2; sw_319_nsw_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsw_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_tlb_f, position_in_consist){
	0: spriteset_319_f_tlb; spriteset_319_o_tlb;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_select, position_in_consist_from_end){
	0: spriteset_319_r_tlb; sw_319_tlb_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_tlb_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_cnx_f, position_in_consist){
	0: spriteset_319_f_cnx; spriteset_319_o_cnx;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_select, position_in_consist_from_end){
	0: spriteset_319_r_cnx; sw_319_cnx_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_cnx_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_fcc_f, position_in_consist){
	0: spriteset_319_f_fcc; spriteset_319_o_fcc;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_select, position_in_consist_from_end){
	0: spriteset_319_r_fcc; sw_319_fcc_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_fcc_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_stn_f, position_in_consist){
	0: spriteset_319_f_stn; spriteset_319_o_stn;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_select, position_in_consist_from_end){
	0: spriteset_319_r_stn; sw_319_stn_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_stn_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_gtr_f, position_in_consist){
	0: spriteset_319_f_gtr; spriteset_319_o_gtr;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_select, position_in_consist_from_end){
	0: spriteset_319_r_gtr; sw_319_gtr_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_gtr_select;}	
//
switch(FEAT_TRAINS, SELF, sw_319_lmi_f, position_in_consist){
	0: spriteset_319_f_lmi; spriteset_319_o_lmi;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_select, position_in_consist_from_end){
	0: spriteset_319_r_lmi; sw_319_lmi_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_lmi_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nth_f, position_in_consist){
	0: spriteset_319_f_nth; spriteset_319_o_nth;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_select, position_in_consist_from_end){
	0: spriteset_319_r_nth; sw_319_nth_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nth_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nra_f, position_in_consist){
	0: spriteset_319_f_nra; spriteset_319_o_nra;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_select, position_in_consist_from_end){
	0: spriteset_319_r_nra; sw_319_nra_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nra_select;}
	
//Trailer/Pan
switch(FEAT_TRAINS, SELF, sw_319_nsg_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_ns1; spriteset_319_t_ns1;
}
switch(FEAT_TRAINS, SELF, sw_319_nsg_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_ns1; spriteset_319_t_ns1;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_select_t, vehicle_is_reversed){
	0: sw_319_nsg_msb_f; 
	sw_319_nsg_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsg_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nsw_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_ns2; spriteset_319_t_ns2;
}
switch(FEAT_TRAINS, SELF, sw_319_nsw_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_ns2; spriteset_319_t_ns2;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_select_t, vehicle_is_reversed){
	0: sw_319_nsw_msb_f; 
	sw_319_nsw_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsw_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_tlb_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_tlb; spriteset_319_t_tlb;
}
switch(FEAT_TRAINS, SELF, sw_319_tlb_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_tlb; spriteset_319_t_tlb;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_select_t, vehicle_is_reversed){
	0: sw_319_tlb_msb_f; 
	sw_319_tlb_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_tlb_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_cnx_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_cnx; spriteset_319_t_cnx;
}
switch(FEAT_TRAINS, SELF, sw_319_cnx_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_cnx; spriteset_319_t_cnx;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_select_t, vehicle_is_reversed){
	0: sw_319_cnx_msb_f; 
	sw_319_cnx_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_cnx_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_fcc_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_fcc; spriteset_319_t_fcc;
}
switch(FEAT_TRAINS, SELF, sw_319_fcc_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_fcc; spriteset_319_t_fcc;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_select_t, vehicle_is_reversed){
	0: sw_319_fcc_msb_f; 
	sw_319_fcc_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_fcc_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_stn_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_stn; spriteset_319_t_stn;
}
switch(FEAT_TRAINS, SELF, sw_319_stn_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_stn; spriteset_319_t_stn;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_select_t, vehicle_is_reversed){
	0: sw_319_stn_msb_f; 
	sw_319_stn_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_stn_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_gtr_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_gtr; spriteset_319_t_gtr;
}
switch(FEAT_TRAINS, SELF, sw_319_gtr_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_gtr; spriteset_319_t_gtr;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_select_t, vehicle_is_reversed){
	0: sw_319_gtr_msb_f; 
	sw_319_gtr_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_gtr_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_lmi_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_lmi; spriteset_319_t_lmi;
}
switch(FEAT_TRAINS, SELF, sw_319_lmi_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_lmi; spriteset_319_t_lmi;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_select_t, vehicle_is_reversed){
	0: sw_319_lmi_msb_f; 
	sw_319_lmi_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_lmi_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nth_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_nth; spriteset_319_t_nth;
}
switch(FEAT_TRAINS, SELF, sw_319_nth_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_nth; spriteset_319_t_nth;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_select_t, vehicle_is_reversed){
	0: sw_319_nth_msb_f; 
	sw_319_nth_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nth_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nra_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_nra; spriteset_319_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_319_nra_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_nra; spriteset_319_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_select_t, vehicle_is_reversed){
	0: sw_319_nra_msb_f; 
	sw_319_nra_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nra_select_t;}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_319_passenger_livery_decider, current_year){
	0 .. 1993: sw_thameslink_classic_nsg;
	1994 .. 1995: sw_thameslink_classic_nsw;
	1996 .. 1999: sw_thameslink_classic_tlb;
	2000..2002: sw_thameslink_classic_cnx;
	2003 .. 2014: sw_thameslink_classic_fcc;
	2015 .. 2017: sw_thameslink_classic_gtr;
	sw_thameslink_classic_nth;
}

switch(FEAT_TRAINS, SELF, sw_319_passenger_livery_decider_t, current_year){
	0 .. 1993: sw_thameslink_classic_nsg_t;
	1994 .. 1995: sw_thameslink_classic_nsw_t;
	1996 .. 1999: sw_thameslink_classic_tlb_t;
	2000..2002: sw_thameslink_classic_cnx_t;
	2003 .. 2014: sw_thameslink_classic_fcc_t;
	2015 .. 2017: sw_thameslink_classic_gtr_t;
	sw_thameslink_classic_nth_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_319_manual_livery_decider, cargo_subtype){
	0: sw_thameslink_classic_nsg;
	1: sw_thameslink_classic_nsw;
	2: sw_thameslink_classic_tlb;
	3: sw_thameslink_classic_cnx;
	4: sw_thameslink_classic_fcc;
	5: sw_thameslink_classic_stn;
	6: sw_thameslink_classic_gtr;
	7: sw_thameslink_classic_lmi;
	8: sw_thameslink_classic_nth;
	9: sw_thameslink_classic_nra;
}

switch(FEAT_TRAINS, SELF, sw_319_manual_livery_decider_t, cargo_subtype){
	0: sw_thameslink_classic_nsg_t;
	1: sw_thameslink_classic_nsw_t;
	2: sw_thameslink_classic_tlb_t;
	3: sw_thameslink_classic_cnx_t;
	4: sw_thameslink_classic_fcc_t;
	5: sw_thameslink_classic_stn_t;
	6: sw_thameslink_classic_gtr_t;
	7: sw_thameslink_classic_lmi_t;
	8: sw_thameslink_classic_nth_t;
	9: sw_thameslink_classic_nra_t;
}

switch(FEAT_TRAINS, SELF, sw_319_livery_choice_decider, livery_choice){
	1 : sw_319_manual_livery_decider ; 
	sw_319_passenger_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_319_livery_choice_decider_t, livery_choice){
	1 : sw_319_manual_livery_decider_t ; 
	sw_319_passenger_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_319_refit_text, cargo_subtype){
	0: string(STR_LIVERY_NSG);
	1: string(STR_LIVERY_NSW);
	2: string(STR_LIVERY_TLB);
	3: string(STR_LIVERY_CONNEX);
	4: string(STR_LIVERY_FCC);
	5: string(STR_LIVERY_SOUTHERN);
	6: string(STR_LIVERY_THAMESLINK);
	7: string(STR_LIVERY_LONDON_MIDLAND);
	8: string(STR_LIVERY_NORTHERN);
	9: string(STR_LIVERY_NORTHERN_ARRIVA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_319_refit_text_decider, livery_choice){
	1 : sw_319_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_319_purchase_1, current_year){
	0 .. 1993: spriteset_319_purchase_ns1;
	1994 .. 1995: spriteset_319_purchase_ns2;
	1996 .. 1999: spriteset_319_purchase_tlb;
	2000..2002: spriteset_319_purchase_cnx;
	2003 .. 2014: spriteset_319_purchase_fcc;
	2015 .. 2017: spriteset_319_purchase_gtr;
	spriteset_319_purchase_nth;
}

switch(FEAT_TRAINS, PARENT, sw_319_purchase, livery_choice){
	1 : sw_319_purchase_1 ;
	spriteset_319_purchase_ns1 ;
}

switch(FEAT_TRAINS, SELF, sw_319_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_319_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_319_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_319_livery_choice_decider_t;
	1 : return sw_flex_pan_select_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_319_nsg_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_319_nsw_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_tlb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_319_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_lmi_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_nth_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_PURPLE, COLOUR_MAUVE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_nra_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}
//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_319_colour_mapping_auto, current_year){
	0 .. 1993: sw_319_nsg_colour_mapping;
	1994 .. 1995: sw_319_nsw_colour_mapping;
	1996 .. 1999: sw_319_tlb_colour_mapping;
	2000..2002: sw_319_cnx_colour_mapping;
	2003 .. 2014: sw_319_fcc_colour_mapping;
	2015 .. 2017: sw_319_gtr_colour_mapping;
	sw_319_nth_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_319_colour_mapping_manual, cargo_subtype){
	0: sw_319_nsg_colour_mapping;
	1: sw_319_nsw_colour_mapping;
	2: sw_319_tlb_colour_mapping;
	3: sw_319_cnx_colour_mapping;
	4: sw_319_fcc_colour_mapping;
	5: sw_319_stn_colour_mapping;
	6: sw_319_gtr_colour_mapping;
	7: sw_319_lmi_colour_mapping;
	8: sw_319_nth_colour_mapping;
	9: sw_319_nra_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_319_colour_mapping_manual_check, livery_choice){
	1 : sw_319_colour_mapping_manual ;
	sw_319_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_319_colour_mapping_decider, colour_scheme_1){
	1 : sw_319_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_319_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	319: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_319_NO_COUPLE);
}

item (FEAT_TRAINS, item_319, 319) {
	property {
		name: 							string(STR_NAME_319);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1987, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					23;
		cost_factor:					45;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1438 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					75;
		weight:							30 ton;
		tractive_effort_coefficient:	0.1;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_319_coupling_restrictions;
		default: 							sw_319_default;
		purchase:							sw_319_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_319_refit_text_decider ;
		colour_mapping:						sw_319_colour_mapping_decider;
		purchase_colour_mapping: 			sw_319_colour_mapping_auto;
		running_cost_factor: return(current_speed == 0 ? 8 : 34) ;
		purchase_running_cost_factor:		34;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9030) {
		cargo_capacity: 85;
		default: sw_319_default_t;
		colour_mapping:	sw_319_colour_mapping_decider;
		cargo_subtype_text: sw_319_refit_text_decider ;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_319, 319){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_319, 319){
	property{
		name                           : string(STR_NAME_319_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_321.pnml" 1
//Driving car
//321 Old
spriteset(spriteset_321_f_nse, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_321_f_dut, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 0)}
spriteset(spriteset_321_f_fge, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 150)}
spriteset(spriteset_321_f_slk, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 75)}
//321 Anglia 
spriteset(spriteset_321_f_nxe, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_321_f_aga, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 225)}
//321 LNW region
spriteset(spriteset_321_f_lm_, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_321_f_fcc, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 0)}
//321 Northern
spriteset(spriteset_321_f_wyt, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 75)}
spriteset(spriteset_321_f_wyp, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 100)}
random_switch(FEAT_TRAINS, SELF, spriteset_321_f_wye, TRIGGER_VEHICLE_SERVICE){1: spriteset_321_f_wyt; 1: spriteset_321_f_wyp;}
spriteset(spriteset_321_f_nor, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 225)}
//320 Scottish
spriteset(spriteset_321_f_spt, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 0)}
spriteset(spriteset_321_f_cac, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 175)}
spriteset(spriteset_321_f_sct, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 50)}
//322 StanEx/Scottish
spriteset(spriteset_321_f_sta, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 175)}
spriteset(spriteset_321_f_bar, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 100)}
//Pan Forward
//321 Old
spriteset(spriteset_321_pf_nse, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_321_pf_dut, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 25)}
spriteset(spriteset_321_pf_fge, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 175)}
spriteset(spriteset_321_pf_slk, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 100)}
//321 Anglia 
spriteset(spriteset_321_pf_nxe, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_321_pf_aga, "gfx/EMU/class_321_2.png") {template_8_8_networker(180, 250)}
//321 LNW region
spriteset(spriteset_321_pf_lm_, "gfx/EMU/class_321_2.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_321_pf_fcc, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 25)}
//321 Northern
spriteset(spriteset_321_pf_wyp, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 125)}
spriteset(spriteset_321_pf_nor, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 250)}
//320 Scottish
spriteset(spriteset_321_pf_spt, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 25)}
spriteset(spriteset_321_pf_cac, "gfx/EMU/class_321_2.png") {template_8_8_networker(360, 200)}
spriteset(spriteset_321_pf_sct, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 75)}
//322 StanEx/Scottish
spriteset(spriteset_321_pf_sta, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 200)}
spriteset(spriteset_321_pf_bar, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 125)}
//Pan Backwards
//321 Old
spriteset(spriteset_321_pr_nse, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(0, 100)}
spriteset(spriteset_321_pr_dut, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(180, 25)}
spriteset(spriteset_321_pr_fge, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(180, 175)}
spriteset(spriteset_321_pr_slk, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(180, 100)}
//321 Anglia 
spriteset(spriteset_321_pr_nxe, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(0, 250)}
spriteset(spriteset_321_pr_aga, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(180, 250)}
//321 LNW region
spriteset(spriteset_321_pr_lm_, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(0, 175)}
spriteset(spriteset_321_pr_fcc, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(360, 25)}
//321 Northern
spriteset(spriteset_321_pr_wyp, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(360, 125)}
spriteset(spriteset_321_pr_nor, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(360, 250)}
//320 Scottish
spriteset(spriteset_321_pr_spt, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(540, 25)}
spriteset(spriteset_321_pr_cac, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(360, 200)}
spriteset(spriteset_321_pr_sct, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(540, 75)}
//322 StanEx/Scottish
spriteset(spriteset_321_pr_sta, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(540, 200)}
spriteset(spriteset_321_pr_bar, "gfx/EMU/class_321_2.png") {template_8_8_networker_reverse(540, 125)}
//Trailer
//321 Old
spriteset(spriteset_321_t_nse, "gfx/EMU/class_321_2.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_321_t_dut, "gfx/EMU/class_321_2.png") {template_8_4_networker(180, 50)}
spriteset(spriteset_321_t_fge, "gfx/EMU/class_321_2.png") {template_8_4_networker(180, 200)}
spriteset(spriteset_321_t_slk, "gfx/EMU/class_321_2.png") {template_8_4_networker(180, 125)}
//321 Anglia 
spriteset(spriteset_321_t_nxe, "gfx/EMU/class_321_2.png") {template_8_4_networker(0, 275)}
spriteset(spriteset_321_t_aga, "gfx/EMU/class_321_2.png") {template_8_4_networker(180, 275)}
//321 LNW region
spriteset(spriteset_321_t_lm_, "gfx/EMU/class_321_2.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_321_t_fcc, "gfx/EMU/class_321_2.png") {template_8_4_networker(360, 50)}
//321 Northern
spriteset(spriteset_321_t_wyp, "gfx/EMU/class_321_2.png") {template_8_4_networker(360, 150)}
spriteset(spriteset_321_t_nor, "gfx/EMU/class_321_2.png") {template_8_4_networker(360, 275)}
//322 StanEx/Scottish
spriteset(spriteset_321_t_sta, "gfx/EMU/class_321_2.png") {template_8_4_networker(540, 225)}
spriteset(spriteset_321_t_bar, "gfx/EMU/class_321_2.png") {template_8_4_networker(540, 150)}
//Purchase
spriteset(spriteset_321_purchase_nse, "gfx/EMU/class_321_2.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_321_purchase_fge, "gfx/EMU/class_321_2.png") {template_dualhead_purchase(270, 200)}
spriteset(spriteset_321_purchase_nxe, "gfx/EMU/class_321_2.png") {template_dualhead_purchase(90, 275)}
spriteset(spriteset_321_purchase_aga, "gfx/EMU/class_321_2.png") {template_dualhead_purchase(270, 275)}
//Headlights
spriteset(spriteset_321_hl, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 275)}
spriteset(spriteset_321_rl, "gfx/EMU/class_321_2.png") {template_8_8_networker(540, 250)}

switch(FEAT_TRAINS, SELF, sw_321_f_auto, current_year){
1983 .. 1995: spriteset_321_f_nse;
1996..2005: spriteset_321_f_fge;
2006..2010: spriteset_321_f_nxe;
spriteset_321_f_aga;
}
switch(FEAT_TRAINS, SELF, sw_321_pf_auto, current_year){
1983 .. 1995: spriteset_321_pf_nse;
1996..2005: spriteset_321_pf_fge;
2006..2010: spriteset_321_pf_nxe;
spriteset_321_pf_aga;
}
switch(FEAT_TRAINS, SELF, sw_321_pr_auto, current_year){
1983 .. 1995: spriteset_321_pr_nse;
1996..2005: spriteset_321_pr_fge;
2006..2010: spriteset_321_pr_nxe;
spriteset_321_pr_aga;
}
switch(FEAT_TRAINS, SELF, sw_321_t_auto, current_year){
1983 .. 1995: spriteset_321_t_nse;
1996..2005: spriteset_321_t_fge;
2006..2010: spriteset_321_t_nxe;
spriteset_321_t_aga;
}
switch(FEAT_TRAINS, SELF, sw_321_purchase, current_year){
1983 .. 1995: spriteset_321_purchase_nse;
1996..2005: spriteset_321_purchase_fge;
2006..2010: spriteset_321_purchase_nxe;
spriteset_321_purchase_aga;
}

switch(FEAT_TRAINS, PARENT, sw_321_tpfr_auto, vehicle_is_reversed){
1: sw_321_t_auto;
sw_321_pf_auto;
}

switch(FEAT_TRAINS, PARENT, sw_321_tprr_auto, vehicle_is_reversed){
1: sw_321_pr_auto;
sw_321_t_auto;
}

switch(FEAT_TRAINS, SELF, sw_321_tp_auto, position_in_vehid_chain){
0: sw_321_tpfr_auto;
sw_321_t_auto;
}

switch(FEAT_TRAINS, SELF, sw_321_tp_auto2, position_in_vehid_chain_from_end){
0: sw_321_tp_auto;
sw_321_tprr_auto;
}

switch(FEAT_TRAINS, SELF, sw_321_3_f_man, cargo_subtype){
1: spriteset_321_f_dut;
2: spriteset_321_f_fge;
3: spriteset_321_f_slk;
4: spriteset_321_f_nxe;
5: spriteset_321_f_aga;
6: spriteset_321_f_lm_;
7: spriteset_321_f_fcc;
8: spriteset_321_f_wye;
9: spriteset_321_f_nor;
10: spriteset_321_f_sta;
11: spriteset_321_f_bar;
12: spriteset_321_f_spt;
13: spriteset_321_f_cac;
14: spriteset_321_f_sct;
spriteset_321_f_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_4p_f_man, cargo_subtype){
1: spriteset_321_f_dut;
2: spriteset_321_f_fge;
3: spriteset_321_f_slk;
4: spriteset_321_f_nxe;
5: spriteset_321_f_aga;
6: spriteset_321_f_lm_;
7: spriteset_321_f_fcc;
8: spriteset_321_f_wye;
9: spriteset_321_f_nor;
10: spriteset_321_f_sta;
11: spriteset_321_f_bar;
spriteset_321_f_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_3_pf_man, cargo_subtype){
1: spriteset_321_pf_dut;
2: spriteset_321_pf_fge;
3: spriteset_321_pf_slk;
4: spriteset_321_pf_nxe;
5: spriteset_321_pf_aga;
6: spriteset_321_pf_lm_;
7: spriteset_321_pf_fcc;
8: spriteset_321_pf_wyp;
9: spriteset_321_pf_nor;
10: spriteset_321_pf_sta;
11: spriteset_321_pf_bar;
12: spriteset_321_pf_spt;
13: spriteset_321_pf_cac;
14: spriteset_321_pf_sct;
spriteset_321_pf_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_4p_pf_man, cargo_subtype){
1: spriteset_321_pf_dut;
2: spriteset_321_pf_fge;
3: spriteset_321_pf_slk;
4: spriteset_321_pf_nxe;
5: spriteset_321_pf_aga;
6: spriteset_321_pf_lm_;
7: spriteset_321_pf_fcc;
8: spriteset_321_pf_wyp;
9: spriteset_321_pf_nor;
10: spriteset_321_pf_sta;
11: spriteset_321_pf_bar;
spriteset_321_pf_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_3_pr_man, cargo_subtype){
1: spriteset_321_pr_dut;
2: spriteset_321_pr_fge;
3: spriteset_321_pr_slk;
4: spriteset_321_pr_nxe;
5: spriteset_321_pr_aga;
6: spriteset_321_pr_lm_;
7: spriteset_321_pr_fcc;
8: spriteset_321_pr_wyp;
9: spriteset_321_pr_nor;
10: spriteset_321_pr_sta;
11: spriteset_321_pr_bar;
12: spriteset_321_pr_spt;
13: spriteset_321_pr_cac;
14: spriteset_321_pr_sct;
spriteset_321_pr_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_4p_pr_man, cargo_subtype){
1: spriteset_321_pr_dut;
2: spriteset_321_pr_fge;
3: spriteset_321_pr_slk;
4: spriteset_321_pr_nxe;
5: spriteset_321_pr_aga;
6: spriteset_321_pr_lm_;
7: spriteset_321_pr_fcc;
8: spriteset_321_pr_wyp;
9: spriteset_321_pr_nor;
10: spriteset_321_pr_sta;
11: spriteset_321_pr_bar;
spriteset_321_pr_nse;
}

switch(FEAT_TRAINS, SELF, sw_321_t_man, cargo_subtype){
1: spriteset_321_t_dut;
2: spriteset_321_t_fge;
3: spriteset_321_t_slk;
4: spriteset_321_t_nxe;
5: spriteset_321_t_aga;
6: spriteset_321_t_lm_;
7: spriteset_321_t_fcc;
8: spriteset_321_t_wyp;
9: spriteset_321_t_nor;
10: spriteset_321_t_sta;
11: spriteset_321_t_bar;
spriteset_321_t_nse;
}

switch(FEAT_TRAINS, PARENT, sw_321_f_man, count_veh_id(321)-count_veh_id(9030)){
1: sw_321_3_f_man;
sw_321_4p_f_man;
}

switch(FEAT_TRAINS, PARENT, sw_321_p4_man, vehicle_is_reversed){
1: sw_321_t_man;
sw_321_4p_pf_man;
}

switch(FEAT_TRAINS, PARENT, sw_321_p4r_man, vehicle_is_reversed){
1: sw_321_4p_pr_man;
sw_321_t_man;
}

switch(FEAT_TRAINS, SELF, sw_321_t4_man, position_in_vehid_chain){
0: sw_321_p4_man;
sw_321_t_man;
}

switch(FEAT_TRAINS, SELF, sw_321_t4b_man, position_in_vehid_chain_from_end){
0: sw_321_p4r_man;
sw_321_t4_man;
}

switch(FEAT_TRAINS, PARENT, sw_321_3p_man, vehicle_is_reversed){
1: sw_321_3_pr_man;
sw_321_3_pf_man;
}

switch(FEAT_TRAINS, PARENT, sw_321_tp_man, count_veh_id(321)-count_veh_id(9030)){
1:sw_321_3p_man;
sw_321_t4b_man;
}

switch(FEAT_TRAINS, SELF, sw_321_hl_1, position_in_consist){
0: spriteset_321_hl;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_321_hl_2, position_in_consist_from_end){
0: spriteset_321_rl;
sw_321_hl_1;
}

switch(FEAT_TRAINS, SELF, sw_321_f, livery_choice){
	1: sw_321_f_man;
	sw_321_f_auto;
}

switch(FEAT_TRAINS, SELF, sw_321_t_default, livery_choice){
	1: sw_321_tp_man;
	sw_321_tp_auto2;
}

switch(FEAT_TRAINS, SELF, sw_321_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_321_f;
	1: return sw_321_hl_2;
}

switch(FEAT_TRAINS, SELF, sw_321_start_stop, count_veh_id(9030)){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_321_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_dut_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_fge_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_slk_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_nxe_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_GREY, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_aga_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_lm__colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_wyp_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_nor_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_sta_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_YELLOW) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_bar_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_spt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(company_colour1, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_cac_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;}
random_switch(FEAT_TRAINS, SELF, sw_321_sct_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}

switch(FEAT_TRAINS, SELF, sw_321_auto_colour, current_year){
1983 .. 1995: sw_321_nse_colour_mapping;
1996..2005: sw_321_fge_colour_mapping;
2006..2010: sw_321_nxe_colour_mapping;
sw_321_aga_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_321_manual_colour, cargo_subtype){
1: sw_321_dut_colour_mapping;
2: sw_321_fge_colour_mapping;
3: sw_321_slk_colour_mapping;
4: sw_321_nxe_colour_mapping;
5: sw_321_aga_colour_mapping;
6: sw_321_lm__colour_mapping;
7: sw_321_fcc_colour_mapping;
8: sw_321_wyp_colour_mapping;
9: sw_321_nor_colour_mapping;
10: sw_321_sta_colour_mapping;
11: sw_321_bar_colour_mapping;
12: sw_321_spt_colour_mapping;
13: sw_321_cac_colour_mapping;
14: sw_321_sct_colour_mapping;
sw_321_nse_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_321_3_manual_refit_text, cargo_subtype){
0: string(STR_LIVERY_NSE);
1: string(STR_LIVERY_NS_DUTCH);
2: string(STR_LIVERY_FGE);
3: string(STR_LIVERY_SILVERLINK);
4: string(STR_LIVERY_NXEA);
5: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
6: string(STR_LIVERY_LONDON_MIDLAND);
7: string(STR_LIVERY_FCC);
8: string(STR_LIVERY_WYPTE);
9: string(STR_LIVERY_NORTHERN);
10: string(STR_LIVERY_STANSTEAD);
11: string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY));
12: string(STR_LIVERY_SPT_ORANGE);
13: string(STR_LIVERY_SPT_CARMINE_CREAM);
14: string(STR_LIVERY_SCOTRAIL);
return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_321_4_manual_refit_text, cargo_subtype){
0: string(STR_LIVERY_NSE);
1: string(STR_LIVERY_NS_DUTCH);
2: string(STR_LIVERY_FGE);
3: string(STR_LIVERY_SILVERLINK);
4: string(STR_LIVERY_NXEA);
5: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
6: string(STR_LIVERY_LONDON_MIDLAND);
7: string(STR_LIVERY_FCC);
8: string(STR_LIVERY_WYPTE);
9: string(STR_LIVERY_NORTHERN);
10: string(STR_LIVERY_STANSTEAD);
11: string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY));
return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_321_manual_refit_text, count_veh_id(321)-count_veh_id(9030)){
	1 : sw_321_3_manual_refit_text;
	sw_321_4_manual_refit_text;
}

switch(FEAT_TRAINS, SELF, sw_321_livery_text_decider, livery_choice){
	1: sw_321_manual_refit_text;
	CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_321_livery_colour_decider, livery_choice){
	1: sw_321_manual_colour;
	sw_321_auto_colour;
}

switch(FEAT_TRAINS, SELF, sw_321_colour_mapping, colour_scheme_1){
	1: sw_321_livery_colour_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_321_coupling_restrictions, vehicle_type_id) {
321: return CB_RESULT_ATTACH_ALLOW;
9030: return CB_RESULT_ATTACH_ALLOW;
37 : return CB_RESULT_ATTACH_ALLOW;
return string(STR_321_NO_COUPLE);
}

item (FEAT_TRAINS, item_321, 321) {
	property {
		name: 							string(STR_NAME_321);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1988, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					63;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							1072 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					70;
		weight:							48 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_321_coupling_restrictions;
		default: 							sw_321_default;
		purchase:							sw_321_purchase;
		create_effect:						vfx_ohle_only;
		colour_mapping:						sw_321_colour_mapping;
		cargo_subtype_text:					sw_321_livery_text_decider;
		purchase_colour_mapping:			sw_321_auto_colour;
		sound_effect:						sw_sfx_emu_gec;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
		start_stop:							sw_321_start_stop;
}
		livery_override (9030) {
		cargo_capacity: 75;
		default: sw_321_t_default;
		weight:	34;
		colour_mapping:	sw_321_colour_mapping;
		cargo_subtype_text: sw_321_livery_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_321, 321){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_321, 321){
	property{
		name                           : string(STR_NAME_321_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_331.pnml" 1
//Northern class 331
spriteset(spriteset_331_f_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_331_pf_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_331_pr_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker_reverse(0, 25)}
spriteset(spriteset_331_t_nor, "gfx/UNUSED & MIXED/civity.png") {template_8_4_networker(0, 50)}
//Purchase
spriteset(spriteset_331_purchase, "gfx/UNUSED & MIXED/civity.png") {template_dualhead_purchase(0, 225)}
//Headlights
spriteset(spriteset_331_hl, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_331_rl, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 200)}
//Pantograph
spriteset(spriteset_331_pan_up, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_331_pan_dn, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_331_pan_up_r, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker_reverse(0, 125)}
spriteset(spriteset_331_pan_dn_r, "gfx/UNUSED & MIXED/civity.png") {template_8_8_networker_reverse(0, 150)}

switch(FEAT_TRAINS, SELF, sw_331_f_auto, current_year){
spriteset_331_f_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_pf_auto, current_year){
spriteset_331_pf_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_pr_auto, current_year){
spriteset_331_pr_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_t_auto, current_year){
spriteset_331_t_nor;
}

switch(FEAT_TRAINS, SELF, sw_331_f_man, cargo_subtype){
0: spriteset_331_f_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_pf_man, cargo_subtype){
0: spriteset_331_pf_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_pr_man, cargo_subtype){
0: spriteset_331_pr_nor;
}
switch(FEAT_TRAINS, SELF, sw_331_t_man, cargo_subtype){
0: spriteset_331_t_nor;
}

switch(FEAT_TRAINS, SELF, sw_331_f, livery_choice){
1: sw_331_f_man;
sw_331_f_auto;
}
switch(FEAT_TRAINS, SELF, sw_331_pf, livery_choice){
1: sw_331_pf_man;
sw_331_pf_auto;
}
switch(FEAT_TRAINS, SELF, sw_331_pr, livery_choice){
1: sw_331_pr_man;
sw_331_pr_auto;
}
switch(FEAT_TRAINS, SELF, sw_331_t, livery_choice){
1: sw_331_t_man;
sw_331_t_auto;
}
	///num_vehs_in_vehid_chain
switch(FEAT_TRAINS, SELF, sw_331_p, position_in_vehid_chain){
0: sw_331_pf;
sw_331_t;
}
switch(FEAT_TRAINS, SELF, sw_331_p_r, position_in_vehid_chain_from_end){
0: sw_331_pr;
sw_331_t;
}
switch(FEAT_TRAINS, PARENT, sw_331_t_default_car, vehicle_is_reversed){
0: sw_331_p;
sw_331_p_r;
}
//Pantograph
switch(FEAT_TRAINS, PARENT, sw_331_pan_f, vehicle_is_powered){
0: spriteset_331_pan_dn;
spriteset_331_pan_up;
}
switch(FEAT_TRAINS, PARENT, sw_331_pan_r, vehicle_is_powered){
0: spriteset_331_pan_dn_r;
spriteset_331_pan_up_r;
}
switch(FEAT_TRAINS, SELF, sw_331_p_pan, position_in_vehid_chain){
0: sw_331_pan_f;
gfx_blank;
}
switch(FEAT_TRAINS, SELF, sw_331_pr_pan, position_in_vehid_chain_from_end){
0: sw_331_pan_r;
gfx_blank;
}
switch(FEAT_TRAINS, PARENT, sw_331_t_default_pan, vehicle_is_reversed){
0: sw_331_p_pan;
sw_331_pr_pan;
}
//Headlights
switch(FEAT_TRAINS, SELF, sw_331_hl_1, position_in_consist){
0: spriteset_331_hl;
gfx_blank;
}
switch(FEAT_TRAINS, SELF, sw_331_hl_2, position_in_consist_from_end){
0: spriteset_331_rl;
sw_331_hl_1;
}

switch(FEAT_TRAINS, SELF, sw_331_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_331_f;
	1: return sw_331_hl_2;
}
switch(FEAT_TRAINS, SELF, sw_331_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_331_t_default_car;
	1: return sw_331_t_default_pan;
}

random_switch(FEAT_TRAINS, SELF, sw_331_nor_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE) ;}

switch(FEAT_TRAINS, SELF, sw_331_recolour_auto, current_year){
sw_331_nor_colour_mapping;
}
switch(FEAT_TRAINS, SELF, sw_331_recolour_man, cargo_subtype){
0: sw_331_nor_colour_mapping;
}
switch(FEAT_TRAINS, SELF, sw_331_manual_refit_text, cargo_subtype){
0: string(STR_LIVERY_NORTHERN);
return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_331_livery_text_decider, livery_choice){
	1: sw_331_manual_refit_text;
	CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_331_livery_colour_decider, livery_choice){
	1: sw_331_recolour_man;
	sw_331_recolour_auto;
}
switch(FEAT_TRAINS, SELF, sw_331_colour_mapping, colour_scheme_1){
	1: sw_331_livery_colour_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_331_start_stop, count_veh_id(9090)){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_331_coupling_restrictions, vehicle_type_id) {
331: return CB_RESULT_ATTACH_ALLOW;
item_MU90: return CB_RESULT_ATTACH_ALLOW;
37 : return CB_RESULT_ATTACH_ALLOW;
return string(STR_331_NO_COUPLE);
}

item (FEAT_TRAINS, item_331, 331) {
	property {
		name: 							string(STR_NAME_331);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2017, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					28;
		cost_factor:					75;
		running_cost_factor:			27;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2360 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					62;
		weight:							44 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.29;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_331_coupling_restrictions;
		default: 							sw_331_default;
		purchase:							spriteset_331_purchase;
		create_effect:						vfx_ohle_only;
		colour_mapping:						sw_331_colour_mapping;
		cargo_subtype_text:					sw_331_livery_text_decider;
		purchase_colour_mapping:			sw_331_recolour_auto;
		sound_effect:						sw_sfx_electric_loco_modern;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
		start_stop:							sw_331_start_stop;
}
		livery_override (9090) {
		cargo_capacity: 80;
		default: sw_331_t_default;
		weight:	28;
		colour_mapping:	sw_331_colour_mapping;
		cargo_subtype_text: sw_331_livery_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_331, 331){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_331, 331){
	property{
		name                           : string(STR_NAME_331_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_325.pnml" 1
//DEPRECIATED TRAIN MAINTAINED FOR BACKWARDS COMPATIBILITY, CURRENT NETWORKERS ARE IN /DMU/CLASS_165.PNML

spriteset(spriteset_x65_nse_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 0)}

spriteset(spriteset_x65_nse_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 25)}

spriteset(spriteset_x65_nse_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 150)}

spriteset(spriteset_x65_nse_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 175)}

spriteset(spriteset_x65_nse_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 200)}

spriteset(spriteset_x65_cnx_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 225)}

spriteset(spriteset_x65_cnx_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 250)}

spriteset(spriteset_x65_cnx_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 375)}

spriteset(spriteset_x65_cnx_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 400)}

spriteset(spriteset_x65_cnx_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 425)}

spriteset(spriteset_x65_seb_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 225)}

spriteset(spriteset_x65_seb_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 250)}

spriteset(spriteset_x65_seb_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 375)}

spriteset(spriteset_x65_seb_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 400)}

spriteset(spriteset_x65_seb_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 425)}

spriteset(spriteset_x65_sey_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_x65_sey_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 475)}

spriteset(spriteset_x65_sey_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 600)}

spriteset(spriteset_x65_sey_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 625)}

spriteset(spriteset_x65_sey_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 650)}

spriteset(spriteset_325_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 450)}

spriteset(spriteset_325_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 475)}

spriteset(spriteset_325_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 600)}

spriteset(spriteset_325_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 625)}

spriteset(spriteset_325_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 650)}

//Reverse Pans

spriteset(spriteset_x65_nse_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 25)}

spriteset(spriteset_x65_cnx_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 250)}

spriteset(spriteset_x65_seb_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(179, 250)}

spriteset(spriteset_x65_sey_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 475)}

spriteset(spriteset_325_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(179, 475)}

//Purchase Sprites
spriteset(spriteset_325_nse_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 500)}

spriteset(spriteset_325_cnx_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 525)}

spriteset(spriteset_325_seb_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 550)}

spriteset(spriteset_325_sey_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 575)}

//Switches

//trailer vfx

switch(FEAT_TRAINS, SELF, sw_325_t_vfx_f, position_in_vehid_chain){
	0: vfx_ohle_only; 
	return 0;
}
 
switch(FEAT_TRAINS, SELF, sw_325_t_vfx_r, position_in_vehid_chain_from_end){
	0: vfx_ohle_only; 
	return 0;
}

switch(FEAT_TRAINS, SELF, sw_325_t_vfx, vehicle_is_reversed){
	0: sw_325_t_vfx_f;
	1: sw_325_t_vfx_r;
} 
 
//Coupling

switch(FEAT_TRAINS, SELF, sw_325_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_325: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_325_NO_COUPLE);
}

//Power Car
 switch(FEAT_TRAINS, SELF, sw_325_nse_f, position_in_consist){
	0: spriteset_x65_nse_f; 
	spriteset_x65_nse_o;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_nse, position_in_consist_from_end){
	0: spriteset_x65_nse_r; 
	sw_325_nse_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_cnx_f, position_in_consist){
	0: spriteset_x65_cnx_f; 
	spriteset_x65_cnx_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx, position_in_consist_from_end){
	0: spriteset_x65_cnx_r; 
	sw_325_cnx_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_seb_f, position_in_consist){
	0: spriteset_x65_seb_f; 
	spriteset_x65_seb_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_seb, position_in_consist_from_end){
	0: spriteset_x65_seb_r; 
	sw_325_seb_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_sey_f, position_in_consist){
	0: spriteset_x65_sey_f; 
	spriteset_x65_sey_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_sey, position_in_consist_from_end){
	0: spriteset_x65_sey_r; 
	sw_325_sey_f;
 }


//Trailer/Pan

switch(FEAT_TRAINS, SELF, sw_325_nse_t, position_in_vehid_chain){
	0: spriteset_x65_nse_p; 
	spriteset_x65_nse_t;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx_t, position_in_vehid_chain){
	0: spriteset_x65_cnx_p; 
	spriteset_x65_cnx_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_seb_t, position_in_vehid_chain){
	0: spriteset_x65_seb_p; 
	spriteset_x65_seb_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_sey_t, position_in_vehid_chain){
	0: spriteset_x65_sey_p; 
	spriteset_x65_sey_t;
 }
 
//Trailer/Pan reverse 
 
switch(FEAT_TRAINS, SELF, sw_325_nse_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_nse_pr; 
	spriteset_x65_nse_t;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_cnx_pr; 
	spriteset_x65_cnx_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_seb_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_seb_pr; 
	spriteset_x65_seb_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_sey_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_sey_pr; 
	spriteset_x65_sey_t;
 } 
 
//Mail

switch(FEAT_TRAINS, SELF, sw_325_t_f, position_in_vehid_chain){
	0: spriteset_325_p; 
	spriteset_325_t;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_t_re, position_in_vehid_chain){
	0: spriteset_325_pr; 
	spriteset_325_t;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_t, vehicle_is_reversed){
	0: sw_325_t_f;
	1: sw_325_t_re;
}
 
 switch(FEAT_TRAINS, SELF, sw_325_f, position_in_consist){
	0: spriteset_325_f; 
	spriteset_325_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325, position_in_consist_from_end){
	0: spriteset_325_r; 
	sw_325_f;
 } 
 
//NSE or CNX random_switch

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse){ 
	8 : sw_325_cnx;
	1 : sw_325_nse;
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse_t){ 
	dependent : sw_325_cnx_nse;
	8 : sw_325_cnx_t;
	1 : sw_325_nse_t;
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse_t_re){ 
	dependent : sw_325_cnx_nse;
	8 : sw_325_cnx_t_re;
	1 : sw_325_nse_t_re;
}
 
//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_325_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325 ;
 }
 
//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_325_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb_t ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_t_f_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_nse_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb_t_re ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_t_re ;
 }
 
//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider, current_year){
	1983 .. 1995: sw_325_nse_select;
	1996 .. 2005: sw_325_cnx_select;
	2006 .. 2012: sw_325_sey_select;
	sw_325_seb_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t_f, current_year){
	1983 .. 1995: sw_325_nse_t_select;
	1996 .. 2005: sw_325_cnx_t_select;
	2006 .. 2012: sw_325_sey_t_select;
	sw_325_seb_t_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t_re, current_year){
	1983 .. 1995: sw_325_nse_t_re_select;
	1996 .. 2005: sw_325_cnx_t_re_select;
	2006 .. 2012: sw_325_sey_t_re_select;
	sw_325_seb_t_re_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t, vehicle_is_reversed){
	0: sw_325_passenger_livery_decider_t_f;
	1: sw_325_passenger_livery_decider_t_re;
}

switch(FEAT_TRAINS, SELF, sw_325_t_select, vehicle_is_reversed){
	0: sw_325_mail_t_f_select;
	1: sw_325_mail_t_re_select;
}
 
 switch(FEAT_TRAINS, SELF, sw_325_livery_decider, cargo_classes){
	CC_PASSENGERS: sw_325_passenger_livery_decider;
	CC_MAIL: sw_325_passenger_livery_decider;
	sw_325_mail_select;
}

 switch(FEAT_TRAINS, PARENT, sw_325_livery_decider_t, cargo_classes){
	CC_PASSENGERS: sw_325_passenger_livery_decider_t;
	CC_MAIL: sw_325_passenger_livery_decider_t;
	sw_325_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider, cargo_subtype){
	0: sw_325_nse_select;
	1: sw_325_cnx_select;
	2: sw_325_sey_select;
	3: sw_325_seb_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider;
	CC_MAIL: sw_325_manual_livery_decider;
	sw_325_mail_select;
}

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t, cargo_subtype){
	0: sw_325_nse_t_select;
	1: sw_325_cnx_t_select;
	2: sw_325_sey_t_select;
	3: sw_325_seb_t_select;
}

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_re, cargo_subtype){
	0: sw_325_nse_t_re_select;
	1: sw_325_cnx_t_re_select;
	2: sw_325_sey_t_re_select;
	3: sw_325_seb_t_re_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider_t;
	CC_MAIL: sw_325_manual_livery_decider_t;
	sw_325_mail_t_f_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_re_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider_t_re;
	CC_MAIL: sw_325_manual_livery_decider_t_re;
	sw_325_mail_t_re_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_c, vehicle_is_reversed){
	0: sw_325_manual_livery_decider_t_b;
	1: sw_325_manual_livery_decider_t_re_b;
}

switch(FEAT_TRAINS, SELF, sw_325_livery_choice_decider, livery_choice){
	1 : sw_325_manual_livery_decider_b ; 
	sw_325_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_325_livery_choice_decider_t, livery_choice){
	1 : sw_325_manual_livery_decider_t_c ; 
	sw_325_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_325_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_SE_YELLOW);
	3: return string(STR_LIVERY_SE_BLUE);
	return CB_RESULT_NO_TEXT ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_325_refit_text_b, cargo_classes){
	CC_PASSENGERS: sw_325_refit_text;
	CC_MAIL: sw_325_refit_text;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_325_refit_text_decider, livery_choice){
	1 : sw_325_refit_text_b ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_325_purchase, current_year){
	1983 .. 1995: spriteset_325_nse_purchase;
	1996 .. 2005: spriteset_325_cnx_purchase;
	2006 .. 2012: spriteset_325_sey_purchase;
	spriteset_325_seb_purchase;
}

switch(FEAT_TRAINS, SELF, sw_325_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_325_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_325_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_325_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_325_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_325_cnx_a_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_325_south_eastern_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_325_mail_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_colour_mapping){ 
	dependent : sw_325_cnx_nse;
	5 : sw_325_cnx_a_colour_mapping;
	2 : sw_325_nse_colour_mapping;
}

//Recolour Switches

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_auto_pass, current_year){
	1983 .. 1995 : sw_325_nse_colour_mapping ;
	1996 .. 2005 : sw_325_cnx_colour_mapping ;
	sw_325_south_eastern_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_auto, cargo_classes){
	CC_PASSENGERS: sw_325_colour_mapping_auto_pass;
	CC_MAIL: sw_325_colour_mapping_auto_pass;
	sw_325_mail_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual_pass, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	2..3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual, cargo_classes){
	CC_PASSENGERS: sw_325_colour_mapping_manual_pass;
	CC_MAIL: sw_325_colour_mapping_manual_pass;
	sw_325_mail_colour_mapping ;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual_check, livery_choice){
	1 : sw_325_colour_mapping_manual ;
	sw_325_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_decider, colour_scheme_1){
	1 : sw_325_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_325, 325) {
	property {
		name: 							string(STR_NAME_325);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1990, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS, CC_MAIL, CC_ARMOURED);
		cargo_allow_refit:				[PASS, TOUR, MAIL, VALU, GOLD, DIAM];
		loading_speed:					35;
		cost_factor:					55;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					105;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.4;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_325_coupling_restrictions;
		default: 							sw_325_default;
		purchase:							sw_325_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_325_refit_text_decider ;
		colour_mapping:						sw_325_colour_mapping_decider ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 11 : 45) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 110;
		default: sw_325_default_t;
		colour_mapping:	sw_325_colour_mapping_decider;
		create_effect: sw_325_t_vfx;
		cargo_subtype_text: sw_325_refit_text_decider ;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_325, 325){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_325, 325){
	property{
		name                           : string(STR_NAME_325_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_334.pnml" 1
//Front Cars
spriteset(spriteset_458_0_f, "gfx/EMU/class_458.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_460_f_pax, "gfx/EMU/class_458.png") {template_8_8_networker(358, 150)}
spriteset(spriteset_460_f_mail, "gfx/EMU/class_458.png") {template_8_8_networker(358, 175)}
spriteset(spriteset_458_5_f, "gfx/EMU/class_458.png") {template_8_8_networker(448, 225)}
spriteset(spriteset_334_f_sct, "gfx/EMU/class_458.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_334_f_spt, "gfx/EMU/class_458.png") {template_8_8_networker(179, 150)}
//Med Driving
spriteset(spriteset_458_0_c, "gfx/EMU/class_458.png") {template_8_8_networker(0, 225)} //_c indicates coupled//
//Trailer
spriteset(spriteset_458_0_t, "gfx/EMU/class_458.png") {template_8_4_networker(179, 225)}
spriteset(spriteset_460_t, "gfx/EMU/class_458.png") {template_8_4_networker(537, 175)}
spriteset(spriteset_458_5_t_a, "gfx/EMU/class_458.png") {template_8_4_networker(269, 225)}
spriteset(spriteset_458_5_t_b, "gfx/EMU/class_458.png") {template_8_4_networker(359, 225)}
spriteset(spriteset_334_t_sct, "gfx/EMU/class_458.png") {template_8_4_networker(358, 125)}
spriteset(spriteset_334_t_spt, "gfx/EMU/class_458.png") {template_8_4_networker(448, 125)}
//Pan
spriteset(spriteset_334_pf_sct, "gfx/EMU/class_458.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_334_pf_spt, "gfx/EMU/class_458.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_334_pr_sct, "gfx/EMU/class_458.png") {template_8_8_networker_reverse(0, 175)}
spriteset(spriteset_334_pr_spt, "gfx/EMU/class_458.png") {template_8_8_networker_reverse(179, 175)}
//Headlights
spriteset(spriteset_334_hl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 125)}
spriteset(spriteset_334_rl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 150)}
spriteset(spriteset_458_0_hl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 50)}
spriteset(spriteset_458_0_rl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 75)}
spriteset(spriteset_458_5_hl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 0)}
spriteset(spriteset_458_5_rl, "gfx/EMU/class_458.png") {template_8_8_networker(537, 25)}
spriteset(spriteset_460_hl, "gfx/EMU/class_458.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_460_rl, "gfx/EMU/class_458.png") {template_8_8_networker(358, 100)}
//Purchase
spriteset(spriteset_334_purchase_spt, "gfx/EMU/class_458.png") {template_dualhead_purchase(0, 101)}
spriteset(spriteset_334_purchase_sct, "gfx/EMU/class_458.png") {template_dualhead_purchase(0, 114)}
spriteset(spriteset_458_0_purchase, "gfx/EMU/class_458.png") {template_dualhead_purchase(0, 88)}//
spriteset(spriteset_458_5_purchase, "gfx/EMU/class_458.png") {template_dualhead_purchase(0, 75)}//
spriteset(spriteset_460_purchase, "gfx/EMU/class_458.png") {template_dualhead_purchase(0, 127)}//
//check coords
	//Class 334
//Purchase
switch(FEAT_TRAINS, SELF, sw_334_purchase, current_year){
	0..2009: spriteset_334_purchase_spt;
	spriteset_334_purchase_sct;
}
//Main section for class 334
switch(FEAT_TRAINS, SELF, sw_334_f_man, cargo_subtype){
	0: spriteset_334_f_spt;
	1: spriteset_334_f_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_t_man, cargo_subtype){
	0: spriteset_334_t_spt;
	1: spriteset_334_t_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_pf_man, cargo_subtype){
	0: spriteset_334_pf_spt;
	1: spriteset_334_pf_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_pr_man, cargo_subtype){
	0: spriteset_334_pr_spt;
	1: spriteset_334_pr_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_f_auto, current_year){
	0..2009: spriteset_334_f_spt;
	spriteset_334_f_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_t_auto, current_year){
	0..2009: spriteset_334_t_spt;
	spriteset_334_t_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_pf_auto, current_year){
	0..2009: spriteset_334_pf_spt;
	spriteset_334_pf_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_pr_auto, current_year){
	0..2009: spriteset_334_pr_spt;
	spriteset_334_pr_sct;
}
switch(FEAT_TRAINS, SELF, sw_334_f_decider, livery_choice){
	0: sw_334_f_auto;
	sw_334_f_man;
}
switch(FEAT_TRAINS, SELF, sw_334_t_decider, livery_choice){
	0: sw_334_t_auto;
	sw_334_t_man;
}
switch(FEAT_TRAINS, SELF, sw_334_pf_decider, livery_choice){
	0: sw_334_pf_auto;
	sw_334_pf_man;
}
switch(FEAT_TRAINS, SELF, sw_334_pr_decider, livery_choice){
	0: sw_334_pr_auto;
	sw_334_pr_man;
}
switch(FEAT_TRAINS, SELF, sw_334_tf_decider, position_in_vehid_chain){
	0: sw_334_pf_decider;
	sw_334_t_decider;
}
switch(FEAT_TRAINS, SELF, sw_334_tr_decider, position_in_vehid_chain_from_end){
	0: sw_334_pr_decider;
	sw_334_t_decider;
}
switch(FEAT_TRAINS, PARENT, sw_334_p_decider, vehicle_is_reversed){
	0: sw_334_tf_decider;
	sw_334_tr_decider;
}
//Headlights
switch(FEAT_TRAINS, SELF, sw_334_tl_decider, position_in_consist_from_end){
	0: spriteset_334_rl;
	gfx_blank;
}
switch(FEAT_TRAINS, SELF, sw_334_hl_decider, position_in_consist){
	0: spriteset_334_hl;
	sw_334_tl_decider;
}

switch(FEAT_TRAINS, SELF, sw_334_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_334_f_decider;
	1 : return sw_334_hl_decider;
}

switch(FEAT_TRAINS, SELF, sw_334_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_334_p_decider;
}

//Recolour
random_switch(FEAT_TRAINS, SELF, sw_334_spt_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_BROWN);
} 
random_switch(FEAT_TRAINS, SELF, sw_334_sct_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY);
}

//Recolour Switches
switch(FEAT_TRAINS, SELF, sw_334_colour_mapping_auto, current_year){
	0 .. 2009: sw_334_spt_colour_mapping;
	sw_334_sct_colour_mapping;
}
switch(FEAT_TRAINS, SELF, sw_334_colour_mapping_manual, cargo_subtype){
	0: sw_334_spt_colour_mapping;
	1: sw_334_sct_colour_mapping;
	return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, PARENT, sw_334_colour_mapping_manual_check, livery_choice){
	1 : sw_334_colour_mapping_manual ;
	sw_334_colour_mapping_auto ;
}
switch(FEAT_TRAINS, PARENT, sw_334_colour_mapping_decider, colour_scheme_1){
	1 : sw_334_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}
switch(FEAT_TRAINS, SELF, sw_334_manual_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SPT_CARMINE_CREAM);
	1: string(STR_LIVERY_SCOTRAIL);
return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_334_livery_text_decider, livery_choice){
	1: sw_334_manual_refit_text;
	CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_334_start_stop, count_veh_id(9090)){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_334_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	334: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_334), string(STR_NAME_MU90));
}

item (FEAT_TRAINS, item_334, 334) {
	property {
		name: 							string(STR_NAME_334);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1999, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					32;
		cost_factor:					45;
		running_cost_factor:			31;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							90 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1448 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					64;
		weight:							30 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_334_coupling_restrictions;
		default: 							sw_334_default;
		purchase:							sw_334_purchase;
		create_effect:						vfx_ohle_only;
		cargo_subtype_text:					sw_334_livery_text_decider;
		colour_mapping:						sw_334_colour_mapping_decider;
		purchase_colour_mapping: 			sw_334_colour_mapping_auto;
		running_cost_factor:				return(current_speed == 0 ? 7 : 31) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		start_stop:							sw_334_start_stop;
}
		livery_override (9090) {
		cargo_capacity: 70;
		default: sw_334_t_default;
		colour_mapping:	sw_334_colour_mapping_decider;
		cargo_subtype_text: sw_334_livery_text_decider;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_334, 334){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_334, 334){
	property{
		name                           : string(STR_NAME_334_ALT) ;
	}
}
}

	//Class 458/460
//Purchase
switch(FEAT_TRAINS, SELF, sw_458_purchase, current_year){
	0..2012: spriteset_458_0_purchase;
	spriteset_458_5_purchase;
}
//Main section for class 458/460
switch(FEAT_TRAINS, SELF, sw_458_0_f_decider_1, position_in_consist_from_end){
	0: spriteset_458_0_f;
	spriteset_458_0_c;
}
switch(FEAT_TRAINS, SELF, sw_458_0_f_decider, position_in_consist){
	0: spriteset_458_0_f;
	sw_458_0_f_decider_1;
}
switch(FEAT_TRAINS, SELF, sw_458_f_man, cargo_subtype){
	0: sw_458_0_f_decider;
	1: spriteset_460_f_pax;
	2: spriteset_458_5_f;
}
switch(FEAT_TRAINS, SELF, sw_458_f_mail_man, cargo_subtype){
	0: spriteset_460_f_mail;
}
random_switch (FEAT_TRAINS, SELF, sw_458_5_t) {
	2: spriteset_458_5_t_a;
	1: spriteset_458_5_t_b;
}
switch(FEAT_TRAINS, SELF, sw_458_t_man, cargo_subtype){
	0: spriteset_458_0_t;
	1: spriteset_460_t;
	2: sw_458_5_t;
}
switch(FEAT_TRAINS, SELF, sw_458_f_auto, current_year){
	0..2012: sw_458_0_f_decider;
	spriteset_458_5_f;
}
switch(FEAT_TRAINS, SELF, sw_458_t_auto, current_year){
	0..2012: spriteset_458_0_t;
	sw_458_5_t;
}
switch(FEAT_TRAINS, SELF, sw_458_f_decider, livery_choice){
	0: sw_458_f_auto;
	sw_458_f_man;
}
switch(FEAT_TRAINS, SELF, sw_458_t_decider, livery_choice){
	0: sw_458_t_auto;
	sw_458_t_man;
}
//Headlights
switch(FEAT_TRAINS, SELF, sw_458_tl_man, cargo_subtype){
	0: spriteset_458_0_rl;
	1: spriteset_460_rl;
	2: spriteset_458_5_rl;
}
switch(FEAT_TRAINS, SELF, sw_458_hl_man, cargo_subtype){
	0: spriteset_458_0_hl;
	1: spriteset_460_hl;
	2: spriteset_458_5_hl;
}
switch(FEAT_TRAINS, SELF, sw_458_tl_auto, current_year){
	0..2012: spriteset_458_0_hl;
	spriteset_458_5_hl;
}
switch(FEAT_TRAINS, SELF, sw_458_hl_auto, current_year){
	0..2012: spriteset_458_0_rl;
	spriteset_458_5_rl;
}
switch(FEAT_TRAINS, SELF, sw_458_tl_type_decider, livery_choice){
	0: sw_458_tl_auto;
	sw_458_tl_man;
}
switch(FEAT_TRAINS, SELF, sw_458_hl_type_decider, livery_choice){
	0: sw_458_hl_auto;
	sw_458_hl_man;
}
switch(FEAT_TRAINS, SELF, sw_458_tl_decider, position_in_consist_from_end){
	0: sw_458_tl_type_decider;
	gfx_blank;
}
switch(FEAT_TRAINS, SELF, sw_458_hl_decider, position_in_consist){
	0: sw_458_hl_type_decider;
	sw_458_tl_decider;
}

switch(FEAT_TRAINS, SELF, sw_458_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_458_f_decider;
	1 : return sw_458_hl_decider;
}

switch(FEAT_TRAINS, SELF, sw_458_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_458_t_decider;
}

//Recolour
random_switch(FEAT_TRAINS, SELF, sw_458_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE);
}
random_switch(FEAT_TRAINS, SELF, sw_460_gax_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_LIGHT_BLUE);
}

//Recolour Switches
switch(FEAT_TRAINS, SELF, sw_458_colour_mapping_manual, cargo_subtype){
	0: sw_458_swt_colour_mapping;
	1: sw_460_gax_colour_mapping;
	2: sw_458_swt_colour_mapping;
}
switch(FEAT_TRAINS, PARENT, sw_458_colour_mapping_manual_check, livery_choice){
	1 : sw_458_colour_mapping_manual ;
	sw_458_swt_colour_mapping ;
}
switch(FEAT_TRAINS, PARENT, sw_458_colour_mapping_decider, colour_scheme_1){
	1 : sw_458_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}
switch(FEAT_TRAINS, SELF, sw_458_manual_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SWT);
	1: string(STR_LIVERY_GATEX);
	2: string(STR_LIVERY_SWT_REFURB);
return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_458_livery_text_decider, livery_choice){
	1: sw_458_manual_refit_text;
	CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, sw_458_start_stop, count_veh_id(9090)){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_458_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	458: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_458), string(STR_NAME_MU90));
}
switch(FEAT_TRAINS, SELF, sw_458_speed_man, cargo_subtype){
	0: 160;
	1: 160;
	2: 120;
}
switch(FEAT_TRAINS, SELF, sw_458_speed_decider, livery_choice){
	0: 160;
	sw_458_speed_man;
}
switch(FEAT_TRAINS, SELF, sw_458_te_man, cargo_subtype){
	0: 125;
	1: 125;
	2: 166;
}
switch(FEAT_TRAINS, SELF, sw_458_te_decider, livery_choice){
	0: 125;
	sw_458_te_man;
}

item (FEAT_TRAINS, item_458, 458) {
	property {
		name: 							string(STR_NAME_458);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1999, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					32;
		cost_factor:					45;
		running_cost_factor:			31;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1438 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							30 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_458_coupling_restrictions;
		default: 							sw_458_default;
		purchase:							sw_458_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_458_livery_text_decider;
		colour_mapping:						sw_458_colour_mapping_decider;
		purchase_colour_mapping: 			sw_458_colour_mapping_decider;
		running_cost_factor:				return(current_speed == 0 ? 7 : 31) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		speed:								sw_458_speed_decider;
		tractive_effort_coefficient:		sw_458_te_decider;
}
		livery_override (9090) {
		cargo_capacity: 85;
		default: sw_458_t_default;
		colour_mapping:	sw_458_colour_mapping_decider;
		cargo_subtype_text: sw_458_livery_text_decider ;
		start_stop:                   sw_458_start_stop;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_458, 458){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_458, 458){
	property{
		name                           : string(STR_NAME_458_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_370.pnml" 1


//APT

//Sprites

spriteset(gfx_370_front					, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,0	)}
spriteset(gfx_370_trailer				, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,25	)}
spriteset(gfx_370_trailer_rev			, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(0	,25	)}
spriteset(gfx_370_trailer_end			, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,50	)}
spriteset(gfx_370_trailer_end_rev		, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(0	,50	)}
spriteset(gfx_370_power					, "gfx/EMU/apt.png"	){	template_8_4_2				(0	,75	)}

spriteset(gfx_370_front_ic				, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,200)}
spriteset(gfx_370_trailer_ic			, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,225)}
spriteset(gfx_370_trailer_rev_ic		, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(0	,225)}
spriteset(gfx_370_trailer_end_ic		, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,250)}
spriteset(gfx_370_trailer_end_rev_ic	, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(0	,250)}
spriteset(gfx_370_power_ic				, "gfx/EMU/apt.png"	){	template_8_4_2				(0	,275)}

//Fixtures
spriteset(gfx_370_lights_f				, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,125)}
spriteset(gfx_370_lights_r				, "gfx/EMU/apt.png"	){	template_8_8_2				(0	,150)}
spriteset(gfx_370_panto_up				, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(0	,100)}
spriteset(gfx_370_panto_down			, "gfx/EMU/apt.png"	){	template_8_8_2				(178,100)}
spriteset(gfx_370_windows				, "gfx/EMU/apt.png"	){	template_8_8_2				(178,125)}
spriteset(gfx_370_windows_rev			, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(178,125)}
spriteset(gfx_370_windows_end			, "gfx/EMU/apt.png"	){	template_8_8_2				(178,150)}
spriteset(gfx_370_windows_end_rev		, "gfx/EMU/apt.png"	){	template_8_8_rev_2			(178,150)}
spriteset(gfx_370_more					, "gfx/EMU/apt.png"	){	template_8_4_2				(89	,75	)}

//Purchase
spriteset(gfx_370_purchase				, "gfx/EMU/apt.png"	){	template_dualhead_purchase	(178,0	)}

//Switches



//Liveries

switch(FEAT_TRAINS, SELF, sw_370_liveries_front, cargo_subtype){
	0	: gfx_370_front_ic ;	// IC
	gfx_370_front ;		// NSE
}

switch(FEAT_TRAINS, SELF, sw_370_liveries_trailer, cargo_subtype){
	0	: gfx_370_trailer_ic ;	// IC
	gfx_370_trailer ;		// NSE
}

switch(FEAT_TRAINS, SELF, sw_370_liveries_trailer_rev, cargo_subtype){
	0	: gfx_370_trailer_rev_ic ;	// IC
	gfx_370_trailer_rev ;		// NSE
}

switch(FEAT_TRAINS, SELF, sw_370_liveries_trailer_end, cargo_subtype){
	0	: gfx_370_trailer_end_ic ;	// IC
	gfx_370_trailer_end ;		// NSE
}

switch(FEAT_TRAINS, SELF, sw_370_liveries_trailer_end_rev, cargo_subtype){
	0	: gfx_370_trailer_end_rev_ic ;	// IC
	gfx_370_trailer_end_rev ;		// NSE
}

switch(FEAT_TRAINS, SELF, sw_370_liveries_power, cargo_subtype){
	0	: gfx_370_power_ic ;	// IC
	gfx_370_power ;		// NSE
}








//Headlights

switch(FEAT_TRAINS, SELF, sw_370_headlights_1, position_in_consist){
	0: gfx_370_lights_f;
	gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_370_headlights, position_in_consist_from_end){
	0: gfx_370_lights_r;
	sw_370_headlights_1;
}

//Sprite stack


switch(FEAT_TRAINS, PARENT, sw_370_length_check, (count_veh_id(9030) - count_veh_id(370)) < 2){
	1: gfx_370_more;
	gfx_370_windows_end;
}

switch(FEAT_TRAINS, SELF, sw_370_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_370_liveries_front;
	1: return sw_370_headlights;
	2: return sw_370_length_check;
}




//Trailers




switch(FEAT_TRAINS, SELF, sw_370_t_check_mid,	(position_in_vehid_chain > num_vehs_in_vehid_chain / 2) ){
	1 : sw_370_liveries_trailer_rev ;
	sw_370_liveries_trailer ;
}

switch(FEAT_TRAINS, SELF, sw_370_t_check_end_2,	(position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)+1) ){
	1 : sw_370_liveries_trailer_end ;
	sw_370_t_check_mid ;
}

switch(FEAT_TRAINS, SELF, sw_370_t_check_end_1,	(position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)-2) ){
	1 : sw_370_liveries_trailer_end_rev ;
	sw_370_t_check_end_2 ;
}

switch(FEAT_TRAINS, SELF, sw_370_t_check_pos_power,	( (position_in_vehid_chain == num_vehs_in_vehid_chain / 2) || (position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)-1)) ){
	1 : sw_370_liveries_power ;
	sw_370_t_check_end_1 ;
}




switch(FEAT_TRAINS, SELF, sw_370_p_check_mid,	(position_in_vehid_chain > num_vehs_in_vehid_chain / 2) ){
	1 : gfx_370_windows_rev ;
	gfx_370_windows ;
}

switch(FEAT_TRAINS, SELF, sw_370_p_check_end_2,	(position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)+1) ){
	1 : gfx_370_windows_end ;
	sw_370_p_check_mid ;
}

switch(FEAT_TRAINS, SELF, sw_370_p_check_end_1,	(position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)-2) ){
	1 : gfx_370_windows_end_rev ;
	sw_370_p_check_end_2 ;
}

switch(FEAT_TRAINS, SELF, sw_370_p_check_pos_power_2,	position_in_vehid_chain == (num_vehs_in_vehid_chain / 2)-1 ){
	1 : gfx_370_panto_up ;
	sw_370_p_check_end_1 ;
}

switch(FEAT_TRAINS, SELF, sw_370_p_check_pos_power_1,	position_in_vehid_chain == num_vehs_in_vehid_chain / 2 ){
	1 : gfx_370_panto_down ;
	sw_370_p_check_pos_power_2 ;
}



switch(FEAT_TRAINS, PARENT, sw_370_t_length_check, (count_veh_id(9030) - count_veh_id(370)) < 2){
	1: gfx_370_more;
	gfx_blank;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_370_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_370_t_check_pos_power;
	1: return sw_370_p_check_pos_power_1;
	2: return sw_370_t_length_check;
}

//Panto check, then windows check








switch(FEAT_TRAINS, SELF, sw_370_refit_text, cargo_subtype){
	0: string(STR_LIVERY_INTERCITY);
	1: string(STR_LIVERY_FICTIONAL,string(STR_LIVERY_NSE));
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_370_livery_decider, livery_choice){
	1: sw_370_refit_text;
	return CB_RESULT_NO_TEXT;
}



//Colours

//Manual

switch(FEAT_TRAINS, SELF, sw_370_colours_manual, cargo_subtype){
	0	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_370_colours_manual_check, livery_choice){
	1 : sw_370_colours_manual ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_370_colours_2cc_check, colour_scheme_1){
	1 : sw_370_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


switch(FEAT_TRAINS, SELF, sw_370_recolour_purchase, colour_scheme_1){
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}





switch(FEAT_TRAINS, SELF, sw_370_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	370: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
	92 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_370), string(STR_NAME_Mk3));
}

switch(FEAT_TRAINS, PARENT, sw_370_start_stop, (count_veh_id(9030) - count_veh_id(370)) < 2){
1: string(STR_MORE_CARRIAGES_NEEDED_APT);
CB_RESULT_NO_TEXT;
}


item (FEAT_TRAINS, item_370, 370) {
	property {
		name: 							string(STR_NAME_370);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1979, 1, 1);
		model_life:						20;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				20;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					12;
		cost_factor:					170;
		running_cost_factor:			85;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							155 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_TILT);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							6000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					1;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.3;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_370_coupling_restrictions;
		default: 							sw_370_default;
		purchase:							gfx_370_purchase;
		colour_mapping:						sw_370_colours_2cc_check;
		cargo_subtype_text:					sw_370_livery_decider;
		purchase_colour_mapping:			sw_370_recolour_purchase;
		sound_effect:						sw_sfx_electric_loco_old;
		running_cost_factor:				return(current_speed == 0 ? 30 : 85);
		purchase_running_cost_factor:		85;
		start_stop:							sw_370_start_stop;
		cargo_capacity:						return 0;
}
		livery_override (9030) {
		cargo_capacity: 		65;
		power:					0;
		default: 				sw_370_t_default;
		weight:					29;
		colour_mapping:			sw_370_colours_2cc_check;
		cargo_subtype_text: 	sw_370_livery_decider;
		speed:					0;
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_370, 370){
	property{
		name                           : string(STR_NAME_370_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_390.pnml" 1
//VT
spriteset(spriteset_390_VT_D, "gfx/EMU/class_390.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_390_VT_P, "gfx/EMU/class_390.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_390_VT_PR, "gfx/EMU/class_390.png") {template_8_8_networker_reverse(0, 25)}
spriteset(spriteset_390_VT_T, "gfx/EMU/class_390.png") {template_8_4_networker(0, 50)}
//VT Silk
spriteset(spriteset_390_VS_D, "gfx/EMU/class_390.png") {template_8_8_networker(0, 150)}
//VT Blank
spriteset(spriteset_390_Wh_D, "gfx/EMU/class_390.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_390_Wh_P, "gfx/EMU/class_390.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_390_Wh_PR, "gfx/EMU/class_390.png") {template_8_8_networker_reverse(0, 100)}
spriteset(spriteset_390_Wh_T, "gfx/EMU/class_390.png") {template_8_4_networker(0, 125)}
//AWC
spriteset(spriteset_390_Av_D, "gfx/EMU/class_390.png") {template_8_8_networker(0, 175)}
//Fixtures
spriteset(spriteset_390_f_lights, "gfx/EMU/class_390.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_390_r_lights, "gfx/EMU/class_390.png") {template_8_8_networker(179, 25)}
//Purchase
spriteset(spriteset_390_VT_purchase, "gfx/EMU/class_390.png") {template_dualhead_purchase(179, 50)}
spriteset(spriteset_390_VS_purchase, "gfx/EMU/class_390.png") {template_dualhead_purchase(179, 63)}
spriteset(spriteset_390_Av_purchase, "gfx/EMU/class_390.png") {template_dualhead_purchase(179, 76)}

//Switches

switch(FEAT_TRAINS, SELF, sw_390_purchase, current_year){
0 .. 2016: spriteset_390_VT_purchase;
2017 .. 2018: spriteset_390_VS_purchase;
spriteset_390_Av_purchase;
}

switch(FEAT_TRAINS, SELF, sw_390_front_man, cargo_subtype){
0: spriteset_390_VT_D;
1: spriteset_390_VS_D;
2: spriteset_390_Wh_D;
3: spriteset_390_Av_D;
}

switch(FEAT_TRAINS, SELF, sw_390_front_auto, current_year){
0 .. 2016: spriteset_390_VT_D;
2017 .. 2018: spriteset_390_VS_D;
spriteset_390_Av_D;
}

switch(FEAT_TRAINS, SELF, sw_390_trailer_man, cargo_subtype){
0: spriteset_390_VT_T;
spriteset_390_Wh_T;
}

switch(FEAT_TRAINS, SELF, sw_390_pan_man_f, cargo_subtype){
0: spriteset_390_VT_P;
spriteset_390_Wh_P;
}

switch(FEAT_TRAINS, SELF, sw_390_pan_man_r, cargo_subtype){
0: spriteset_390_VT_PR;
spriteset_390_Wh_PR;
}

switch(FEAT_TRAINS, PARENT, sw_390_pan_man, vehicle_is_reversed){
0: sw_390_pan_man_f;
sw_390_pan_man_r;
}

switch(FEAT_TRAINS, PARENT, sw_390_panr_man, vehicle_is_reversed){
0: sw_390_pan_man_r;
sw_390_pan_man_f;
}

switch(FEAT_TRAINS, PARENT, sw_390_t_auto, current_year){
0 .. 2016: spriteset_390_VT_T;
spriteset_390_Wh_T;
}

switch(FEAT_TRAINS, PARENT, sw_390_p_auto_f, current_year){
0 .. 2016: spriteset_390_VT_P;
spriteset_390_Wh_P;
}

switch(FEAT_TRAINS, PARENT, sw_390_p_auto_r, current_year){
0 .. 2016: spriteset_390_VT_PR;
spriteset_390_Wh_PR;
}

switch(FEAT_TRAINS, PARENT, sw_390_p_auto, vehicle_is_reversed){
0: sw_390_p_auto_f;
sw_390_p_auto_r;
}

switch(FEAT_TRAINS, PARENT, sw_390_pr_auto, vehicle_is_reversed){
0: sw_390_p_auto_r;
sw_390_p_auto_f;
}

switch(FEAT_TRAINS, SELF, sw_390_livery_param, livery_choice){1 : sw_390_front_man ; sw_390_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_390_p_livery_param, livery_choice){1 : sw_390_pan_man ; sw_390_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_390_pr_livery_param, livery_choice){1 : sw_390_panr_man ; sw_390_pr_auto ;}
switch(FEAT_TRAINS, SELF, sw_390_t_livery_param, livery_choice){1 : sw_390_trailer_man ; sw_390_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_390_headlights_1, position_in_consist){
0: spriteset_390_f_lights;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_390_headlights, position_in_consist_from_end){
0: spriteset_390_r_lights;
sw_390_headlights_1;
}

switch(FEAT_TRAINS, SELF, sw_390_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_390_livery_param;
	1: return sw_390_headlights;
}

//1-2 carriages pantograph
switch(FEAT_TRAINS, SELF, sw_390_pan_1f, position_in_vehid_chain){
0: sw_390_p_livery_param;
sw_390_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_390_pan_1r, position_in_vehid_chain_from_end){
0: sw_390_pr_livery_param;
sw_390_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_390_pan_1, vehicle_is_reversed){
0: sw_390_pan_1f;
sw_390_pan_1r;
}

//3-4 carriages pantograph
switch(FEAT_TRAINS, SELF, sw_390_pan_2a, position_in_vehid_chain){
0: sw_390_p_livery_param;
sw_390_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_390_pan_2, position_in_vehid_chain_from_end){
0: sw_390_pr_livery_param;
sw_390_pan_2a;
}

//5+ carriages pantograph
switch(FEAT_TRAINS, SELF, sw_390_pan_3a, position_in_vehid_chain){
1: sw_390_p_livery_param;
sw_390_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_390_pan_3, position_in_vehid_chain_from_end){
1: sw_390_pr_livery_param;
sw_390_pan_3a;
}

switch(FEAT_TRAINS, SELF, sw_390_t_default, num_vehs_in_vehid_chain){
1..2: sw_390_pan_1;
3..4: sw_390_pan_2;
sw_390_pan_3;
}


switch(FEAT_TRAINS, SELF, sw_390_refit_text, cargo_subtype){
	0: string(STR_LIVERY_VIRGIN_TRAINS);
	1: string(STR_LIVERY_VIRGIN_TRAINS_SILK);
	2: string(STR_LIVERY_VIRGIN_TRAINS_BLANK);
	3: string(STR_LIVERY_AVANTI);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_390_livery_decider, livery_choice){
	1: sw_390_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_390_vt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_390_awc_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;}

switch(FEAT_TRAINS, SELF, sw_390_colour_auto, current_year){
	0..2018: sw_390_vt_colour_mapping;
	sw_390_awc_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_390_colour_man, cargo_subtype){
	0..2: sw_390_vt_colour_mapping;
	3: sw_390_awc_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_390_colour_livery_decider, livery_choice){
	1: sw_390_colour_man;
	sw_390_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_390_recolour, colour_scheme_1){
	1: sw_390_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_390_recolour_purchase_1, current_year){
	0 .. 2018: sw_390_vt_colour_mapping;
	sw_390_awc_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_390_recolour_purchase, colour_scheme_1){
	1: sw_390_recolour_purchase_1;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_390_t_recolour, colour_scheme_1){
	1: sw_390_vt_colour_mapping;	
	palette_2cc(company_colour1, COLOUR_GREY);
}

switch(FEAT_TRAINS, SELF, sw_390_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	390: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
	57 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_390), string(STR_NAME_MU90));
}

switch(FEAT_TRAINS, PARENT, sw_390_start_stop, count_veh_id(390)-num_vehs_in_consist){
0: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

item (FEAT_TRAINS, item_390, 390) {
	property {
		name: 							string(STR_NAME_390);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2001, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					20;
		cost_factor:					100;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							140 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_TILT);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					32;
		weight:							58 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.2;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_390_coupling_restrictions;
		default: 							sw_390_default;
		purchase:							sw_390_purchase;
		colour_mapping:						sw_390_recolour;
		cargo_subtype_text:					sw_390_livery_decider;
		purchase_colour_mapping:			sw_390_recolour_purchase;
		sound_effect:						sw_sfx_electric_loco_modern;
		running_cost_factor:				return(current_speed == 0 ? 22 : 45) ;
		purchase_running_cost_factor : 45;
		start_stop:							sw_390_start_stop;
}
		livery_override (item_MU90) {
		cargo_capacity: 70;
		power: 760;
		default: sw_390_t_default;
		weight:	50;
		colour_mapping:	sw_390_t_recolour;
		cargo_subtype_text: sw_390_livery_decider;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_390, 390){
	property{
		name                           : string(STR_NAME_390_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_411.pnml" 1
//Front Cars
spriteset(spriteset_421_f_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 25)}
spriteset(spriteset_421_f_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 100)}
spriteset(spriteset_421_f_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 175)}
spriteset(spriteset_421_f_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 250)}
spriteset(spriteset_421_f_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 325)}
spriteset(spriteset_421_f_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 400)}
spriteset(spriteset_421_f_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 400)}
//Rear Cars
spriteset(spriteset_421_r_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 50)}
spriteset(spriteset_421_r_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 125)}
spriteset(spriteset_421_r_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 200)}
spriteset(spriteset_421_r_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 275)}
spriteset(spriteset_421_r_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 350)}
spriteset(spriteset_421_r_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 425)}
spriteset(spriteset_421_r_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 425)}
//Med Driving
spriteset(spriteset_421_o_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 0)}
spriteset(spriteset_421_o_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 75)}
spriteset(spriteset_421_o_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 150)}
spriteset(spriteset_421_o_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 225)}
spriteset(spriteset_421_o_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 300)}
spriteset(spriteset_421_o_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 375)}
spriteset(spriteset_421_o_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 375)}
//MSB
spriteset(spriteset_421_m_brg, "gfx/EMU/class_309.png") {template_8_8_networker(358, 25)}
spriteset(spriteset_421_m_brb, "gfx/EMU/class_309.png") {template_8_8_networker(358, 100)}
spriteset(spriteset_421_m_nse, "gfx/EMU/class_309.png") {template_8_8_networker(358, 175)}
spriteset(spriteset_421_m_swt, "gfx/EMU/class_309.png") {template_8_8_networker(358, 250)}
spriteset(spriteset_421_m_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(358, 325)}
spriteset(spriteset_421_m_stn, "gfx/EMU/class_309.png") {template_8_8_networker(358, 400)}
spriteset(spriteset_421_m_htg, "gfx/EMU/class_309.png") {template_8_8_networker(0, 400)}
//MSB Reverse
spriteset(spriteset_421_mr_brg, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 25)}
spriteset(spriteset_421_mr_brb, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 100)}
spriteset(spriteset_421_mr_nse, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 175)}
spriteset(spriteset_421_mr_swt, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 250)}
spriteset(spriteset_421_mr_cnx, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 325)}
spriteset(spriteset_421_mr_stn, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 400)}
spriteset(spriteset_421_mr_htg, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(0, 400)}
//Trailer
spriteset(spriteset_421_t_brg, "gfx/EMU/class_309.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_421_t_brb, "gfx/EMU/class_309.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_421_t_nse, "gfx/EMU/class_309.png") {template_8_8_networker(358, 150)}
spriteset(spriteset_421_t_swt, "gfx/EMU/class_309.png") {template_8_8_networker(358, 225)}
spriteset(spriteset_421_t_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(358, 300)}
spriteset(spriteset_421_t_stn, "gfx/EMU/class_309.png") {template_8_8_networker(358, 375)}
spriteset(spriteset_421_t_htg, "gfx/EMU/class_309.png") {template_8_8_networker(0, 375)}
//Purchase
spriteset(spriteset_421_purchase_brg, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 50)}
spriteset(spriteset_421_purchase_brb, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 125)}
spriteset(spriteset_421_purchase_nse, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 200)}
spriteset(spriteset_421_purchase_swt, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 275)}
spriteset(spriteset_421_purchase_cnx, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 350)}
spriteset(spriteset_421_purchase_stn, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 425)}
spriteset(spriteset_421_purchase_htg, "gfx/EMU/class_309.png") {template_dualhead_purchase(0, 425)}

//Switches

//Power Car
switch(FEAT_TRAINS, SELF, sw_411_green_f, position_in_consist){
	0: spriteset_421_f_brg; spriteset_421_o_brg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_green_select, position_in_consist_from_end){
	0: spriteset_421_r_brg; sw_411_green_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_green, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_green_select;}

switch(FEAT_TRAINS, SELF, sw_421_blue_grey_f, position_in_consist){
	0: spriteset_421_f_brb; spriteset_421_o_brb;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_select, position_in_consist_from_end){
	0: spriteset_421_r_brb; sw_421_blue_grey_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_blue_grey_select;}

switch(FEAT_TRAINS, SELF, sw_421_nse_f, position_in_consist){
	0: spriteset_421_f_nse; spriteset_421_o_nse;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_select, position_in_consist_from_end){
	0: spriteset_421_r_nse; sw_421_nse_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_nse, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_nse_select;}

switch(FEAT_TRAINS, SELF, sw_421_swt_f, position_in_consist){
	0: spriteset_421_f_swt; spriteset_421_o_swt;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_select, position_in_consist_from_end){
	0: spriteset_421_r_swt; sw_421_swt_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_swt, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_swt_select;}

switch(FEAT_TRAINS, SELF, sw_421_cnx_f, position_in_consist){
	0: spriteset_421_f_cnx; spriteset_421_o_cnx;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_select, position_in_consist_from_end){
	0: spriteset_421_r_cnx; sw_421_cnx_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_cnx_select;}

switch(FEAT_TRAINS, SELF, sw_421_stn_f, position_in_consist){
	0: spriteset_421_f_stn; spriteset_421_o_stn;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_select, position_in_consist_from_end){
	0: spriteset_421_r_stn; sw_421_stn_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_stn, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_stn_select;}

switch(FEAT_TRAINS, SELF, sw_421_heritage_f, position_in_consist){
	0: spriteset_421_f_htg; spriteset_421_o_htg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage_select, position_in_consist_from_end){
	0: spriteset_421_r_htg; sw_421_heritage_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_heritage_select;}

	
//Trailer/Pan
switch(FEAT_TRAINS, SELF, sw_421_green_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_brg; spriteset_421_t_brg;
}switch(FEAT_TRAINS, SELF, sw_421_green_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_brg; spriteset_421_t_brg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_green_select_t, vehicle_is_reversed){
	0: sw_421_green_msb_f; 
	sw_421_green_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_green_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_green_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_blue_grey_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_brb; spriteset_421_t_brb;
}switch(FEAT_TRAINS, SELF, sw_421_blue_grey_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_brb; spriteset_421_t_brb;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_select_t, vehicle_is_reversed){
	0: sw_421_blue_grey_msb_f; 
	sw_421_blue_grey_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_blue_grey_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_nse_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_nse; spriteset_421_t_nse;
}switch(FEAT_TRAINS, SELF, sw_421_nse_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_nse; spriteset_421_t_nse;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_select_t, vehicle_is_reversed){
	0: sw_421_nse_msb_f; 
	sw_421_nse_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_nse_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_swt_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_swt; spriteset_421_t_swt;
}switch(FEAT_TRAINS, SELF, sw_421_swt_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_swt; spriteset_421_t_swt;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_select_t, vehicle_is_reversed){
	0: sw_421_swt_msb_f; 
	sw_421_swt_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_swt_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_cnx_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_cnx; spriteset_421_t_cnx;
}switch(FEAT_TRAINS, SELF, sw_421_cnx_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_cnx; spriteset_421_t_cnx;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_select_t, vehicle_is_reversed){
	0: sw_421_cnx_msb_f; 
	sw_421_cnx_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_cnx_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_stn_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_stn; spriteset_421_t_stn;
}switch(FEAT_TRAINS, SELF, sw_421_stn_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_stn; spriteset_421_t_stn;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_select_t, vehicle_is_reversed){
	0: sw_421_stn_msb_f; 
	sw_421_stn_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_stn_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_htg_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_htg; spriteset_421_t_htg;
}switch(FEAT_TRAINS, SELF, sw_421_htg_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_htg; spriteset_421_t_htg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_htg_select_t, vehicle_is_reversed){
	0: sw_421_htg_msb_f; 
	sw_421_htg_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_htg_select_t;}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_411_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_slam_green;
	1964 .. 1982: sw_southern_slam_blue_grey;
	1983 .. 1995: sw_southern_slam_nse;
	1996 .. 2004: sw_southern_slam_swt;
	2005 .. 2008: sw_southern_slam_cnx;
	sw_southern_slam_heritage;
}

switch(FEAT_TRAINS, SELF, sw_411_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_slam_green_t;
	1964 .. 1982: sw_southern_slam_blue_grey_t;
	1983 .. 1995: sw_southern_slam_nse_t;
	1996 .. 2004: sw_southern_slam_swt_t;
	2005 .. 2008: sw_southern_slam_cnx_t;
	sw_southern_slam_heritage_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_411_manual_livery_decider, cargo_subtype){
	0: sw_southern_slam_green;
	1: sw_southern_slam_blue_grey;
	2: sw_southern_slam_nse;
	3: sw_southern_slam_swt;
	4: sw_southern_slam_cnx;
	5: sw_southern_slam_stn;
	6: sw_southern_slam_heritage;
}

switch(FEAT_TRAINS, SELF, sw_411_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_slam_green_t;
	1: sw_southern_slam_blue_grey_t;
	2: sw_southern_slam_nse_t;
	3: sw_southern_slam_swt_t;
	4: sw_southern_slam_cnx_t;
	5: sw_southern_slam_stn_t;
	6: sw_southern_slam_heritage_t;
}

switch(FEAT_TRAINS, SELF, sw_411_livery_choice_decider, livery_choice){
	1 : sw_411_manual_livery_decider ; 
	sw_411_passenger_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_411_livery_choice_decider_t, livery_choice){
	1 : sw_411_manual_livery_decider_t ; 
	sw_411_passenger_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_411_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_NSE);
	3: string(STR_LIVERY_SWT);
	4: string(STR_LIVERY_CONNEX);
	5: string(STR_LIVERY_SOUTHERN);
	6: string(STR_LIVERY_SWT_HERITAGE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_411_refit_text_decider, livery_choice){
	1 : sw_411_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_411_purchase, current_year){
	0 .. 1963: spriteset_421_purchase_brg;
	1964 .. 1982: spriteset_421_purchase_brb;
	1983 .. 1995: spriteset_421_purchase_nse;
	1996 .. 2004: spriteset_421_purchase_swt;
	2005 .. 2008: spriteset_421_purchase_cnx;
	spriteset_421_purchase_htg;
}

switch(FEAT_TRAINS, SELF, sw_411_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_411_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_411_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_411_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_411_green_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_411_blue_grey_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_411_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_heritage_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_411_colour_mapping_auto, current_year){
	0 .. 1963: sw_411_green_colour_mapping;
	1964 .. 1982: sw_411_blue_grey_colour_mapping;
	1983 .. 1995: sw_411_nse_colour_mapping;
	1996 .. 2004: sw_411_swt_colour_mapping;
	2005 .. 2008: sw_411_cnx_colour_mapping;
	sw_411_heritage_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_411_colour_mapping_manual, cargo_subtype){
	0: sw_411_green_colour_mapping;
	1: sw_411_blue_grey_colour_mapping;
	2: sw_411_nse_colour_mapping;
	3: sw_411_swt_colour_mapping;
	4: sw_411_cnx_colour_mapping;
	5: sw_411_stn_colour_mapping;
	6: sw_411_heritage_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_411_colour_mapping_manual_check, livery_choice){
	1 : sw_411_colour_mapping_manual ;
	sw_411_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_411_colour_mapping_decider, colour_scheme_1){
	1 : sw_411_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_411_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	411: return CB_RESULT_ATTACH_ALLOW;
	415: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_411_NO_COUPLE);
}

item (FEAT_TRAINS, item_411, 411) {
	property {
		name: 							string(STR_NAME_411);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					15;
		cost_factor:					35;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							90 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							30 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.06;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_411_coupling_restrictions;
		default: 							sw_411_default;
		purchase:							sw_411_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_411_refit_text_decider ;
		colour_mapping:						sw_411_colour_mapping_decider;
		purchase_colour_mapping: 			sw_411_colour_mapping_auto;
		running_cost_factor:				return(current_speed == 0 ? 5 : 20) ;
		purchase_running_cost_factor:		20;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 70;
		default: sw_411_default_t;
		colour_mapping:	sw_411_colour_mapping_decider;
		cargo_subtype_text: sw_411_refit_text_decider ;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_411, 411){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_411, 411){
	property{
		name                           : string(STR_NAME_411_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_415.pnml" 1
//415 SR (415/1) DMBSO
spriteset(spriteset_415_1_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_415_1_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_415_1_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 150)}
spriteset(spriteset_415_1_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(358, 225)}

//415 SR (415/1) TS
spriteset(spriteset_415_1_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(358, 25)}
spriteset(spriteset_415_1_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(358, 100)}
spriteset(spriteset_415_1_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(358, 175)}
spriteset(spriteset_415_1_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(358, 250)}

//415 SR (415/1) DTS
spriteset(spriteset_415_1_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 50)}
spriteset(spriteset_415_1_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(358, 125)}
spriteset(spriteset_415_1_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 200)}
spriteset(spriteset_415_1_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(358, 275)}

//415 BR (415/2) DMBSO
spriteset(spriteset_415_2_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_415_2_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_415_2_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_415_2_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 225)}

//415 BR (415/2) TS
spriteset(spriteset_415_2_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 50)}
spriteset(spriteset_415_2_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_415_2_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_415_2_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(0, 275)}

//415 BR (415/2) DTCL
spriteset(spriteset_415_2_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_415_2_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_415_2_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_415_2_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 250)}

//Headcodes etc
spriteset(spriteset_415_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_415_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_415_guards_end_triangle, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 100)}

//purchase
spriteset(spriteset_415_brg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(0, 300)}
spriteset(spriteset_415_brb_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 300)}
spriteset(spriteset_415_bbg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(0, 312)}
spriteset(spriteset_415_nse_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 312)}



//br green
switch(FEAT_TRAINS, SELF, sw_416_brg_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_brg; spriteset_415_1_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_416_brg_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_brg; spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_416_brg, vehicle_is_reversed){0: sw_416_brg_f; sw_416_brg_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_brg_select_2, count_veh_id(9010)){0: sw_416_brg; spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brg_select_1, position_in_articulated_veh){0..1: sw_416_brg; 3: spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brg_select, num_vehs_in_vehid_chain){3: sw_sr_epb_brg_select_1; sw_sr_epb_brg_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_brg_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_brg; spriteset_415_2_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_414_brg_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_brg; spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_414_brg, vehicle_is_reversed){0: sw_414_brg_f; sw_414_brg_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_brg_select_2, count_veh_id(9010)){0: sw_414_brg; spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brg_select_1, position_in_articulated_veh){0..1: sw_414_brg; 3: spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brg_select, num_vehs_in_vehid_chain){3: sw_br_epb_brg_select_1; sw_br_epb_brg_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brg){26: sw_sr_epb_brg_select; 7: sw_br_epb_brg_select;}

//br blue
switch(FEAT_TRAINS, SELF, sw_416_brb_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_brb; spriteset_415_1_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_416_brb_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_brb; spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_416_brb, vehicle_is_reversed){0: sw_416_brb_f; sw_416_brb_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_brb_select_2, count_veh_id(9010)){0: sw_416_brb; spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brb_select_1, position_in_articulated_veh){0..1: sw_416_brb; 3: spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brb_select, num_vehs_in_vehid_chain){3: sw_sr_epb_brb_select_1; sw_sr_epb_brb_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_brb_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_brb; spriteset_415_2_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_414_brb_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_brb; spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_414_brb, vehicle_is_reversed){0: sw_414_brb_f; sw_414_brb_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_brb_select_2, count_veh_id(9010)){0: sw_414_brb; spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brb_select_1, position_in_articulated_veh){0..1: sw_414_brb; 3: spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brb_select, num_vehs_in_vehid_chain){3: sw_br_epb_brb_select_1; sw_br_epb_brb_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brb){26: sw_sr_epb_brb_select; 7: sw_br_epb_brb_select;}

//br bluegrey
switch(FEAT_TRAINS, SELF, sw_416_bbg_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_bbg; spriteset_415_1_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_416_bbg_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_bbg; spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_416_bbg, vehicle_is_reversed){0: sw_416_bbg_f; sw_416_bbg_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_bbg_select_2, count_veh_id(9010)){0: sw_416_bbg; spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_bbg_select_1, position_in_articulated_veh){0..1: sw_416_bbg; 3: spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_bbg_select, num_vehs_in_vehid_chain){3: sw_sr_epb_bbg_select_1; sw_sr_epb_bbg_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_bbg_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_bbg; spriteset_415_2_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_414_bbg_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_bbg; spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_414_bbg, vehicle_is_reversed){0: sw_414_bbg_f; sw_414_bbg_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_bbg_select_2, count_veh_id(9010)){0: sw_414_bbg; spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_bbg_select_1, position_in_articulated_veh){0..1: sw_414_bbg; 3: spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_bbg_select, num_vehs_in_vehid_chain){3: sw_br_epb_bbg_select_1; sw_br_epb_bbg_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_bbg){26: sw_sr_epb_bbg_select; 7: sw_br_epb_bbg_select;}

//nse
switch(FEAT_TRAINS, SELF, sw_416_nse_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_nse; spriteset_415_1_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_416_nse_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_nse; spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_416_nse, vehicle_is_reversed){0: sw_416_nse_f; sw_416_nse_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_nse_select_2, count_veh_id(9010)){0: sw_416_nse; spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_nse_select_1, position_in_articulated_veh){0..1: sw_416_nse; 3: spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_nse_select, num_vehs_in_vehid_chain){3: sw_sr_epb_nse_select_1; sw_sr_epb_nse_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_nse_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_nse; spriteset_415_2_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_414_nse_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_nse; spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_414_nse, vehicle_is_reversed){0: sw_414_nse_f; sw_414_nse_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_nse_select_2, count_veh_id(9010)){0: sw_414_nse; spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, SELF, sw_br_epb_nse_select_1, position_in_articulated_veh){0..1: sw_414_nse; 3: spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, SELF, sw_br_epb_nse_select, num_vehs_in_vehid_chain){3: sw_br_epb_nse_select_1; sw_br_epb_nse_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_nse){26: sw_sr_epb_nse_select; 7: sw_br_epb_nse_select;}

random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brg_t){dependent: sw_southern_compartment_brg; 26: spriteset_415_1_t_brg; 7: spriteset_415_2_t_brg;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brb_t){dependent: sw_southern_compartment_brb; 26: spriteset_415_1_t_brb; 7: spriteset_415_2_t_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_bbg_t){dependent: sw_southern_compartment_bbg; 26: spriteset_415_1_t_bbg; 7: spriteset_415_2_t_bbg;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_nse_t){dependent: sw_southern_compartment_nse; 26: spriteset_415_1_t_nse; 7: spriteset_415_2_t_nse;}

switch(FEAT_TRAINS, SELF, sw_415_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_compartment_brg;
	1964 .. 1975: sw_southern_compartment_brb;
	1976 .. 1982: sw_southern_compartment_bbg;
	1983 .. 1995: sw_southern_compartment_nse;
	sw_southern_compartment_brb;
}

switch(FEAT_TRAINS, SELF, sw_415_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_compartment_brg_t;
	1964 .. 1975: sw_southern_compartment_brb_t;
	1976 .. 1982: sw_southern_compartment_bbg_t;
	1983 .. 1995: sw_southern_compartment_nse_t;
	sw_southern_compartment_brb_t;
}

switch(FEAT_TRAINS, SELF, sw_415_manual_livery_decider, cargo_subtype){
	0: sw_southern_compartment_brg;
	1: sw_southern_compartment_brb;
	2: sw_southern_compartment_bbg;
	3: sw_southern_compartment_nse;
}

switch(FEAT_TRAINS, SELF, sw_415_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_compartment_brg_t;
	1: sw_southern_compartment_brb_t;
	2: sw_southern_compartment_bbg_t;
	3: sw_southern_compartment_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_415_livery_choice_decider, livery_choice){1 : sw_415_manual_livery_decider ; sw_415_passenger_livery_decider;}
switch(FEAT_TRAINS, SELF, sw_415_livery_choice_decider_t, livery_choice){1 : sw_415_manual_livery_decider_t ; sw_415_passenger_livery_decider_t ;}

switch(FEAT_TRAINS, SELF, sw_415_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_BRBLUEGREY);
	3: string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_415_refit_text_decider, livery_choice){
	1 : sw_415_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_415_purchase, current_year){
	0 .. 1963: spriteset_415_brg_purchase;
	1964 .. 1975: spriteset_415_brb_purchase;
	1976 .. 1982: spriteset_415_bbg_purchase;
	spriteset_415_nse_purchase;
}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_415_headcode, position_in_consist){0: spriteset_415_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_415_headcode_2, position_in_consist_from_end){0: spriteset_415_headcode_r; sw_415_headcode;}

switch(FEAT_TRAINS, SELF, sw_416_triangle_f, (count_veh_id(415)+1)%2){1: spriteset_415_guards_end_triangle; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_416_triangle_r, (count_veh_id(415)+1)%2){1: gfx_blank; spriteset_415_guards_end_triangle;}
switch(FEAT_TRAINS, PARENT, sw_416_triangle, vehicle_is_reversed){0: sw_416_triangle_f; sw_416_triangle_r;}

switch(FEAT_TRAINS, PARENT, sw_traingle_select_2, count_veh_id(9010)){0: sw_416_triangle; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_traingle_select_1, position_in_articulated_veh){0..1: sw_416_triangle; 3: gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_traingle_select, num_vehs_in_vehid_chain){3: sw_traingle_select_1; sw_traingle_select_2;}

switch(FEAT_TRAINS, SELF, sw_415_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_415_livery_choice_decider;
	1 : return sw_415_headcode_2;
	2 : return sw_traingle_select;
}

//references the 205's colour mapping
switch(FEAT_TRAINS, SELF, sw_415_colour_mapping_auto, current_year){
	0 .. 1963: sw_205_green_colour_mapping;
	1964 .. 1975: sw_205_blue_grey_colour_mapping;
	1976 .. 1982: sw_205_blue_grey_colour_mapping;
	sw_205_nse_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_415_colour_mapping_manual, cargo_subtype){
	0: sw_205_green_colour_mapping;
	1: sw_205_blue_grey_colour_mapping;
	2: sw_205_blue_grey_colour_mapping;
	3: sw_205_nse_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_415_colour_mapping_manual_check, livery_choice){
	1 : sw_415_colour_mapping_manual ;
	sw_415_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_415_colour_mapping_decider, colour_scheme_1){
	1 : sw_415_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_415_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	415: return CB_RESULT_ATTACH_ALLOW;
	411: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_415_NO_COUPLE);
}


item (FEAT_TRAINS, item_415, 415) {
	property {
		name: 							string(STR_NAME_415);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					18;
		cost_factor:					23;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					65;
		weight:							40 ton;
		tractive_effort_coefficient:	0.1;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_415_coupling_restrictions;
		default: 							sw_415_default;
		purchase:							sw_415_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_415_refit_text_decider ;
		purchase_colour_mapping:			sw_415_colour_mapping_auto;
		colour_mapping:						sw_415_colour_mapping_decider;
		running_cost_factor:				return(current_speed == 0 ? 4 : 15) ;
		purchase_running_cost_factor:		15;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 75;
		default: sw_415_livery_choice_decider_t;
		power: 250;
		colour_mapping: sw_415_colour_mapping_decider;
		cargo_subtype_text: sw_415_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_415, 415){
	property{
		name                           : string(STR_NAME_415_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_442.pnml" 1
//442 Driving
spriteset(spriteset_442_d_nse, "gfx/EMU/class_442.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_442_d_swt, "gfx/EMU/class_442.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_442_d_gax, "gfx/EMU/class_442.png") {template_8_8_networker(0, 150)}
//442 Trailer
spriteset(spriteset_442_t_nse, "gfx/EMU/class_442.png") {template_8_4_networker(0, 75)}
spriteset(spriteset_442_t_swt, "gfx/EMU/class_442.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_442_t_gax, "gfx/EMU/class_442.png") {template_8_4_networker(0, 175)}
//Purchase
spriteset(spriteset_442_nse_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 75)}
spriteset(spriteset_442_swt_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_442_gax_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 175)}
//Headlights
spriteset(spriteset_442_headcode_f, "gfx/EMU/class_442.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_442_headcode_r, "gfx/EMU/class_442.png") {template_8_8_networker(179, 25)}


//Switches
	
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_nse, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_nse;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_swt, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_swt;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_gax, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_gax;}
//Trailers
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_nse_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_nse;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_swt_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_swt;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_gax_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_gax;}

//Livery Switches
switch(FEAT_TRAINS, SELF, sw_442_passenger_livery_decider, current_year){
	1983 .. 1995: sw_plastic_pig_nse;
	1996 .. 2004: sw_plastic_pig_swt;
	2005 .. 4096: sw_plastic_pig_gax;
	sw_plastic_pig_gax;
}

switch(FEAT_TRAINS, SELF, sw_442_passenger_livery_decider_t, current_year){
	1983 .. 1995: sw_plastic_pig_nse_t;
	1996 .. 2004: sw_plastic_pig_swt_t;
	2005 .. 4096: sw_plastic_pig_gax_t;
	sw_plastic_pig_gax_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_442_manual_livery_decider, cargo_subtype){
	0: sw_plastic_pig_nse;
	1: sw_plastic_pig_swt;
	2: sw_plastic_pig_gax;
}

switch(FEAT_TRAINS, SELF, sw_442_manual_livery_decider_t, cargo_subtype){
	0: sw_plastic_pig_nse_t;
	1: sw_plastic_pig_swt_t;
	2: sw_plastic_pig_gax_t;
}

switch(FEAT_TRAINS, SELF, sw_442_livery_choice_decider, livery_choice){1 : sw_442_manual_livery_decider ; sw_442_passenger_livery_decider ;}
switch(FEAT_TRAINS, SELF, sw_442_livery_choice_decider_t, livery_choice){1 : sw_442_manual_livery_decider_t ; sw_442_passenger_livery_decider_t ;}

//Refit text

switch(FEAT_TRAINS, SELF, sw_442_refit_text, cargo_subtype){
	0: string(STR_LIVERY_NSE);
	1: string(STR_LIVERY_SWT);
	2: string(STR_LIVERY_GATEX);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_442_refit_text_decider, livery_choice){
	1 : sw_442_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_442_purchase, current_year){
	1983 .. 1995: spriteset_442_nse_purchase;
	1996 .. 2004: spriteset_442_swt_purchase;
	2005 .. 4096: spriteset_442_gax_purchase;
	spriteset_442_gax_purchase;
}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_442_headcode, position_in_consist){0: spriteset_442_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_442_headcode_2, position_in_consist_from_end){0: spriteset_442_headcode_r; sw_442_headcode;}


switch(FEAT_TRAINS, SELF, sw_442_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_442_livery_choice_decider;
	1 : return sw_442_headcode_2;
}

switch(FEAT_TRAINS, SELF, sw_442_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_442_livery_choice_decider_t;
}
//Recolour
random_switch(FEAT_TRAINS, SELF, sw_442_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_442_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_442_gax_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_442_colour_mapping_auto, current_year){
	1983 .. 1995: sw_442_nse_colour_mapping;
	1996 .. 2004: sw_442_swt_colour_mapping;
	2005 .. 4096: sw_442_gax_colour_mapping;
	sw_442_gax_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_442_colour_mapping_manual, cargo_subtype){
	0: sw_442_nse_colour_mapping;
	1: sw_442_swt_colour_mapping;
	2: sw_442_gax_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_442_colour_mapping_manual_check, livery_choice){
	1 : sw_442_colour_mapping_manual ;
	sw_442_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_442_colour_mapping_decider, colour_scheme_1){
	1 : sw_442_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_442_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	442: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_442_NO_COUPLE);
}

item (FEAT_TRAINS, item_442, 442) {
	property {
		name: 							string(STR_NAME_442);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1988, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					19;
		cost_factor:					56;
		running_cost_factor:			36;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1608 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_442_coupling_restrictions;
		default: 							sw_442_default;
		purchase:							sw_442_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_442_refit_text_decider ;
		colour_mapping:						sw_442_colour_mapping_decider;
		purchase_colour_mapping: 			sw_442_colour_mapping_auto;
		sound_effect:						sw_sfx_emu_gec ;
		running_cost_factor:				return(current_speed == 0 ? 9 : 36) ;
		purchase_running_cost_factor:		36;
}
		livery_override (9030) {
		cargo_capacity: 85;
		default: sw_442_default_t;
		colour_mapping:	sw_442_colour_mapping_decider;
		cargo_subtype_text: sw_442_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_442, 442){
	property{
		name                           : string(STR_NAME_442_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_450.pnml" 1
spriteset(spriteset_444_swt, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 50)
}

spriteset(spriteset_444_swt_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 75)
}

spriteset(spriteset_444_swr, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 150)
}

spriteset(spriteset_444_swr_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 175)
}

spriteset(spriteset_450_swt, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 0)
}
spriteset(spriteset_450_swt_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 25)
}

spriteset(spriteset_450_swr, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 100)
}
spriteset(spriteset_450_swr_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 125)
}

spriteset(spriteset_444_purchase, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(0, 25)
}

spriteset(spriteset_444_tail_lights, "gfx/EMU/class_450.png") {
	template_8_8_networker(179, 0)
}

spriteset(spriteset_444_no_lights, "gfx/EMU/class_450.png") {
	template_8_8_networker(179, 25)
}

//Switches

switch(FEAT_TRAINS, SELF, sw_450_front, position_in_consist){
	0: gfx_blank;
	spriteset_444_tail_lights;
}
switch(FEAT_TRAINS, SELF, sw_450_swt_select, position_in_consist_from_end){
	0: spriteset_444_tail_lights;
	return sw_450_front;
}

//How the livery is selected

switch(FEAT_TRAINS, PARENT, sw_444_livery_selection_auto, ((count_veh_id(item_MU90)+1)/count_veh_id(item_444))){
	0..1: spriteset_450_swt;
	 spriteset_444_swt;
} 

switch(FEAT_TRAINS, PARENT, sw_444_livery_selection_auto_t, ((count_veh_id(item_MU90)+1)/count_veh_id(item_444))){
	0..1: spriteset_450_swt_t;
	 spriteset_444_swt_t;
} 

switch(FEAT_TRAINS, SELF, sw_444_livery_selection_manual, cargo_subtype){
	0: spriteset_450_swt;
	1: spriteset_444_swt;
	2: spriteset_450_swr;
	3: spriteset_444_swr;
} 

switch(FEAT_TRAINS, SELF, sw_444_livery_selection_manual_t, cargo_subtype){
	0: spriteset_450_swt_t;
	1: spriteset_444_swt_t;
	2: spriteset_450_swr_t;
	3: spriteset_444_swr_t;
} 

switch(FEAT_TRAINS, SELF, sw_444_livery_selection, livery_choice){
	1: sw_444_livery_selection_manual;
	sw_444_livery_selection_auto;
}

switch(FEAT_TRAINS, SELF, sw_444_livery_selection_t, livery_choice){
	1: sw_444_livery_selection_manual_t;
	sw_444_livery_selection_auto_t;
}

switch(FEAT_TRAINS, SELF, sw_444_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_444_livery_selection;
	1 : return sw_450_swt_select;
}

switch(FEAT_TRAINS, SELF, sw_444_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_444_livery_selection_t;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_444_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SWT_STR, string(STR_450));
	1: string(STR_LIVERY_SWT_STR, string(STR_444));
	2: string(STR_LIVERY_SWR_STR, string(STR_450));
	3: string(STR_LIVERY_SWR_STR, string(STR_444));
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_444_refit_text_decider, livery_choice){
	1 : sw_444_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour options

random_switch(FEAT_TRAINS, SELF, sw_450_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_444_recolour_selection_auto, (count_veh_id(item_MU90)/count_veh_id(item_444))){
	0..1: sw_450_colour_mapping;
	 sw_450_colour_mapping;
} 

switch(FEAT_TRAINS, SELF, sw_444_recolour_selection_manual, cargo_subtype){
	0: sw_450_colour_mapping;
	1: sw_450_colour_mapping;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY);
}

switch(FEAT_TRAINS, SELF, sw_444_recolour_livery_selection, livery_choice){
	1: sw_444_recolour_selection_manual;
	sw_444_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_444_colour_mapping, colour_scheme_1){
	1 : sw_444_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_444_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_444: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_444), string(STR_NAME_MU90));
}

item (FEAT_TRAINS, item_444, 444) {
	property {
		name: 							string(STR_NAME_444);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2002, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					23;
		cost_factor:					59;
		running_cost_factor:			32;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							48 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_444_coupling_restrictions;
		default: 							sw_444_default;
		purchase:							spriteset_444_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_444_colour_mapping;
		cargo_subtype_text:					sw_444_refit_text_decider;
		purchase_colour_mapping:			sw_444_colour_mapping;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 8 : 32) ;
		purchase_running_cost_factor : 32;
}
		livery_override (item_MU90) {
		cargo_capacity: 90;
		default: sw_444_trailer;
		weight:	34;
		colour_mapping:	sw_444_colour_mapping;
		cargo_subtype_text: sw_444_refit_text_decider;
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_444, 444){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_444, 444){
	property{
		name                           : string(STR_NAME_444_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/class_350.pnml" 1
spriteset(spriteset_350_slv, "gfx/EMU/class_450.png") {
	template_8_8_networker(359, 25)
}

spriteset(spriteset_350_slv_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(449, 50)
}

spriteset(spriteset_350_slv_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 0)
}

spriteset(spriteset_350_lml, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 25)
}

spriteset(spriteset_350_lml_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(539, 75)
}

spriteset(spriteset_350_lml_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 50)
}

spriteset(spriteset_350_ftp, "gfx/EMU/class_450.png") {
	template_8_8_networker(718, 0)
}

spriteset(spriteset_350_ftp_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(629, 75)
}

spriteset(spriteset_350_ftp_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(718, 25)
}

spriteset(spriteset_360_ga, "gfx/EMU/class_360.png") {
	template_8_8_networker(0, 0)
}

spriteset(spriteset_360_ga_t, "gfx/EMU/class_360.png") {
	template_8_4_networker(0, 25)
}

spriteset(spriteset_360_ga_t_p, "gfx/EMU/class_360.png") {
	template_8_8_networker(0, 50)
}

spriteset(spriteset_360_nxea, "gfx/EMU/class_360.png") {
	template_8_8_networker(179, 0)
}

spriteset(spriteset_360_nxea_t, "gfx/EMU/class_360.png") {
	template_8_4_networker(179, 25)
}

spriteset(spriteset_360_nxea_t_p, "gfx/EMU/class_360.png") {
	template_8_8_networker(179, 50)
}

spriteset(spriteset_360_fge, "gfx/EMU/class_360.png") {
	template_8_8_networker(358, 0)
}

spriteset(spriteset_360_fge_t, "gfx/EMU/class_360.png") {
	template_8_4_networker(358, 25)
}

spriteset(spriteset_360_fge_t_p, "gfx/EMU/class_360.png") {
	template_8_8_networker(358, 50)
}

spriteset(spriteset_360_heax, "gfx/EMU/class_360.png") {
	template_8_8_networker(537, 0)
}

spriteset(spriteset_360_heax_t, "gfx/EMU/class_360.png") {
	template_8_4_networker(537, 25)
}

spriteset(spriteset_360_heax_t_p, "gfx/EMU/class_360.png") {
	template_8_8_networker(537, 50)
}

spriteset(spriteset_350_purchase_slv, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 50)
}

spriteset(spriteset_350_purchase_lml, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 63)
}

spriteset(spriteset_350_purchase_tpe, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 76)
}

//Switches

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_svl_f, position_in_vehid_chain){
	0 : spriteset_350_slv_t_p ;
	spriteset_350_slv_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_svl_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_slv_t_p ;
	spriteset_350_slv_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_svl, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_svl_b ;
	sw_350_t_panto_decider_svl_f ;
}


switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_lml_f, position_in_vehid_chain){
	0 : spriteset_350_lml_t_p ;
	spriteset_350_lml_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_lml_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_lml_t_p ;
	spriteset_350_lml_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_lml, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_lml_b ;
	sw_350_t_panto_decider_lml_f ;
}


switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_ftp_f, position_in_vehid_chain){
	0 : spriteset_350_ftp_t_p ;
	spriteset_350_ftp_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_ftp_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_ftp_t_p ;
	spriteset_350_ftp_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_ftp, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_ftp_b ;
	sw_350_t_panto_decider_ftp_f ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_ga_f, position_in_vehid_chain){
	0 : spriteset_360_ga_t_p ;
	spriteset_360_ga_t ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_ga_b, position_in_vehid_chain_from_end){
	0 : spriteset_360_ga_t_p ;
	spriteset_360_ga_t ;
}

switch(FEAT_TRAINS, PARENT, sw_360_t_panto_decider_ga, vehicle_is_reversed){
	1 : sw_360_t_panto_decider_ga_b ;
	sw_360_t_panto_decider_ga_f ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_nxea_f, position_in_vehid_chain){
	0 : spriteset_360_nxea_t_p ;
	spriteset_360_nxea_t ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_nxea_b, position_in_vehid_chain_from_end){
	0 : spriteset_360_nxea_t_p ;
	spriteset_360_nxea_t ;
}

switch(FEAT_TRAINS, PARENT, sw_360_t_panto_decider_nxea, vehicle_is_reversed){
	1 : sw_360_t_panto_decider_nxea_b ;
	sw_360_t_panto_decider_nxea_f ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_fge_f, position_in_vehid_chain){
	0 : spriteset_360_fge_t_p ;
	spriteset_360_fge_t ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_fge_b, position_in_vehid_chain_from_end){
	0 : spriteset_360_fge_t_p ;
	spriteset_360_fge_t ;
}

switch(FEAT_TRAINS, PARENT, sw_360_t_panto_decider_fge, vehicle_is_reversed){
	1 : sw_360_t_panto_decider_fge_b ;
	sw_360_t_panto_decider_fge_f ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_heax_f, position_in_vehid_chain){
	0 : spriteset_360_heax_t_p ;
	spriteset_360_heax_t ;
}

switch(FEAT_TRAINS, SELF, sw_360_t_panto_decider_heax_b, position_in_vehid_chain_from_end){
	0 : spriteset_360_heax_t_p ;
	spriteset_360_heax_t ;
}

switch(FEAT_TRAINS, PARENT, sw_360_t_panto_decider_heax, vehicle_is_reversed){
	1 : sw_360_t_panto_decider_heax_b ;
	sw_360_t_panto_decider_heax_f ;
}

//How the livery is selected

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_auto, current_year){
	2004..2006 : spriteset_350_slv ;
	2007..2013 : spriteset_350_lml ;
	spriteset_350_ftp ;
}

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_auto_t, current_year){
	2004..2006 : sw_350_t_panto_decider_svl ;
	2007..2013 : sw_350_t_panto_decider_lml ;
	sw_350_t_panto_decider_ftp ;
}



switch(FEAT_TRAINS, SELF, sw_350_livery_selection_manual, cargo_subtype){
	0: spriteset_350_slv ;
	1: spriteset_350_lml ;
	2: spriteset_350_ftp ;
	3: spriteset_360_ga  ;
	4: spriteset_360_nxea;
	5: spriteset_360_fge ;
	spriteset_360_heax   ;
} 

switch(FEAT_TRAINS, PARENT, sw_350_livery_selection_manual_t, cargo_subtype){
	0: sw_350_t_panto_decider_svl ;
	1: sw_350_t_panto_decider_lml ;
	2: sw_350_t_panto_decider_ftp ;
	3: sw_360_t_panto_decider_ga  ;
	4: sw_360_t_panto_decider_nxea;
	5: sw_360_t_panto_decider_fge ;
	sw_360_t_panto_decider_heax   ;
} 

switch(FEAT_TRAINS, SELF, sw_350_livery_selection, livery_choice){
	1: sw_350_livery_selection_manual;
	sw_350_livery_selection_auto;
}

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_t, livery_choice){
	1: sw_350_livery_selection_manual_t;
	sw_350_livery_selection_auto_t;
}

switch(FEAT_TRAINS, SELF, sw_350_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_350_livery_selection;
	1 : return sw_450_swt_select;
}

switch(FEAT_TRAINS, SELF, sw_350_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_350_livery_selection_t;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_350_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SILVERLINK);
	1: string(STR_LIVERY_LONDON_MIDLAND);
	2: string(STR_LIVERY_FIRST_TPE);
	3: string(STR_LIVERY_GREATER_ANGLIA);
	4: string(STR_LIVERY_NXEA);
	5: string(STR_LIVERY_FGE);
	6: string(STR_LIVERY_HEATHROW_EXPRESS);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_350_refit_text_decider, livery_choice){
	1 : sw_350_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_350_recolour_selection_auto, current_year){
	2004..2006 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2007..2013 : palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
} 

switch(FEAT_TRAINS, SELF, sw_350_recolour_selection_manual, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	1: palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
	2: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	3: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4: palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
	5: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	 palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_350_recolour_livery_selection, livery_choice){
	1: sw_350_recolour_selection_manual;
	sw_350_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_350_colour_mapping, colour_scheme_1){
	1 : sw_350_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_350_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_350: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_350_NO_COUPLE);
}

//Purchase sprite_id

switch(FEAT_TRAINS, SELF, sw_350_purchase_sprite, current_year){
	2004..2006 : spriteset_350_purchase_slv ;
	2007..2013 : spriteset_350_purchase_lml ;
	spriteset_350_purchase_tpe ;
}

switch(FEAT_TRAINS, SELF, sw_350_purchase_colours_check, colour_scheme_1){
	1 : sw_350_recolour_selection_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_350, 350) {
	property {
		name: 							string(STR_NAME_350);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2004, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					63;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					75;
		weight:							48 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_350_coupling_restrictions;
		default: 							sw_350_default;
		purchase:							sw_350_purchase_sprite;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_350_colour_mapping;
		cargo_subtype_text:					sw_350_refit_text_decider;
		purchase_colour_mapping:			sw_350_purchase_colours_check;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
}
		livery_override (item_MU90) {
		cargo_capacity: 80;
		default: sw_350_trailer;
		weight:	34;
		colour_mapping:	sw_350_colour_mapping;
		cargo_subtype_text: sw_350_refit_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_350, 350){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_350, 350){
	property{
		name                           : string(STR_NAME_350_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_375.pnml" 1
//Power car
spriteset(spriteset_375_f_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_377_f_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_375_f_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_375_f_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 275)}
spriteset(spriteset_375_f_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_375_f_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 425)}
spriteset(spriteset_377_f_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_387_f_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 575)}
spriteset(spriteset_387_f_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_379_f_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 725)}
//Trailer car
spriteset(spriteset_375_t_cnx, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 0)}
spriteset(spriteset_377_t_stn, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 75)}
spriteset(spriteset_375_t_sxs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 150)}
spriteset(spriteset_375_t_sgs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 225)}
spriteset(spriteset_375_t_sbs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 300)}
spriteset(spriteset_375_t_ser, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 375)}
spriteset(spriteset_377_t_fcc, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 450)}
spriteset(spriteset_387_t_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 525)}
spriteset(spriteset_387_t_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 600)}
spriteset(spriteset_379_t_gan, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 675)}
//Pan car
spriteset(spriteset_375_p_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_377_p_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_375_p_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_375_p_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_375_p_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_375_p_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 400)}
spriteset(spriteset_377_p_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_387_p_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_387_p_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_379_p_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_375_pr_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 25)}
spriteset(spriteset_377_pr_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 100)}
spriteset(spriteset_375_pr_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 175)}
spriteset(spriteset_375_pr_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 250)}
spriteset(spriteset_375_pr_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 325)}
spriteset(spriteset_375_pr_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 400)}
spriteset(spriteset_377_pr_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 475)}
spriteset(spriteset_387_pr_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 550)}
spriteset(spriteset_387_pr_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 625)}
spriteset(spriteset_379_pr_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 700)}
//Fixtures
spriteset(spriteset_375_f_lights, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_375_r_lights, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_375_pan_up, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_375_pan_down, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_375_pan_up_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 50)}
spriteset(spriteset_375_pan_down_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 75)}
//Purchase
spriteset(spriteset_375_cnx_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 300)}
spriteset(spriteset_375_sxs_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 325)}
spriteset(spriteset_375_sgs_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 350)}
spriteset(spriteset_375_ser_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 400)}
spriteset(spriteset_375_gtr_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 425)}

switch(FEAT_TRAINS, SELF, sw_electrostar_front_auto, current_year){
0 .. 2000: spriteset_375_f_cnx;
2001 .. 2003: spriteset_375_f_sxs;
2004 .. 2009: spriteset_375_f_sgs;
2010 .. 2016: spriteset_375_f_ser;
spriteset_387_f_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_purchase, current_year){
0 .. 2000: spriteset_375_cnx_purchase;
2001 .. 2003: spriteset_375_sxs_purchase;
2004 .. 2009: spriteset_375_sgs_purchase;
2010 .. 2016: spriteset_375_ser_purchase;
spriteset_375_gtr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_front_man, cargo_subtype){
0: spriteset_375_f_cnx;
1: spriteset_377_f_stn;
2: spriteset_375_f_sxs;
3: spriteset_375_f_sgs;
4: spriteset_375_f_sbs;
5: spriteset_375_f_ser;
6: spriteset_377_f_fcc;
7..8: spriteset_387_f_gtr_c2c;
9..10: spriteset_387_f_gax_gwr;
11: spriteset_379_f_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_trailer_man, cargo_subtype){
0: spriteset_375_t_cnx;
1: spriteset_377_t_stn;
2: spriteset_375_t_sxs;
3: spriteset_375_t_sgs;
4: spriteset_375_t_sbs;
5: spriteset_375_t_ser;
6: spriteset_377_t_fcc;
7..8: spriteset_387_t_gtr_c2c;
9..10: spriteset_387_t_gax_gwr;
11: spriteset_379_t_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_pan_man_f, cargo_subtype){
0: spriteset_375_p_cnx;
1: spriteset_377_p_stn;
2: spriteset_375_p_sxs;
3: spriteset_375_p_sgs;
4: spriteset_375_p_sbs;
5: spriteset_375_p_ser;
6: spriteset_377_p_fcc;
7..8: spriteset_387_p_gtr_c2c;
9..10: spriteset_387_p_gax_gwr;
11: spriteset_379_p_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_pan_man_r, cargo_subtype){
0: spriteset_375_pr_cnx;
1: spriteset_377_pr_stn;
2: spriteset_375_pr_sxs;
3: spriteset_375_pr_sgs;
4: spriteset_375_pr_sbs;
5: spriteset_375_pr_ser;
6: spriteset_377_pr_fcc;
7..8: spriteset_387_pr_gtr_c2c;
9..10: spriteset_387_pr_gax_gwr;
11: spriteset_379_pr_gan;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_man, vehicle_is_reversed){
0: sw_electrostar_pan_man_f;
sw_electrostar_pan_man_r;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_t_auto, current_year){
0 .. 2000: spriteset_375_t_cnx;
2001 .. 2003: spriteset_375_t_sxs;
2004 .. 2009: spriteset_375_t_sgs;
2010 .. 2016: spriteset_375_t_ser;
spriteset_387_t_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_p_auto_f, current_year){
0 .. 2000: spriteset_375_p_cnx;
2001 .. 2003: spriteset_375_p_sxs;
2004 .. 2009: spriteset_375_p_sgs;
2010 .. 2016: spriteset_375_p_ser;
spriteset_387_p_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_p_auto_r, current_year){
0 .. 2000: spriteset_375_pr_cnx;
2001 .. 2003: spriteset_375_pr_sxs;
2004 .. 2009: spriteset_375_pr_sgs;
2010 .. 2016: spriteset_375_pr_ser;
spriteset_387_pr_gtr_c2c;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_p_auto, vehicle_is_reversed){
0: sw_electrostar_p_auto_f;
sw_electrostar_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_375_livery_param, livery_choice){1 : sw_electrostar_front_man ; sw_electrostar_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_375_p_livery_param, livery_choice){1 : sw_electrostar_pan_man ; sw_electrostar_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_375_t_livery_param, livery_choice){1 : sw_electrostar_trailer_man ; sw_electrostar_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_electrostar_headlights_1, position_in_consist){
0: spriteset_375_f_lights;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_headlights, position_in_consist_from_end){
0: spriteset_375_r_lights;
sw_electrostar_headlights_1;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_f, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_375_pan_up;
spriteset_375_pan_down;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_r, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_375_pan_up_r;
spriteset_375_pan_down_r;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan, vehicle_is_reversed){
0: sw_electrostar_pan_f;
sw_electrostar_pan_r;
}

switch(FEAT_TRAINS, SELF, sw_375_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_375_livery_param;
	1: return sw_electrostar_headlights;
}

switch(FEAT_TRAINS, SELF, sw_375_nd_livery_param_1, position_in_vehid_chain){
0: sw_375_p_livery_param;
sw_375_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_375_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_375_p_livery_param;
sw_375_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_375_nd_livery_param, vehicle_is_reversed){
0: sw_375_nd_livery_param_1;
sw_375_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_375_ndf_pan_switch, position_in_vehid_chain){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_375_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_375_nd_pan_switch, vehicle_is_reversed){
0: sw_375_ndf_pan_switch;
sw_375_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_375_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_375_nd_livery_param;
	1: return sw_375_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_375_refit_text, cargo_subtype){
	0: string(STR_LIVERY_CONNEX);
	1: string(STR_LIVERY_SOUTHERN);
	2: string(STR_LIVERY_SE_YELLOW);
	3: string(STR_LIVERY_SE_YELLOW_GREY);
	4: string(STR_LIVERY_SE_BLUE);
	5: string(STR_LIVERY_SE_REFURB);
	6: string(STR_LIVERY_FCC);
	7: string(STR_LIVERY_GTR);
	8: string(STR_LIVERY_C2C);
	9: string(STR_LIVERY_FIRST_GWR);
	10: string(STR_LIVERY_GATEX);
	11: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_375_livery_decider, livery_choice){
	1: sw_375_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_375_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_377_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sxs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_YELLOW, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sgs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_YELLOW, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sbs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_ser_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_377_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_c2c_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gwr_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gatex_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_379_gan_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}

switch(FEAT_TRAINS, SELF, sw_electrostar_colour_auto, current_year){
0 .. 2000: sw_375_cnx_colour_mapping;
2001 .. 2003: sw_375_sxs_colour_mapping;
2004 .. 2009: sw_375_sgs_colour_mapping;
2010 .. 2016: sw_375_ser_colour_mapping;
sw_387_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_colour_man, cargo_subtype){
	0: sw_375_cnx_colour_mapping;
	1: sw_377_stn_colour_mapping;
	2: sw_375_sxs_colour_mapping;
	3: sw_375_sgs_colour_mapping;
	4: sw_375_sbs_colour_mapping;
	5: sw_375_ser_colour_mapping;
	6: sw_377_fcc_colour_mapping;
	7: sw_387_gtr_colour_mapping;
	8: sw_387_c2c_colour_mapping;
	9: sw_387_gwr_colour_mapping;
	10: sw_387_gatex_colour_mapping;
	11: sw_379_gan_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_375_colour_livery_decider, livery_choice){
	1: sw_electrostar_colour_man;
	sw_electrostar_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_375_recolour, colour_scheme_1){
	1: sw_375_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_375_recolour_purchase, colour_scheme_1){
	1: sw_electrostar_colour_auto;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_375_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	375: return CB_RESULT_ATTACH_ALLOW;
	377: return CB_RESULT_ATTACH_ALLOW;
	387: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_375_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_376_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	376: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_376_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_375_speed, current_year) {
    0 .. 2015: 160;
	176;
}

item (FEAT_TRAINS, item_375, 375) {
	property {
		name: 							string(STR_NAME_375);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1998, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					55;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							375kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.09;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_375_coupling_restrictions;
		default: 							sw_375_default;
		purchase:							sw_electrostar_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_375_livery_decider ;
		colour_mapping:						sw_375_recolour;
		purchase_colour_mapping: 			sw_375_recolour_purchase;
		speed:								sw_375_speed;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		purchase_running_cost_factor : 32;
}
		livery_override (9090) {
		cargo_capacity: 95;
		default: sw_375_t_default;
		colour_mapping:	sw_375_recolour;
		cargo_subtype_text: sw_375_livery_decider ;
	speed:								sw_375_speed;
	power:				502;
}
}


if (vehicle_selection != 3){
item (FEAT_TRAINS, item_375, 375){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_375, 375){
	property{
		name                           : string(STR_NAME_375_ALT) ;
	}
}
}

item (FEAT_TRAINS, item_376, 376) {
	property {
		name: 							string(STR_NAME_376);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(2004, 1, 1);
		model_life:						25;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					55;
		running_cost_factor:			38;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1072 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					110;
		weight:							40 ton;
		tractive_effort_coefficient:	0.14;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		variant_group:					375;
	}
	graphics {
		can_attach_wagon:					sw_376_coupling_restrictions;
		default: 							sw_375_default;
		purchase:							sw_electrostar_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_375_livery_decider ;
		colour_mapping:						sw_375_recolour;
		purchase_colour_mapping: 			sw_375_recolour_purchase;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		purchase_running_cost_factor : 32;
}
		livery_override (9090) {
		cargo_capacity: 120;
		default: sw_375_t_default;
		colour_mapping:	sw_375_recolour;
		cargo_subtype_text: sw_375_livery_decider ;
	speed:				34;
	power:				400;
}
}


if (vehicle_selection < 4){
item (FEAT_TRAINS, item_376, 376){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_376, 376){
	property{
		name                           : string(STR_NAME_376_ALT) ;
	}
}
}

switch(FEAT_TRAINS, SELF, sw_377_front_auto, current_year){
0 .. 2000: spriteset_375_f_cnx;
2001 .. 2003: spriteset_375_f_sxs;
2004 .. 2009: spriteset_375_f_sgs;
spriteset_375_f_ser;
}

switch(FEAT_TRAINS, SELF, sw_377_purchase, current_year){
0 .. 2000: spriteset_375_cnx_purchase;
2001 .. 2003: spriteset_375_sxs_purchase;
2004 .. 2009: spriteset_375_sgs_purchase;
spriteset_375_ser_purchase;
}

switch(FEAT_TRAINS, SELF, sw_377_front_man, cargo_subtype){
0: spriteset_375_f_cnx;
1: spriteset_377_f_stn;
2: spriteset_375_f_sxs;
3: spriteset_375_f_sgs;
4: spriteset_375_f_sbs;
5: spriteset_375_f_ser;
6: spriteset_377_f_fcc;
7: spriteset_379_f_gan;
}

switch(FEAT_TRAINS, SELF, sw_377_trailer_man, cargo_subtype){
0: spriteset_375_t_cnx;
1: spriteset_377_t_stn;
2: spriteset_375_t_sxs;
3: spriteset_375_t_sgs;
4: spriteset_375_t_sbs;
5: spriteset_375_t_ser;
6: spriteset_377_t_fcc;
7: spriteset_379_t_gan;
}

switch(FEAT_TRAINS, SELF, sw_377_pan_man_f, cargo_subtype){
0: spriteset_375_p_cnx;
1: spriteset_377_p_stn;
2: spriteset_375_p_sxs;
3: spriteset_375_p_sgs;
4: spriteset_375_p_sbs;
5: spriteset_375_p_ser;
6: spriteset_377_p_fcc;
7: spriteset_379_p_gan;
}

switch(FEAT_TRAINS, SELF, sw_377_pan_man_r, cargo_subtype){
0: spriteset_375_pr_cnx;
1: spriteset_377_pr_stn;
2: spriteset_375_pr_sxs;
3: spriteset_375_pr_sgs;
4: spriteset_375_pr_sbs;
5: spriteset_375_pr_ser;
6: spriteset_377_pr_fcc;
7: spriteset_379_pr_gan;
}

switch(FEAT_TRAINS, PARENT, sw_377_pan_man, vehicle_is_reversed){
0: sw_377_pan_man_f;
sw_377_pan_man_r;
}

switch(FEAT_TRAINS, SELF, sw_377_t_auto, current_year){
0 .. 2000: spriteset_375_t_cnx;
2001 .. 2003: spriteset_375_t_sxs;
2004 .. 2009: spriteset_375_t_sgs;
spriteset_375_t_ser;
}

switch(FEAT_TRAINS, SELF, sw_377_p_auto_f, current_year){
0 .. 2000: spriteset_375_p_cnx;
2001 .. 2003: spriteset_375_p_sxs;
2004 .. 2009: spriteset_375_p_sgs;
spriteset_375_p_ser;
}

switch(FEAT_TRAINS, SELF, sw_377_p_auto_r, current_year){
0 .. 2000: spriteset_375_pr_cnx;
2001 .. 2003: spriteset_375_pr_sxs;
2004 .. 2009: spriteset_375_pr_sgs;
spriteset_375_pr_ser;
}

switch(FEAT_TRAINS, PARENT, sw_377_p_auto, vehicle_is_reversed){
0: sw_377_p_auto_f;
sw_377_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_377_livery_param, livery_choice){1 : sw_377_front_man ; sw_377_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_377_p_livery_param, livery_choice){1 : sw_377_pan_man ; sw_377_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_377_t_livery_param, livery_choice){1 : sw_377_trailer_man ; sw_377_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_377_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_377_livery_param;
	1: return sw_electrostar_headlights;
}

switch(FEAT_TRAINS, SELF, sw_377_nd_livery_param_1, position_in_vehid_chain){
0: sw_377_p_livery_param;
sw_377_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_377_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_377_p_livery_param;
sw_377_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_377_nd_livery_param, vehicle_is_reversed){
0: sw_377_nd_livery_param_1;
sw_377_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_377_ndf_pan_switch, position_in_vehid_chain){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_377_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_377_nd_pan_switch, vehicle_is_reversed){
0: sw_377_ndf_pan_switch;
sw_377_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_377_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_377_nd_livery_param;
	1: return sw_377_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_377_refit_text, cargo_subtype){
	0: string(STR_LIVERY_CONNEX);
	1: string(STR_LIVERY_SOUTHERN);
	2: string(STR_LIVERY_SE_YELLOW);
	3: string(STR_LIVERY_SE_YELLOW_GREY);
	4: string(STR_LIVERY_SE_BLUE);
	5: string(STR_LIVERY_SE_REFURB);
	6: string(STR_LIVERY_FCC);
	7: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_377_livery_decider, livery_choice){
	1: sw_377_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_377_colour_auto, current_year){
0 .. 2000: sw_375_cnx_colour_mapping;
2001 .. 2003: sw_375_sxs_colour_mapping;
2004 .. 2009: sw_375_sgs_colour_mapping;
sw_375_ser_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_377_colour_man, cargo_subtype){
	0: sw_375_cnx_colour_mapping;
	1: sw_377_stn_colour_mapping;
	2: sw_375_sxs_colour_mapping;
	3: sw_375_sgs_colour_mapping;
	4: sw_375_sbs_colour_mapping;
	5: sw_375_ser_colour_mapping;
	6: sw_377_fcc_colour_mapping;
	7: sw_379_gan_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_377_colour_livery_decider, livery_choice){
	1: sw_377_colour_man;
	sw_377_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_377_recolour, colour_scheme_1){
	1: sw_377_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_377_recolour_purchase, colour_scheme_1){
	1: sw_377_colour_auto;
	palette_2cc(company_colour1, company_colour2);
}

item (FEAT_TRAINS, item_377, 377) {
	property {
		name: 							string(STR_NAME_377);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1998, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					55;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1004 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.09;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		variant_group:					375;
	}
	graphics {
		can_attach_wagon:					sw_375_coupling_restrictions;
		default: 							sw_377_default;
		purchase:							sw_377_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_377_livery_decider ;
		colour_mapping:						sw_377_recolour;
		purchase_colour_mapping: 			sw_377_recolour_purchase;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		purchase_running_cost_factor : 32;
}
		livery_override (9090) {
		cargo_capacity: 95;
		default: sw_377_t_default;
		colour_mapping:	sw_377_recolour;
		cargo_subtype_text: sw_377_livery_decider ;
	speed:								45;
	power:				580;
}
}


if (vehicle_selection < 4){
item (FEAT_TRAINS, item_377, 377){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_377, 377){
	property{
		name                           : string(STR_NAME_377_ALT) ;
	}
}
}

switch(FEAT_TRAINS, SELF, sw_387_front_auto, current_year){
spriteset_387_f_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_387_purchase, current_year){
spriteset_375_gtr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_387_front_man, cargo_subtype){
0..1: spriteset_387_f_gtr_c2c;
2..3: spriteset_387_f_gax_gwr;
}

switch(FEAT_TRAINS, SELF, sw_387_trailer_man, cargo_subtype){
0..1: spriteset_387_t_gtr_c2c;
2..3: spriteset_387_t_gax_gwr;
}

switch(FEAT_TRAINS, SELF, sw_387_pan_man_f, cargo_subtype){
0..1: spriteset_387_p_gtr_c2c;
2..3: spriteset_387_p_gax_gwr;
}

switch(FEAT_TRAINS, SELF, sw_387_pan_man_r, cargo_subtype){
0..1: spriteset_387_pr_gtr_c2c;
2..3: spriteset_387_pr_gax_gwr;
}

switch(FEAT_TRAINS, PARENT, sw_387_pan_man, vehicle_is_reversed){
0: sw_387_pan_man_f;
sw_387_pan_man_r;
}

switch(FEAT_TRAINS, SELF, sw_387_t_auto, current_year){
spriteset_387_t_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_387_p_auto_f, current_year){
spriteset_387_p_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_387_p_auto_r, current_year){
spriteset_387_pr_gtr_c2c;
}

switch(FEAT_TRAINS, PARENT, sw_387_p_auto, vehicle_is_reversed){
0: sw_387_p_auto_f;
sw_387_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_387_livery_param, livery_choice){1 : sw_387_front_man ; sw_387_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_387_p_livery_param, livery_choice){1 : sw_387_pan_man ; sw_387_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_387_t_livery_param, livery_choice){1 : sw_387_trailer_man ; sw_387_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_387_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_387_livery_param;
	1: return sw_electrostar_headlights;
}

switch(FEAT_TRAINS, SELF, sw_387_nd_livery_param_1, position_in_vehid_chain){
0: sw_387_p_livery_param;
sw_387_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_387_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_387_p_livery_param;
sw_387_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_387_nd_livery_param, vehicle_is_reversed){
0: sw_387_nd_livery_param_1;
sw_387_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_387_ndf_pan_switch, position_in_vehid_chain){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_387_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_387_nd_pan_switch, vehicle_is_reversed){
0: sw_387_ndf_pan_switch;
sw_387_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_387_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_387_nd_livery_param;
	1: return sw_387_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_387_refit_text, cargo_subtype){
	0: string(STR_LIVERY_GTR);
	1: string(STR_LIVERY_C2C);
	2: string(STR_LIVERY_FIRST_GWR);
	3: string(STR_LIVERY_GATEX);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_387_livery_decider, livery_choice){
	1: sw_387_refit_text;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_387_colour_auto, current_year){
sw_387_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_387_colour_man, cargo_subtype){
	0: sw_387_gtr_colour_mapping;
	1: sw_387_c2c_colour_mapping;
	2: sw_387_gwr_colour_mapping;
	3: sw_387_gatex_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_387_colour_livery_decider, livery_choice){
	1: sw_387_colour_man;
	sw_387_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_387_recolour, colour_scheme_1){
	1: sw_387_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_387_recolour_purchase, colour_scheme_1){
	1: sw_387_colour_auto;
	palette_2cc(company_colour1, company_colour2);
}

item (FEAT_TRAINS, item_387, 387) {
	property {
		name: 							string(STR_NAME_387);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2014, 12, 8);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					55;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							950 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.09;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		variant_group:					375;
	}
	graphics {
		can_attach_wagon:					sw_375_coupling_restrictions;
		default: 							sw_387_default;
		purchase:							sw_387_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_387_livery_decider ;
		colour_mapping:						sw_387_recolour;
		purchase_colour_mapping: 			sw_387_recolour_purchase;
		running_cost_factor:				return(current_speed == 0 ? 8 : 34) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		purchase_running_cost_factor : 34;
}
		livery_override (9090) {
		cargo_capacity: 95;
		default: sw_387_t_default;
		colour_mapping:	sw_387_recolour;
		cargo_subtype_text: sw_387_livery_decider ;
	speed:								50;
	power:				580;
}
}


if (vehicle_selection != 3){
item (FEAT_TRAINS, item_375, 375){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_375, 375){
	property{
		name                           : string(STR_NAME_375_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_357.pnml" 1
//Power car
spriteset(spriteset_357_f_cc1, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_357_f_cc2, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_357_f_cc3, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 225)}
//Trailer car
spriteset(spriteset_357_t_cc1, "gfx/EMU/leccystar3.png") {template_8_4_networker(179, 125)}
spriteset(spriteset_357_t_cc2, "gfx/EMU/leccystar3.png") {template_8_4_networker(179, 200)}
spriteset(spriteset_357_t_cc3, "gfx/EMU/leccystar3.png") {template_8_4_networker(179, 275)}
//Pan car
spriteset(spriteset_357_p_cc1, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_357_p_cc2, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_357_p_cc3, "gfx/EMU/leccystar3.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_357_pr_cc1, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(179, 100)}
spriteset(spriteset_357_pr_cc2, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(179, 175)}
spriteset(spriteset_357_pr_cc3, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(179, 250)}
//Purchase
spriteset(spriteset_357_cc1_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 450)}
spriteset(spriteset_357_cc2_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 475)}
spriteset(spriteset_357_cc3_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 500)}

switch(FEAT_TRAINS, SELF, sw_357_front_auto, current_year){
0	..	2000:	spriteset_357_f_cc1;
2001..	2014:	spriteset_357_f_cc2;
spriteset_357_f_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_purchase, current_year){
0	..	2000:	spriteset_357_cc1_purchase;
2001..	2014:	spriteset_357_cc2_purchase;
spriteset_357_cc3_purchase;
}

switch(FEAT_TRAINS, SELF, sw_357_front_man, cargo_subtype){
0: spriteset_357_f_cc1;
1: spriteset_357_f_cc2;
2: spriteset_357_f_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_trailer_man, cargo_subtype){
0: spriteset_357_t_cc1;
1: spriteset_357_t_cc2;
2: spriteset_357_t_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_pan_man_f, cargo_subtype){
0: spriteset_357_p_cc1;
1: spriteset_357_p_cc2;
2: spriteset_357_p_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_pan_man_r, cargo_subtype){
0: spriteset_357_pr_cc1;
1: spriteset_357_pr_cc2;
2: spriteset_357_pr_cc3;
}

switch(FEAT_TRAINS, PARENT, sw_357_pan_man, vehicle_is_reversed){
0: sw_357_pan_man_f;
sw_357_pan_man_r;
}

switch(FEAT_TRAINS, SELF, sw_357_t_auto, current_year){
0	..	2000:	spriteset_357_t_cc1;
2001..	2014:	spriteset_357_t_cc2;
spriteset_357_t_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_p_auto_f, current_year){
0	..	2000:	spriteset_357_p_cc1;
2001..	2014:	spriteset_357_p_cc2;
spriteset_357_p_cc3;
}

switch(FEAT_TRAINS, SELF, sw_357_p_auto_r, current_year){
0	..	2000:	spriteset_357_pr_cc1;
2001..	2014:	spriteset_357_pr_cc2;
spriteset_357_pr_cc3;
}

switch(FEAT_TRAINS, PARENT, sw_357_p_auto, vehicle_is_reversed){
0: sw_357_p_auto_f;
sw_357_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_357_livery_param, livery_choice){1 : sw_357_front_man ; sw_357_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_357_p_livery_param, livery_choice){1 : sw_357_pan_man ; sw_357_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_357_t_livery_param, livery_choice){1 : sw_357_trailer_man ; sw_357_t_auto ;}


switch(FEAT_TRAINS, SELF, sw_357_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_357_livery_param;
	1: return sw_electrostar_headlights;
}

switch(FEAT_TRAINS, SELF, sw_357_nd_livery_param_1, position_in_vehid_chain){
0: sw_357_p_livery_param;
sw_357_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_357_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_357_p_livery_param;
sw_357_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_357_nd_livery_param, vehicle_is_reversed){
0: sw_357_nd_livery_param_1;
sw_357_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_357_ndf_pan_switch, position_in_vehid_chain){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_357_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_357_nd_pan_switch, vehicle_is_reversed){
0: sw_357_ndf_pan_switch;
sw_357_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_357_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_357_nd_livery_param;
	1: return sw_357_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_357_refit_text, cargo_subtype){
	0: string(STR_LIVERY_LTS);
	1: string(STR_LIVERY_C2C_NX);
	2: string(STR_LIVERY_C2C);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_357_livery_decider, livery_choice){
	1: sw_357_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_357_cc1_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_357_cc2_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_357_cc3_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}

switch(FEAT_TRAINS, SELF, sw_357_colour_auto, current_year){
0	..	2000:	sw_357_cc1_colour_mapping;
2001..	2014:	sw_357_cc2_colour_mapping;
sw_357_cc3_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_357_colour_man, cargo_subtype){
	0: sw_357_cc1_colour_mapping;
	1: sw_357_cc2_colour_mapping;
	2: sw_357_cc3_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_357_colour_livery_decider, livery_choice){
	1: sw_357_colour_man;
	sw_357_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_357_recolour, colour_scheme_1){
	1: sw_357_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_357_recolour_purchase, colour_scheme_1){
	1: sw_357_colour_auto;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_357_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	357: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_357_NO_COUPLE);
}

item (FEAT_TRAINS, item_357, 357) {
	property {
		name: 							string(STR_NAME_357);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1998, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					55;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							950 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.09;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_357_coupling_restrictions;
		default: 							sw_357_default;
		purchase:							sw_357_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_357_livery_decider ;
		colour_mapping:						sw_357_recolour;
		purchase_colour_mapping: 			sw_357_recolour_purchase;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		purchase_running_cost_factor : 32;
}
		livery_override (9090) {
		cargo_capacity: 95;
		default: sw_357_t_default;
		colour_mapping:	sw_357_recolour;
		cargo_subtype_text: sw_357_livery_decider ;
	power:				580;
}
}


if (vehicle_selection < 3){
item (FEAT_TRAINS, item_357, 357){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_357, 357){
	property{
		name                           : string(STR_NAME_357_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_455.pnml" 1
//BR Blue/grey
spriteset(spriteset_455_brb_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 25)}
spriteset(spriteset_455_brb_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 75)}
spriteset(spriteset_455_brb_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 100)}
spriteset(spriteset_455_brb_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 125)}
spriteset(spriteset_455_brb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(539, 150)}

//NSE
spriteset(spriteset_455_nse_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 200)}
spriteset(spriteset_455_nse_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 250)}
spriteset(spriteset_455_nse_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 275)}
spriteset(spriteset_455_nse_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 300)}
spriteset(spriteset_455_nse_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 325)}

//SWt Old
spriteset(spriteset_455_swo_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 200)}
spriteset(spriteset_455_swo_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 250)}
spriteset(spriteset_455_swo_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 275)}
spriteset(spriteset_455_swo_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 300)}
spriteset(spriteset_455_swo_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(539, 325)}

//CoNneX
spriteset(spriteset_455_cnx_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 375)}
spriteset(spriteset_455_cnx_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 425)}
spriteset(spriteset_455_cnx_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 450)}
spriteset(spriteset_455_cnx_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 475)}
spriteset(spriteset_455_cnx_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 500)}

//SouTherN
spriteset(spriteset_455_stn_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 375)}
spriteset(spriteset_455_stn_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 425)}
spriteset(spriteset_455_stn_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 450)}
spriteset(spriteset_455_stn_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 475)}
spriteset(spriteset_455_stn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(539, 500)}

//SWT
spriteset(spriteset_455_swt_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 550)}
spriteset(spriteset_455_swt_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 600)}
spriteset(spriteset_455_swt_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 625)}
spriteset(spriteset_455_swt_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 650)}
spriteset(spriteset_455_swt_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 675)}

//Switches

//Coupling

switch(FEAT_TRAINS, SELF, sw_455_coupling_restrictions, vehicle_type_id) {
    item_Mk2: return CB_RESULT_ATTACH_ALLOW;
	item_455: return CB_RESULT_ATTACH_ALLOW;
	456: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_455), string(STR_NAME_MK2));
}

//Power Car
switch(FEAT_TRAINS, SELF, sw_455_brb_f, position_in_consist){0: spriteset_455_brb_f; spriteset_455_brb_o;}
switch(FEAT_TRAINS, SELF, sw_455_brb, position_in_consist_from_end){0: spriteset_455_brb_r; sw_455_brb_f;}

switch(FEAT_TRAINS, SELF, sw_455_nse_f, position_in_consist){0: spriteset_455_nse_f; spriteset_455_nse_o;}
switch(FEAT_TRAINS, SELF, sw_455_nse, position_in_consist_from_end){0: spriteset_455_nse_r; sw_455_nse_f;}

switch(FEAT_TRAINS, SELF, sw_455_swo_f, position_in_consist){0: spriteset_455_swo_f; spriteset_455_swo_o;}
switch(FEAT_TRAINS, SELF, sw_455_swo, position_in_consist_from_end){0: spriteset_455_swo_r; sw_455_swo_f;}

switch(FEAT_TRAINS, SELF, sw_455_swt_f, position_in_consist){0: spriteset_455_swt_f; spriteset_455_swt_o;}
switch(FEAT_TRAINS, SELF, sw_455_swt, position_in_consist_from_end){0: spriteset_455_swt_r; sw_455_swt_f;}


switch(FEAT_TRAINS, SELF, sw_455_cnx_f, position_in_consist){0: spriteset_455_cnx_f; spriteset_455_cnx_o;}
switch(FEAT_TRAINS, SELF, sw_455_cnx, position_in_consist_from_end){0: spriteset_455_cnx_r; sw_455_cnx_f;}

switch(FEAT_TRAINS, SELF, sw_455_stn_f, position_in_consist){0: spriteset_455_stn_f; spriteset_455_stn_o;}
switch(FEAT_TRAINS, SELF, sw_455_stn, position_in_consist_from_end){0: spriteset_455_stn_r; sw_455_stn_f;}

//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_455_brb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_brb ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_nse ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swo_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_swo ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swt_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_swt ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_cnx ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_stn ;
}
//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_455_brb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_brb_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_nse_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swo_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_swo_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swt_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_swt_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_stn_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_cnx_t ;
}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_455_livery_decider, current_year){
	1971 .. 1982: sw_455_brb_select;
	1983 .. 1995: sw_455_nse_select;
	1996 .. 2005: sw_455_swo_select;
	2006 .. 2010: sw_455_swt_select;
	sw_455_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_455_t_livery_decider, current_year){
	1971 .. 1982: sw_455_brb_t_select;
	1983 .. 1995: sw_455_nse_t_select;
	1996 .. 2005: sw_455_swo_t_select;
	2006 .. 2010: sw_455_swt_t_select;
	sw_455_stn_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_455_manual_livery_decider, cargo_subtype){
	0: sw_455_brb_select;
	1: sw_455_nse_select;
	2: sw_455_swo_select;
	3: sw_455_swt_select;
	4: sw_455_cnx_select;
	5: sw_455_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_455_t_manual_livery_decider, cargo_subtype){
	0: sw_455_brb_t_select;
	1: sw_455_nse_t_select;
	2: sw_455_swo_t_select;
	3: sw_455_swt_t_select;
	4: sw_455_cnx_t_select;
	5: sw_455_stn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_455_final_livery_choice_decider, livery_choice){
	1 : sw_455_manual_livery_decider ; 
	sw_455_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_455_t_final_livery_choice_decider, livery_choice){
	1 : sw_455_t_manual_livery_decider ; 
	sw_455_t_livery_decider ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_455_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_SWT);
	3: return string(STR_LIVERY_SWT_REFURB);
	4: return string(STR_LIVERY_CONNEX);
	5: return string(STR_LIVERY_SOUTHERN);
	return CB_RESULT_NO_TEXT ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_455_refit_text_decider, livery_choice){
	1 : sw_455_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_455_purchase, current_year){
	1971 .. 1982: spriteset_455_brb_purchase;
	1983 .. 1995: spriteset_455_nse_purchase;
	1996 .. 2005: spriteset_455_swo_purchase;
	2006 .. 2010: spriteset_455_swt_purchase;
	spriteset_455_stn_purchase;
}

switch(FEAT_TRAINS, SELF, sw_455_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_455_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_455_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_455_t_final_livery_choice_decider;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_455_brb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
 }

random_switch(FEAT_TRAINS, SELF, sw_455_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_455_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_se_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_455_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_455_brb_colour_mapping;
	1983 .. 1995: sw_455_nse_colour_mapping;
	1996 .. 2005: sw_455_nse_colour_mapping;
	2006 .. 2010: sw_455_swt_colour_mapping;
	sw_455_stn_colour_mapping;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_455_manual_colour_mapping_decider, cargo_subtype){
	0: sw_455_brb_colour_mapping;
	1: sw_455_nse_colour_mapping;
	2: sw_455_nse_colour_mapping;
	3: sw_455_swt_colour_mapping;
	4: sw_455_se_colour_mapping;
	5: sw_455_stn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_455_colour_mapping_mode_choice_decider, livery_choice){
	1 : sw_455_manual_colour_mapping_decider ; 
	sw_455_colour_mapping_year_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_455_colour_mapping_choice_decider, colour_scheme_1){
	1 : sw_455_colour_mapping_mode_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_455, 455) {
	property {
		name: 							string(STR_NAME_455);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1982, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					26;
		cost_factor:					38;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							30 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.15;
		air_drag_coefficient:			0.10;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_455_coupling_restrictions;
		default: 							sw_455_default;
		purchase:							sw_455_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_455_refit_text_decider ;
		colour_mapping:						sw_455_colour_mapping_choice_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_455_colour_mapping_year_decider;
		running_cost_factor:				return(current_speed == 0 ? 6 : 23) ;
		purchase_running_cost_factor:		23;
}
		livery_override (item_Mk2) {
		cargo_capacity: 90;
		default: sw_455_default_t;
		colour_mapping:	sw_455_colour_mapping_choice_decider;
		cargo_subtype_text: sw_455_refit_text_decider ;
		weight: 35;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_455, 455){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_455, 455){
	property{
		name                           : string(STR_NAME_455_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_700.pnml" 1
//Class 700
spriteset(spriteset_700_tl_f, "gfx/EMU/class_717.png") {template_8_8_networker(0, 100)}
//Class 707
spriteset(spriteset_700_swt_f, "gfx/EMU/class_717.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_700_swt_t, "gfx/EMU/class_717.png") {template_8_4_networker(179, 150)}
spriteset(spriteset_700_swt_p, "gfx/EMU/class_717.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_700_swt_p_r, "gfx/EMU/class_717.png") {template_8_8_networker_reverse(0, 150)}
//Class 717
spriteset(spriteset_700_gn_f, "gfx/EMU/class_717.png") {template_8_8_networker(0, 25)}
//Common TSGN carriages
spriteset(spriteset_700_tsgn_t, "gfx/EMU/class_717.png") {template_8_4_networker(179, 0)}
spriteset(spriteset_700_tsgn_p, "gfx/EMU/class_717.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_700_tsgn_p_r, "gfx/EMU/class_717.png") {template_8_8_networker_reverse(0, 0)}
//Fixtures
spriteset(spriteset_700_f_lights, "gfx/EMU/class_717.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_700_r_lights, "gfx/EMU/class_717.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_700_pan_up, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_700_pan_down, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_700_pan_up_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 50)}
spriteset(spriteset_700_pan_down_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 75)}
//Purchase
spriteset(spriteset_700_purchase, "gfx/EMU/class_717.png") {template_dualhead_purchase(179, 25)}
spriteset(spriteset_700_swt_purchase, "gfx/EMU/class_717.png") {template_dualhead_purchase(179, 50)}
spriteset(spriteset_700_gn_purchase, "gfx/EMU/class_717.png") {template_dualhead_purchase(179, 75)}

//Switches

switch(FEAT_TRAINS, PARENT, sw_700_front_auto, (count_veh_id(item_MU90)-(2*count_veh_id(item_700)))){
0: spriteset_700_gn_f;
1 .. 128: spriteset_700_tl_f;
spriteset_700_swt_f;
}

switch(FEAT_TRAINS, SELF, sw_700_purchase, current_year){
0 .. 2016: spriteset_700_purchase;
2017 .. 2018: spriteset_700_swt_purchase;
spriteset_700_gn_purchase;
}

switch(FEAT_TRAINS, SELF, sw_700_front_man, cargo_subtype){
0: spriteset_700_tl_f;
1: spriteset_700_swt_f;
2: spriteset_700_gn_f;
}

switch(FEAT_TRAINS, SELF, sw_700_trailer_man, cargo_subtype){
0: spriteset_700_tsgn_t;
1: spriteset_700_swt_t;
2: spriteset_700_tsgn_t;
}

switch(FEAT_TRAINS, SELF, sw_700_pan_man_f, cargo_subtype){
0: spriteset_700_tsgn_p;
1: spriteset_700_swt_p;
2: spriteset_700_tsgn_p;
}

switch(FEAT_TRAINS, SELF, sw_700_pan_man_r, cargo_subtype){
0: spriteset_700_tsgn_p_r;
1: spriteset_700_swt_p_r;
2: spriteset_700_tsgn_p_r;
}

switch(FEAT_TRAINS, PARENT, sw_700_pan_man, vehicle_is_reversed){
0: sw_700_pan_man_f;
sw_700_pan_man_r;
}

switch(FEAT_TRAINS, PARENT, sw_700_t_auto, (count_veh_id(item_MU90)-(2*count_veh_id(item_700)))){
0: spriteset_700_tsgn_t;
1 .. 128: spriteset_700_tsgn_t;
spriteset_700_swt_t;
}

switch(FEAT_TRAINS, PARENT, sw_700_p_auto_f, (count_veh_id(item_MU90)-(2*count_veh_id(item_700)))){
0: spriteset_700_tsgn_p;
1 .. 128: spriteset_700_tsgn_p;
spriteset_700_swt_p;
}

switch(FEAT_TRAINS, PARENT, sw_700_p_auto_r, (count_veh_id(item_MU90)-(2*count_veh_id(item_700)))){
0: spriteset_700_tsgn_p_r;
1 .. 128: spriteset_700_tsgn_p_r;
spriteset_700_swt_p_r;
}

switch(FEAT_TRAINS, PARENT, sw_700_p_auto, vehicle_is_reversed){
0: sw_700_p_auto_f;
sw_700_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_700_livery_param, livery_choice){1 : sw_700_front_man ; sw_700_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_700_p_livery_param, livery_choice){1 : sw_700_pan_man ; sw_700_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_700_t_livery_param, livery_choice){1 : sw_700_trailer_man ; sw_700_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_700_headlights_1, position_in_consist){
0: spriteset_700_f_lights;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_700_headlights, position_in_consist_from_end){
0: spriteset_700_r_lights;
sw_700_headlights_1;
}

switch(FEAT_TRAINS, PARENT, sw_700_pan_f, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_700_pan_up;
spriteset_700_pan_down;
}

switch(FEAT_TRAINS, PARENT, sw_700_pan_r, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_700_pan_up_r;
spriteset_700_pan_down_r;
}

switch(FEAT_TRAINS, SELF, sw_700_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_700_livery_param;
	1: return sw_700_headlights;
}

switch(FEAT_TRAINS, SELF, sw_700_nd_livery_param_1, position_in_vehid_chain){
0: sw_700_p_livery_param;
sw_700_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_700_nd_livery_param, position_in_vehid_chain_from_end){
0: sw_700_p_livery_param;
sw_700_nd_livery_param_1;
}

switch(FEAT_TRAINS, SELF, sw_700_ndf_pan_switch, position_in_vehid_chain){
0: sw_700_pan_f;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_700_nd_pan_switch, position_in_vehid_chain_from_end){
0: sw_700_pan_r;
sw_700_ndf_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_700_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_700_nd_livery_param;
	1: return sw_700_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_700_refit_text, cargo_subtype){
	0: string(STR_LIVERY_THAMESLINK_STR, string(STR_700));
	1: string(STR_LIVERY_SWT_STR, string(STR_707));
	2: string(STR_LIVERY_GN_STR, string(STR_717));
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_700_livery_decider, livery_choice){
	1: sw_700_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_700_tsgn_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_LIGHT_BLUE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_700_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;}

switch(FEAT_TRAINS, SELF, sw_700_colour_auto, (count_veh_id(item_MU90)-(2*count_veh_id(item_700)))){
	0..128: sw_700_tsgn_colour_mapping;
	sw_700_swt_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_700_colour_man, cargo_subtype){
	0: sw_700_tsgn_colour_mapping;
	1: sw_700_swt_colour_mapping;
	2: sw_700_tsgn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_700_colour_livery_decider, livery_choice){
	1: sw_700_colour_man;
	sw_700_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_700_recolour, colour_scheme_1){
	1: sw_700_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_700_recolour_purchase_1, colour_scheme_1){
	0 .. 2016: sw_700_tsgn_colour_mapping;
	2017 .. 2018: sw_700_swt_colour_mapping;
	sw_700_tsgn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_700_recolour_purchase, colour_scheme_1){
	1: sw_700_recolour_purchase_1;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_700_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	700: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_700), string(STR_NAME_MU90));
}

item (FEAT_TRAINS, item_700, 700) {
	property {
		name: 							string(STR_NAME_700);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2015, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					32;
		cost_factor:					75;
		running_cost_factor:			40;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							4425 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					110;
		weight:							34 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.2;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_700_coupling_restrictions;
		default: 							sw_700_default;
		purchase:							sw_700_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_700_recolour;
		cargo_subtype_text:					sw_700_livery_decider;
		purchase_colour_mapping:			sw_700_recolour_purchase;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 19 : 40) ;
		purchase_running_cost_factor : 40;
}
		livery_override (item_MU90) {
		cargo_capacity: 125;
		power: 200;
		default: sw_700_t_default;
		weight:	34;
		colour_mapping:	sw_700_recolour;
		cargo_subtype_text: sw_700_livery_decider;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_700, 700){
	property{
		name                           : string(STR_NAME_700_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3

# 1 "src/EMU/lul_1938.pnml" 1
//Spritesets


spriteset(gfx_lul38_red_mid			, "gfx/EMU/tube2.png")	{template_7_4(82,	0)}
spriteset(gfx_lul38_red				, "gfx/EMU/tube2.png")	{template_7_8(0,	25)}
spriteset(gfx_lul38_swt_mid			, "gfx/EMU/tube2.png")	{template_7_4(82,	50)}
spriteset(gfx_lul38_swt				, "gfx/EMU/tube2.png")	{template_7_8(0,	75)}
spriteset(gfx_lul38_nse_mid			, "gfx/EMU/tube2.png")	{template_7_4(82,	100)}
spriteset(gfx_lul38_nse				, "gfx/EMU/tube2.png")	{template_7_8(0,	125)}

spriteset(gfx_lul38_light_front		, "gfx/EMU/tube2.png")	{template_7_8(175,	100)}
spriteset(gfx_lul38_light_back		, "gfx/EMU/tube2.png")	{template_7_8(175,	125)}

spriteset(gfx_lul38_purchase_lulred	, "gfx/EMU/tube2.png"){template_dualhead_purchase(0, 0)}
spriteset(gfx_lul38_purchase_nse	, "gfx/EMU/tube2.png"){template_dualhead_purchase(0, 100)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul38_red_id_check	, vehicle_type_id) { 600 : gfx_lul38_red_mid ; gfx_lul38_red ; }
switch(FEAT_TRAINS, SELF, sw_lul38_nse_id_check	, vehicle_type_id) { 600 : gfx_lul38_nse_mid ; gfx_lul38_nse ; }
switch(FEAT_TRAINS, SELF, sw_lul38_swt_id_check	, vehicle_type_id) { 600 : gfx_lul38_swt_mid ; gfx_lul38_swt ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_lul38_gfx_auto, current_year){
	0..1988 : sw_lul38_red_id_check ;
	1989..1997 : sw_lul38_nse_id_check ;
	sw_lul38_swt_id_check ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_lul38_gfx_manual, cargo_subtype){
	0 : sw_lul38_red_id_check ;
	1 : sw_lul38_nse_id_check ;
	sw_lul38_swt_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_lul38_gfx_manual_check, livery_choice){
	1 : sw_lul38_gfx_manual ;
	sw_lul38_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_lul38_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul38_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul38_lights_check_front, position_in_consist){ 0 : gfx_lul38_light_front ; sw_lul38_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul38_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul38_gfx_manual_check ;
	1 : sw_lul38_lights_check_front ;
}


//Purchase sprites


switch(FEAT_TRAINS, SELF, sw_lul38_purchase_gfx, current_year){
	1989..2007 : gfx_lul38_purchase_nse ;
	gfx_lul38_purchase_lulred ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_lul38_colours_auto, current_year){
	1989..2007 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(COLOUR_RED) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul38_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_lul38_colours_manual_check, livery_choice){
	1 : sw_lul38_colours_manual ;
	sw_lul38_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul38_colours_2cc_check, colour_scheme_1){
	1 : sw_lul38_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul38_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_MAROON) ;
	1 : string(STR_LIVERY_NSE) ;
	2 : string(STR_LIVERY_SWT_HERITAGE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul38_refit_text_check, livery_choice){
	1 : sw_lul38_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul38_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	638	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul38, 638){
	property{
		name                           : string(STR_NAME_LUL38) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1937,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 60 ;
		reliability_decay              : 14 ;
		cost_factor                    : 23 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 12 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 80 ;
		loading_speed                  : 25 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 40 mph ;
		power                          : 275 hp ;
		//extra_power_per_wagon          : 100 hp ;
		weight                         : 27 ton ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul38_gfx_spr_stack ;
		purchase                		: sw_lul38_purchase_gfx ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul38_colours_2cc_check ;
		purchase_colour_mapping 		: sw_lul38_colours_auto ;
		cargo_subtype_text      		: sw_lul38_refit_text_check ;
		can_attach_wagon        		: sw_lul38_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 5 : 12) ;
		purchase_running_cost_factor	: 12 ;
	}
	livery_override (600){
		default                     : sw_lul38_gfx_manual_check ;
		colour_mapping              : sw_lul38_colours_2cc_check ;
		cargo_capacity              : 85 ;
		cargo_subtype_text          : sw_lul38_refit_text_check ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul38, 638){
	property{
		name                           : string(STR_NAME_LUL38_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_1959.pnml" 1
//Spritesets


spriteset(gfx_lul59_lul_mid			, "gfx/EMU/tube2.png")	{template_7_4(82,	175)}
spriteset(gfx_lul59_lul				, "gfx/EMU/tube2.png")	{template_7_8(0,	200)}
spriteset(gfx_lul59_red_mid			, "gfx/EMU/tube2.png")	{template_7_4(82,	225)}
spriteset(gfx_lul59_red				, "gfx/EMU/tube2.png")	{template_7_8(0,	250)}

spriteset(gfx_lul59_light_front		, "gfx/EMU/tube2.png")	{template_7_8(175,	175)}
spriteset(gfx_lul59_light_back		, "gfx/EMU/tube2.png")	{template_7_8(175,	200)}

spriteset(gfx_lul59_purchase_lul	, "gfx/EMU/tube2.png"){template_dualhead_purchase(0, 175)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul59_lul_id_check	, vehicle_type_id) { 600 : gfx_lul59_lul_mid ; gfx_lul59_lul ; }
switch(FEAT_TRAINS, SELF, sw_lul59_red_id_check	, vehicle_type_id) { 600 : gfx_lul59_red_mid ; gfx_lul59_red ; }


switch(FEAT_TRAINS, SELF, sw_lul59_gfx_manual, cargo_subtype){
	0 : sw_lul59_lul_id_check ;
	sw_lul59_red_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_lul59_gfx_manual_check, livery_choice){
	1 : sw_lul59_gfx_manual ;
	sw_lul59_lul_id_check ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_lul59_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul59_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul59_lights_check_front, position_in_consist){ 0 : gfx_lul59_light_front ; sw_lul59_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul59_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul59_gfx_manual_check ;
	1 : sw_lul59_lights_check_front ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_lul59_colours_2cc_check, colour_scheme_1){
	1 : palette_1cc(COLOUR_RED) ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul59_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_GREY) ;
	1 : string(STR_LIVERY_LUL_MAROON) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul59_refit_text_check, livery_choice){
	1 : sw_lul59_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul59_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	659	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul59, 659){
	property{
		name                           : string(STR_NAME_LUL59) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1959,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 12 ;
		cost_factor                    : 25 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 14 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 80 ;
		loading_speed                  : 26 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 40 mph ;
		power                          : 275 hp ;
		//extra_power_per_wagon          : 100 hp ;
		weight                         : 27 ton ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul59_gfx_spr_stack ;
		purchase                		: gfx_lul59_purchase_lul ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul59_colours_2cc_check ;
		cargo_subtype_text      		: sw_lul59_refit_text_check ;
		can_attach_wagon        		: sw_lul59_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 6 : 14) ;
		purchase_running_cost_factor	: 14 ;
	}
	livery_override (600){
		default                     : sw_lul59_gfx_manual_check ;
		colour_mapping              : sw_lul59_colours_2cc_check ;
		cargo_capacity              : 85 ;
		cargo_subtype_text          : sw_lul59_refit_text_check ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul59, 659){
	property{
		name                           : string(STR_NAME_LUL59_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_1967.pnml" 1
//Spritesets


spriteset(gfx_lul67_lul_mid			, "gfx/EMU/ts1973.png")	{template_7_4(164,	0)}
spriteset(gfx_lul67_lul				, "gfx/EMU/ts1973.png")	{template_7_8(164,	24)}
spriteset(gfx_lul67_grey_mid		, "gfx/EMU/ts1973.png")	{template_7_4(164,	48)}
spriteset(gfx_lul67_grey			, "gfx/EMU/ts1973.png")	{template_7_8(164,	72)}

spriteset(gfx_lul73_lul_mid			, "gfx/EMU/ts1973.png")	{template_7_4(0,	0)}
spriteset(gfx_lul73_lul				, "gfx/EMU/ts1973.png")	{template_7_8(0,	24)}
spriteset(gfx_lul73_grey_mid		, "gfx/EMU/ts1973.png")	{template_7_4(0,	48)}
spriteset(gfx_lul73_grey			, "gfx/EMU/ts1973.png")	{template_7_8(0,	72)}

spriteset(gfx_lul67_light_front		, "gfx/EMU/ts1973.png")	{template_7_8(328,	0)}
spriteset(gfx_lul67_light_back		, "gfx/EMU/ts1973.png")	{template_7_8(328,	24)}

spriteset(gfx_lul67_purchase_lul	, "gfx/EMU/ts1973.png"){template_dualhead_purchase(82,	48)}
spriteset(gfx_lul67_purchase_grey	, "gfx/EMU/ts1973.png"){template_dualhead_purchase(246,	48)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul67_lul_id_check	, vehicle_type_id) { 600 : gfx_lul67_lul_mid ; gfx_lul67_lul ; }
switch(FEAT_TRAINS, SELF, sw_lul67_grey_id_check, vehicle_type_id) { 600 : gfx_lul67_grey_mid ; gfx_lul67_grey ; }

switch(FEAT_TRAINS, SELF, sw_lul73_lul_id_check	, vehicle_type_id) { 600 : gfx_lul73_lul_mid ; gfx_lul73_lul ; }
switch(FEAT_TRAINS, SELF, sw_lul73_grey_id_check, vehicle_type_id) { 600 : gfx_lul73_grey_mid ; gfx_lul73_grey ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_lul67_gfx_auto, current_year){
	0..1997 : sw_lul67_grey_id_check ;
	sw_lul67_lul_id_check ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_lul67_gfx_manual, cargo_subtype){
	0 : sw_lul67_grey_id_check ;
	1 : sw_lul67_lul_id_check ;
	2 : sw_lul73_grey_id_check ;
	sw_lul73_lul_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_lul67_gfx_manual_check, livery_choice){
	1 : sw_lul67_gfx_manual ;
	sw_lul67_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_lul67_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul67_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul67_lights_check_front, position_in_consist){ 0 : gfx_lul67_light_front ; sw_lul67_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul67_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul67_gfx_manual_check ;
	1 : sw_lul67_lights_check_front ;
}


//Purchase sprites


switch(FEAT_TRAINS, SELF, sw_lul67_purchase_gfx, current_year){
	0..1997 : gfx_lul67_purchase_grey ;
	gfx_lul67_purchase_lul ;
}



//Colours


switch(FEAT_TRAINS, SELF, sw_lul67_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul67_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_GREY) ;
	1 : string(STR_LIVERY_LUL_CORP) ;
	2 : string(STR_LIVERY_LUL_73) ;
	3 : string(STR_LIVERY_LUL_73_CORP) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul67_refit_text_check, livery_choice){
	1 : sw_lul67_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul67_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	667	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul67, 667){
	property{
		name                           : string(STR_NAME_LUL67) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1967,1,1) ;
		model_life                     : 35 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 11 ;
		cost_factor                    : 26 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 15 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 90 ;
		loading_speed                  : 30 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 45 mph ;
		power                          : 300 hp ;
		//extra_power_per_wagon          : 100 hp ;
		weight                         : 27 ton ;
		tractive_effort_coefficient    : 0.22 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul67_gfx_spr_stack ;
		purchase                		: sw_lul67_purchase_gfx ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul67_colours_2cc_check ;
		cargo_subtype_text      		: sw_lul67_refit_text_check ;
		can_attach_wagon        		: sw_lul67_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 4 : 15) ;
		purchase_running_cost_factor	: 15 ;
	}
	livery_override (600){
		default                     : sw_lul67_gfx_manual_check ;
		colour_mapping              : sw_lul67_colours_2cc_check ;
		cargo_capacity              : 90 ;
		cargo_subtype_text          : sw_lul67_refit_text_check ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul67, 667){
	property{
		name                           : string(STR_NAME_LUL67_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_1992.pnml" 1
//Spritesets


spriteset(gfx_lul92					, "gfx/EMU/ts1992.png")	{template_7_8(0,	0)}
spriteset(gfx_lul92_mid				, "gfx/EMU/ts1992.png")	{template_7_4(0,	25)}

spriteset(gfx_lul92_purchase		, "gfx/EMU/ts1992.png")	{template_dualhead_purchase(82, 25)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul92_id_check		, vehicle_type_id)		{ 600 : gfx_lul92_mid ; gfx_lul92 ; }



//Colours


switch(FEAT_TRAINS, SELF, sw_lul92_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(company_colour1) ;
}



switch(FEAT_TRAINS, SELF, sw_lul92_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	692	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul92, 692){
	property{
		name                           : string(STR_NAME_LUL92) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1992,1,1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 40 ;
		reliability_decay              : 10 ;
		cost_factor                    : 28 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 16 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 111 ;
		loading_speed                  : 38 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 60 mph ;
		power                          : 300 hp ;
		extra_power_per_wagon          : 100 hp ;
		weight                         : 22 ton ;
		tractive_effort_coefficient    : 0.28 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul92_id_check ;
		purchase                		: gfx_lul92_purchase ;
		sound_effect            		: sw_sfx_tube_modern ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul92_colours_2cc_check ;
		can_attach_wagon        		: sw_lul92_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 3 : 16) ;
		purchase_running_cost_factor	: 16 ;
	}
	livery_override (600){
		default                     : sw_lul92_id_check ;
		colour_mapping              : sw_lul92_colours_2cc_check ;
		cargo_capacity              : 111 ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul92, 692){
	property{
		name                           : string(STR_NAME_LUL92_ALT) ;
	}
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_lul92, 692){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_1995.pnml" 1
//Spritesets


spriteset(gfx_lul95_front			, "gfx/EMU/ts1995.png")	{template_7_8(0,	0)}
spriteset(gfx_lul95_mid				, "gfx/EMU/ts1995.png")	{template_7_4(0,	24)}
spriteset(gfx_lul95_back			, "gfx/EMU/ts1995.png")	{template_7_8(0,	48)}

spriteset(gfx_lul95_purchase		, "gfx/EMU/ts1995.png")	{template_dualhead_purchase(82, 24)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul95_front_check	, position_in_consist)	{ 0 : gfx_lul95_front ; gfx_lul95_back ; }
switch(FEAT_TRAINS, SELF, sw_lul95_id_check		, vehicle_type_id)		{ 600 : gfx_lul95_mid ; sw_lul95_front_check ; }




//Colours


switch(FEAT_TRAINS, SELF, sw_lul95_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(company_colour1) ;
}



switch(FEAT_TRAINS, SELF, sw_lul95_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	695	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul95, 695){
	property{
		name                           : string(STR_NAME_LUL95) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1995,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 13 ;
		cost_factor                    : 32 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 12 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 95 ;
		loading_speed                  : 34 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 62 mph ;
		power                          : 350 hp ;
		extra_power_per_wagon          : 100 hp ;
		weight                         : 27 ton ;
		tractive_effort_coefficient    : 0.25 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul95_id_check ;
		purchase                		: gfx_lul95_purchase ;
		sound_effect            		: sw_sfx_tube_modern ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul95_colours_2cc_check ;
		can_attach_wagon        		: sw_lul95_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 5 : 12) ;
		purchase_running_cost_factor	: 12 ;
	}
	livery_override (600){
		default                     : sw_lul95_id_check ;
		colour_mapping              : sw_lul95_colours_2cc_check ;
		cargo_capacity              : 95 ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul95, 695){
	property{
		name                           : string(STR_NAME_LUL95_ALT) ;
	}
}
}



# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_2009.pnml" 1
//Spritesets


spriteset(gfx_lul09					, "gfx/EMU/ts2009.png")	{template_7_8(0,	0)}
spriteset(gfx_lul09_mid				, "gfx/EMU/ts2009.png")	{template_7_4(0,	25)}

spriteset(gfx_lul09_purchase		, "gfx/EMU/ts2009.png")	{template_dualhead_purchase(82, 25)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul09_id_check		, vehicle_type_id)		{ 600 : gfx_lul09_mid ; gfx_lul09 ; }



//Colours


switch(FEAT_TRAINS, SELF, sw_lul09_colours_2cc_check, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_1cc(company_colour1) ;
}



switch(FEAT_TRAINS, SELF, sw_lul09_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	609	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}




//Item


item(FEAT_TRAINS, item_lul09, 609){
	property{
		name                           : string(STR_NAME_LUL09) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 7 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2009,1,1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 40 ;
		reliability_decay              : 10 ;
		cost_factor                    : 28 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 16 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 105 ;
		loading_speed                  : 38 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 50 mph ;
		power                          : 400 hp ;
		extra_power_per_wagon          : 125 hp ;
		weight                         : 27 ton ;
		tractive_effort_coefficient    : 0.3 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul09_id_check ;
		purchase                		: gfx_lul09_purchase ;
		sound_effect            		: sw_sfx_tube_modern ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul09_colours_2cc_check ;
		can_attach_wagon        		: sw_lul09_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 3 : 16) ;
		purchase_running_cost_factor	: 16 ;
	}
	livery_override (600){
		default                     : sw_lul09_id_check ;
		colour_mapping              : sw_lul09_colours_2cc_check ;
		cargo_capacity              : 105 ;
		weight                      : 20 ;
		create_effect           	: vfx_3rd_only ;
		length						: 7 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul09, 609){
	property{
		name                           : string(STR_NAME_LUL09_ALT) ;
	}
}
}

# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_a60.pnml" 1
//Spritesets

spriteset(gfx_lul_a60_grey			, "gfx/EMU/lul_a60.png")	{template_8_8_networker(0, 0)}
spriteset(gfx_lul_a60_grey_mid		, "gfx/EMU/lul_a60.png")	{template_8_4_networker(0, 25)}
spriteset(gfx_lul_a60_lulred		, "gfx/EMU/lul_a60.png")	{template_8_8_networker(0, 50)}
spriteset(gfx_lul_a60_lulred_mid	, "gfx/EMU/lul_a60.png")	{template_8_4_networker(0, 75)}
spriteset(gfx_lul_a60_lulell		, "gfx/EMU/lul_a60.png")	{template_8_8_networker(180, 50)}
spriteset(gfx_lul_a60_lulell_mid	, "gfx/EMU/lul_a60.png")	{template_8_4_networker(180, 75)}

spriteset(gfx_lul_a60_light_front	, "gfx/EMU/lul_a60.png")	{template_8_8_networker(180, 0)}
spriteset(gfx_lul_a60_light_back	, "gfx/EMU/lul_a60.png")	{template_8_8_networker(180, 25)}

spriteset(gfx_lul_a60_purchase_grey	, "gfx/EMU/lul_a60.png"){template_dualhead_purchase(90, 25)}
spriteset(gfx_lul_a60_purchase_lulred	, "gfx/EMU/lul_a60.png"){template_dualhead_purchase(90, 75)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul_a60_grey_id_check	, vehicle_type_id) { 600 : gfx_lul_a60_grey_mid ; gfx_lul_a60_grey ; }
switch(FEAT_TRAINS, SELF, sw_lul_a60_lulred_id_check	, vehicle_type_id) { 600 : gfx_lul_a60_lulred_mid ; gfx_lul_a60_lulred ; }
switch(FEAT_TRAINS, SELF, sw_lul_a60_lulell_id_check	, vehicle_type_id) { 600 : gfx_lul_a60_lulell_mid ; gfx_lul_a60_lulell ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_lul_a60_auto, current_year){
	0..1992 : sw_lul_a60_grey_id_check ;
	sw_lul_a60_lulred_id_check ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul_a60_manual, cargo_subtype){
	0 : sw_lul_a60_grey_id_check ;
	1 : sw_lul_a60_lulell_id_check ;
	sw_lul_a60_lulred_id_check ;
}


switch(FEAT_TRAINS, SELF, sw_lul_a60_manual_check, livery_choice){
	1 : sw_lul_a60_manual ;
	sw_lul_a60_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul_a60_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul_a60_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul_a60_lights_check_front, position_in_consist){ 0 : gfx_lul_a60_light_front ; sw_lul_a60_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul_a60_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul_a60_manual_check ;
	1 : sw_lul_a60_lights_check_front ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_lul_a60_purchase_gfx, current_year){
	0..1992 : gfx_lul_a60_purchase_grey ;
	gfx_lul_a60_purchase_lulred ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_lul_a60_colours_auto, current_year){
	0..1992 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul_a60_colours_manual, current_year){
	0 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_lul_a60_colours_manual_check, livery_choice){
	1 : sw_lul_a60_colours_manual ;
	sw_lul_a60_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul_a60_colours_2cc_check, colour_scheme_1){
	1 : sw_lul_a60_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul_a60_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_GREY) ;
	1 : string(STR_LIVERY_LUL_ELL) ;
	2 : string(STR_LIVERY_LUL_CORP) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul_a60_refit_text_check, livery_choice){
	1 : sw_lul_a60_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul_a60_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	660	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}


item(FEAT_TRAINS, item_lul_a60, 660){
	property{
		name                           : string(STR_NAME_LUL_A60) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1960,1,1) ;
		model_life                     : 35 ;
		vehicle_life                   : 55 ;
		reliability_decay              : 10 ;
		cost_factor                    : 30 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 21 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 85 ;
		loading_speed                  : 27 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 70 mph ;
		power                          : 340 hp ;
		//extra_power_per_wagon          : 85 hp ;
		weight                         : 31 ton ;
		tractive_effort_coefficient    : 0.21 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul_a60_spr_stack ;
		purchase                		: sw_lul_a60_purchase_gfx ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul_a60_colours_2cc_check ;
		purchase_colour_mapping 		: sw_lul_a60_colours_auto ;
		cargo_subtype_text      		: sw_lul_a60_refit_text_check ;
		can_attach_wagon        		: sw_lul_a60_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 6 : 21) ;
		purchase_running_cost_factor	: 21 ;
	}
	livery_override (600){
		default                     : sw_lul_a60_manual_check ;
		colour_mapping              : sw_lul_a60_colours_2cc_check ;
		cargo_capacity              : 90 ;
		cargo_subtype_text          : sw_lul_a60_refit_text_check ;
		weight                      : 21 ;
		create_effect           	: vfx_3rd_only ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul_a60, 660){
	property{
		name                           : string(STR_NAME_LUL_A60_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_lul_a60, 660){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_c69.pnml" 1
//Spritesets

spriteset(gfx_lul_c69_grey			, "gfx/EMU/lul_c69.png")	{template_8_8_networker(0, 0)}
spriteset(gfx_lul_c69_grey_mid		, "gfx/EMU/lul_c69.png")	{template_8_4_networker(0, 25)}
spriteset(gfx_lul_c69_lulred		, "gfx/EMU/lul_c69.png")	{template_8_8_networker(0, 50)}
spriteset(gfx_lul_c69_lulred_mid	, "gfx/EMU/lul_c69.png")	{template_8_4_networker(0, 75)}

spriteset(gfx_lul_c69_light_front	, "gfx/EMU/lul_c69.png")	{template_8_8_networker(180, 0)}
spriteset(gfx_lul_c69_light_back	, "gfx/EMU/lul_c69.png")	{template_8_8_networker(180, 25)}

spriteset(gfx_lul_c69_purchase_grey	, "gfx/EMU/lul_c69.png"){template_dualhead_purchase(90, 25)}
spriteset(gfx_lul_c69_purchase_lulred	, "gfx/EMU/lul_c69.png"){template_dualhead_purchase(90, 75)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul_c69_grey_id_check	, vehicle_type_id) { 600 : gfx_lul_c69_grey_mid ; gfx_lul_c69_grey ; }
switch(FEAT_TRAINS, SELF, sw_lul_c69_lulred_id_check	, vehicle_type_id) { 600 : gfx_lul_c69_lulred_mid ; gfx_lul_c69_lulred ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_lul_c69_auto, current_year){
	0..1995 : sw_lul_c69_grey_id_check ;
	sw_lul_c69_lulred_id_check ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul_c69_manual, cargo_subtype){
	0 : sw_lul_c69_grey_id_check ;
	sw_lul_c69_lulred_id_check ;
}


switch(FEAT_TRAINS, SELF, sw_lul_c69_manual_check, livery_choice){
	1 : sw_lul_c69_manual ;
	sw_lul_c69_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul_c69_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul_c69_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul_c69_lights_check_front, position_in_consist){ 0 : gfx_lul_c69_light_front ; sw_lul_c69_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul_c69_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul_c69_manual_check ;
	1 : sw_lul_c69_lights_check_front ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_lul_c69_purchase_gfx, current_year){
	0..1992 : gfx_lul_c69_purchase_grey ;
	gfx_lul_c69_purchase_lulred ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_lul_c69_colours_auto, current_year){
	0..1992 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul_c69_colours_manual, current_year){
	0 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_lul_c69_colours_manual_check, livery_choice){
	1 : sw_lul_c69_colours_manual ;
	sw_lul_c69_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul_c69_colours_2cc_check, colour_scheme_1){
	1 : sw_lul_c69_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul_c69_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_GREY) ;
	1 : string(STR_LIVERY_LUL_CORP) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul_c69_refit_text_check, livery_choice){
	1 : sw_lul_c69_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul_c69_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	669	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}


item(FEAT_TRAINS, item_lul_c69, 669){
	property{
		name                           : string(STR_NAME_LUL_C69) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1969,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 13 ;
		cost_factor                    : 26 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 19 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 95 ;
		loading_speed                  : 38 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 45 mph ;
		power                          : 320 hp ;
		//extra_power_per_wagon          : 85 hp ;
		weight                         : 31 ton ;
		tractive_effort_coefficient    : 0.26 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul_c69_spr_stack ;
		purchase                		: sw_lul_c69_purchase_gfx ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul_c69_colours_2cc_check ;
		purchase_colour_mapping 		: sw_lul_c69_colours_auto ;
		cargo_subtype_text      		: sw_lul_c69_refit_text_check ;
		can_attach_wagon        		: sw_lul_c69_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 4 : 19) ;
		purchase_running_cost_factor	: 19 ;
	}
	livery_override (600){
		default                     : sw_lul_c69_manual_check ;
		colour_mapping              : sw_lul_c69_colours_2cc_check ;
		cargo_capacity              : 95 ;
		cargo_subtype_text          : sw_lul_c69_refit_text_check ;
		weight                      : 21 ;
		create_effect           	: vfx_3rd_only ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul_c69, 669){
	property{
		name                           : string(STR_NAME_LUL_C69_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_lul_c69, 669){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_d78.pnml" 1
//Spritesets

spriteset(gfx_lul78_grey		, "gfx/EMU/lul_d78.png")	{template_8_8_networker(0, 0)}
spriteset(gfx_lul78_grey_mid	, "gfx/EMU/lul_d78.png")	{template_8_4_networker(0, 25)}
spriteset(gfx_lul78_lulred		, "gfx/EMU/lul_d78.png")	{template_8_8_networker(0, 50)}
spriteset(gfx_lul78_lulred_mid	, "gfx/EMU/lul_d78.png")	{template_8_4_networker(0, 75)}

spriteset(gfx_lul78_light_front	, "gfx/EMU/lul_d78.png")	{template_8_8_networker(180, 0)}
spriteset(gfx_lul78_light_back	, "gfx/EMU/lul_d78.png")	{template_8_8_networker(180, 25)}

spriteset(gfx_lul78_purchase_grey	, "gfx/EMU/lul_d78.png"){template_dualhead_purchase(90, 25)}
spriteset(gfx_lul78_purchase_lulred	, "gfx/EMU/lul_d78.png"){template_dualhead_purchase(90, 75)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lul78_grey_id_check	, vehicle_type_id) { 600 : gfx_lul78_grey_mid ; gfx_lul78_grey ; }
switch(FEAT_TRAINS, SELF, sw_lul78_lulred_id_check	, vehicle_type_id) { 600 : gfx_lul78_lulred_mid ; gfx_lul78_lulred ; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_lul78_auto, current_year){
	0..1992 : sw_lul78_grey_id_check ;
	sw_lul78_lulred_id_check ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul78_manual, cargo_subtype){
	0 : sw_lul78_grey_id_check ;
	sw_lul78_lulred_id_check ;
}


switch(FEAT_TRAINS, SELF, sw_lul78_manual_check, livery_choice){
	1 : sw_lul78_manual ;
	sw_lul78_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul78_lights_check_back, position_in_consist_from_end){ 0 : gfx_lul78_light_back ; }
switch(FEAT_TRAINS, SELF, sw_lul78_lights_check_front, position_in_consist){ 0 : gfx_lul78_light_front ; sw_lul78_lights_check_back ; }

switch(FEAT_TRAINS, SELF, sw_lul78_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_lul78_manual_check ;
	1 : sw_lul78_lights_check_front ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_lul78_purchase_gfx, current_year){
	0..1992 : gfx_lul78_purchase_grey ;
	gfx_lul78_purchase_lulred ;
}



//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_lul78_colours_auto, current_year){
	0..1992 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_lul78_colours_manual, current_year){
	0 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_lul78_colours_manual_check, livery_choice){
	1 : sw_lul78_colours_manual ;
	sw_lul78_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lul78_colours_2cc_check, colour_scheme_1){
	1 : sw_lul78_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_lul78_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_LUL_GREY) ;
	1 : string(STR_LIVERY_LUL_CORP) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_lul78_refit_text_check, livery_choice){
	1 : sw_lul78_refit_text ;
	CB_RESULT_NO_TEXT ;
}



switch(FEAT_TRAINS, SELF, sw_lul78_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	678	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}


item(FEAT_TRAINS, item_lul78, 678){
	property{
		name                           : string(STR_NAME_LUL78) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1978,1,1) ;
		model_life                     : 35 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 11 ;
		cost_factor                    : 27 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 17 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 95 ;
		loading_speed                  : 30 ;
		track_type                     : SAA4 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 50 mph ;
		power                          : 400 hp ;
		//extra_power_per_wagon          : 100 hp ;
		weight                         : 28 ton ;
		tractive_effort_coefficient    : 0.24 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lul78_spr_stack ;
		purchase                		: sw_lul78_purchase_gfx ;
		sound_effect            		: sw_sfx_tube_gec ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lul78_colours_2cc_check ;
		purchase_colour_mapping 		: sw_lul78_colours_auto ;
		cargo_subtype_text      		: sw_lul78_refit_text_check ;
		can_attach_wagon        		: sw_lul78_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 5 : 17) ;
		purchase_running_cost_factor	: 17 ;
	}
	livery_override (600){
		default                     : sw_lul78_manual_check ;
		colour_mapping              : sw_lul78_colours_2cc_check ;
		cargo_capacity              : 100 ;
		cargo_subtype_text          : sw_lul78_refit_text_check ;
		weight                      : 18 ;
		create_effect           	: vfx_3rd_only ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lul78, 678){
	property{
		name                           : string(STR_NAME_LUL78_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_lul78, 678){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


# 1 "rukts.pnml" 3
# 1 "src/EMU/lul_s.pnml" 1
//Spritesets

spriteset(gfx_lulS_mid		, "gfx/EMU/tube_s.png")	{template_8_4_networker(0, 0)}
spriteset(gfx_lulS_front	, "gfx/EMU/tube_s.png")	{template_8_8_networker(0, 25)}
spriteset(gfx_lulS_back		, "gfx/EMU/tube_s.png")	{template_8_8_networker(0, 50)}
spriteset(gfx_lulS			, "gfx/EMU/tube_s.png")	{template_8_8_networker(0, 75)}

spriteset(gfx_lulS_purchase	, "gfx/EMU/tube_s.png"){template_dualhead_purchase(0, 100)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_lulS_check_back, position_in_consist_from_end){ 0: gfx_lulS_back ; gfx_lulS ;}
switch(FEAT_TRAINS, SELF, sw_lulS_check_front, position_in_consist){ 0: gfx_lulS_front ; sw_lulS_check_back ;}

switch(FEAT_TRAINS, SELF, sw_lulS_id_check	, vehicle_type_id) { 600 : gfx_lulS_mid ; sw_lulS_check_front ; }





//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_lulS_colours_auto, current_year){
	0..1992 : palette_1cc(COLOUR_GREY) ;
	palette_1cc(COLOUR_DARK_BLUE) ;
}

//Manual


switch(FEAT_TRAINS, SELF, sw_lulS_colours_manual_check, livery_choice){
	1 : palette_1cc(COLOUR_DARK_BLUE) ;
	sw_lulS_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_lulS_colours_2cc_check, colour_scheme_1){
	1 : sw_lulS_colours_manual_check ;
	palette_1cc(company_colour1) ;
}



switch(FEAT_TRAINS, SELF, sw_lulS_attach, vehicle_type_id){
	20	: return CB_RESULT_ATTACH_ALLOW ;
	37	: return CB_RESULT_ATTACH_ALLOW ;
	600	: return CB_RESULT_ATTACH_ALLOW ;
	612	: return CB_RESULT_ATTACH_ALLOW ;
    return string(STR_LUL_NO_COUPLE);
}


item(FEAT_TRAINS, item_lulS, 612){
	property{
		name                           : string(STR_NAME_LULS) ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2010,1,1) ;
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life                   : 35 ;
		reliability_decay              : 8 ;
		cost_factor                    : 30 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 14 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 100 ;
		loading_speed                  : 40 ;
		track_type                     : SAA3 ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 62 mph ;
		power                          : 700 hp ;
		extra_power_per_wagon          : 150 hp ;
		weight                         : 30 ton ;
		tractive_effort_coefficient    : 0.22 ;
		air_drag_coefficient           : 0.1 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 1 ;
		ai_special_flag:				AI_FLAG_PASSENGER;
	}
	graphics{
		default                 		: sw_lulS_id_check ;
		purchase                		: gfx_lulS_purchase ;
		sound_effect            		: sw_sfx_tube_modern ;
		create_effect           		: vfx_3rd_only ;
		colour_mapping          		: sw_lulS_colours_2cc_check ;
		purchase_colour_mapping 		: sw_lulS_colours_2cc_check ;
		//cargo_subtype_text      		: sw_lulS_refit_text_check ;
		can_attach_wagon        		: sw_lulS_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 3 : 14) ;
		purchase_running_cost_factor	: 14 ;
	}
	livery_override (600){
		default                     : sw_lulS_id_check ;
		colour_mapping              : sw_lulS_colours_2cc_check ;
		cargo_capacity              : 105 ;
		//cargo_subtype_text          : sw_lulS_refit_text_check ;
		weight                      : 18 ;
		create_effect           	: vfx_3rd_only ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_lulS, 612){
	property{
		name                           : string(STR_NAME_LULS_ALT) ;
	}
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_lulS, 612){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


# 1 "rukts.pnml" 3

# 1 "src/STEAM_LOCO/narrow_garratt.pnml" 1
//Narrow Garrat

//Graphics

//Spritesets

spriteset(gfx_nrwgarratt_coal       , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 ,  0 ,  8 , 14 , -3 , -11] //North
	[ 10 ,  0 , 12 , 13 , -3 , -9 ] //North East
	[ 28 ,  0 , 17 , 13 ,  0 , -8 ] //East
	[ 54 ,  0 , 12 , 13 ,  2 , -5 ] //South East
	[ 72 ,  0 ,  8 , 14 , -3 , -3 ] //South
	[ 82 ,  0 , 12 , 13 , -14, -4 ] //South West
	[100 ,  0 , 17 , 13 , -17, -8 ] //West
	[126 ,  0 , 12 , 13 , -7 , -9 ] //North West
}
spriteset(gfx_nrwgarratt_coal_rev   , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 ,  0 ,  8 , 14 , -3 , -11] //North
	[ 82 ,  0 , 12 , 13 , -6 , -8 ] //North East
	[100 ,  0 , 17 , 13 , -1 , -8 ] //East
	[126 ,  0 , 12 , 13 ,  1 , -5 ] //South East
	[  0 ,  0 ,  8 , 14 , -3 , -3 ] //South
	[ 10 ,  0 , 12 , 13 , -11, -5 ] //South West
	[ 28 ,  0 , 17 , 13 , -16, -8 ] //West
	[ 54 ,  0 , 12 , 13 , -6 , -9 ] //North West
}




spriteset(gfx_nrwgarratt_water      , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 , 35 ,  8 , 14 , -3 , -11] //North
	[ 82 , 35 , 12 , 13 , -4 , -9 ] //North East
	[100 , 35 , 17 , 13 , -1 , -8 ] //East
	[126 , 35 , 12 , 13 ,  1 , -5 ] //South East
	[  0 , 35 ,  8 , 14 , -3 , -3 ] //South
	[ 10 , 35 , 12 , 13 , -13, -4 ] //South West
	[ 28 , 35 , 17 , 13 , -16, -8 ] //West
	[ 54 , 35 , 12 , 13 , -6 , -9 ] //North West
}
spriteset(gfx_nrwgarratt_water_rev  , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 , 35 ,  8 , 14 , -3 , -11] //North
	[ 10 , 35 , 12 , 13 , -5 , -8 ] //North East
	[ 28 , 35 , 17 , 13 ,  0 , -8 ] //East
	[ 54 , 35 , 12 , 13 ,  2 , -5 ] //South East
	[ 72 , 35 ,  8 , 14 , -3 , -3 ] //South
	[ 82 , 35 , 12 , 13 , -12, -5 ] //South West
	[100 , 35 , 17 , 13 , -17, -8 ] //West
	[126 , 35 , 12 , 13 , -7 , -9 ] //North West
}




spriteset(gfx_nrwgarratt_boiler     , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 , 15 ,  8 , 19 , -3 , -13] //North
	[ 82 , 15 , 16 , 15 , -7 , -10] //North East
	[100 , 15 , 24 , 13 , -6 , -8 ] //East
	[126 , 15 , 16 , 15 , -1 , -6 ] //South East
	[  0 , 15 ,  8 , 19 , -3 , -7 ] //South
	[ 10 , 15 , 16 , 15 , -15, -5 ] //South West
	[ 28 , 15 , 24 , 13 , -18, -8 ] //West
	[ 54 , 15 , 16 , 15 , -7 , -10] //North West
}
spriteset(gfx_nrwgarratt_boiler_rev , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 , 15 ,  8 , 19 , -3 , -13] //North
	[ 10 , 15 , 16 , 15 , -9 , -8 ] //North East
	[ 28 , 15 , 24 , 13 , -6 , -8 ] //East
	[ 54 , 15 , 16 , 15 , -1 , -7 ] //South East
	[ 72 , 15 ,  8 , 19 , -3 , -7 ] //South
	[ 82 , 15 , 16 , 15 , -13, -7 ] //South West
	[100 , 15 , 24 , 13 , -18, -8 ] //West
	[126 , 15 , 16 , 15 , -7 , -9 ] //North West
}

spriteset(gfx_nrwgarratt_purchase  , "gfx/STEAM_LOCO/narrow_garrat.png"){ template_purchase(218,50) }

switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_tender_front_check_one, vehicle_is_reversed){ 1 : gfx_nrwgarratt_coal   ; gfx_nrwgarratt_water_rev  ; }
switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_tender_front_check_two, vehicle_is_reversed){ 1 : gfx_nrwgarratt_water  ; gfx_nrwgarratt_coal_rev   ; }
switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_boiler_front_check    , vehicle_is_reversed){ 1 : gfx_nrwgarratt_boiler ; gfx_nrwgarratt_boiler_rev ; }

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_gfx_decider, ( position_in_vehid_chain + 1 ) % 3){
	1 : sw_nrwgarratt_tender_front_check_two ;
	2 : sw_nrwgarratt_boiler_front_check ;
	sw_nrwgarratt_tender_front_check_one ;
}



//Switches

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_articulated, extra_callback_info1){
	1 : item_nrwgarratt;
	2 : item_nrwgarratt ;
	CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_length, ( position_in_vehid_chain + 1 ) % 3){
	2 : 5 ;
	4 ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_vfx_check, ( position_in_vehid_chain + 1 ) % 3){
	2 : vfx_steam ;
	return 0 ;
}

//Cargo refit text

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_refit_text, cargo_subtype){
	0 : string(STR_COLOUR_DKBLUE) ;
	1 : string(STR_COLOUR_RED) ;
	2 : string(STR_COLOUR_GREEN) ;
	3 : string(STR_COLOUR_GREY) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_refit_text_check, livery_choice && colour_scheme_1){
	1 : sw_nrwgarratt_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Colours 

random_switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_random_colours){
	1 : palette_1cc(COLOUR_DARK_BLUE) ;
	1 : palette_1cc(COLOUR_RED) ;
	1 : palette_1cc(COLOUR_GREEN) ;
	1 : palette_1cc(COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_manual, cargo_subtype){
	1 : palette_1cc(COLOUR_RED) ;
	2 : palette_1cc(COLOUR_GREEN) ;
	3 : palette_1cc(COLOUR_GREY) ; 
	palette_1cc(COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_colours_manual_check, livery_choice){
	1 : sw_nrwgarratt_manual ;
	sw_nrwgarratt_random_colours ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_2cc_check, colour_scheme_1){
	1 : sw_nrwgarratt_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Main item

item(FEAT_TRAINS, item_nrwgarratt, 1000){
	property{
		name                           : string(STR_NAME_NRWGARRATT) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1937,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 20 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 10 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 60 ;
		speed                          : 50 mph ;
		track_type                     : NAAN ;
		power                          : 633 hp ;
		weight                         : 60 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.12 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 4 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_nrwgarratt_gfx_decider ;
		colour_mapping                 : sw_nrwgarratt_2cc_check ;
		purchase                       : gfx_nrwgarratt_purchase ;
		sound_effect                   : sw_sfx_steam ;
		cargo_subtype_text             : sw_nrwgarratt_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		articulated_part               : sw_nrwgarratt_articulated ;
		length                         : sw_nrwgarratt_length ;
		create_effect                  : sw_nrwgarratt_vfx_check ;
		running_cost_factor            : return(current_speed == 0 ? 8 : 20) ;
		purchase_running_cost_factor   : return 20 ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/STEAM_LOCO/fairlie.pnml" 1
//Fairlie


//Sprite sets

spriteset(fairlie          , "gfx/STEAM_LOCO/fairlie.png" ){ template_narrow_6_4(  0 , 43 ) }
spriteset(fairlie_purchase , "gfx/STEAM_LOCO/fairlie.png" ){ template_purchase(  0 , 63 ) }


//Switches
random_switch(FEAT_TRAINS, SELF, sw_fairlie_random_colours){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_fairlie_colours, colour_scheme_1){
	1 : sw_fairlie_random_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//switch(FEAT_TRAINS, SELF, 

//Item

item(FEAT_TRAINS, item_fairlie, 1001){
	property{
		name                           : string(STR_NAME_FAIRLIE) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1870,1,1) ;
		refittable_cargo_classes       : 0 ;
		model_life                     : 65 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 7 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 34 ;
		speed                          : 35 mph ;
		track_type                     : NAAN ;
		power                          : 350 kW ;
		weight                         : 35 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.18 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 6 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : fairlie ;
		colour_mapping                 : sw_fairlie_colours ;
		purchase                       : fairlie_purchase ;
		sound_effect                   : sw_sfx_steam ;
		can_attach_wagon               : sw_all_but_MU90 ;
		create_effect                  : vfx_steam ;
		running_cost_factor            : return(current_speed == 0 ? 8 : 20) ;
		purchase_running_cost_factor   : return 20 ;
	}
}

# 1 "rukts.pnml" 3

# 1 "src/WAGON/narrow_coach_one.pnml" 1
//Narrow coach one

//Spritesets

spriteset(gfx_nrwcoachone_1tone   , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 0)      }
spriteset(gfx_nrwcoachone_2tone   , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 23)     }
spriteset(gfx_nrwcoachone_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(63, 0) }

//Switches

//Switches

random_switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_auto){
	1 : gfx_nrwcoachone_1tone ;
	2 : gfx_nrwcoachone_2tone ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_manual, cargo_subtype){
	1 : gfx_nrwcoachone_1tone ;
	gfx_nrwcoachone_2tone ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_manual_check, livery_choice){
	1 : sw_nrwcoachone_gfx_manual ;
	sw_nrwcoachone_gfx_auto ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_NRW_2TONE) ;
	1 : string(STR_LIVERY_NRW_1TONE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_refit_text_check, livery_choice){
	1 : sw_nrwcoachone_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping

random_switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_auto){
	dependent : sw_nrwcoachone_gfx_auto ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_manual_check, livery_choice){
	1 : sw_nrwcoachone_colour_manual ;
	sw_nrwcoachone_colour_auto ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_2cc_check, colour_scheme_1){
	1 : sw_nrwcoachone_colour_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


item(FEAT_TRAINS, item_nrwcoachone, 9060){
	property{
		name						   : string(STR_NAME_NRWCOACHONE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 4 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1870, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 60 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 28 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 15 ;
		loading_speed                  : 10 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 6 ton ;
	}
	graphics{
		default                 : sw_nrwcoachone_gfx_manual_check ;
		purchase                : gfx_nrwcoachone_purchase ;
		purchase_colour_mapping : palette_2cc(COLOUR_CREAM, COLOUR_RED) ;
		cargo_subtype_text      : sw_nrwcoachone_refit_text_check ;
		colour_mapping          : sw_nrwcoachone_colour_2cc_check ;
	}
}


//Bristol Carriage

spriteset(gfx_brstcoach,          "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4(    0, 150) }
spriteset(gfx_brstcoach_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(0, 170) }

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_brstcoach_colours, colour_scheme_1){
	1 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item

item(FEAT_TRAINS, item_brstcoach, 9061){
	property{
		name						   : string(STR_NAME_NRWCOACHTWO) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 6 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1900, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 43 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 15 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 10 ton ;
	}
	graphics{
		default                 : gfx_brstcoach ;
		purchase                : gfx_brstcoach_purchase ;
		colour_mapping          : sw_brstcoach_colours ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/narrow_slate_wagon.pnml" 1
//Slate wagon

//Spritesets

spriteset(gfx_slatewgn_base      , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 50)   }
spriteset(gfx_slatewgn_coal_h    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 75)   }
spriteset(gfx_slatewgn_coal_f    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(57, 75)   }
spriteset(gfx_slatewgn_generic_h , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(114, 75) }
spriteset(gfx_slatewgn_generic_f , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(114, 75) }
spriteset(gfx_slatewgn_iron_h    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 91)   }
spriteset(gfx_slatewgn_iron_f    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(57, 91)   }


spriteset(gfx_slatewgn_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(63, 50) }

//Switches


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_slatewgn_coal_load_check, cargo_count){
	1..4  : gfx_slatewgn_coal_h ;
	5..8  : gfx_slatewgn_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_slatewgn_iron_load_check, cargo_count){
	1..4  : gfx_slatewgn_iron_h ;
	5..8  : gfx_slatewgn_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_slatewgn_generic_load_check, cargo_count){
	1..4  : gfx_slatewgn_generic_h ;
	5..8  : gfx_slatewgn_generic_f ;
}


switch(FEAT_TRAINS, PARENT, sw_gfx_slatewgn_cargo_decider, most_common_cargo_type){
	COAL : sw_slatewgn_coal_load_check ;
	IORE : sw_slatewgn_iron_load_check ;
	CORE : sw_slatewgn_iron_load_check ;
	COPR : sw_slatewgn_iron_load_check ;
	AORE : sw_slatewgn_iron_load_check ;
	sw_slatewgn_generic_load_check ;
}


switch(FEAT_TRAINS, SELF, sw_slatewgn_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : gfx_slatewgn_base ;
	2 : sw_gfx_slatewgn_cargo_decider ;
}


//Item

item(FEAT_TRAINS, item_slatewgn, 10003){
	property{
		name						   : string(STR_NAME_NRWSLATE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 4 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1870, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 60 ;
		cost_factor                    : 12 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 32 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_BULK ;
		non_refittable_cargo_classes   : bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE) ;
		cargo_allow_refit              : [COAL, GOLD, IORE, CORE, DIAM, AORE, PORE, COPR] ;
		cargo_capacity                 : 8 ;
		loading_speed                  : 7 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 5 ton ;
	}
	graphics{
		default                 : sw_slatewgn_spr_stack ;
		purchase                : gfx_slatewgn_purchase ;
	}
}
# 1 "rukts.pnml" 3
# 1 "src/WAGON/narrow_plank_wagon.pnml" 1
//Narrow bulk wagon

//Sprite sets

spriteset(gfx_nrwplank_base    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4(   0, 107) }
spriteset(gfx_nrwplank_coal_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 107) }
spriteset(gfx_nrwplank_coal_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 107) }
spriteset(gfx_nrwplank_iron_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 127) }
spriteset(gfx_nrwplank_iron_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 127) }
spriteset(gfx_nrwplank_gnrc_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 147) }
spriteset(gfx_nrwplank_gnrc_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 147) }
spriteset(gfx_nrwplank_sand_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 167) }
spriteset(gfx_nrwplank_sand_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 167) }

spriteset(gfx_nrwplank_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(0,127) }


//Switches

//Graphics switches

switch(FEAT_TRAINS, SELF, sw_nrwplank_coal_load_check, cargo_count){
	1..6   : gfx_nrwplank_coal_h ;
	7..15  : gfx_nrwplank_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_iron_load_check, cargo_count){
	1..6   : gfx_nrwplank_iron_h ;
	7..15  : gfx_nrwplank_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_gnrc_load_check, cargo_count){
	1..6   : gfx_nrwplank_gnrc_h ;
	7..15  : gfx_nrwplank_gnrc_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_sand_load_check, cargo_count){
	1..6   : gfx_nrwplank_sand_h ;
	7..15  : gfx_nrwplank_sand_f ;
}


switch(FEAT_TRAINS, PARENT, sw_gfx_nrwplank_cargo_decider, most_common_cargo_type){
	COAL : sw_nrwplank_coal_load_check ;
	IORE : sw_nrwplank_iron_load_check ;
	CORE : sw_nrwplank_iron_load_check ;
	COPR : sw_nrwplank_iron_load_check ;
	PORE : sw_nrwplank_iron_load_check ;
	AORE : sw_nrwplank_iron_load_check ;
	SAND : sw_nrwplank_sand_load_check ;
	WHEA : sw_nrwplank_sand_load_check ;
	GOLD : sw_nrwplank_sand_load_check ;
	CERA : sw_nrwplank_sand_load_check ;
	sw_nrwplank_gnrc_load_check ;
}



switch(FEAT_TRAINS, SELF, sw_nrwplank_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : gfx_nrwplank_base ;
	2 : sw_gfx_nrwplank_cargo_decider ;
}

//Colour mapping

random_switch(FEAT_TRAINS, PARENT, sw_nrwplank_random_colours){
	1 : palette_1cc(COLOUR_GREY) ;
	1 : palette_1cc(COLOUR_WHITE) ;
	1 : palette_1cc(COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_colours_2cc_check, colour_scheme_2){
	1 : sw_nrwplank_random_colours ;
	palette_1cc(company_colour2) ;
}

//Item

item(FEAT_TRAINS, item_nrwplank, 10004){
	property{
		name						   : string(STR_NAME_NRWPLANK) ;
		misc_flags                     : bitmask(TRAIN_FLAG_AUTOREFIT, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 6 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1920, 1, 1) ;
		model_life                     : 60 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 50 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : bitmask(CC_BULK, CC_POWDERIZED) ;
		non_refittable_cargo_classes   : bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_NON_POURABLE) ;
		cargo_allow_refit              : [COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity                 : 15 ;
		loading_speed                  : 10 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 7 ton ;
	}
	graphics{
		default                 : sw_nrwplank_spr_stack ;
		purchase                : gfx_nrwplank_purchase ;
		colour_mapping          : sw_nrwplank_colours_2cc_check ;
	}
}
# 1 "rukts.pnml" 3

# 1 "src/DMU/class_165.pnml" 1
spriteset(spriteset_465_nse_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_465_nse_t, "gfx/EMU/networker2.png") {template_8_4_networker(179, 0)}
spriteset(spriteset_465_cnx_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_465_cnx_t, "gfx/EMU/networker2.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_465_sey_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 350)}
spriteset(spriteset_465_sey_t, "gfx/EMU/networker2.png") {template_8_4_networker(179, 200)}
spriteset(spriteset_465_seb_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_465_seb_t, "gfx/EMU/networker2.png") {template_8_4_networker(0, 400)}

spriteset(spriteset_365_nse_p, "gfx/EMU/networker2.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_365_cnx_p, "gfx/EMU/networker2.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_365_fcc_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 375)}
spriteset(spriteset_365_fcc_t, "gfx/EMU/networker2.png") {template_8_4_networker(269, 200)}
spriteset(spriteset_365_fcc_p, "gfx/EMU/networker2.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_365_gtr_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 575)}
spriteset(spriteset_365_gtr_t, "gfx/EMU/networker2.png") {template_8_4_networker(90, 400)}
spriteset(spriteset_365_gtr_p, "gfx/EMU/networker2.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_365_nse_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(179, 50)}
spriteset(spriteset_365_cnx_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(0, 250)}
spriteset(spriteset_365_fcc_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(179, 250)}
spriteset(spriteset_365_gtr_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(0, 450)}

spriteset(spriteset_365_pan_up, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_365_pan_up_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 50)}

spriteset(spriteset_465_headlights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_465_taillights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_365_headlights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_365_taillights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 500)}

spriteset(spriteset_465_nse_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 400)}
spriteset(spriteset_465_cnx_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 413)}
spriteset(spriteset_465_sey_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 426)}
spriteset(spriteset_465_seb_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 439)}
spriteset(spriteset_365_fcc_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(259, 426)}
spriteset(spriteset_365_gtr_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(259, 439)}

switch(FEAT_TRAINS, SELF, sw_465_purchase, current_year){
	1983 .. 1995: spriteset_465_nse_purchase;
	1996 .. 2005: spriteset_465_cnx_purchase;
	2006 .. 2012: spriteset_465_sey_purchase;
	spriteset_465_seb_purchase;
}

switch(FEAT_TRAINS, SELF, sw_365_purchase, current_year){
	1983 .. 1995: spriteset_465_nse_purchase;
	1996 .. 2005: spriteset_465_cnx_purchase;
	2006 .. 2012: spriteset_365_fcc_purchase;
	spriteset_365_gtr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_365_pantograph_livery, cargo_subtype){
	0:spriteset_365_nse_p;
	1:spriteset_365_cnx_p;
	2:spriteset_365_fcc_p;
	3:spriteset_365_gtr_p;
}

switch(FEAT_TRAINS, SELF, sw_365_pantograph_livery_r, cargo_subtype){
	0:spriteset_365_nse_p_r;
	1:spriteset_365_cnx_p_r;
	2:spriteset_365_fcc_p_r;
	3:spriteset_365_gtr_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_d_livery, cargo_subtype){
	0:spriteset_465_nse_d;
	1:spriteset_465_cnx_d;
	2:spriteset_365_fcc_d;
	3:spriteset_365_gtr_d;
}

switch(FEAT_TRAINS, SELF, sw_365_t_livery, cargo_subtype){
	0:spriteset_465_nse_t;
	1:spriteset_465_cnx_t;
	2:spriteset_365_fcc_t;
	3:spriteset_365_gtr_t;
}

switch(FEAT_TRAINS, SELF, sw_465_d_livery, cargo_subtype){
	0:spriteset_465_nse_d;
	1:spriteset_465_cnx_d;
	2:spriteset_465_sey_d;
	3:spriteset_465_seb_d;
}

switch(FEAT_TRAINS, SELF, sw_465_t_livery, cargo_subtype){
	0:spriteset_465_nse_t;
	1:spriteset_465_cnx_t;
	2:spriteset_465_sey_t;
	3:spriteset_465_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_decider_d, current_year){
	1983 .. 1995: spriteset_465_nse_d;
	1996 .. 2005: spriteset_465_cnx_d;
	2006 .. 2012: spriteset_465_sey_d;
	spriteset_465_seb_d;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_d, current_year){
	1983 .. 1995: spriteset_465_nse_d;
	1996 .. 2005: spriteset_465_cnx_d;
	2006 .. 2012: spriteset_365_fcc_d;
	spriteset_365_gtr_d;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_465_nse_t;
	1996 .. 2005: spriteset_465_cnx_t;
	2006 .. 2012: spriteset_465_sey_t;
	spriteset_465_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_465_nse_t;
	1996 .. 2005: spriteset_465_cnx_t;
	2006 .. 2012: spriteset_365_fcc_t;
	spriteset_365_gtr_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_p, current_year){
	1983 .. 1995: spriteset_365_nse_p;
	1996 .. 2005: spriteset_365_cnx_p;
	2006 .. 2012: spriteset_365_fcc_p;
	spriteset_365_gtr_p;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_p_r, current_year){
	1983 .. 1995: spriteset_365_nse_p_r;
	1996 .. 2005: spriteset_365_cnx_p_r;
	2006 .. 2012: spriteset_365_fcc_p_r;
	spriteset_365_gtr_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_d, livery_choice){
	1: sw_365_d_livery;
	sw_365_passenger_livery_decider_d;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_t, livery_choice){
	1: sw_365_t_livery;
	sw_365_passenger_livery_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_auto_decider_d, livery_choice){
	1: sw_465_d_livery;
	sw_465_passenger_livery_decider_d;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_auto_decider_t, livery_choice){
	1: sw_465_t_livery;
	sw_465_passenger_livery_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_p, livery_choice){
	1: sw_365_pantograph_livery;
	sw_365_passenger_livery_decider_p;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_p_r, livery_choice){
	1: sw_365_pantograph_livery_r;
	sw_365_passenger_livery_decider_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_livery_t, position_in_vehid_chain){
	0: sw_365_passenger_livery_auto_decider_p;
	sw_365_passenger_livery_auto_decider_t;
}
	
switch(FEAT_TRAINS, SELF, sw_365_livery_t_r, position_in_vehid_chain_from_end){
	0: sw_365_passenger_livery_auto_decider_p_r;
	sw_365_passenger_livery_auto_decider_t;
}

switch(FEAT_TRAINS, PARENT, sw_365_stack_t, vehicle_is_reversed){
	0: sw_365_livery_t;
	sw_365_livery_t_r;
}

switch(FEAT_TRAINS, SELF, sw_365_livery_t_p, position_in_vehid_chain){
	0: spriteset_365_pan_up;
}
	
switch(FEAT_TRAINS, SELF, sw_365_livery_t_r_p, position_in_vehid_chain_from_end){
	0: spriteset_365_pan_up_r;
}

switch(FEAT_TRAINS, PARENT, sw_365_stack_t_p, vehicle_is_reversed){
	0: sw_365_livery_t_p;
	sw_365_livery_t_r_p;
}

switch(FEAT_TRAINS, SELF, sw_465_lights_f, position_in_consist){
	0: spriteset_465_headlights;
}
	
switch(FEAT_TRAINS, SELF, sw_465_lights, position_in_consist_from_end){
	0: spriteset_465_taillights;
	sw_465_lights_f;
}

switch(FEAT_TRAINS, SELF, sw_365_lights_f, position_in_consist){
	0: spriteset_365_headlights;
}
	
switch(FEAT_TRAINS, SELF, sw_365_lights, position_in_consist_from_end){
	0: spriteset_365_taillights;
	sw_365_lights_f;
}

switch(FEAT_TRAINS, SELF, sw_365_lights_decider, cargo_subtype){
	0:sw_465_lights;
	1:sw_465_lights;
	2:sw_365_lights;
	3:sw_365_lights;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_lights_decider, current_year){
	1983 .. 1995: sw_465_lights;
	1996 .. 2005: sw_465_lights;
	2006 .. 2012: sw_365_lights;
	sw_365_lights;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_lights_auto_decider, livery_choice){
	1: sw_365_lights_decider;
	sw_365_passenger_lights_decider;
}

switch(FEAT_TRAINS, SELF, sw_365_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_365_passenger_livery_auto_decider_d;
	1 : sw_365_passenger_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_365_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_365_stack_t;
	1 : sw_365_stack_t_p;
}

switch(FEAT_TRAINS, SELF, sw_465_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_465_passenger_livery_auto_decider_d;
	1 : sw_465_lights;
}

switch(FEAT_TRAINS, SELF, sw_465_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_465_passenger_livery_auto_decider_t;
}

random_switch(FEAT_TRAINS, SELF, sw_465_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_465_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_365_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK);
}

random_switch(FEAT_TRAINS, SELF, sw_365_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_auto, current_year){
	1983 .. 1995: sw_465_nse_colour_mapping;
	1996 .. 2005: sw_465_cnx_colour_mapping;
	2006 .. 2012: sw_365_fcc_colour_mapping;
	sw_365_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_auto, current_year){
	1983 .. 1995: sw_465_nse_colour_mapping;
	sw_465_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_manual, cargo_subtype){
	0 : sw_465_nse_colour_mapping;
	1 : sw_465_cnx_colour_mapping;
	2 : sw_365_fcc_colour_mapping;
	3 : sw_365_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_manual, cargo_subtype){
	0 : sw_465_nse_colour_mapping;
	1..3 : sw_465_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_manual_check, livery_choice){
	1 : sw_365_colour_mapping_manual ;
	sw_365_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_decider, colour_scheme_1){
	1 : sw_365_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_manual_check, livery_choice){
	1 : sw_465_colour_mapping_manual ;
	sw_465_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_decider, colour_scheme_1){
	1 : sw_465_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_365_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	365: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_365), string(STR_NAME_MU90));
}

switch(FEAT_TRAINS, SELF, sw_465_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	465: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_465), string(STR_NAME_MU90));
}

switch(FEAT_TRAINS, SELF, sw_365_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_FCC);
	3: return string(STR_LIVERY_GTR);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_365_refit_text_decider, livery_choice){
	1 : sw_365_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_465_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_SE_YELLOW);
	3: return string(STR_LIVERY_SE_BLUE);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_465_refit_text_decider, livery_choice){
	1 : sw_465_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

item (FEAT_TRAINS, item_365, 365) {
	property {
		name: 							string(STR_NAME_365);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1994, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					53;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							1680 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.09;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				190;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_365_coupling_restrictions;
		default: 							sw_365_default;
		purchase:							sw_365_purchase;
		cargo_subtype_text:					sw_365_refit_text_decider ;
		colour_mapping:						sw_365_colour_mapping_decider ;
		purchase_colour_mapping:			sw_365_colour_mapping_auto ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
		purchase_running_cost_factor : 30;
}
		livery_override (item_MU90) {
		cargo_capacity: 85;
		default: sw_365_default_t;
		colour_mapping:	sw_365_colour_mapping_decider;
		cargo_subtype_text: sw_365_refit_text_decider ;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_365, 365){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_365, 365){
	property{
		name                           : string(STR_NAME_365_ALT) ;
	}
}
}



item (FEAT_TRAINS, item_465, 465) {
	property {
		name: 							string(STR_NAME_465);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					40;
		cost_factor:					45;
		running_cost_factor:			27;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_PASSENGER ;
		power:							3000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					95;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.18;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				165;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_465_coupling_restrictions;
		default: 							sw_465_default;
		purchase:							sw_465_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_465_refit_text_decider ;
		colour_mapping:						sw_465_colour_mapping_decider ;
		purchase_colour_mapping:			sw_465_colour_mapping_auto ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 7 : 27) ;
		purchase_running_cost_factor:		27 ;
}
		livery_override (item_MU90) {
		cargo_capacity: 100;
		default: sw_465_default_t;
		colour_mapping:	sw_465_colour_mapping_decider;
		cargo_subtype_text: sw_465_refit_text_decider ;
}
}
/* 
if (vehicle_selection < 3){
item (FEAT_TRAINS, item_465, 465){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
} */


if (alt_names == 1){
item (FEAT_TRAINS, item_465, 465){
	property{
		name                           : string(STR_NAME_465_ALT) ;
	}
}
}




//Class 165


spriteset(gfx_165_nse_d,		"gfx/EMU/networker2.png"){template_8_8_networker(179,100)}
spriteset(gfx_165_nse_t,		"gfx/EMU/networker2.png"){template_8_4_networker(179,25)}
spriteset(gfx_165_thames_d,		"gfx/EMU/networker2.png"){template_8_8_networker(0,300)}
spriteset(gfx_165_thames_t,		"gfx/EMU/networker2.png"){template_8_4_networker(0,225)}
spriteset(gfx_165_fgw_d,		"gfx/EMU/networker2.png"){template_8_8_networker(179,300)}
spriteset(gfx_165_fgw_t,		"gfx/EMU/networker2.png"){template_8_4_networker(179,225)}
spriteset(gfx_165_gwr_d,		"gfx/EMU/networker2.png"){template_8_8_networker(0,500)}
spriteset(gfx_165_gwr_t,		"gfx/EMU/networker2.png"){template_8_4_networker(0,425)}

spriteset(gfx_165_nse_purch,	"gfx/EMU/networker2.png"){template_dualhead_purchase(259,400)}
spriteset(gfx_165_thames_purch,	"gfx/EMU/networker2.png"){template_dualhead_purchase(259,413)}
spriteset(gfx_165_fgw_purch,	"gfx/EMU/networker2.png"){template_dualhead_purchase(179,452)}
spriteset(gfx_165_gwr_purch,	"gfx/EMU/networker2.png"){template_dualhead_purchase(259,452)}


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_165_nse_id_check, vehicle_type_id){ item_MU90 : gfx_165_nse_t ; gfx_165_nse_d ; }
switch(FEAT_TRAINS, SELF, sw_165_thames_id_check, vehicle_type_id){ item_MU90 : gfx_165_thames_t ; gfx_165_thames_d ; }
switch(FEAT_TRAINS, SELF, sw_165_fgw_id_check, vehicle_type_id){ item_MU90 : gfx_165_fgw_t ; gfx_165_fgw_d ; }
switch(FEAT_TRAINS, SELF, sw_165_gwr_id_check, vehicle_type_id){ item_MU90 : gfx_165_gwr_t ; gfx_165_gwr_d ; }

switch(FEAT_TRAINS, SELF, sw_165_gfx_auto, current_year){
	1990..1996	: sw_165_nse_id_check ;
	1997..2005	: sw_165_thames_id_check ;
	2006..2015	: sw_165_fgw_id_check ;
	sw_165_gwr_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_165_gfx_manual, cargo_subtype){
	1 : sw_165_thames_id_check ;
	2 : sw_165_fgw_id_check ;
	3 : sw_165_gwr_id_check ;
	sw_165_nse_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_165_gfx_manual_check, livery_choice){
	1 : sw_165_gfx_manual ;
	sw_165_gfx_auto ;
}


switch(FEAT_TRAINS, SELF, sw_165_gfx_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_165_gfx_manual_check ;
	1 : sw_465_lights ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_165_purch_gfx, current_year){
	1990..1996	: gfx_165_nse_purch ;
	1997..2005	: gfx_165_thames_purch ;
	2006..2015	: gfx_165_fgw_purch ;
	gfx_165_gwr_purch ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_165_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_NSE) ;
	1 : string(STR_LIVERY_THAMES_TRAINS) ;
	2 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	3 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_165_refit_text_check, livery_choice){
	1 : sw_165_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Colours

switch(FEAT_TRAINS, SELF, sw_165_col_auto, current_year){
	1990..1996	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1997..2005	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREEN) ;
	2006..2015	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_165_col_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREEN) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	3 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_165_col_manual_check, livery_choice){
	1 : sw_165_col_manual ;
	sw_165_col_auto ;
}

switch(FEAT_TRAINS, SELF, sw_165_col_2cc_check, colour_scheme_1){
	1 : sw_165_col_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



switch(FEAT_TRAINS, SELF, sw_165_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	165: return CB_RESULT_ATTACH_ALLOW;
	168: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_165), string(STR_NAME_MU90));
}



item (FEAT_TRAINS, item_165, 165) {
	property {
		name: 							string(STR_NAME_165);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1992, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					40;
		reliability_decay:				10;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					28;
		cost_factor:					52;
		running_cost_factor:			48;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							90 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							522 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					95;
		weight:							37 ton;
		engine_class:					ENGINE_CLASS_DIESEL;
		tractive_effort_coefficient:	0.21;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				165;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_165_coupling_restrictions;
		default: 							sw_165_gfx_spr_stack;
		purchase:							sw_165_purch_gfx;
		create_effect:						vfx_diesel_default;
		cargo_subtype_text:					sw_165_refit_text_check ;
		colour_mapping:						sw_165_col_2cc_check ;
		purchase_colour_mapping:			sw_165_col_auto ;
		sound_effect:						sw_sfx_dmu_one ;
		running_cost_factor:				return(current_speed == 0 ? 13 : 48) ;
		purchase_running_cost_factor:		48 ;
	}
	livery_override (item_MU90) {
		cargo_capacity: 100;
		default: sw_165_gfx_spr_stack;
		colour_mapping:	sw_165_col_2cc_check;
		cargo_subtype_text: sw_165_refit_text_check ;
		power: 261 ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_165, 165){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_165, 165){
	property{
		name                           : string(STR_NAME_165_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/EMU/class_395.pnml" 1
//Head car outside
spriteset(spriteset_395_d, "gfx/EMU/class_395.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_iet_d_hitachi, "gfx/EMU/class_395.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_iet_d_gwr, "gfx/EMU/class_395.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_iet_d_tpe, "gfx/EMU/class_395.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_iet_d_vtec, "gfx/EMU/class_395.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_iet_d_lner, "gfx/EMU/class_395.png") {template_8_8_networker(0, 375)}
//Head car inside
spriteset(spriteset_395_i, "gfx/EMU/class_395.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_iet_i_hitachi, "gfx/EMU/class_395.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_iet_i_gwr, "gfx/EMU/class_395.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_iet_i_tpe, "gfx/EMU/class_395.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_iet_i_vtec, "gfx/EMU/class_395.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_iet_i_lner, "gfx/EMU/class_395.png") {template_8_8_networker(0, 400)}
//Trailer car
spriteset(spriteset_395_t, "gfx/EMU/class_395.png") {template_8_4_networker(0, 50)}
spriteset(spriteset_iet_t_hitachi, "gfx/EMU/class_395.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_iet_t_gwr, "gfx/EMU/class_395.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_iet_t_tpe, "gfx/EMU/class_395.png") {template_8_4_networker(0, 275)}
spriteset(spriteset_iet_t_vtec, "gfx/EMU/class_395.png") {template_8_4_networker(0, 350)}
spriteset(spriteset_iet_t_lner, "gfx/EMU/class_395.png") {template_8_4_networker(0, 425)}
//Purchase sprite
spriteset(spriteset_395_purchase, "gfx/EMU/class_395.png") {template_dualhead_purchase(90, 50)}
spriteset(spriteset_iet_purchase, "gfx/EMU/class_395.png") {template_dualhead_purchase(90, 125)}
//Pantograph & lights
spriteset(spriteset_hitachi_pan_up, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_hitachi_pan_down, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_395_lights_f, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_395_lights_r, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_iet_lights_f, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_iet_lights_r, "gfx/FIXTURES/hitachi_hs_fixtures.png") {template_8_8_networker(0, 125)}

switch(FEAT_TRAINS, PARENT, sw_hitachi_pan, railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL"))){
1: spriteset_hitachi_pan_up;
spriteset_hitachi_pan_down;
}

switch(FEAT_TRAINS, SELF, sw_395_coupling2, num_vehs_in_vehid_chain){
1: spriteset_395_d;
spriteset_395_i;
}

switch(FEAT_TRAINS, SELF, sw_395_coupling, (num_vehs_in_consist/count_veh_id(395))){
1: spriteset_395_d;
sw_395_coupling2;
}

switch(FEAT_TRAINS, PARENT, sw_395_start_stop2, count_veh_id(395)/num_vehs_in_consist){
1: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_395_start_stop, num_vehs_in_vehid_chain){
0..2: sw_395_start_stop2;
string(STR_MORE_CARRIAGES_NEEDED);
}

switch(FEAT_TRAINS, SELF, sw_395_lights2, position_in_consist){
0: spriteset_395_lights_f;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_395_lights, position_in_consist_from_end){
0: spriteset_395_lights_r;
sw_395_lights2;
}

switch(FEAT_TRAINS, SELF, sw_395_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_395_coupling;
	1: return sw_395_lights;
	2: sw_hitachi_pan;
}

switch(FEAT_TRAINS, SELF, sw_395_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SE_BLUE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_395_livery_decider, livery_choice){
	1: sw_395_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_395_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_MAUVE, COLOUR_MAUVE) ;}

switch(FEAT_TRAINS, SELF, sw_395_colour_auto, current_year){
sw_395_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_395_colour_man, cargo_subtype){
	0: sw_395_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_395_colour_livery_decider, livery_choice){
	1: sw_395_colour_man;
	sw_395_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_395_recolour, colour_scheme_1){
	1: sw_395_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_395_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	395: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_395), string(STR_NAME_MU90));
}

switch(FEAT_TRAINS, SELF, sw_395_speed, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))) {
    1: 225;
	160;
}

item (FEAT_TRAINS, item_395, 395) {
	property {
		name: 							string(STR_NAME_395);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2009, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					20;
		cost_factor:					60;
		running_cost_factor:			35;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							140 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1120 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					40;
		weight:							47 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.45;
		air_drag_coefficient:			0.07;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				250;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_395_coupling_restrictions;
		default: 							sw_395_default;
		purchase:							spriteset_395_purchase;
		cargo_subtype_text:					sw_395_livery_decider ;
		colour_mapping:						sw_395_recolour ;
		purchase_colour_mapping:			sw_395_recolour ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		speed:								sw_395_speed;
		running_cost_factor:				return(current_speed == 0 ? 8 : 35) ;
		purchase_running_cost_factor : 35;
		start_stop:							sw_395_start_stop;
}
		livery_override (item_MU90) {
		cargo_capacity: 66;
		default: spriteset_395_t;
		colour_mapping:	sw_395_recolour;
		cargo_subtype_text: sw_395_livery_decider ;
		weight:							45;
		power:							560;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_395, 395){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_395, 395){
	property{
		name                           : string(STR_NAME_395_ALT) ;
	}
}
}

//IET code
//Note: it is coded as a DMU because reasons
switch(FEAT_TRAINS, SELF, sw_iet_d_manual, cargo_subtype){
0: spriteset_iet_d_hitachi;
1: spriteset_iet_d_gwr;
2: spriteset_iet_d_vtec;
3: spriteset_iet_d_lner;
4: spriteset_iet_d_tpe;
}

switch(FEAT_TRAINS, SELF, sw_iet_d, livery_choice){
	1: sw_iet_d_manual;
	return spriteset_iet_d_hitachi;
}

switch(FEAT_TRAINS, SELF, sw_iet_i_manual, cargo_subtype){
0: spriteset_iet_i_hitachi;
1: spriteset_iet_i_gwr;
2: spriteset_iet_i_vtec;
3: spriteset_iet_i_lner;
4: spriteset_iet_i_tpe;
}

switch(FEAT_TRAINS, SELF, sw_iet_i, livery_choice){
	1: sw_iet_i_manual;
	return spriteset_iet_i_hitachi;
}

switch(FEAT_TRAINS, SELF, sw_iet_t_manual, cargo_subtype){
0: spriteset_iet_t_hitachi;
1: spriteset_iet_t_gwr;
2: spriteset_iet_t_vtec;
3: spriteset_iet_t_lner;
4: spriteset_iet_t_tpe;
}

switch(FEAT_TRAINS, SELF, sw_iet_t, livery_choice){
	1: sw_iet_t_manual;
	return spriteset_iet_t_hitachi;
}

switch(FEAT_TRAINS, SELF, sw_iet_coupling2, num_vehs_in_vehid_chain){
1: sw_iet_d;
sw_iet_i;
}

switch(FEAT_TRAINS, SELF, sw_iet_coupling, (num_vehs_in_consist/count_veh_id(800))){
1: sw_iet_d;
sw_iet_coupling2;
}

switch(FEAT_TRAINS, PARENT, sw_iet_start_stop2, count_veh_id(800)/num_vehs_in_consist){
1: string(STR_MORE_CARRIAGES_NEEDED);
CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_iet_start_stop, num_vehs_in_vehid_chain){
0..2: sw_iet_start_stop2;
string(STR_MORE_CARRIAGES_NEEDED);
}

switch(FEAT_TRAINS, SELF, sw_iet_lights2, position_in_consist){
0: spriteset_iet_lights_f;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_iet_lights, position_in_consist_from_end){
0: spriteset_iet_lights_r;
sw_iet_lights2;
}

switch(FEAT_TRAINS, SELF, sw_iet_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_iet_coupling;
	1: return sw_iet_lights;
	2: sw_hitachi_pan;
}

switch(FEAT_TRAINS, SELF, sw_iet_refit_text, cargo_subtype){
	0: string(STR_LIVERY_HITACHI);
	1: string(STR_LIVERY_FIRST_GWR);
	2: string(STR_LIVERY_VTEC);
	3: string(STR_LIVERY_LNER);
	4: string(STR_LIVERY_TPE_NEW);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_iet_livery_decider, livery_choice){
	1: sw_iet_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_iet_hitachi_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_iet_gwr_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_iet_tpe_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;}
random_switch(FEAT_TRAINS, SELF, sw_iet_ec_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;}

switch(FEAT_TRAINS, SELF, sw_iet_colour_auto, current_year){
sw_iet_hitachi_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_iet_colour_man, cargo_subtype){
	0: sw_iet_hitachi_colour_mapping;
	1: sw_iet_gwr_colour_mapping;
	2..3: sw_iet_ec_colour_mapping;
	sw_iet_tpe_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_iet_colour_livery_decider, livery_choice){
	1: sw_iet_colour_man;
	sw_iet_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_iet_recolour, colour_scheme_1){
	1: sw_iet_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_iet_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	800: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_UNIQUE_NO_COUPLE, string(STR_NAME_800), string(STR_NAME_MU90));
}

switch(FEAT_TRAINS, SELF, sw_iet_speed, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))) {
    1: 225;
	200;
}

switch(FEAT_TRAINS, SELF, sw_iet_create_effect, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1: vfx_ohle ;
	vfx_diesel_default ;
}

switch(FEAT_TRAINS, SELF, sw_iet_effect_model, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1: EFFECT_SPAWN_MODEL_ELECTRIC ;
	EFFECT_SPAWN_MODEL_DIESEL ;
}

switch(FEAT_TRAINS, SELF, sw_iet_t_create_effect, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1: 0 ;
	vfx_diesel_default ;
}

switch(FEAT_TRAINS, SELF, sw_iet_sfx_decider, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	1: sw_sfx_electric_loco_modern ;
	sw_sfx_dmu_two ;
}

/* switch(FEAT_TRAINS, SELF, sw_iet_te, (railtype_available("SAAA") ? tile_powers_railtype("SAAA") : (tile_powers_railtype("SAAE") || tile_powers_railtype("ELRL")))){
	ELRL   : return 0.55 ;
	SAAZ   : return 0.55 ;
	return 0.35 ;
} */


item (FEAT_TRAINS, item_800, 800) {
	property {
		name: 							string(STR_NAME_800);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2016, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					30;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					20;
		cost_factor:					60;
		running_cost_factor:			35;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							140 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					40;
		weight:							47 ton;
		tractive_effort_coefficient:	0.55;
		air_drag_coefficient:			0.07;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				250;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_iet_coupling_restrictions;
		default: 							sw_iet_default;
		purchase:							spriteset_iet_purchase;
		cargo_subtype_text:					sw_iet_livery_decider ;
		colour_mapping:						sw_iet_recolour ;
		purchase_colour_mapping:			sw_iet_recolour ;
		sound_effect:						sw_iet_sfx_decider ;
		speed:								sw_iet_speed;
		running_cost_factor:				return(current_speed == 0 ? 8 : 35) ;
		purchase_running_cost_factor : 35;
		start_stop:							sw_iet_start_stop;
		create_effect:						sw_iet_create_effect;
		effect_spawn_model_and_powered:		sw_iet_effect_model;
		// tractive_effort_coefficient:	sw_iet_te;
}
		livery_override (item_MU90) {
		cargo_capacity: 66;
		default: sw_iet_t;
		colour_mapping:	sw_iet_recolour;
		cargo_subtype_text: sw_iet_livery_decider ;
		weight:							45;
		power:							700;
		create_effect:						sw_iet_t_create_effect;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_800, 800){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_800, 800){
	property{
		name                           : string(STR_NAME_800_ALT) ;
	}
}
}
# 1 "rukts.pnml" 3
# 1 "src/CODE/sort_purchase.pnml" 1
if(purchase_list_sort == 0 ){
sort(FEAT_TRAINS,[
2000,
1100,
1401,
1103,
1101,
1102,
1403,
1404,
1803,
1104,
1802,
1804,
1800,
1801,
1900,
1901,
1700,
8,
20,
37,
3700,
3701,
3704,
3705,
3706,
3707,
40,
50,
55,
58,
73,
14,
35,
42,
52,
31,
46,
47,
56,
69,
60,
59,
66,
57,
70,
68,
67,
77,
86,
87,
90,
92,
88,
3170,
101,
115,
121,
123,
142,
201,
205,
207,
210,
150,
151,
153,
155,
158,
165,
168,
769,
195,
230,
43,
220,
800,
307,
309,
314,
317,
321,
331,
334,
365,
357,
350,
313,
319,
325,
375,
700,
370,
91,
390,
395,
415,
455,
465,
458,
411,
442,
444,
602,
638,
659,
667,
692,
695,
609,
660, //A stock
669, //C stock
678, //D stock
612, //S Stock
10034,
10035,
10000,
10001,
10019,
10006,
10014,
10017,
10018,
10016,
10002,
10028,
10022,
10012,
10007,
10023,
10010,
10013,
10032,
10005,
10038,
10039,
10037,
10025,
10024,
10011,
10029,
10033,
10031,
10030,
10020,
10015,
10021,
10036,
10008,
10009,
10027,
10026,
9005,
9003,
9004,
9001,
9002,
9010,
9020,
9025,
9030,
9035,
9040,
9050,
9090,
600,
1001,
1000,
9060,
9061,
10003,
10004
]);
}

if(purchase_list_sort > 0 ){
sort(FEAT_TRAINS,[
2000,
1100,
1101,
1103,
1102,
1104,
1700,
1401,
1403,
1404,
1803,
1802,
1804,
1800,
1801,
1900,
1901,
8,
14,
20,
31,
33,
35,
37,
3700,
3701,
3704,
3705,
3706,
3707,
40,
42,
43,
46,
47,
50,
52,
55,
56,
57,
58,
59,
60,
66,
67,
68,
69,
70,
73,
86,
87,
88,
90,
91,
92,
3170,
101,
115,
121,
123,
142,
150,
151,
153,
155,
158,
165,
168,
195,
201,
205,
207,
210,
220,
230,
307,
309,
313,
314,
317,
319,
321,
325,
331,
334,
350,
357,
365,
370,
375,
390,
395,
415,
411,
442,
444,
455,
458,
465,
700,
769,
800,
602,
638,
659,
667,
692,
695,
609,
660, //A stock
669, //C stock
678, //D stock
612, //S Stock
10034,
10035,
10000,
10001,
10019,
10006,
10014,
10017,
10018,
10016,
10002,
10028,
10022,
10012,
10007,
10023,
10010,
10013,
10032,
10005,
10038,
10039,
10037,
10025,
10024,
10011,
10029,
10033,
10031,
10030,
10020,
10015,
10021,
10036,
10008,
10009,
10027,
10026,
9005,
9003,
9004,
9001,
9002,
9070,
9071,
9072,
9073,
9074,
9010,
9011,
9012,
9013,
9014,
9020,
9021,
9025,
9030,
9031,
9032,
9035,
9040,
9050,
9090,
600,
1001,
1000,
9060,
9061,
10003,
10004
]);
}
# 1 "rukts.pnml" 3
